{"version":3,"file":"async-onco.js","mappings":"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","sources":["webpack:///./src/lib/fragments/OncoPrint.react.js","webpack:///./node_modules/react-oncoprint/lib/components/OncoPrint.js","webpack:///./node_modules/react-oncoprint/lib/components/PrecomputedComparator.js","webpack:///./node_modules/react-oncoprint/lib/components/utils.js","webpack:///./node_modules/react-oncoprint/lib/index.js"],"sourcesContent":["import React, {Component} from 'react';\nimport {omit} from 'ramda';\n\nimport {OncoPrint as PreOncoPrint} from 'react-oncoprint';\nimport {propTypes, defaultProps} from '../components/OncoPrint.react';\n\nexport default class OncoPrint extends Component {\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    // Bind to Dash event handler that puts event back into props\n    handleChange(event) {\n        const eventObj = JSON.stringify(event);\n        this.props.setProps({eventDatum: eventObj});\n    }\n\n    render() {\n        const {id, eventDatum, loading_state} = this.props;\n\n        return (\n            <div\n                id={id}\n                eventDatum={eventDatum}\n                data-dash-is-loading={\n                    (loading_state && loading_state.is_loading) || undefined\n                }\n            >\n                <PreOncoPrint\n                    onChange={this.handleChange}\n                    {...omit(['setProps', 'loading_state'], this.props)}\n                />\n            </div>\n        );\n    }\n}\n\nOncoPrint.defaultProps = defaultProps;\nOncoPrint.propTypes = propTypes;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _reactPlotly = _interopRequireDefault(require(\"react-plotly.js\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n/**\n * The OncoPrint component is used to view multiple genetic alteration events\n * through an interactive and zoomable heatmap. It is a React/Dash port of the\n * popular oncoPrint() function from the BioConductor R package.\n * Under the hood, the rendering is done using Plotly.js built upon D3.\n * Plotly's interactivity allows the user to bind clicks and hovers to genetic\n * events, allowing the user to create complex bioinformatic apps or workflows\n * that rely on crossfiltering.\n * Read more about the component here:\n * https://github.com/plotly/react-oncoprint\n */\nvar OncoPrint =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(OncoPrint, _PureComponent);\n\n  // Constructor\n  function OncoPrint(props) {\n    var _this;\n\n    _classCallCheck(this, OncoPrint);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OncoPrint).call(this, props));\n    _this.state = {\n      xStart: null,\n      xEnd: null\n    };\n    _this.resetWindowing = _this.resetWindowing.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _lodash.default.debounce(_this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this))), 250);\n    return _this;\n  } // Reset windowing to user preset on init or data change\n\n\n  _createClass(OncoPrint, [{\n    key: \"resetWindowing\",\n    value: function resetWindowing(props) {\n      var range = props.range;\n      var xStart, xEnd;\n\n      if (range.length === 2) {\n        xStart = range[0];\n        xEnd = range[1];\n      } else {\n        xStart = null;\n        xEnd = null;\n      }\n\n      return {\n        xStart: xStart,\n        xEnd: xEnd\n      };\n    } // Handle plot events\n\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      if (!this.props.onChange) {\n        return;\n      } // CLick (mousedown) or hover (mousemove)\n\n\n      if (event.points) {\n        var eventType;\n\n        if (event.event.type === \"mousedown\") {\n          eventType = 'Click';\n        } else if (event.event.type === \"mousemove\") {\n          eventType = 'Hover';\n        } else {\n          eventType = 'Other';\n        }\n\n        this.props.onChange({\n          eventType: eventType,\n          name: event.points[0].data.name,\n          text: event.points[0].text,\n          curveNumber: event.points[0].curveNumber,\n          x: event.points[0].x,\n          y: event.points[0].y\n        });\n      } // Zoom\n      else if (event['xaxis.range[0]'] || event['xaxis.range']) {\n          this.setState({\n            xStart: event['xaxis.range[0]'] || event['xaxis.range'][0],\n            xEnd: event['xaxis.range[1]'] || event['xaxis.range'][1]\n          });\n          this.props.onChange({\n            eventType: 'Zoom',\n            xStart: event['xaxis.range[0]'] || event['xaxis.range'][0],\n            xEnd: event['xaxis.range[1]'] || event['xaxis.range'][1]\n          });\n        } // Autozoom\n        else if (event['xaxis.autorange'] === true) {\n            this.setState({\n              xStart: null,\n              xEnd: null\n            });\n            this.props.onChange({\n              eventType: 'Autoscale'\n            });\n          } // Guard\n          else {\n              this.props.onChange(event);\n            }\n    }\n  }, {\n    key: \"getData\",\n    // Fetch data\n    value: function getData() {\n      var _this$props = this.props,\n          inputData = _this$props.data,\n          padding = _this$props.padding,\n          colorscale = _this$props.colorscale,\n          backgroundcolor = _this$props.backgroundcolor; // OncoPrint equivalent of x, y\n\n      var events = (0, _utils.aggregate)(inputData);\n      var genes = (0, _utils.getSortedGenes)(inputData);\n      var samples = (0, _utils.getSortedSamples)(inputData);\n      var ratios = (0, _utils.getEventRatiosPerGene)(inputData, samples.length);\n\n      var formatGenes = function formatGenes(list) {\n        return list.map(function (gene) {\n          return \"\".concat(gene, \" (\").concat(ratios[gene], \"%)\");\n        });\n      };\n\n      var base = 0;\n      var bBackground = [];\n      var tBackground = [];\n      var xBackground = [];\n      var yBackground = []; // Background is used to draw the matrix (genes * samples)\n\n      samples.forEach(function (s) {\n        bBackground.push.apply(bBackground, _toConsumableArray(Array(genes.length).fill(base)));\n        tBackground.push.apply(tBackground, _toConsumableArray(Array(genes.length).fill(s)));\n        xBackground.push.apply(xBackground, _toConsumableArray(Array(genes.length).fill(1)));\n        yBackground.push.apply(yBackground, _toConsumableArray(formatGenes(genes)));\n        base += 1;\n      });\n      var background = {\n        base: bBackground.map(function (i) {\n          return i + padding;\n        }),\n        hoverinfo: 'text',\n        marker: {\n          color: backgroundcolor\n        },\n        name: 'No alteration',\n        text: tBackground,\n        orientation: 'h',\n        type: 'bar',\n        x: xBackground.map(function (i) {\n          return i - padding * 2;\n        }),\n        y: yBackground\n      };\n      var data = [background];\n      Object.keys(events).forEach(function (key) {\n        var aggr = events[key]; // Resize width depending on the mutation type\n\n        var width = 0.4;\n\n        if (aggr.type === 'CNA') {\n          width = 0.8;\n        } else if (aggr.type === 'EXP') {\n          width = 0.6;\n        } // Mutations should have the original text on it, not the type of mutation\n\n\n        var text_arr = aggr.events.map(function (event) {\n          return \"\".concat(event.sample, \"<br>\").concat((0, _utils.getDisplayName)(event));\n        }); // where to draw a bar for this entry\n\n        var indexes = aggr.events.map(function (e) {\n          return e.sample;\n        }).map(function (s) {\n          return samples.findIndex(function (sample) {\n            return sample === s;\n          });\n        });\n        data.push({\n          base: indexes.map(function (i) {\n            return i + padding;\n          }),\n          hoverinfo: 'text',\n          marker: {\n            color: (0, _utils.getColor)(aggr.events[0], colorscale)\n          },\n          name: (0, _utils.getDisplayName)(aggr.events[0]),\n          text: text_arr,\n          orientation: 'h',\n          type: 'bar',\n          width: width,\n          x: Array(aggr.events.length).fill(1).map(function (i) {\n            return i - padding * 2;\n          }),\n          y: formatGenes((0, _utils.getGeneNames)(aggr.events))\n        });\n      });\n      return data;\n    } // Fetch layout\n\n  }, {\n    key: \"getLayout\",\n    value: function getLayout() {\n      var _this$props2 = this.props,\n          showlegend = _this$props2.showlegend,\n          showoverview = _this$props2.showoverview,\n          width = _this$props2.width,\n          height = _this$props2.height;\n      var _this$state = this.state,\n          xStart = _this$state.xStart,\n          xEnd = _this$state.xEnd; // Get initial range\n\n      var initialRange = [xStart, xEnd];\n      var layout = {\n        barmode: 'stack',\n        hovermode: 'closest',\n        showlegend: showlegend,\n        xaxis: {\n          showgrid: false,\n          showticklabels: false,\n          zeroline: false,\n          range: initialRange,\n          automargin: true\n        },\n        yaxis: {\n          showgrid: false,\n          zeroline: false,\n          fixedrange: true,\n          automargin: true\n        },\n        margin: {\n          t: 20,\n          r: 20,\n          b: 20\n        }\n      };\n\n      if (showoverview) {\n        layout.xaxis.rangeslider = {\n          autorange: true\n        };\n      }\n\n      return {\n        layout: layout,\n        width: width,\n        height: height\n      };\n    } // Set xStart and xEnd on load\n\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$resetWindowing = this.resetWindowing(this.props),\n          xStart = _this$resetWindowing.xStart,\n          xEnd = _this$resetWindowing.xEnd;\n\n      this.setState({\n        xStart: xStart,\n        xEnd: xEnd\n      });\n    } // Reset xStart and xEnd on data change\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.data !== prevProps.data) {\n        var _this$resetWindowing2 = this.resetWindowing(this.props),\n            xStart = _this$resetWindowing2.xStart,\n            xEnd = _this$resetWindowing2.xEnd;\n\n        this.setState({\n          xStart: xStart,\n          xEnd: xEnd\n        });\n      }\n    } // Main\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var data = this.getData();\n\n      var _this$getLayout = this.getLayout(),\n          layout = _this$getLayout.layout,\n          width = _this$getLayout.width,\n          height = _this$getLayout.height;\n\n      var other = {\n        style: {\n          width: width,\n          height: height\n        },\n        useResizeHandler: true\n      };\n      return _react.default.createElement(\"div\", null, _react.default.createElement(_reactPlotly.default, _extends({\n        data: data,\n        layout: layout,\n        onClick: this.handleChange,\n        onHover: this.handleChange,\n        onRelayout: this.handleChange\n      }, other)));\n    }\n  }]);\n\n  return OncoPrint;\n}(_react.PureComponent);\n\nexports.default = OncoPrint;\nOncoPrint.propTypes = {\n  /**\n   * Input data, in CBioPortal format where each list entry is a dict\n   * consisting of 'sample', 'gene', 'alteration', and 'type'\n   */\n  data: _propTypes.default.array,\n  // TODO: Add remove empty columns prop\n\n  /**\n   * Adjusts the padding (as a proportion of whitespace) between two tracks.\n   * Value is a ratio between 0 and 1.\n   * Defaults to 0.05 (e.g. 5%). If set to 0, plot will look like a heatmap.\n   */\n  padding: _propTypes.default.number,\n\n  /**\n   * If not null, will override the default OncoPrint colorscale.\n   * Default OncoPrint colorscale same as CBioPortal implementation.\n   * Make your own colrscale as a {'mutation': COLOR} dict.\n   * Supported mutation keys are ['MISSENSE, 'INFRAME', 'FUSION',\n   * 'AMP', 'GAIN', 'HETLOSS', 'HMODEL', 'UP', 'DOWN']\n   * Note that this is NOT a standard plotly colorscale.\n   */\n  colorscale: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.object]),\n\n  /**\n   * Default color for the tracks, in common name, hex, rgb or rgba format.\n   * If left blank, will default to a light grey rgb(190, 190, 190).\n   */\n  backgroundcolor: _propTypes.default.string,\n\n  /**\n   *.Toogles whether or not to show a legend on the right side of the plot,\n   * with mutation information.\n   */\n  range: _propTypes.default.array,\n\n  /**\n   *.Toogles whether or not to show a legend on the right side of the plot,\n   * with mutation information.\n   */\n  showlegend: _propTypes.default.bool,\n\n  /**\n   *.Toogles whether or not to show a heatmap overview of the tracks.\n   */\n  showoverview: _propTypes.default.bool,\n\n  /**\n   * Width of the OncoPrint.\n   * Will disable auto-resizing of plots if set.\n   */\n  width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n\n  /**\n   * Height of the OncoPrint.\n   * Will disable auto-resizing of plots if set.\n   */\n  height: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])\n};\nOncoPrint.defaultProps = {\n  // Data\n  padding: 0.05,\n  colorscale: null,\n  backgroundcolor: 'rgb(190, 190, 190)',\n  // Layout\n  range: [null, null],\n  showlegend: true,\n  showoverview: true,\n  // Other\n  width: null,\n  height: 500\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.hasElementsInInterval = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar hasElementsInInterval = function hasElementsInInterval(arr, func, lowerBound, upperBound) {\n  // in: arr, an array sorted in increasing order of func\n  //     func, a function that takes an element of sorted_list and returns a number\n  //     lowerBound and upperBound: define a half-open interval [lowerBound, upperBound)\n  // out: boolean, true iff there are any elements whose image under func is in [lowerBound, upperBound)\n  var lowerCounter = 0;\n  var upperCounter = arr.length;\n  var middle, middle_val;\n\n  while (true) {\n    if (lowerCounter >= upperCounter) {\n      return false;\n    }\n\n    middle = Math.floor((lowerCounter + upperCounter) / 2);\n    middle_val = func(arr[middle]);\n\n    if (middle_val >= upperBound) {\n      upperCounter = middle;\n    } else if (middle_val < lowerBound) {\n      lowerCounter = middle + 1;\n    } else {\n      // otherwise, the middle value is inside the interval,\n      // so there's at least one value inside the interval\n      return true;\n    }\n  }\n}; // PrecomputedComparator is similar to the OncoPrintJs implementation with\n// three notable changes: rewritten with Flow/ES next and as a class, the input\n// data structure is different, and no direction.\n\n\nexports.hasElementsInInterval = hasElementsInInterval;\n\nvar PrecomputedComparator =\n/*#__PURE__*/\nfunction () {\n  function PrecomputedComparator(data, comparator) {\n    _classCallCheck(this, PrecomputedComparator);\n\n    this.comparator = comparator;\n    this.data = data;\n    this.sort();\n  }\n\n  _createClass(PrecomputedComparator, [{\n    key: \"sort\",\n    value: function sort() {\n      this.sortedData = this.data.sort(this.comparator);\n      this.changePoints = [];\n\n      for (var i = 0; i < this.sortedData.length; i += 1) {\n        if (i === this.sortedData.length - 1) {\n          break;\n        }\n\n        if (this.comparator(this.sortedData[i], this.sortedData[i + 1]) !== 0) {\n          this.changePoints.push(i);\n        }\n      }\n\n      this.samplesToIndex = {};\n\n      for (var _i = 0; _i < this.sortedData.length; _i += 1) {\n        this.samplesToIndex[this.sortedData[_i]] = _i;\n      }\n    }\n  }, {\n    key: \"compare\",\n    value: function compare(s1, s2) {\n      var i1 = this.samplesToIndex[s1];\n      var i2 = this.samplesToIndex[s2];\n\n      if (typeof i1 === 'undefined' && typeof i2 === 'undefined') {\n        return 0;\n      } else if (typeof i1 === 'undefined') {\n        return 1;\n      } else if (typeof i2 === 'undefined') {\n        return -1;\n      }\n\n      var shouldNegateResult = false;\n\n      if (i1 === i2) {\n        return 0;\n      } else if (i1 > i2) {\n        var tmp = i1;\n        i1 = i2;\n        i2 = tmp;\n        shouldNegateResult = true;\n      }\n\n      var res = 0;\n\n      if (hasElementsInInterval(this.changePoints, function (x) {\n        return x;\n      }, i1, i2)) {\n        res = -1;\n      }\n\n      if (shouldNegateResult) {\n        res *= -1;\n      }\n\n      return res;\n    }\n  }]);\n\n  return PrecomputedComparator;\n}();\n\nexports.default = PrecomputedComparator;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getColor = exports.getDisplayName = exports.aggregate = exports.getSortedSamples = exports.createSortEventsForGeneComparator = exports.createSamplesMap = exports.isMutation = exports.getEventRatiosPerGene = exports.getSortedGenes = exports.getGeneNames = exports.SupportedEvents = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _PrecomputedComparator = _interopRequireDefault(require(\"./PrecomputedComparator\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nvar MutationEventTypes = ['INFRAME', 'TRUNC', 'MISSENSE'];\nvar SupportedEvents = {\n  // Mutations\n  MISSENSE: {\n    colorHTML: '#008000',\n    displayName: 'Missense mutation'\n  },\n  INFRAME: {\n    colorHTML: '#993404',\n    displayName: 'Inframe mutation'\n  },\n  TRUNC: {\n    colorHTML: '#000000',\n    displayName: 'Truncation mutation'\n  },\n  // Fusion\n  FUSION: {\n    colorHTML: '#8b00c9',\n    displayName: 'Fusion'\n  },\n  // Copy number alterations\n  AMP: {\n    colorHTML: '#ff0000',\n    displayName: 'Amplification'\n  },\n  GAIN: {\n    colorHTML: '#ffb6c1',\n    displayName: 'Gain'\n  },\n  HETLOSS: {\n    colorHTML: '#8fd8d8',\n    displayName: 'Shallow deletion'\n  },\n  HOMDEL: {\n    colorHTML: '#0000ff',\n    displayName: 'Deep deletion'\n  },\n  // mRNA expressions\n  UP: {\n    colorHTML: '#ff9999',\n    displayName: 'mRNA Upregulation'\n  },\n  DOWN: {\n    colorHTML: '#6699cc',\n    displayName: 'mRNA Downregulation'\n  }\n}; // Describes the order of importance for CNA events.\n\nexports.SupportedEvents = SupportedEvents;\nvar AlterationsOrder = {\n  AMP: 0,\n  GAIN: 2,\n  HETLOSS: 3,\n  HOMDEL: 1,\n  undefined: 4\n}; // Describes the order of importance for mutation events.\n\nvar MutationsOrder = {\n  INFRAME: 1,\n  MISSENSE: 3,\n  TRUNC: 0,\n  undefined: 4\n}; // Describes the order of importance for mRNA expression events.\n\nvar ExpressionsOrder = {\n  UP: 0,\n  DOWN: 1,\n  undefined: 2\n}; // Retrieves the gene names in a set of events.\n\nvar getGeneNames = function getGeneNames(events) {\n  return events.map(function (e) {\n    return e.gene;\n  }).filter(function (gene) {\n    return gene !== null;\n  });\n}; // Returns the set of genes (unique) reversed to display on the Y axis.\n\n\nexports.getGeneNames = getGeneNames;\n\nvar getSortedGenes = function getSortedGenes(events) {\n  return _toConsumableArray(new Set(getGeneNames(events))).reverse();\n}; // Returns a hash map with the percentage of events (value) per gene (key).\n\n\nexports.getSortedGenes = getSortedGenes;\n\nvar getEventRatiosPerGene = function getEventRatiosPerGene(events, nbSamples) {\n  var map = events.reduce(function (acc, event) {\n    if (event.type) {\n      if (acc[event.gene]) {\n        acc[event.gene] += 1;\n      } else {\n        acc[event.gene] = 1;\n      }\n    }\n\n    return acc;\n  }, {});\n  Object.keys(map).forEach(function (gene) {\n    map[gene] = Math.floor(map[gene] / nbSamples * 100);\n  });\n  return map;\n}; // Returns true if an event is a mutation, false otherwise.\n\n\nexports.getEventRatiosPerGene = getEventRatiosPerGene;\n\nvar isMutation = function isMutation(event) {\n  return MutationEventTypes.includes(event.type);\n}; // Returns a comparator result value given an integer that may not be -1, 0 or\n// 1 (which are the only allowed sorting return values).\n\n\nexports.isMutation = isMutation;\n\nvar sign = function sign(x) {\n  if (x > 0) {\n    return 1;\n  } else if (x < 0) {\n    return -1;\n  }\n\n  return 0;\n}; // Returns a comparator for the samples (matrix column), combining all the\n// precomputed comparators created for each gene (i.e. matrix row).\n\n\nvar samplesComparator = function samplesComparator(genes, samplesToIndex, perGeneComparators) {\n  return function (s1, s2) {\n    var result = 0;\n    var absoluteResult = 0;\n\n    for (var i = 0; i < genes.length; i += 1) {\n      var nextResult = perGeneComparators[i].compare(s1, s2);\n      var nextAbsoluteResult = Math.abs(nextResult);\n\n      if (nextAbsoluteResult > absoluteResult) {\n        result = nextResult;\n        absoluteResult = nextAbsoluteResult;\n      }\n\n      if (absoluteResult === 1) {\n        break;\n      }\n    }\n\n    if (result === 0) {\n      result = samplesToIndex[s1] < samplesToIndex[s2] ? -1 : 1;\n    }\n\n    return result > 0 ? 1 : -1;\n  };\n}; // Returns a comparator to sort the samples given a gene .\n\n\nvar sortEventsForGene = function sortEventsForGene(s1, s2, gene, samplesMap) {\n  var d1 = samplesMap[s1][gene] || {};\n  var d2 = samplesMap[s2][gene] || {};\n\n  if (d1.FUSION && !d2.FUSION) {\n    return -1;\n  } else if (!d1.FUSION && d2.FUSION) {\n    return 1;\n  }\n\n  var cna = sign(AlterationsOrder[d1.CNA] - AlterationsOrder[d2.CNA]);\n\n  if (cna !== 0) {\n    return cna;\n  }\n\n  var mut = sign(MutationsOrder[d1.MUT] - MutationsOrder[d2.MUT]);\n\n  if (mut !== 0) {\n    return mut;\n  }\n\n  var exp = sign(ExpressionsOrder[d1.EXP] - ExpressionsOrder[d2.EXP]);\n\n  if (exp !== 0) {\n    return exp;\n  }\n\n  return 0;\n}; // Returns a map to gather information on each sample, per gene, per event.\n\n\nvar createSamplesMap = function createSamplesMap(events) {\n  var samplesMap = {};\n  events.forEach(function (e) {\n    var s = samplesMap[e.sample] || {};\n    var v = s[e.gene] || {};\n\n    if (isMutation(e)) {\n      v.MUT = e.type;\n    } else {\n      v[e.type] = e.alteration;\n    }\n\n    samplesMap[e.sample] = Object.assign({}, samplesMap[e.sample], _defineProperty({}, e.gene, v));\n  });\n  return samplesMap;\n}; // Helper function to create a comparator for each gene.\n\n\nexports.createSamplesMap = createSamplesMap;\n\nvar createSortEventsForGeneComparator = function createSortEventsForGeneComparator(gene, map) {\n  return function (s1, s2) {\n    return sortEventsForGene(s1, s2, gene, map);\n  };\n}; // Returns the list of samples sorted with mutual exclusion. The sorting\n// algorithm is similar to the one used on cBioPortal and takes both the rows\n// (genes) and columns (samples) into account. We returns the sorted set of\n// samples to display on X axix.\n\n\nexports.createSortEventsForGeneComparator = createSortEventsForGeneComparator;\n\nvar getSortedSamples = function getSortedSamples(events) {\n  // Get a map with samples sorted by gene and events.\n  var samplesMap = createSamplesMap(events); // Get a unique list of genes, sorted by the natural order in the events.\n\n  var genes = _toConsumableArray(new Set(getGeneNames(events))); // Sort the samples alphabetically.\n\n\n  var samples = _toConsumableArray(new Set(events.map(function (e) {\n    return e.sample;\n  }))).sort(); // Build one comparator per gene.\n\n\n  var perGeneComparators = [];\n  genes.forEach(function (gene) {\n    perGeneComparators.push( // This actually sorts the samples, but for each gene only.\n    new _PrecomputedComparator.default(_toConsumableArray(samples), createSortEventsForGeneComparator(gene, samplesMap)));\n  }); // Create a map with the current order of the samples.\n\n  var samplesToIndex = {};\n  samples.forEach(function (s, i) {\n    samplesToIndex[s] = i;\n  }); // Finally, sort the samples taking into account both the columns and rows.\n\n  var sortedSamples = _toConsumableArray(samples);\n\n  sortedSamples.sort(samplesComparator(genes, samplesToIndex, perGeneComparators));\n  return sortedSamples;\n}; // Returns the events aggregated by type (if mutation) or alteration.\n\n\nexports.getSortedSamples = getSortedSamples;\n\nvar aggregate = function aggregate(events) {\n  var out = {};\n  events.forEach(function (e) {\n    if (!e.type || e.type === 'NONE') {\n      return;\n    }\n\n    var k = isMutation(e) ? e.type : e.alteration;\n    var v = out[k] || {\n      type: e.type,\n      alteration: e.alteration,\n      events: []\n    };\n    v.events.push(e);\n    out[k] = v;\n  });\n  return out;\n}; // Returns the display name of an event.\n\n\nexports.aggregate = aggregate;\n\nvar getDisplayName = function getDisplayName(event) {\n  var eventName = isMutation(event) ? event.type : event.alteration;\n  return SupportedEvents[eventName].displayName;\n}; // Returns the color of an event.\n\n\nexports.getDisplayName = getDisplayName;\n\nvar getColor = function getColor(event, colorscale) {\n  var eventName = isMutation(event) ? event.type : event.alteration;\n  var color;\n\n  if (colorscale && _lodash.default.isObject(colorscale)) {\n    color = colorscale[eventName]; // Revert back to default scale if not found\n\n    if (!color) {\n      color = SupportedEvents[eventName].colorHTML;\n    }\n  } else {\n    color = SupportedEvents[eventName].colorHTML;\n  }\n\n  return color;\n};\n\nexports.getColor = getColor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"OncoPrint\", {\n  enumerable: true,\n  get: function get() {\n    return _OncoPrint.default;\n  }\n});\n\nvar _OncoPrint = _interopRequireDefault(require(\"./components/OncoPrint\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }"],"names":["OncoPrint","props","handleChange","bind","event","eventObj","JSON","stringify","this","setProps","eventDatum","id","loading_state","is_loading","undefined","onChange","omit","Component","defaultProps","propTypes","Object","defineProperty","exports","value","_react","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","default","_interopRequireWildcard","_propTypes","_interopRequireDefault","_lodash","_reactPlotly","_utils","_typeof","Symbol","iterator","constructor","_extends","assign","target","i","arguments","length","source","apply","_toConsumableArray","arr","Array","isArray","arr2","_arrayWithoutHoles","iter","toString","from","_iterableToArray","TypeError","_nonIterableSpread","_defineProperties","descriptor","enumerable","configurable","writable","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","_assertThisInitialized","self","ReferenceError","_PureComponent","_this","instance","Constructor","_classCallCheck","_possibleConstructorReturn","state","xStart","xEnd","resetWindowing","debounce","protoProps","subClass","superClass","create","_inherits","range","eventType","points","type","name","data","text","curveNumber","x","y","setState","_this$props","inputData","padding","colorscale","backgroundcolor","events","aggregate","genes","getSortedGenes","samples","getSortedSamples","ratios","getEventRatiosPerGene","formatGenes","list","map","gene","concat","base","bBackground","tBackground","xBackground","yBackground","forEach","s","push","fill","hoverinfo","marker","color","orientation","keys","aggr","width","text_arr","sample","getDisplayName","indexes","e","findIndex","getColor","getGeneNames","_this$props2","showlegend","showoverview","height","_this$state","layout","barmode","hovermode","xaxis","showgrid","showticklabels","zeroline","automargin","yaxis","fixedrange","margin","t","r","b","rangeslider","autorange","_this$resetWindowing","prevProps","prevState","_this$resetWindowing2","getData","_this$getLayout","getLayout","other","style","useResizeHandler","createElement","onClick","onHover","onRelayout","PureComponent","array","number","oneOfType","bool","object","string","hasElementsInInterval","func","lowerBound","upperBound","middle","middle_val","lowerCounter","upperCounter","Math","floor","PrecomputedComparator","comparator","sort","sortedData","changePoints","samplesToIndex","_i","s1","s2","i1","i2","shouldNegateResult","tmp","res","createSortEventsForGeneComparator","createSamplesMap","isMutation","SupportedEvents","_PrecomputedComparator","MutationEventTypes","MISSENSE","colorHTML","displayName","INFRAME","TRUNC","FUSION","AMP","GAIN","HETLOSS","HOMDEL","UP","DOWN","AlterationsOrder","MutationsOrder","ExpressionsOrder","filter","Set","reverse","nbSamples","reduce","acc","includes","sign","samplesMap","v","MUT","alteration","d1","d2","cna","CNA","mut","exp","EXP","sortEventsForGene","perGeneComparators","sortedSamples","result","absoluteResult","nextResult","compare","nextAbsoluteResult","abs","samplesComparator","out","k","eventName","isObject","_OncoPrint"],"sourceRoot":""}