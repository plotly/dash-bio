window.dash_bio=function(e){function t(t){for(var n,i,a=t[0],o=t[1],s=0,u=[];s<a.length;s++)i=a[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(f&&f(t);u.length;)u.shift()()}var n={},r={10:0};function i(e){return a.p+""+({0:"async-alignment",1:"async-circos",2:"async-ideogram",3:"async-moleculeviewer2",4:"async-moleculeviewer3",5:"async-needle",6:"async-nglmoleculeviewer",7:"async-onco",8:"async-sequence",9:"async-speck"}[e]||e)+".js"}function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=o);var s,u=document.createElement("script");u.charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.src=i(e);var c=new Error;s=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,n[1](c)}r[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:u})}),12e4);u.onerror=u.onload=s,document.head.appendChild(u)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var o,s=function(){var e=document.currentScript;if(!e){for(var t=document.getElementsByTagName("script"),n=[],r=0;r<t.length;r++)n.push(t[r]);e=(n=n.filter((function(e){return!e.async&&!e.text&&!e.textContent}))).slice(-1)[0]}return e};if(Object.defineProperty(a,"p",{get:(o=s().src.split("/").slice(0,-1).join("/")+"/",function(){return o})}),void 0!==i){var u=i;i=function(e){var t=function(e){return/\/_dash-component-suites\//.test(e.src)}(s()),n=u(e);if(!t)return n;var r=n.split("/"),i=r.slice(-1)[0].split(".");return i.splice(1,0,"v0_5_0m1609370875"),r.splice(-1,1,i.join(".")),r.join("/")}}var c=window.webpackJsonpdash_bio=window.webpackJsonpdash_bio||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var f=l;return a(a.s=39)}([function(e,t,n){e.exports=n(27)()},function(e,t){e.exports=window.React},function(e,t,n){"use strict";t.a={alignmentChart:function(){return n.e(0).then(n.bind(null,42))},circos:function(){return n.e(1).then(n.bind(null,43))},ideogram:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,44))},molecule2dViewer:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,45))},molecule3dViewer:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,46))},nglmoleculeViewer:function(){return n.e(6).then(n.bind(null,47))},needlePlot:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,50))},oncoPrint:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,48))},sequenceViewer:function(){return n.e(8).then(n.bind(null,49))},speck:function(){return n.e(9).then(n.bind(null,51))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4);function i(e){return function t(n){return 0===arguments.length||Object(r.a)(n)?t:e.apply(this,arguments)}}},function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(t,e)}n.d(t,"a",(function(){return r}))},function(e,t){e.exports={},e.exports[0]=e.exports.Xx={symbol:"Xx",name:"unknown",mass:1,radius:1,color:[1,.078,.576],number:0},e.exports[1]=e.exports.H={symbol:"H",name:"hydrogen",mass:1.00794,radius:.31,color:[1,1,1],number:1},e.exports[2]=e.exports.He={symbol:"He",name:"helium",mass:4.002602,radius:.28,color:[.851,1,1],number:2},e.exports[3]=e.exports.Li={symbol:"Li",name:"lithium",mass:6.941,radius:1.28,color:[.8,.502,1],number:3},e.exports[4]=e.exports.Be={symbol:"Be",name:"beryllium",mass:9.012182,radius:.96,color:[.761,1,0],number:4},e.exports[5]=e.exports.B={symbol:"B",name:"boron",mass:10.811,radius:.84,color:[1,.71,.71],number:5},e.exports[6]=e.exports.C={symbol:"C",name:"carbon",mass:12.0107,radius:.73,color:[.565,.565,.565],number:6},e.exports[7]=e.exports.N={symbol:"N",name:"nitrogen",mass:14.0067,radius:.71,color:[.188,.314,.973],number:7},e.exports[8]=e.exports.O={symbol:"O",name:"oxygen",mass:15.9994,radius:.66,color:[1,.051,.051],number:8},e.exports[9]=e.exports.F={symbol:"F",name:"fluorine",mass:18.9984032,radius:.57,color:[.565,.878,.314],number:9},e.exports[10]=e.exports.Ne={symbol:"Ne",name:"neon",mass:20.1797,radius:.58,color:[.702,.89,.961],number:10},e.exports[11]=e.exports.Na={symbol:"Na",name:"sodium",mass:22.98976928,radius:1.66,color:[.671,.361,.949],number:11},e.exports[12]=e.exports.Mg={symbol:"Mg",name:"magnesium",mass:24.305,radius:1.41,color:[.541,1,0],number:12},e.exports[13]=e.exports.Al={symbol:"Al",name:"aluminum",mass:26.9815386,radius:1.21,color:[.749,.651,.651],number:13},e.exports[14]=e.exports.Si={symbol:"Si",name:"silicon",mass:28.0855,radius:1.11,color:[.941,.784,.627],number:14},e.exports[15]=e.exports.P={symbol:"P",name:"phosphorus",mass:30.973762,radius:1.07,color:[1,.502,0],number:15},e.exports[16]=e.exports.S={symbol:"S",name:"sulfur",mass:32.065,radius:1.05,color:[1,1,.188],number:16},e.exports[17]=e.exports.Cl={symbol:"Cl",name:"chlorine",mass:35.453,radius:1.02,color:[.122,.941,.122],number:17},e.exports[18]=e.exports.Ar={symbol:"Ar",name:"argon",mass:39.948,radius:1.06,color:[.502,.82,.89],number:18},e.exports[19]=e.exports.K={symbol:"K",name:"potassium",mass:39.0983,radius:2.03,color:[.561,.251,.831],number:19},e.exports[20]=e.exports.Ca={symbol:"Ca",name:"calcium",mass:40.078,radius:1.76,color:[.239,1,0],number:20},e.exports[21]=e.exports.Sc={symbol:"Sc",name:"scandium",mass:44.955912,radius:1.7,color:[.902,.902,.902],number:21},e.exports[22]=e.exports.Ti={symbol:"Ti",name:"titanium",mass:47.867,radius:1.6,color:[.749,.761,.78],number:22},e.exports[23]=e.exports.V={symbol:"V",name:"vanadium",mass:50.9415,radius:1.53,color:[.651,.651,.671],number:23},e.exports[24]=e.exports.Cr={symbol:"Cr",name:"chromium",mass:51.9961,radius:1.39,color:[.541,.6,.78],number:24},e.exports[25]=e.exports.Mn={symbol:"Mn",name:"manganese",mass:54.938045,radius:1.39,color:[.611,.478,.78],number:25},e.exports[26]=e.exports.Fe={symbol:"Fe",name:"iron",mass:55.845,radius:1.32,color:[.878,.4,.2],number:26},e.exports[27]=e.exports.Co={symbol:"Co",name:"cobalt",mass:58.6934,radius:1.26,color:[.941,.565,.627],number:27},e.exports[28]=e.exports.Ni={symbol:"Ni",name:"nickel",mass:58.933195,radius:1.24,color:[.314,.816,.314],number:28},e.exports[29]=e.exports.Cu={symbol:"Cu",name:"copper",mass:63.546,radius:1.32,color:[.784,.502,.2],number:29},e.exports[30]=e.exports.Zn={symbol:"Zn",name:"zinc",mass:65.38,radius:1.22,color:[.49,.502,.69],number:30},e.exports[31]=e.exports.Ga={symbol:"Ga",name:"gallium",mass:69.723,radius:1.22,color:[.761,.561,.561],number:31},e.exports[32]=e.exports.Ge={symbol:"Ge",name:"germanium",mass:72.64,radius:1.2,color:[.4,.561,.561],number:32},e.exports[33]=e.exports.As={symbol:"As",name:"arsenic",mass:74.9216,radius:1.19,color:[.741,.502,.89],number:33},e.exports[34]=e.exports.Se={symbol:"Se",name:"selenium",mass:78.96,radius:1.2,color:[1,.631,0],number:34},e.exports[35]=e.exports.Br={symbol:"Br",name:"bromine",mass:79.904,radius:1.2,color:[.651,.161,.161],number:35},e.exports[36]=e.exports.Kr={symbol:"Kr",name:"krypton",mass:83.798,radius:1.16,color:[.361,.722,.82],number:36},e.exports[37]=e.exports.Rb={symbol:"Rb",name:"rubidium",mass:85.4678,radius:2.2,color:[.439,.18,.69],number:37},e.exports[38]=e.exports.Sr={symbol:"Sr",name:"strontium",mass:87.62,radius:1.95,color:[0,1,0],number:38},e.exports[39]=e.exports.Y={symbol:"Y",name:"yttrium",mass:88.90585,radius:1.9,color:[.58,1,1],number:39},e.exports[40]=e.exports.Zr={symbol:"Zr",name:"zirconium",mass:91.224,radius:1.75,color:[.58,.878,.878],number:40},e.exports[41]=e.exports.Nb={symbol:"Nb",name:"niobium",mass:92.90638,radius:1.64,color:[.451,.761,.788],number:41},e.exports[42]=e.exports.Mo={symbol:"Mo",name:"molybdenum",mass:95.96,radius:1.54,color:[.329,.71,.71],number:42},e.exports[43]=e.exports.Tc={symbol:"Tc",name:"technetium",mass:98,radius:1.47,color:[.231,.62,.62],number:43},e.exports[44]=e.exports.Ru={symbol:"Ru",name:"ruthenium",mass:101.07,radius:1.46,color:[.141,.561,.561],number:44},e.exports[45]=e.exports.Rh={symbol:"Rh",name:"rhodium",mass:102.9055,radius:1.42,color:[.039,.49,.549],number:45},e.exports[46]=e.exports.Pd={symbol:"Pd",name:"palladium",mass:106.42,radius:1.39,color:[0,.412,.522],number:46},e.exports[47]=e.exports.Ag={symbol:"Ag",name:"silver",mass:107.8682,radius:1.45,color:[.753,.753,.753],number:47},e.exports[48]=e.exports.Cd={symbol:"Cd",name:"cadmium",mass:112.411,radius:1.44,color:[1,.851,.561],number:48},e.exports[49]=e.exports.In={symbol:"In",name:"indium",mass:114.818,radius:1.42,color:[.651,.459,.451],number:49},e.exports[50]=e.exports.Sn={symbol:"Sn",name:"tin",mass:118.71,radius:1.39,color:[.4,.502,.502],number:50},e.exports[51]=e.exports.Sb={symbol:"Sb",name:"antimony",mass:121.76,radius:1.39,color:[.62,.388,.71],number:51},e.exports[52]=e.exports.Te={symbol:"Te",name:"tellurium",mass:127.6,radius:1.38,color:[.831,.478,0],number:52},e.exports[53]=e.exports.I={symbol:"I",name:"iodine",mass:126.9047,radius:1.39,color:[.58,0,.58],number:53},e.exports[54]=e.exports.Xe={symbol:"Xe",name:"xenon",mass:131.293,radius:1.4,color:[.259,.62,.69],number:54},e.exports[55]=e.exports.Cs={symbol:"Cs",name:"cesium",mass:132.9054519,radius:2.44,color:[.341,.09,.561],number:55},e.exports[56]=e.exports.Ba={symbol:"Ba",name:"barium",mass:137.327,radius:2.15,color:[0,.788,0],number:56},e.exports[57]=e.exports.La={symbol:"La",name:"lanthanum",mass:138.90547,radius:2.07,color:[.439,.831,1],number:57},e.exports[58]=e.exports.Ce={symbol:"Ce",name:"cerium",mass:140.116,radius:2.04,color:[1,1,.78],number:58},e.exports[59]=e.exports.Pr={symbol:"Pr",name:"praseodymium",mass:140.90765,radius:2.03,color:[.851,1,.78],number:59},e.exports[60]=e.exports.Nd={symbol:"Nd",name:"neodymium",mass:144.242,radius:2.01,color:[.78,1,.78],number:60},e.exports[61]=e.exports.Pm={symbol:"Pm",name:"promethium",mass:145,radius:1.99,color:[.639,1,.78],number:61},e.exports[62]=e.exports.Sm={symbol:"Sm",name:"samarium",mass:150.36,radius:1.98,color:[.561,1,.78],number:62},e.exports[63]=e.exports.Eu={symbol:"Eu",name:"europium",mass:151.964,radius:1.98,color:[.38,1,.78],number:63},e.exports[64]=e.exports.Gd={symbol:"Gd",name:"gadolinium",mass:157.25,radius:1.96,color:[.271,1,.78],number:64},e.exports[65]=e.exports.Tb={symbol:"Tb",name:"terbium",mass:158.92535,radius:1.94,color:[.189,1,.78],number:65},e.exports[66]=e.exports.Dy={symbol:"Dy",name:"dysprosium",mass:162.5,radius:1.92,color:[.122,1,.78],number:66},e.exports[67]=e.exports.Ho={symbol:"Ho",name:"holmium",mass:164.93032,radius:1.92,color:[0,1,.612],number:67},e.exports[68]=e.exports.Er={symbol:"Er",name:"erbium",mass:167.259,radius:1.89,color:[0,.902,.459],number:68},e.exports[69]=e.exports.Tm={symbol:"Tm",name:"thulium",mass:168.93421,radius:1.9,color:[0,.831,.322],number:69},e.exports[70]=e.exports.Yb={symbol:"Yb",name:"ytterbium",mass:173.054,radius:1.87,color:[0,.749,.22],number:70},e.exports[71]=e.exports.Lu={symbol:"Lu",name:"lutetium",mass:174.9668,radius:1.87,color:[0,.671,.141],number:71},e.exports[72]=e.exports.Hf={symbol:"Hf",name:"hafnium",mass:178.49,radius:1.75,color:[.302,.761,1],number:72},e.exports[73]=e.exports.Ta={symbol:"Ta",name:"tantalum",mass:180.94788,radius:1.7,color:[.302,.651,1],number:73},e.exports[74]=e.exports.W={symbol:"W",name:"tungsten",mass:183.84,radius:1.62,color:[.129,.58,.839],number:74},e.exports[75]=e.exports.Re={symbol:"Re",name:"rhenium",mass:186.207,radius:1.51,color:[.149,.49,.671],number:75},e.exports[76]=e.exports.Os={symbol:"Os",name:"osmium",mass:190.23,radius:1.44,color:[.149,.4,.588],number:76},e.exports[77]=e.exports.Ir={symbol:"Ir",name:"iridium",mass:192.217,radius:1.41,color:[.09,.329,.529],number:77},e.exports[78]=e.exports.Pt={symbol:"Pt",name:"platinum",mass:195.084,radius:1.36,color:[.816,.816,.878],number:78},e.exports[79]=e.exports.Au={symbol:"Au",name:"gold",mass:196.966569,radius:1.36,color:[1,.82,.137],number:79},e.exports[80]=e.exports.Hg={symbol:"Hg",name:"mercury",mass:200.59,radius:1.32,color:[.722,.722,.816],number:80},e.exports[81]=e.exports.Tl={symbol:"Tl",name:"thallium",mass:204.3833,radius:1.45,color:[.651,.329,.302],number:81},e.exports[82]=e.exports.Pb={symbol:"Pb",name:"lead",mass:207.2,radius:1.46,color:[.341,.349,.38],number:82},e.exports[83]=e.exports.Bi={symbol:"Bi",name:"bismuth",mass:208.9804,radius:1.48,color:[.62,.31,.71],number:83},e.exports[84]=e.exports.Po={symbol:"Po",name:"polonium",mass:210,radius:1.4,color:[.671,.361,0],number:84},e.exports[85]=e.exports.At={symbol:"At",name:"astatine",mass:210,radius:1.5,color:[.459,.31,.271],number:85},e.exports[86]=e.exports.Rn={symbol:"Rn",name:"radon",mass:220,radius:1.5,color:[.259,.51,.588],number:86},e.exports[87]=e.exports.Fr={symbol:"Fr",name:"francium",mass:223,radius:2.6,color:[.259,0,.4],number:87},e.exports[88]=e.exports.Ra={symbol:"Ra",name:"radium",mass:226,radius:2.21,color:[0,.49,0],number:88},e.exports[89]=e.exports.Ac={symbol:"Ac",name:"actinium",mass:227,radius:2.15,color:[.439,.671,.98],number:89},e.exports[90]=e.exports.Th={symbol:"Th",name:"thorium",mass:231.03588,radius:2.06,color:[0,.729,1],number:90},e.exports[91]=e.exports.Pa={symbol:"Pa",name:"protactinium",mass:232.03806,radius:2,color:[0,.631,1],number:91},e.exports[92]=e.exports.U={symbol:"U",name:"uranium",mass:237,radius:1.96,color:[0,.561,1],number:92},e.exports[93]=e.exports.Np={symbol:"Np",name:"neptunium",mass:238.02891,radius:1.9,color:[0,.502,1],number:93},e.exports[94]=e.exports.Pu={symbol:"Pu",name:"plutonium",mass:243,radius:1.87,color:[0,.42,1],number:94},e.exports[95]=e.exports.Am={symbol:"Am",name:"americium",mass:244,radius:1.8,color:[.329,.361,.949],number:95},e.exports[96]=e.exports.Cm={symbol:"Cm",name:"curium",mass:247,radius:1.69,color:[.471,.361,.89],number:96},e.exports[97]=e.exports.Bk={symbol:"Bk",name:"berkelium",mass:247,radius:1.66,color:[.541,.31,.89],number:97},e.exports[98]=e.exports.Cf={symbol:"Cf",name:"californium",mass:251,radius:1.68,color:[.631,.212,.831],number:98},e.exports[99]=e.exports.Es={symbol:"Es",name:"einsteinium",mass:252,radius:1.65,color:[.702,.122,.831],number:99},e.exports[100]=e.exports.Fm={symbol:"Fm",name:"fermium",mass:257,radius:1.67,color:[.702,.122,.729],number:100},e.exports[101]=e.exports.Md={symbol:"Md",name:"mendelevium",mass:258,radius:1.73,color:[.702,.051,.651],number:101},e.exports[102]=e.exports.No={symbol:"No",name:"nobelium",mass:259,radius:1.76,color:[.741,.051,.529],number:102},e.exports[103]=e.exports.Lr={symbol:"Lr",name:"lawrencium",mass:262,radius:1.61,color:[.78,0,.4],number:103},e.exports[104]=e.exports.Rf={symbol:"Rf",name:"rutherfordium",mass:261,radius:1.57,color:[.8,0,.349],number:104},e.exports[105]=e.exports.Db={symbol:"Db",name:"dubnium",mass:262,radius:1.49,color:[.82,0,.31],number:105},e.exports[106]=e.exports.Sg={symbol:"Sg",name:"seaborgium",mass:266,radius:1.43,color:[.851,0,.271],number:106},e.exports[107]=e.exports.Bh={symbol:"Bh",name:"bohrium",mass:264,radius:1.41,color:[.878,0,.22],number:107},e.exports[108]=e.exports.Hs={symbol:"Hs",name:"hassium",mass:277,radius:1.34,color:[.902,0,.18],number:108},e.exports[109]=e.exports.Mt={symbol:"Mt",name:"meitnerium",mass:268,radius:1.29,color:[.922,0,.149],number:109},e.exports[110]=e.exports.Ds={symbol:"Ds",name:"Ds",mass:271,radius:1.28,color:[.922,0,.149],number:110},e.exports[111]=e.exports.Uuu={symbol:"Uuu",name:"Uuu",mass:272,radius:1.21,color:[.922,0,.149],number:111},e.exports[112]=e.exports.Uub={symbol:"Uub",name:"Uub",mass:285,radius:1.22,color:[.922,0,.149],number:112},e.exports[113]=e.exports.Uut={symbol:"Uut",name:"Uut",mass:284,radius:1.36,color:[.922,0,.149],number:113},e.exports[114]=e.exports.Uuq={symbol:"Uuq",name:"Uuq",mass:289,radius:1.43,color:[.922,0,.149],number:114},e.exports[115]=e.exports.Uup={symbol:"Uup",name:"Uup",mass:288,radius:1.62,color:[.922,0,.149],number:115},e.exports[116]=e.exports.Uuh={symbol:"Uuh",name:"Uuh",mass:292,radius:1.75,color:[.922,0,.149],number:116},e.exports[117]=e.exports.Uus={symbol:"Uus",name:"Uus",mass:294,radius:1.65,color:[.922,0,.149],number:117},e.exports[118]=e.exports.Uuo={symbol:"Uuo",name:"Uuo",mass:296,radius:1.57,color:[.922,0,.149],number:118}},function(e,t,n){!function(e){"use strict";var n={};n.exports=t,function(e){if(!t)var t=1e-6;if(!n)var n="undefined"!=typeof Float32Array?Float32Array:Array;if(!r)var r=Math.random;var i={setMatrixArrayType:function(e){n=e}};void 0!==e&&(e.glMatrix=i);var a=Math.PI/180;i.toRadian=function(e){return e*a};var o,s={};s.create=function(){var e=new n(2);return e[0]=0,e[1]=0,e},s.clone=function(e){var t=new n(2);return t[0]=e[0],t[1]=e[1],t},s.fromValues=function(e,t){var r=new n(2);return r[0]=e,r[1]=t,r},s.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},s.set=function(e,t,n){return e[0]=t,e[1]=n,e},s.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},s.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},s.sub=s.subtract,s.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},s.mul=s.multiply,s.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},s.div=s.divide,s.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},s.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},s.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},s.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},s.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},s.dist=s.distance,s.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},s.sqrDist=s.squaredDistance,s.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},s.len=s.length,s.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},s.sqrLen=s.squaredLength,s.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},s.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},s.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},s.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},s.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},s.lerp=function(e,t,n,r){var i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e},s.random=function(e,t){t=t||1;var n=2*r()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},s.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},s.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},s.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},s.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},s.forEach=(o=s.create(),function(e,t,n,r,i,a){var s,u;for(t||(t=2),n||(n=0),u=r?Math.min(r*t+n,e.length):e.length,s=n;s<u;s+=t)o[0]=e[s],o[1]=e[s+1],i(o,o,a),e[s]=o[0],e[s+1]=o[1];return e}),s.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},void 0!==e&&(e.vec2=s);var u={create:function(){var e=new n(3);return e[0]=0,e[1]=0,e[2]=0,e},clone:function(e){var t=new n(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},fromValues:function(e,t,r){var i=new n(3);return i[0]=e,i[1]=t,i[2]=r,i},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},subtract:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}};u.sub=u.subtract,u.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},u.mul=u.multiply,u.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},u.div=u.divide,u.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},u.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},u.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},u.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},u.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},u.dist=u.distance,u.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},u.sqrDist=u.squaredDistance,u.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},u.len=u.length,u.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},u.sqrLen=u.squaredLength,u.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},u.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},u.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e},u.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},u.cross=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e},u.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e},u.random=function(e,t){t=t||1;var n=2*r()*Math.PI,i=2*r()-1,a=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=i*t,e},u.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e},u.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e},u.transformQuat=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*i,h=c*i+u*r-o*a,f=c*a+o*i-s*r,p=-o*r-s*i-u*a;return e[0]=l*c+p*-o+h*-u-f*-s,e[1]=h*c+p*-s+f*-o-l*-u,e[2]=f*c+p*-u+l*-s-h*-o,e},u.rotateX=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},u.rotateY=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},u.rotateZ=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},u.forEach=function(){var e=u.create();return function(t,n,r,i,a,o){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),u.angle=function(e,t){var n=u.fromValues(e[0],e[1],e[2]),r=u.fromValues(t[0],t[1],t[2]);u.normalize(n,n),u.normalize(r,r);var i=u.dot(n,r);return i>1?0:Math.acos(i)},u.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},void 0!==e&&(e.vec3=u);var c={create:function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},clone:function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},fromValues:function(e,t,r,i){var a=new n(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},set:function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},subtract:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}};c.sub=c.subtract,c.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},c.mul=c.multiply,c.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},c.div=c.divide,c.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},c.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},c.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},c.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},c.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)},c.dist=c.distance,c.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a},c.sqrDist=c.squaredDistance,c.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},c.len=c.length,c.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},c.sqrLen=c.squaredLength,c.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},c.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},c.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o),e},c.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},c.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e},c.random=function(e,t){return t=t||1,e[0]=r(),e[1]=r(),e[2]=r(),e[3]=r(),c.normalize(e,e),c.scale(e,e,t),e},c.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e},c.transformQuat=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*i,h=c*i+u*r-o*a,f=c*a+o*i-s*r,p=-o*r-s*i-u*a;return e[0]=l*c+p*-o+h*-u-f*-s,e[1]=h*c+p*-s+f*-o-l*-u,e[2]=f*c+p*-u+l*-s-h*-o,e},c.forEach=function(){var e=c.create();return function(t,n,r,i,a,o){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),c.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},void 0!==e&&(e.vec4=c);var l={create:function(){var e=new n(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},clone:function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},transpose:function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*a-i*r;return o?(o=1/o,e[0]=a*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null},adjoint:function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},multiply:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],c=n[2],l=n[3];return e[0]=r*s+a*u,e[1]=i*s+o*u,e[2]=r*c+a*l,e[3]=i*c+o*l,e}};l.mul=l.multiply,l.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=r*-s+a*u,e[3]=i*-s+o*u,e},l.scale=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1];return e[0]=r*s,e[1]=i*s,e[2]=a*u,e[3]=o*u,e},l.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},l.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},l.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},void 0!==e&&(e.mat2=l);var h={create:function(){var e=new n(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},clone:function(e){var t=new n(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=n*a-r*i;return u?(u=1/u,e[0]=a*u,e[1]=-r*u,e[2]=-i*u,e[3]=n*u,e[4]=(i*s-a*o)*u,e[5]=(r*o-n*s)*u,e):null},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=n[0],l=n[1],h=n[2],f=n[3],p=n[4],d=n[5];return e[0]=r*c+a*l,e[1]=i*c+o*l,e[2]=r*h+a*f,e[3]=i*h+o*f,e[4]=r*p+a*d+s,e[5]=i*p+o*d+u,e}};h.mul=h.multiply,h.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*c,e[1]=i*l+o*c,e[2]=r*-c+a*l,e[3]=i*-c+o*l,e[4]=s,e[5]=u,e},h.scale=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=n[0],l=n[1];return e[0]=r*c,e[1]=i*c,e[2]=a*l,e[3]=o*l,e[4]=s,e[5]=u,e},h.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=n[0],l=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*c+a*l+s,e[5]=i*c+o*l+u,e},h.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},h.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},void 0!==e&&(e.mat2d=h);var f={create:function(){var e=new n(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},clone:function(e){var t=new n(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=l*o-s*c,f=-l*a+s*u,p=c*a-o*u,d=n*h+r*f+i*p;return d?(d=1/d,e[0]=h*d,e[1]=(-l*r+i*c)*d,e[2]=(s*r-i*o)*d,e[3]=f*d,e[4]=(l*n-i*u)*d,e[5]=(-s*n+i*a)*d,e[6]=p*d,e[7]=(-c*n+r*u)*d,e[8]=(o*n-r*a)*d,e):null},adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8];return e[0]=o*l-s*c,e[1]=i*c-r*l,e[2]=r*s-i*o,e[3]=s*u-a*l,e[4]=n*l-i*u,e[5]=i*a-n*s,e[6]=a*c-o*u,e[7]=r*u-n*c,e[8]=n*o-r*a,e},determinant:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8];return t*(c*a-o*u)+n*(-c*i+o*s)+r*(u*i-a*s)},multiply:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=n[0],p=n[1],d=n[2],g=n[3],v=n[4],m=n[5],y=n[6],b=n[7],w=n[8];return e[0]=f*r+p*o+d*c,e[1]=f*i+p*s+d*l,e[2]=f*a+p*u+d*h,e[3]=g*r+v*o+m*c,e[4]=g*i+v*s+m*l,e[5]=g*a+v*u+m*h,e[6]=y*r+b*o+w*c,e[7]=y*i+b*s+w*l,e[8]=y*a+b*u+w*h,e}};f.mul=f.multiply,f.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=f*r+p*o+c,e[7]=f*i+p*s+l,e[8]=f*a+p*u+h,e},f.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=Math.sin(n),p=Math.cos(n);return e[0]=p*r+f*o,e[1]=p*i+f*s,e[2]=p*a+f*u,e[3]=p*o-f*r,e[4]=p*s-f*i,e[5]=p*u-f*a,e[6]=c,e[7]=l,e[8]=h,e},f.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},f.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},f.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,l=r*o,h=r*s,f=i*o,p=i*s,d=i*u,g=a*o,v=a*s,m=a*u;return e[0]=1-h-d,e[3]=l-m,e[6]=f+v,e[1]=l+m,e[4]=1-c-d,e[7]=p-g,e[2]=f-v,e[5]=p+g,e[8]=1-c-h,e},f.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],p=t[11],d=t[12],g=t[13],v=t[14],m=t[15],y=n*s-r*o,b=n*u-i*o,w=n*c-a*o,x=r*u-i*s,k=r*c-a*s,S=i*c-a*u,_=l*g-h*d,C=l*v-f*d,R=l*m-p*d,E=h*v-f*g,A=h*m-p*g,T=f*m-p*v,M=y*T-b*A+w*E+x*R-k*C+S*_;return M?(M=1/M,e[0]=(s*T-u*A+c*E)*M,e[1]=(u*R-o*T-c*C)*M,e[2]=(o*A-s*R+c*_)*M,e[3]=(i*A-r*T-a*E)*M,e[4]=(n*T-i*R+a*C)*M,e[5]=(r*R-n*A-a*_)*M,e[6]=(g*S-v*k+m*x)*M,e[7]=(v*w-d*S-m*b)*M,e[8]=(d*k-g*w+m*y)*M,e):null},f.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},f.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},void 0!==e&&(e.mat3=f);var p={create:function(){var e=new n(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:function(e){var t=new n(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],p=t[11],d=t[12],g=t[13],v=t[14],m=t[15],y=n*s-r*o,b=n*u-i*o,w=n*c-a*o,x=r*u-i*s,k=r*c-a*s,S=i*c-a*u,_=l*g-h*d,C=l*v-f*d,R=l*m-p*d,E=h*v-f*g,A=h*m-p*g,T=f*m-p*v,M=y*T-b*A+w*E+x*R-k*C+S*_;return M?(M=1/M,e[0]=(s*T-u*A+c*E)*M,e[1]=(i*A-r*T-a*E)*M,e[2]=(g*S-v*k+m*x)*M,e[3]=(f*k-h*S-p*x)*M,e[4]=(u*R-o*T-c*C)*M,e[5]=(n*T-i*R+a*C)*M,e[6]=(v*w-d*S-m*b)*M,e[7]=(l*S-f*w+p*b)*M,e[8]=(o*A-s*R+c*_)*M,e[9]=(r*R-n*A-a*_)*M,e[10]=(d*k-g*w+m*y)*M,e[11]=(h*w-l*k-p*y)*M,e[12]=(s*C-o*E-u*_)*M,e[13]=(n*E-r*C+i*_)*M,e[14]=(g*b-d*x-v*y)*M,e[15]=(l*x-h*b+f*y)*M,e):null},adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],p=t[11],d=t[12],g=t[13],v=t[14],m=t[15];return e[0]=s*(f*m-p*v)-h*(u*m-c*v)+g*(u*p-c*f),e[1]=-(r*(f*m-p*v)-h*(i*m-a*v)+g*(i*p-a*f)),e[2]=r*(u*m-c*v)-s*(i*m-a*v)+g*(i*c-a*u),e[3]=-(r*(u*p-c*f)-s*(i*p-a*f)+h*(i*c-a*u)),e[4]=-(o*(f*m-p*v)-l*(u*m-c*v)+d*(u*p-c*f)),e[5]=n*(f*m-p*v)-l*(i*m-a*v)+d*(i*p-a*f),e[6]=-(n*(u*m-c*v)-o*(i*m-a*v)+d*(i*c-a*u)),e[7]=n*(u*p-c*f)-o*(i*p-a*f)+l*(i*c-a*u),e[8]=o*(h*m-p*g)-l*(s*m-c*g)+d*(s*p-c*h),e[9]=-(n*(h*m-p*g)-l*(r*m-a*g)+d*(r*p-a*h)),e[10]=n*(s*m-c*g)-o*(r*m-a*g)+d*(r*c-a*s),e[11]=-(n*(s*p-c*h)-o*(r*p-a*h)+l*(r*c-a*s)),e[12]=-(o*(h*v-f*g)-l*(s*v-u*g)+d*(s*f-u*h)),e[13]=n*(h*v-f*g)-l*(r*v-i*g)+d*(r*f-i*h),e[14]=-(n*(s*v-u*g)-o*(r*v-i*g)+d*(r*u-i*s)),e[15]=n*(s*f-u*h)-o*(r*f-i*h)+l*(r*u-i*s),e},determinant:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11],p=e[12],d=e[13],g=e[14],v=e[15];return(t*o-n*a)*(h*v-f*g)-(t*s-r*a)*(l*v-f*d)+(t*u-i*a)*(l*g-h*d)+(n*s-r*o)*(c*v-f*p)-(n*u-i*o)*(c*g-h*p)+(r*u-i*s)*(c*d-l*p)},multiply:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],p=t[10],d=t[11],g=t[12],v=t[13],m=t[14],y=t[15],b=n[0],w=n[1],x=n[2],k=n[3];return e[0]=b*r+w*s+x*h+k*g,e[1]=b*i+w*u+x*f+k*v,e[2]=b*a+w*c+x*p+k*m,e[3]=b*o+w*l+x*d+k*y,b=n[4],w=n[5],x=n[6],k=n[7],e[4]=b*r+w*s+x*h+k*g,e[5]=b*i+w*u+x*f+k*v,e[6]=b*a+w*c+x*p+k*m,e[7]=b*o+w*l+x*d+k*y,b=n[8],w=n[9],x=n[10],k=n[11],e[8]=b*r+w*s+x*h+k*g,e[9]=b*i+w*u+x*f+k*v,e[10]=b*a+w*c+x*p+k*m,e[11]=b*o+w*l+x*d+k*y,b=n[12],w=n[13],x=n[14],k=n[15],e[12]=b*r+w*s+x*h+k*g,e[13]=b*i+w*u+x*f+k*v,e[14]=b*a+w*c+x*p+k*m,e[15]=b*o+w*l+x*d+k*y,e}};p.mul=p.multiply,p.translate=function(e,t,n){var r,i,a,o,s,u,c,l,h,f,p,d,g=n[0],v=n[1],m=n[2];return t===e?(e[12]=t[0]*g+t[4]*v+t[8]*m+t[12],e[13]=t[1]*g+t[5]*v+t[9]*m+t[13],e[14]=t[2]*g+t[6]*v+t[10]*m+t[14],e[15]=t[3]*g+t[7]*v+t[11]*m+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=h,e[9]=f,e[10]=p,e[11]=d,e[12]=r*g+s*v+h*m+t[12],e[13]=i*g+u*v+f*m+t[13],e[14]=a*g+c*v+p*m+t[14],e[15]=o*g+l*v+d*m+t[15]),e},p.scale=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},p.rotate=function(e,n,r,i){var a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w,x,k,S,_,C,R,E,A,T=i[0],M=i[1],L=i[2],I=Math.sqrt(T*T+M*M+L*L);return Math.abs(I)<t?null:(T*=I=1/I,M*=I,L*=I,a=Math.sin(r),s=1-(o=Math.cos(r)),u=n[0],c=n[1],l=n[2],h=n[3],f=n[4],p=n[5],d=n[6],g=n[7],v=n[8],m=n[9],y=n[10],b=n[11],w=T*T*s+o,x=M*T*s+L*a,k=L*T*s-M*a,S=T*M*s-L*a,_=M*M*s+o,C=L*M*s+T*a,R=T*L*s+M*a,E=M*L*s-T*a,A=L*L*s+o,e[0]=u*w+f*x+v*k,e[1]=c*w+p*x+m*k,e[2]=l*w+d*x+y*k,e[3]=h*w+g*x+b*k,e[4]=u*S+f*_+v*C,e[5]=c*S+p*_+m*C,e[6]=l*S+d*_+y*C,e[7]=h*S+g*_+b*C,e[8]=u*R+f*E+v*A,e[9]=c*R+p*E+m*A,e[10]=l*R+d*E+y*A,e[11]=h*R+g*E+b*A,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},p.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*r,e[5]=o*i+l*r,e[6]=s*i+h*r,e[7]=u*i+f*r,e[8]=c*i-a*r,e[9]=l*i-o*r,e[10]=h*i-s*r,e[11]=f*i-u*r,e},p.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*r,e[1]=o*i-l*r,e[2]=s*i-h*r,e[3]=u*i-f*r,e[8]=a*r+c*i,e[9]=o*r+l*i,e[10]=s*r+h*i,e[11]=u*r+f*i,e},p.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[4],l=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*r,e[1]=o*i+l*r,e[2]=s*i+h*r,e[3]=u*i+f*r,e[4]=c*i-a*r,e[5]=l*i-o*r,e[6]=h*i-s*r,e[7]=f*i-u*r,e},p.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,u=i+i,c=a+a,l=r*s,h=r*u,f=r*c,p=i*u,d=i*c,g=a*c,v=o*s,m=o*u,y=o*c;return e[0]=1-(p+g),e[1]=h+y,e[2]=f-m,e[3]=0,e[4]=h-y,e[5]=1-(l+g),e[6]=d+v,e[7]=0,e[8]=f+m,e[9]=d-v,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},p.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,l=r*o,h=r*s,f=i*o,p=i*s,d=i*u,g=a*o,v=a*s,m=a*u;return e[0]=1-h-d,e[1]=l+m,e[2]=f-v,e[3]=0,e[4]=l-m,e[5]=1-c-d,e[6]=p+g,e[7]=0,e[8]=f+v,e[9]=p-g,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},p.frustum=function(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e},p.perspective=function(e,t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e},p.ortho=function(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*c,e[15]=1,e},p.lookAt=function(e,n,r,i){var a,o,s,u,c,l,h,f,d,g,v=n[0],m=n[1],y=n[2],b=i[0],w=i[1],x=i[2],k=r[0],S=r[1],_=r[2];return Math.abs(v-k)<t&&Math.abs(m-S)<t&&Math.abs(y-_)<t?p.identity(e):(h=v-k,f=m-S,d=y-_,a=w*(d*=g=1/Math.sqrt(h*h+f*f+d*d))-x*(f*=g),o=x*(h*=g)-b*d,s=b*f-w*h,(g=Math.sqrt(a*a+o*o+s*s))?(a*=g=1/g,o*=g,s*=g):(a=0,o=0,s=0),u=f*s-d*o,c=d*a-h*s,l=h*o-f*a,(g=Math.sqrt(u*u+c*c+l*l))?(u*=g=1/g,c*=g,l*=g):(u=0,c=0,l=0),e[0]=a,e[1]=u,e[2]=h,e[3]=0,e[4]=o,e[5]=c,e[6]=f,e[7]=0,e[8]=s,e[9]=l,e[10]=d,e[11]=0,e[12]=-(a*v+o*m+s*y),e[13]=-(u*v+c*m+l*y),e[14]=-(h*v+f*m+d*y),e[15]=1,e)},p.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},p.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},void 0!==e&&(e.mat4=p);var d,g,v,m,y={};y.create=function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},y.rotationTo=(d=u.create(),g=u.fromValues(1,0,0),v=u.fromValues(0,1,0),function(e,t,n){var r=u.dot(t,n);return r<-.999999?(u.cross(d,g,t),u.length(d)<1e-6&&u.cross(d,v,t),u.normalize(d,d),y.setAxisAngle(e,d,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(u.cross(d,t,n),e[0]=d[0],e[1]=d[1],e[2]=d[2],e[3]=1+r,y.normalize(e,e))}),y.setAxes=(m=f.create(),function(e,t,n,r){return m[0]=n[0],m[3]=n[1],m[6]=n[2],m[1]=r[0],m[4]=r[1],m[7]=r[2],m[2]=-t[0],m[5]=-t[1],m[8]=-t[2],y.normalize(e,y.fromMat3(e,m))}),y.clone=c.clone,y.fromValues=c.fromValues,y.copy=c.copy,y.set=c.set,y.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},y.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},y.add=c.add,y.multiply=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],c=n[2],l=n[3];return e[0]=r*l+o*s+i*c-a*u,e[1]=i*l+o*u+a*s-r*c,e[2]=a*l+o*c+r*u-i*s,e[3]=o*l-r*s-i*u-a*c,e},y.mul=y.multiply,y.scale=c.scale,y.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=a*u-i*s,e[3]=o*u-r*s,e},y.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-a*s,e[1]=i*u+o*s,e[2]=a*u+r*s,e[3]=o*u-i*s,e},y.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=a*u+o*s,e[3]=o*u-a*s,e},y.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},y.dot=c.dot,y.lerp=c.lerp,y.slerp=function(e,t,n,r){var i,a,o,s,u,c=t[0],l=t[1],h=t[2],f=t[3],p=n[0],d=n[1],g=n[2],v=n[3];return(a=c*p+l*d+h*g+f*v)<0&&(a=-a,p=-p,d=-d,g=-g,v=-v),1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,u=Math.sin(r*i)/o):(s=1-r,u=r),e[0]=s*c+u*p,e[1]=s*l+u*d,e[2]=s*h+u*g,e[3]=s*f+u*v,e},y.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e},y.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},y.length=c.length,y.len=y.length,y.squaredLength=c.squaredLength,y.sqrLen=y.squaredLength,y.normalize=c.normalize,y.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*a+o]-t[3*o+a])*n,e[a]=(t[3*a+i]+t[3*i+a])*n,e[o]=(t[3*o+i]+t[3*i+o])*n}return e},y.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},void 0!==e&&(e.quat=y)}(n.exports)}()},function(e,t,n){"use strict";var r=n(7),i=n(6),a=n(22);function o(e,t,n){return Math.min(t,Math.max(e,n))}e.exports.new=function(){return{aspect:1,zoom:.125,translation:{x:0,y:0},atomScale:.6,relativeAtomScale:1,bondScale:.5,rotation:r.mat4.create(),ao:.75,aoRes:256,brightness:.5,outline:0,spf:32,bonds:!1,bondThreshold:1.2,bondShade:.5,atomShade:.5,resolution:768,dofStrength:0,dofPosition:.5,fxaa:1}},e.exports.center=function(e,t){for(var n=-1/0,a=1/0,o=-1/0,s=1/0,u=0;u<t.atoms.length;u++){var c=t.atoms[u],l=i[c.symbol].radius;l=2.5*e.atomScale*(1+(l-1)*e.relativeAtomScale);var h=r.vec4.fromValues(c.x,c.y,c.z,0);r.vec4.transformMat4(h,h,e.rotation),n=Math.max(n,h[0]+l),a=Math.min(a,h[0]-l),o=Math.max(o,h[1]+l),s=Math.min(s,h[1]-l)}var f=a+(n-a)/2,p=s+(o-s)/2;e.translation.x=f,e.translation.y=p;var d=Math.max(n-a,o-s);e.zoom=1/(1.01*d)},e.exports.override=function(e,t){for(var n in t)e[n]=t[n];c(e)},e.exports.clone=function(e){return u(s(e))};var s=e.exports.serialize=function(e){return JSON.stringify(e)},u=e.exports.deserialize=function(e){return(e=JSON.parse(e)).rotation=r.mat4.clone(e.rotation),e},c=e.exports.resolve=function(e){e.dofStrength=o(0,1,e.dofStrength),e.dofPosition=o(0,1,e.dofPosition),e.zoom=o(.001,2,e.zoom),e.atomScale=o(0,1,e.atomScale),e.relativeAtomScale=o(0,1,e.relativeAtomScale),e.bondScale=o(0,1,e.bondScale),e.bondShade=o(0,1,e.bondShade),e.atomShade=o(0,1,e.atomShade),e.ao=o(0,1,e.ao),e.brightness=o(0,1,e.brightness),e.outline=o(0,1,e.outline)};e.exports.translate=function(e,t,n){e.translation.x-=t/(e.resolution*e.zoom),e.translation.y+=n/(e.resolution*e.zoom),c(e)},e.exports.rotate=function(e,t,n){var i=r.mat4.create();r.mat4.rotateY(i,i,.005*t),r.mat4.rotateX(i,i,.005*n),r.mat4.multiply(e.rotation,i,e.rotation);var a=e.ao;e.ao=0,c(e),e.ao=a},e.exports.getRect=function(e){var t=1/e.zoom,n=t/e.aspect;return{bottom:-n/2+e.translation.y,top:n/2+e.translation.y,left:-t/2+e.translation.x,right:t/2+e.translation.x}},e.exports.getBondRadius=function(e){return e.bondScale*e.atomScale*(1+(a.MIN_ATOM_RADIUS-1)*e.relativeAtomScale)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),i=n(4);function a(e){return function t(n,a){switch(arguments.length){case 0:return t;case 1:return Object(i.a)(n)?t:Object(r.a)((function(t){return e(n,t)}));default:return Object(i.a)(n)&&Object(i.a)(a)?t:Object(i.a)(n)?Object(r.a)((function(t){return e(t,a)})):Object(i.a)(a)?Object(r.a)((function(t){return e(n,t)})):e(n,a)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return m}));var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(2);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=Object(a.lazy)(s.a.alignmentChart),g=function(e){function t(){return c(this,t),h(this,f(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(a.Suspense,{fallback:null},o.a.createElement(d,this.props))}}])&&l(n.prototype,r),i&&l(n,i),t}(a.Component);g.propTypes={id:i.a.string,setProps:i.a.func,eventDatum:i.a.string,data:i.a.string,extension:i.a.string,colorscale:i.a.oneOfType([i.a.string,i.a.object]),opacity:i.a.oneOfType([i.a.number,i.a.string]),textcolor:i.a.string,textsize:i.a.oneOfType([i.a.number,i.a.string]),showlabel:i.a.bool,showid:i.a.bool,showconservation:i.a.bool,conservationcolor:i.a.string,conservationcolorscale:i.a.oneOfType([i.a.string,i.a.array]),conservationopacity:i.a.oneOfType([i.a.number,i.a.string]),conservationmethod:i.a.oneOf(["conservation","entropy"]),correctgap:i.a.bool,showgap:i.a.bool,gapcolor:i.a.string,gapcolorscale:i.a.oneOfType([i.a.string,i.a.array]),gapopacity:i.a.oneOfType([i.a.number,i.a.string]),groupbars:i.a.bool,showconsensus:i.a.bool,tilewidth:i.a.number,tileheight:i.a.number,overview:i.a.oneOf(["heatmap","slider","none"]),numtiles:i.a.number,scrollskip:i.a.number,tickstart:i.a.oneOfType([i.a.number,i.a.string]),ticksteps:i.a.oneOfType([i.a.number,i.a.string]),width:i.a.oneOfType([i.a.number,i.a.string]),height:i.a.oneOfType([i.a.number,i.a.string])},g.defaultProps={extension:"fasta",colorscale:"clustal2",opacity:null,textcolor:null,textsize:10,showlabel:!0,showid:!0,showconservation:!0,conservationcolor:null,conservationcolorscale:"Viridis",conservationopacity:null,conservationmethod:"entropy",correctgap:!0,showgap:!0,gapcolor:"grey",gapcolorscale:null,gapopacity:null,groupbars:!1,showconsensus:!0,tilewidth:16,tileheight:16,numtiles:null,overview:"heatmap",scrollskip:10,tickstart:null,ticksteps:null,width:null,height:900};var v=g.propTypes,m=g.defaultProps},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return m}));var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(2);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=Object(a.lazy)(s.a.ideogram),g=function(e){function t(){return c(this,t),h(this,f(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(a.Suspense,{fallback:null},o.a.createElement(d,this.props))}}])&&l(n.prototype,r),i&&l(n,i),t}(a.Component);g.defaultProps={organism:"human",dataDir:"https://unpkg.com/ideogram@1.5.0/dist/data/bands/native/",annotationsColor:"#F00",annotationsLayout:"tracks",barWidth:3,chrHeight:400,chrMargin:10,chrWidth:10,ploidy:1,rotatable:!0,showBandLabels:!1,showChromosomeLabels:!0,showAnnotTooltip:!0,showFullyBanded:!0,showNonNuclearChromosomes:!1},g.propTypes={id:i.a.string.isRequired,style:i.a.object,setProps:i.a.func,className:i.a.string,annotationsLayout:i.a.oneOf(["tracks","histogram","overlay"]),annotations:i.a.arrayOf(i.a.shape({name:i.a.string,chr:i.a.string,start:i.a.number,stop:i.a.number})),annotationsPath:i.a.string,annotationsData:i.a.string,annotationTracks:i.a.arrayOf(i.a.object),annotationHeight:i.a.number,annotationsColor:i.a.string,histogramScaling:i.a.oneOf(["absolute","relative"]),barWidth:i.a.number,showAnnotTooltip:i.a.bool,assembly:i.a.string,brush:i.a.string,brushData:i.a.shape({start:i.a.string,end:i.a.string,extent:i.a.string}),container:i.a.string,chrHeight:i.a.number,chrMargin:i.a.number,chrWidth:i.a.number,chromosomes:i.a.oneOfType([i.a.arrayOf(i.a.string),i.a.object]),dataDir:i.a.string,organism:i.a.oneOfType([i.a.string,i.a.number]),localOrganism:i.a.object,homology:i.a.shape({chrOne:i.a.shape({organism:i.a.string.isRequired,start:i.a.arrayOf(i.a.number.isRequired),stop:i.a.arrayOf(i.a.number.isRequired)}),chrTwo:i.a.shape({organism:i.a.string.isRequired,start:i.a.arrayOf(i.a.number.isRequired),stop:i.a.arrayOf(i.a.number.isRequired)})}),perspective:i.a.oneOf(["comparative"]),fullChromosomeLabels:i.a.bool,resolution:i.a.number,filterable:i.a.bool,orientation:i.a.oneOf(["vertical","horizontal"]),ploidy:i.a.number,ploidyDesc:i.a.arrayOf(i.a.object),ancestors:i.a.object,rangeSet:i.a.arrayOf(i.a.object),rotatable:i.a.bool,rotated:i.a.bool,sex:i.a.oneOf(["male","female"]),showChromosomeLabels:i.a.bool,showBandLabels:i.a.bool,showFullyBanded:i.a.bool,showNonNuclearChromosomes:i.a.bool};var v=g.defaultProps,m=g.propTypes},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return m}));var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(2);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=Object(a.lazy)(s.a.molecule2dViewer),g=function(e){function t(){return c(this,t),h(this,f(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(a.Suspense,{fallback:null},o.a.createElement(d,this.props))}}])&&l(n.prototype,r),i&&l(n,i),t}(a.Component);g.defaultProps={width:500,height:500,modelData:{nodes:[],links:[]}},g.propTypes={id:i.a.string,setProps:i.a.func,selectedAtomIds:i.a.arrayOf(i.a.number),width:i.a.number,height:i.a.number,modelData:i.a.shape({nodes:i.a.arrayOf(i.a.shape({id:i.a.number,atom:i.a.string})),links:i.a.arrayOf(i.a.shape({id:i.a.number,source:i.a.number|i.a.shape,target:i.a.number|i.a.shape,bond:i.a.number,strength:i.a.number,distance:i.a.number}))})};var v=g.defaultProps,m=g.propTypes},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return m}));var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(2);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=Object(a.lazy)(s.a.molecule3dViewer),g=function(e){function t(){return c(this,t),h(this,f(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(a.Suspense,{fallback:null},o.a.createElement(d,this.props))}}])&&l(n.prototype,r),i&&l(n,i),t}(a.Component);g.defaultProps={selectionType:"atom",backgroundColor:"#FFFFFF",backgroundOpacity:0},g.propTypes={id:i.a.string,setProps:i.a.func,selectionType:i.a.oneOf(["atom","residue","chain"]),backgroundColor:i.a.string,backgroundOpacity:i.a.number,styles:i.a.arrayOf(i.a.shape({color:i.a.string,visualization_type:i.a.oneOf(["cartoon","sphere","stick"])})),modelData:i.a.shape({atoms:i.a.array,bonds:i.a.array}),atomLabelsShown:i.a.bool,selectedAtomIds:i.a.array,labels:i.a.array,onRenderNewData:i.a.func,onChangeSelection:i.a.func};var v=g.defaultProps,m=g.propTypes},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return m}));var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(2);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=Object(a.lazy)(s.a.needlePlot),g=function(e){function t(){return c(this,t),h(this,f(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(a.Suspense,{fallback:null},o.a.createElement(d,this.props))}}])&&l(n.prototype,r),i&&l(n,i),t}(a.Component);g.propTypes={id:i.a.string,mutationData:i.a.shape({x:i.a.oneOfType([i.a.string,i.a.array]),y:i.a.oneOfType([i.a.string,i.a.array]),mutationGroups:i.a.arrayOf(i.a.string),domains:i.a.array}),xlabel:i.a.string,ylabel:i.a.string,rangeSlider:i.a.bool,needleStyle:i.a.shape({stemColor:i.a.string,stemThickness:i.a.number,stemConstHeight:i.a.bool,headSize:i.a.number,headColor:i.a.oneOfType([i.a.array,i.a.string]),headSymbol:i.a.oneOfType([i.a.array,i.a.string])}),domainStyle:i.a.shape({domainColor:i.a.array,displayMinorDomains:i.a.bool}),setProps:i.a.func},g.defaultProps={mutationData:{x:[],y:[],domains:[],mutationGroups:[]},rangeSlider:!1,needleStyle:{stemColor:"#444",stemThickness:.5,stemConstHeight:!1,headSize:5,headColor:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#e41a1c"],headSymbol:"circle"},domainStyle:{displayMinorDomains:!1,domainColor:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f","#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"]}};var v=g.defaultProps,m=g.propTypes},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return m}));var r=n(1),i=n.n(r),a=n(2),o=n(0),s=n.n(o);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=Object(r.lazy)(a.a.nglmoleculeViewer),g=function(e){function t(){return c(this,t),h(this,f(t).apply(this,arguments))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){return i.a.createElement(r.Suspense,{fallback:null},i.a.createElement(d,this.props))}}])&&l(n.prototype,a),o&&l(n,o),t}(r.Component);g.defaultProps={data:[{filename:"placeholder",ext:"",selectedValue:"placeholder",chain:"ALL",aaRange:"ALL",chosen:{chosenAtoms:"",chosenResidues:""},color:"red",config:{input:"",type:"text/plain"},uploaded:!1,resetView:!1}],width:"500px",height:"500px",stageParameters:{quality:"medium",backgroundColor:"white",cameraType:"perspective"},imageParameters:{antialias:!0,transparent:!0,trim:!0,defaultFilename:"dash-bio_ngl_output"},downloadImage:!1,molStyles:{representations:["cartoon","axes+box"],chosenAtomsColor:"#ffffff",chosenAtomsRadius:1,molSpacingXaxis:100,sideByside:!1}},g.propTypes={id:s.a.string,setProps:s.a.func,width:s.a.oneOfType([s.a.string,s.a.number]),height:s.a.oneOfType([s.a.string,s.a.number]),stageParameters:s.a.exact({quality:s.a.string,backgroundColor:s.a.string,cameraType:s.a.string}),imageParameters:s.a.exact({antialias:s.a.bool,transparent:s.a.bool,trim:s.a.bool,defaultFilename:s.a.string}),downloadImage:s.a.bool,pdbString:s.a.string,data:s.a.arrayOf(s.a.exact({filename:s.a.string.isRequired,ext:s.a.string,selectedValue:s.a.string.isRequired,chain:s.a.string.isRequired,aaRange:s.a.string.isRequired,color:s.a.string.isRequired,chosen:s.a.exact({residues:s.a.string.isRequired,atoms:s.a.string.isRequired}),config:s.a.exact({input:s.a.string.isRequired,type:s.a.string.isRequired}),uploaded:s.a.bool.isRequired,resetView:s.a.bool.isRequired})),molStyles:s.a.exact({representations:s.a.arrayOf(s.a.string),chosenAtomsColor:s.a.string.isRequired,chosenAtomsRadius:s.a.number.isRequired,molSpacingXaxis:s.a.number.isRequired,sideByside:s.a.bool.isRequired})};var v=g.defaultProps,m=g.propTypes},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return m}));var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(2);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=Object(a.lazy)(s.a.oncoPrint),g=function(e){function t(){return c(this,t),h(this,f(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(a.Suspense,{fallback:null},o.a.createElement(d,this.props))}}])&&l(n.prototype,r),i&&l(n,i),t}(a.Component);g.propTypes={id:i.a.string,setProps:i.a.func,eventDatum:i.a.object,data:i.a.array,padding:i.a.number,colorscale:i.a.oneOfType([i.a.bool,i.a.object]),backgroundcolor:i.a.string,range:i.a.array,showlegend:i.a.bool,showoverview:i.a.bool,width:i.a.oneOfType([i.a.number,i.a.string]),height:i.a.oneOfType([i.a.number,i.a.string])},g.defaultProps={padding:.05,colorscale:null,backgroundcolor:"rgb(190, 190, 190)",range:[null,null],showlegend:!0,showoverview:!0,width:null,height:500};var v=g.defaultProps,m=g.propTypes},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return m}));var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(2);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=Object(a.lazy)(s.a.sequenceViewer),g=function(e){function t(){return c(this,t),h(this,f(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(a.Suspense,{fallback:null},o.a.createElement(d,this.props))}}])&&l(n.prototype,r),i&&l(n,i),t}(a.Component);g.defaultProps={sequence:"-",showLineNumbers:!0,wrapAminoAcids:!0,charsPerLine:40,toolbar:!1,search:!0,title:"",sequenceMaxHeight:"400px",badge:!0,selection:[],coverage:[]},g.propTypes={id:i.a.string,sequence:i.a.string,showLineNumbers:i.a.bool,wrapAminoAcids:i.a.bool,charsPerLine:i.a.number,toolbar:i.a.bool,search:i.a.bool,title:i.a.string,sequenceMaxHeight:i.a.string,badge:i.a.bool,selection:function(e,t,n){if(void 0!==e[t]&&(void 0!==e[t][0]&&"number"!=typeof e[t][0]||void 0!==e[t][1]&&"number"!=typeof e[t][1]||void 0!==e[t][2]&&"string"!=typeof e[t][2]))return new Error("Invalid prop value. Selection should be an array with type [number, number, string].")},coverage:i.a.arrayOf(i.a.shape({start:i.a.number,end:i.a.number,color:i.a.string,bgcolor:i.a.string,tooltip:i.a.string,underscore:i.a.bool,onclick:i.a.func})),legend:i.a.arrayOf(i.a.shape({name:i.a.string,color:i.a.string,underscore:i.a.bool})),coverageClicked:i.a.number,mouseSelection:i.a.shape({start:i.a.number,end:i.a.number,selection:i.a.string}),subpartSelected:i.a.arrayOf(i.a.shape({start:i.a.number,end:i.a.number,sequence:i.a.string})),setProps:i.a.func};var v=g.defaultProps,m=g.propTypes},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return y}));var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(2),u=n(21);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=Object(a.lazy)(s.a.speck),v=function(e){function t(){return l(this,t),f(this,p(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(a.Suspense,{fallback:null},o.a.createElement(g,this.props))}}])&&h(n.prototype,r),i&&h(n,i),t}(a.Component);v.defaultProps={view:u.speckView.new(),data:[]},v.propTypes={id:i.a.string,data:i.a.arrayOf(i.a.shape({symbol:i.a.string,x:i.a.number,y:i.a.number,z:i.a.number})),scrollZoom:i.a.bool,view:i.a.shape({aspect:i.a.number,zoom:i.a.number,translation:i.a.shape({x:i.a.number,y:i.a.number}),atomScale:i.a.number,relativeAtomScale:i.a.number,bondScale:i.a.number,rotation:i.a.shape({}),ao:i.a.number,aoRes:i.a.number,brightness:i.a.number,outline:i.a.number,spf:i.a.number,bonds:i.a.bool,bondThreshold:i.a.number,bondShade:i.a.number,atomShade:i.a.number,resolution:i.a.number,dofStrength:i.a.number,dofPosition:i.a.number,fxaa:i.a.number}),presetView:i.a.oneOf(["default","stickball","toon","licorice"]),setProps:i.a.func};var m=v.defaultProps,y=v.propTypes},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(1),o=n.n(a),s=n(2),u=["CHORDS","HEATMAP","HIGHLIGHT","HISTOGRAM","LINE","SCATTER","STACK","TEXT"];function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return y}));var g=Object(a.lazy)(s.a.circos),v=function(e){function t(){return l(this,t),f(this,p(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(a.Suspense,{fallback:null},o.a.createElement(g,this.props))}}])&&h(n.prototype,r),i&&h(n,i),t}(a.Component);v.defaultProps={config:{},size:800,tracks:[]},v.propTypes={enableDownloadSVG:i.a.bool,enableZoomPan:i.a.bool,id:i.a.string,style:i.a.object,eventDatum:i.a.object,selectEvent:i.a.object,setProps:i.a.func,layout:i.a.arrayOf(i.a.shape({len:i.a.number.isRequired,color:i.a.string.isRequired,label:i.a.string.isRequired,id:i.a.string.isRequired})).isRequired,config:i.a.object,size:i.a.number,tracks:i.a.arrayOf(i.a.shape({id:i.a.string,data:i.a.array.isRequired,config:i.a.object,type:i.a.oneOf(u),tooltipContent:i.a.oneOfType([i.a.string,i.a.shape({name:i.a.string.isRequired}),i.a.shape({source:i.a.string.isRequired,sourceID:i.a.string,target:i.a.string.isRequired,targetEnd:i.a.string.isRequired,targetID:i.a.string})]),color:i.a.oneOfType([i.a.string,i.a.shape({name:i.a.string.isRequired})])}))};var m=v.propTypes,y=v.defaultProps},function(e,t,n){var r=n(33),i=n(23),a=n(8),o=n(37),s=n(38);e.exports={speckRenderer:r,speckSystem:i,speckView:a,speckInteractions:o,speckPresetViews:s}},function(e,t,n){"use strict";for(var r=n(6),i=1/0,a=-1/0,o=0;o<=118;o++)i=Math.min(i,r[o].radius),a=Math.max(a,r[o].radius);e.exports.MIN_ATOM_RADIUS=i,e.exports.MAX_ATOM_RADIUS=a},function(e,t,n){"use strict";var r=n(7),i=n(6),a=n(22),o=(e.exports.new=function(){return{atoms:[],farAtom:void 0,bonds:[]}},e.exports.calculateBonds=function(e){var t=[],n=e.atoms.slice();n.sort((function(e,t){return e.z-t.z}));for(var o=0;o<n.length;o++)for(var s=n[o],u=o+1;u<n.length&&n[u].z<n[o].z+5*a.MAX_ATOM_RADIUS;){var c=n[u],l=r.vec3.fromValues(s.x,s.y,s.z),h=r.vec3.fromValues(c.x,c.y,c.z),f=r.vec3.distance(l,h),p=i[s.symbol],d=i[c.symbol];f<2.5*(p.radius+d.radius)&&t.push({posA:{x:s.x,y:s.y,z:s.z},posB:{x:c.x,y:c.y,z:c.z},radA:p.radius,radB:d.radius,colA:{r:p.color[0],g:p.color[1],b:p.color[2]},colB:{r:d.color[0],g:d.color[1],b:d.color[2]},cutoff:f/(p.radius+d.radius)}),u++}t.sort((function(e,t){return e.cutoff-t.cutoff})),e.bonds=t},e.exports.addAtom=function(e,t,n,r,i){e.atoms.push({symbol:t,x:n,y:r,z:i})},e.exports.getCentroid=function(e){for(var t=0,n=0,r=0,i=0;i<e.atoms.length;i++)t+=e.atoms[i].x,n+=e.atoms[i].y,r+=e.atoms[i].z;return{x:t/e.atoms.length,y:n/e.atoms.length,z:r/e.atoms.length}}),s=(e.exports.center=function(e){for(var t=o(e),n=0;n<e.atoms.length;n++){var r=e.atoms[n];r.x-=t.x,r.y-=t.y,r.z-=t.z}},e.exports.getFarAtom=function(e){if(void 0!==e.farAtom)return e.farAtom;e.farAtom=e.atoms[0];for(var t=0,n=0;n<e.atoms.length;n++){var r=e.atoms[n],a=i[r.symbol].radius,o=2.5*Math.sqrt(a*a+a*a+a*a),s=Math.sqrt(r.x*r.x+r.y*r.y+r.z*r.z)+o;s>t&&(t=s,e.farAtom=r)}return e.farAtom});e.exports.getRadius=function(e){var t=s(e),n=a.MAX_ATOM_RADIUS,r=2.5*Math.sqrt(n*n+n*n+n*n);return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)+r}},function(e,t,n){var a;a=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rnaPlot=t.RNAGraph=void 0;var a=n(1);Object.defineProperty(t,"RNAGraph",{enumerable:!0,get:function(){return a.RNAGraph}});var o=n(3);Object.defineProperty(t,"rnaPlot",{enumerable:!0,get:function(){return o.rnaPlot}}),t.FornaContainer=function(e,t){var n=this;if(n.options={displayAllLinks:!1,labelInterval:10,applyForce:!0,chargeDistance:110,friction:.35,middleCharge:-30,otherCharge:-30,linkDistanceMultiplier:15,initialSize:null,layout:"standard-polygonal",allowPanningAndZooming:!0,transitionDuration:500,resizeSvgOnResize:!0},arguments.length>1)for(var o in t)n.options.hasOwnProperty(o)&&(n.options[o]=t[o]);null!==n.options.initialSize?(n.options.svgW=n.options.initialSize[0],n.options.svgH=n.options.initialSize[1]):(n.options.svgW=800,n.options.svgH=800),c.default.scale.category20();var s=null,u=null,p=c.default.scale.linear().domain([0,n.options.svgW]).range([0,n.options.svgW]),d=c.default.scale.linear().domain([0,n.options.svgH]).range([0,n.options.svgH]),g=n.graph={nodes:[],links:[]};function v(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function m(e){var t=e,n=e.prevNode;if(null!==n&&e.linked){var r=[-(t.x-n.x),-(t.y-n.y)],i=[-(r=[r[0]/v(r),r[1]/v(r)])[1],r[0]],a=[e.radius*r[0],e.radius*r[1]],o="M"+(a[0]+6*(r[0]+i[0])/2)+","+(a[1]+6*(r[1]+i[1])/2)+"L"+a[0]+","+a[1]+"L"+(a[0]+6*(r[0]-i[0])/2)+","+(a[1]+6*(r[1]-i[1])/2);c.default.select(this).attr("d",o)}}function y(e){return"basepair"==e.linkType||"backbone"==e.linkType||"pseudoknot"==e.linkType||"label_link"==e.linkType||"external"==e.linkType||"chain_chain"==e.linkType}function b(e,t,n){if(e.hasOwnProperty(t.num)){var r=parseFloat(e[t.num]);return isNaN(r)?e[t.num]:n(r)}return"white"}function w(){}function x(){s&&(mpos=c.default.mouse(R.node()),L.attr("x1",s.x).attr("y1",s.y).attr("x2",mpos[0]).attr("y2",mpos[1]))}function k(){s&&L.attr("class","drag_line_hidden"),I()}n.linkStrengths={pseudoknot:0,proteinChain:0,chainChain:0,intermolecule:10,external:0,other:10},n.displayParameters={displayBackground:"true",displayNumbering:"true",displayNodeOutline:"true",displayNodeLabel:"true",displayLinks:"true",displayPseudoknotLinks:"true",displayProteinLinks:"true"},n.colorScheme="structure",n.customColors={},n.animation=n.options.applyForce,n.deaf=!1,n.rnas={},n.extraLinks=[],Array.prototype.equals=function(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var t=0,n=this.length;t<n;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]!=e[t])return!1;return!0},n.createInitialLayout=function(e,t){var r={sequence:"",name:"empty",positions:[],labelInterval:n.options.labelInterval,avoidOthers:!0,uids:[],circularizeExternal:!0};if(2==arguments.length)for(var i in t)r.hasOwnProperty(i)&&(r[i]=t[i]);var o=new a.RNAGraph(r.sequence,e,r.name);o.circularizeExternal=r.circularizeExternal;var s=o.recalculateElements();if(0===r.positions.length)if("naview"==n.options.layout){var u=new f.NAView,c=u.naview_xy_coordinates(o.pairtable);r.positions=[];for(var h=0;h<c.nbase;h++)r.positions.push([c.x[h],c.y[h]])}else r.positions=(0,l.simpleXyCoordinates)(s.pairtable);return s=s.elementsToJson().addUids(r.uids).addPositions("nucleotide",r.positions).addLabels(1,r.labelInterval).reinforceStems().reinforceLoops().connectFakeNodes().reassignLinkUids().breakNodesToFakeNodes()},n.addRNA=function(e,t){var r=n.createInitialLayout(e,t);if(1===arguments.length&&(t={}),"extraLinks"in t){var i=n.addExternalLinks(r,t.extraLinks);n.extraLinks=n.extraLinks.concat(i)}return"avoidOthers"in t?n.addRNAJSON(r,t.avoidOthers):n.addRNAJSON(r,!0),r},n.addExternalLinks=function(e,t){for(var n=[],r=0;r<t.length;r++){var i={linkType:"external",value:1,uid:generateUUID(),source:null,target:null};if("[object Array]"===Object.prototype.toString.call(t[r][0])){for(var a=0;a<e.nodes.length;a++)if("nucs"in e.nodes[a]&&e.nodes[a].nucs.equals(t[r][0])){i.source=e.nodes[a];break}}else for(a=0;a<e.nodes.length;a++)e.nodes[a].num==t[r][0]&&(i.source=e.nodes[a]);if("[object Array]"===Object.prototype.toString.call(t[r][1]))for(a=0;a<e.nodes.length;a++)"nucs"in e.nodes[a]&&e.nodes[a].nucs.equals(t[r][1])&&(i.target=e.nodes[a]);else for(a=0;a<e.nodes.length;a++)e.nodes[a].num==t[r][1]&&(i.target=e.nodes[a]);null!=i.source&&null!=i.target?n.push(i):console.log("ERROR: source or target of new link not found:",i,t[r])}return n},n.addRNAJSON=function(e,t){var r,i;return t&&(r=n.graph.nodes.length>0?c.default.max(n.graph.nodes.map((function(e){return e.x}))):0,i=c.default.min(e.nodes.map((function(e){return e.x}))),e.nodes.forEach((function(e){e.x+=r-i+20,e.px+=r-i}))),e.nodes.forEach((function(t){t.rna=e})),n.rnas[e.uid]=e,n.recalculateGraph(),n.update(),n.centerView(),e},n.transitionRNA=function(e,t){var r=n.options.transitionDuration,i={uids:n.graph.nodes.filter((function(e){return"nucleotide"==e.nodeType})).map((function(e){return e.uid}))},a=n.createInitialLayout(e,i),o=A.selectAll("g.gnode").data(a.nodes,V);0===(r=n.options.transitionDuration)?o.attr("transform",(function(e){return"translate("+[e.x,e.y]+")"})):o.transition().attr("transform",(function(e){return"translate("+[e.x,e.y]+")"})).duration(r);var s=E.selectAll("line.link").data(a.links.filter(y),q),u=n.createNewNodes(o.enter()).attr("transform",(function(e){return void 0!==e.x&&void 0!==e.y?"translate("+[0,0]+")":""}));0===r?o.exit().remove():o.exit().transition().attr("transform",(function(e){return void 0!==e.x&&void 0!==e.y?"translate("+[0,0]+")":""})),o.select("path").each(m),n.graph.nodes=o.data(),n.updateStyle(),n.centerView(r),s.exit().remove(),0===r?(s.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),n.createNewLinks(s.enter()),n.graph.links=s.data(),n.updateStyle()):s.transition().attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})).duration(r).call((function(e,t){0===e.size()&&setTimeout(t,r);var n=0;e.each((function(){++n})).each("end",(function(){--n||t.apply(this,arguments)}))}),(function(){n.createNewLinks(s.enter()),n.graph.links=s.data(),n.updateStyle(),void 0!==t&&t()})),0===r?u.attr("transform",(function(e){return void 0!==e.x&&void 0!==e.y?"translate("+[e.x,e.y]+")":""})):u.transition().attr("transform",(function(e){return void 0!==e.x&&void 0!==e.y?"translate("+[e.x,e.y]+")":""}))},n.recalculateGraph=function(){for(var e in n.graph.nodes=[],n.graph.links=[],n.rnas)n.graph.nodes=n.graph.nodes.concat(n.rnas[e].nodes),n.graph.links=n.graph.links.concat(n.rnas[e].links);for(var t={},r=0;r<n.graph.nodes.length;r++)t[n.graph.nodes[r].uid]=n.graph.nodes[r];for(n.graph.links.forEach((function(e){e.source=t[e.source.uid],e.target=t[e.target.uid]})),r=0;r<n.extraLinks.length;r++){if(n.extraLinks[r].target.uid in t||console.log("not there:",n.extraLinks[r]),n.extraLinks[r].source=t[n.extraLinks[r].source.uid],n.extraLinks[r].target=t[n.extraLinks[r].target.uid],"intermolecule"==n.extraLinks[r].linkType){fakeLinks=n.graph.links.filter((function(e){return(e.source==n.extraLinks[r].source||e.source==n.extraLinks[r].target||e.target==n.extraLinks[r].source||e.target==n.extraLinks[r].source)&&"fake"==e.linkType}));for(var i=0;i<fakeLinks.length;i++){var a=n.graph.links.indexOf(fakeLinks[i]);n.graph.links.splice(a,1)}}g.links.push(n.extraLinks[r])}},n.addNodes=function(e){e.links.forEach((function(t){"number"==typeof t.source&&(t.source=e.nodes[t.source]),"number"==typeof t.target&&(t.target=e.nodes[t.target])})),n.graph.nodes.length>0?(maxX=c.default.max(n.graph.nodes.map((function(e){return e.x}))),maxY=c.default.max(n.graph.nodes.map((function(e){return e.y})))):(maxX=0,maxY=0),e.nodes.forEach((function(e){e.rna.uid in n.rnas||(n.rnas[e.rna.uid]=e.rna),e.x+=maxX,e.px+=maxX})),r=new a.RNAGraph("",""),r.nodes=e.nodes,r.links=e.links,n.recalculateGraph(),n.update(),n.centerView()},n.addCustomColors=function(e){n.customColors=e},n.addCustomColorsText=function(e){var t=new h.ColorScheme(e);n.customColors=t.colorsJson,n.changeColorScheme("custom")},n.clearNodes=function(){n.graph.nodes=[],n.graph.links=[],n.rnas={},n.extraLinks=[],n.update()},n.toJSON=function(){var e={rnas:n.rnas,extraLinks:n.extraLinks};return JSON.stringify(e,(function(e,t){return"rna"==e?void 0:t}),"\t")},n.fromJSON=function(e){var t,i;try{var o=JSON.parse(e);t=o.rnas,i=o.extraLinks}catch(e){throw e}for(var s in t)"rna"==t[s].type?(r=new a.RNAGraph,r.seq=t[s].seq,r.dotbracket=t[s].dotbracket,r.circular=t[s].circular,r.pairtable=t[s].pairtable,r.uid=t[s].uid,r.structName=t[s].structName,r.nodes=t[s].nodes,r.links=t[s].links,r.rnaLength=t[s].rnaLength,r.elements=t[s].elements,r.nucsToNodes=t[s].nucsToNodes,r.pseudoknotPairs=t[s].pseudoknotPairs):(r=new ProteinGraph,r.size=t[s].size,r.nodes=t[s].nodes,r.uid=t[s].uid),n.addRNAJSON(r,!1);i.forEach((function(e){n.extraLinks.push(e)})),n.recalculateGraph(),n.update()},n.setSize=function(){if(null==n.options.initialSize){var t=c.default.select(e).node().offsetHeight,r=c.default.select(e).node().offsetWidth;n.options.svgW=r,n.options.svgH=t,p.range([0,r]).domain([0,r]),d.range([0,t]).domain([0,t]),n.zoomer.x(p).y(d),n.brusher.x(p).y(d),n.centerView(),n.options.resizeSvgOnResize&&S.attr("width",r).attr("height",t)}},n.setOutlineColor=function(e){A.selectAll("g.gnode").select("[node_type=nucleotide]").style("fill",e)},n.changeColorScheme=function(e){A.selectAll("[node_type=protein]").classed("protein",!0).attr("r",(function(e){return e.radius})),A.selectAll("g.gnode"),A.selectAll("g.gnode").selectAll("circle");var t=A.selectAll("g.gnode").select("[node_type=nucleotide]");if(n.colorScheme=e,"sequence"==e){var r=c.default.scale.ordinal().range(["#dbdb8d","#98df8a","#ff9896","#aec7e8","#aec7e8"]).domain(["A","C","G","U","T"]);t.style("fill",(function(e){return r(e.name)}))}else"structure"==e?(r=c.default.scale.category10().domain(["s","m","i","e","t","h","x"]).range(["lightgreen","#ff9896","#dbdb8d","lightsalmon","lightcyan","lightblue","transparent"]),t.style("fill",(function(e){return r(e.elemType)}))):"positions"==e?t.style("fill",(function(e){return c.default.scale.linear().range(["#98df8a","#dbdb8d","#ff9896"]).interpolate(c.default.interpolateLab).domain([1,1+(e.rna.rnaLength-1)/2,e.rna.rnaLength])(e.num)})):"custom"==e&&(void 0!==n.customColors&&"domain"in n.customColors&&"range"in n.customColors&&(r=c.default.scale.linear().interpolate(c.default.interpolateLab).domain(n.customColors.domain).range(n.customColors.range)),t.style("fill",(function(e){return void 0!==n.customColors&&n.customColors.hasOwnProperty("colorValues")?n.customColors.colorValues.hasOwnProperty(e.structName)&&n.customColors.colorValues[e.structName].hasOwnProperty(e.num)?b(n.customColors.colorValues[e.structName],e,r):n.customColors.colorValues.hasOwnProperty("")?b(n.customColors.colorValues[""],e,r):"white":"white"})))},window.addEventListener("resize",n.setSize,!1),n.zoomer=c.default.behavior.zoom().scaleExtent([.1,10]).x(p).y(d).on("zoomstart",T).on("zoom",M),c.default.select(e).select("svg").remove();var S=c.default.select(e).classed("forna-container",!0).attr("tabindex",1).on("keydown.brush",H).on("keyup.brush",j).each((function(){this.focus()})).append("svg:svg").attr("width",n.options.svgW).attr("height",n.options.svgH).attr("id","plotting-area");n.options.svg=S;var _=S.append("svg:g").on("mousemove",x).on("mousedown",w).on("mouseup",k);n.options.allowPanningAndZooming&&_.call(n.zoomer);var C=_.append("g").datum((function(){return{selected:!1,previouslySelected:!1}})).attr("class","brush"),R=_.append("svg:g"),E=R.append("svg:g"),A=R.append("svg:g");function T(){var e=A.selectAll("g.gnode").selectAll(".outline_node");e.each((function(e){e.selected=!1,e.previouslySelected=!1})),e.classed("selected",!1)}function M(){R.attr("transform","translate("+c.default.event.translate+") scale("+c.default.event.scale+")")}n.brusher=c.default.svg.brush().x(p).y(d).on("brushstart",(function(e){A.selectAll("g.gnode").selectAll(".outline_node").each((function(e){e.previouslySelected=N&&e.selected}))})).on("brush",(function(){var e=A.selectAll("g.gnode").selectAll(".outline_node"),t=c.default.event.target.extent();e.classed("selected",(function(e){return e.selected=n.options.applyForce&&e.previouslySelected^(t[0][0]<=e.x&&e.x<t[1][0]&&t[0][1]<=e.y&&e.y<t[1][1])}))})).on("brushend",(function(){c.default.event.target.clear(),c.default.select(this).call(c.default.event.target)})),C.call(n.brusher).on("mousedown.brush",null).on("touchstart.brush",null).on("touchmove.brush",null).on("touchend.brush",null),C.select(".background").style("cursor","auto"),n.getBoundingBoxTransform=function(){if(0===n.graph.nodes.length)return{translate:[0,0],scale:1};var e=c.default.min(n.graph.nodes.map((function(e){return e.x}))),t=c.default.min(n.graph.nodes.map((function(e){return e.y}))),r=c.default.max(n.graph.nodes.map((function(e){return e.x})))-e,i=c.default.max(n.graph.nodes.map((function(e){return e.y})))-t,a=n.options.svgW/(r+1),o=n.options.svgH/(i+1),s=.8*Math.min(a,o),u=r*s,l=i*s;return{translate:[-e*s+(n.options.svgW-u)/2,-t*s+(n.options.svgH-l)/2],scale:s}},n.centerView=function(e){0===arguments.length&&(e=0);var t=n.getBoundingBoxTransform();null!==t&&(R.transition().attr("transform","translate("+t.translate+") scale("+t.scale+")").duration(e),n.zoomer.translate(t.translate),n.zoomer.scale(t.scale))},n.force=c.default.layout.force().charge((function(e){return"middle"==e.nodeType?n.options.middleCharge:n.options.otherCharge})).friction(n.options.friction).linkDistance((function(e){return n.options.linkDistanceMultiplier*e.value})).linkStrength((function(e){return e.linkType in n.linkStrengths?n.linkStrengths[e.linkType]:n.linkStrengths.other})).gravity(0).nodes(n.graph.nodes).links(n.graph.links).chargeDistance(n.options.chargeDistance).size([n.options.svgW,n.options.svgH]);var L=R.append("line").attr("class","drag_line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0);function I(){s=null,u=null}var P=!1,N=!1;function O(e){var t=A.selectAll("g.gnode");return t.filter((function(e){return e.selected}))}function F(e){c.default.event.sourceEvent.stopPropagation(),e.selected||N||A.selectAll("g.gnode").selectAll(".outline_node").classed("selected",(function(e){return e.selected=n.options.applyForce&&(e.previouslySelected=!1)})),c.default.select(this).select(".outline_node").classed("selected",(function(t){return e.previouslySelected=e.selected,e.selected=n.options.applyForce&&!0})),O().each((function(e){e.fixed|=2}))}function D(e){O().each((function(e){e.x+=c.default.event.dx,e.y+=c.default.event.dy,e.px+=c.default.event.dx,e.py+=c.default.event.dy})),n.resumeForce(),c.default.event.sourceEvent.preventDefault()}function B(e){O().each((function(e){e.fixed&=-7}))}function z(e){var t=e.radius+16,n=e.x-t,r=e.x+t,i=e.y-t,a=e.y+t;return function(t,o,s,u,c){if(t.point&&t.point!==e){var l=e.x-t.point.x,h=e.y-t.point.y,f=Math.sqrt(l*l+h*h),p=e.radius+t.point.radius;f<p&&(f=(f-p)/f*.1,e.x-=l*=f,e.y-=h*=f,t.point.x+=l,t.point.y+=h)}return o>r||u<n||s>a||c<i}}n.resumeForce=function(){n.animation&&n.force.resume()};var U=c.default.behavior.drag().on("dragstart",F).on("drag",D).on("dragend",B);function H(){if(!n.deaf&&!P){switch(c.default.event.keyCode){case 16:P=!0;break;case 17:N=!0;break;case 67:n.centerView()}(P||N)&&(_.call(n.zoomer).on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),R.selectAll("g.gnode").on("mousedown.drag",null)),N&&(C.select(".background").style("cursor","crosshair"),C.call(n.brusher))}}function j(){P=!1,N=!1,C.call(n.brusher).on("mousedown.brush",null).on("touchstart.brush",null).on("touchmove.brush",null).on("touchend.brush",null),C.select(".background").style("cursor","auto"),_.call(n.zoomer),R.selectAll("g.gnode").call(U)}c.default.select(e).on("keydown",H).on("keyup",j).on("contextmenu",(function(){c.default.event.preventDefault()}));var q=function(e){return e.uid},V=function(e){return e.uid},G=function(e){var t=e.getPositions("nucleotide"),r=e.getPositions("label"),i=e.getUids();e.recalculateElements().elementsToJson().addPseudoknots().addPositions("nucleotide",t).addUids(i).addLabels(1,n.options.labelInterval).addPositions("label",r).reinforceStems().reinforceLoops().updateLinkUids()},W=function(e){if(index=n.graph.links.indexOf(e),index>-1){if(e.source.rna==e.target.rna){var t=e.source.rna;t.addPseudoknots(),t.pairtable[e.source.num]=0,t.pairtable[e.target.num]=0,G(t)}else extraLinkIndex=n.extraLinks.indexOf(e),n.extraLinks.splice(extraLinkIndex,1);n.recalculateGraph()}n.update()},$=function(e){P&&(e.linkType in{backbone:!0,fake:!0,fake_fake:!0,label_link:!0}||W(e))};n.addLink=function(e){e.source.rna==e.target.rna?(r=e.source.rna,r.pairtable[e.source.num]=e.target.num,r.pairtable[e.target.num]=e.source.num,G(r)):(e.linkType="intermolecule",n.extraLinks.push(e)),n.recalculateGraph(),n.update()};var Y=function(e){c.default.event.defaultPrevented||(N||A.selectAll("g.gnode").selectAll(".outline_node").classed("selected",(function(e){return e.selected=n.options.applyForce&&(e.previouslySelected=!1)})),c.default.select(this).select("circle").classed("selected",e.selected=n.options.applyForce&&!e.previouslySelected))},X=function(e){if(s){if((u=e)==s)return void I();var t={source:s,target:u,linkType:"basepair",value:1,uid:generateUUID()};for(i=0;i<n.graph.links.length;i++){if(!(n.graph.links[i].source!=s&&n.graph.links[i].target!=s&&n.graph.links[i].source!=u&&n.graph.links[i].target!=u||"basepair"!=n.graph.links[i].linkType&&"pseudoknot"!=n.graph.links[i].linkType))return;if((n.graph.links[i].source==u&&n.graph.links[i].target==s||n.graph.links[i].source==s&&n.graph.links[i].target==u)&&"backbone"==n.graph.links[i].linkType)return}if("middle"==u.nodeType||"middle"==s.nodeType||"label"==u.nodeType||"label"==s.nodeType)return;n.addLink(t)}},Z=function(e){e.selected||N||A.selectAll("g.gnode").selectAll(".outline_node").classed("selected",(function(e){return e.selected=e.previouslySelected=!1})),c.default.select(this).classed("selected",(function(t){return e.previouslySelected=e.selected,e.selected=n.options.applyForce&&!0})),P&&(s=e,L.attr("class","drag_line").attr("x1",s.x).attr("y1",s.y).attr("x2",s.x).attr("y2",s.y))};n.startAnimation=function(){n.animation=!0,R.selectAll("g.gnode").call(U),n.force.start()},n.stopAnimation=function(){n.animation=!1,R.selectAll("g.gnode").on("mousedown.drag",null),n.force.stop()},n.setFriction=function(e){n.force.friction(e),n.resumeForce()},n.setCharge=function(e){n.force.charge(e),n.resumeForce()},n.setGravity=function(e){n.force.gravity(e),n.resumeForce()},n.setPseudoknotStrength=function(e){n.linkStrengths.pseudoknot=e,n.update()},n.displayBackground=function(e){n.displayParameters.displayBackground=e,n.updateStyle()},n.displayNumbering=function(e){n.displayParameters.displayNumbering=e,n.updateStyle()},n.displayNodeOutline=function(e){n.displayParameters.displayNodeOutline=e,n.updateStyle()},n.displayNodeLabel=function(e){n.displayParameters.displayNodeLabel=e,n.updateStyle()},n.displayLinks=function(e){n.displayParameters.displayLinks=e,n.updateStyle()},n.displayPseudoknotLinks=function(e){n.displayParameters.displayPseudoknotLinks=e,n.updateStyle()},n.displayProteinLinks=function(e){n.displayParameters.displayProteinLinks=e,n.updateStyle()},n.updateStyle=function(){A.selectAll("[node_type=label]").classed("transparent",!n.displayParameters.displayNumbering),A.selectAll("[label_type=label]").classed("transparent",!n.displayParameters.displayNumbering),E.selectAll("[linkType=label_link]").classed("transparent",!n.displayParameters.displayNumbering),S.selectAll("circle").classed("hidden_outline",!n.displayParameters.displayNodeOutline),A.selectAll("[label_type=nucleotide]").classed("transparent",!n.displayParameters.displayNodeLabel),S.selectAll("[link_type=real],[link_type=basepair],[link_type=backbone],[link_type=pseudoknot],[link_type=protein_chain],[link_type=chain_chain],[link_type=external]").classed("transparent",!n.displayParameters.displayLinks),S.selectAll("[link_type=pseudoknot]").classed("transparent",!n.displayParameters.displayPseudoknotLinks),S.selectAll("[link_type=protein_chain]").classed("transparent",!n.displayParameters.displayProteinLinks),E.selectAll("[link_type=fake]").classed("transparent",!n.options.displayAllLinks),E.selectAll("[link_type=fake_fake]").classed("transparent",!n.options.displayAllLinks)},n.createNewLinks=function(e){var t=e.append("svg:line");return t.append("svg:title").text(q),t.classed("link",!0).attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})).attr("link_type",(function(e){return e.linkType})).attr("class",(function(e){return c.default.select(this).attr("class")+" "+e.linkType})).attr("pointer-events",(function(e){return"fake"==e.linkType?"none":"all"})),t},n.createNewNodes=function(e){(e=e.append("g").classed("noselect",!0).classed("gnode",!0).attr("struct_name",(function(e){return e.structName})).attr("transform",(function(e){return void 0!==e.x&&void 0!==e.y?"translate("+[e.x,e.y]+")":""})).each((function(e){e.selected=e.previouslySelected=!1}))).call(U).on("mousedown",Z).on("mousedrag",(function(e){})).on("mouseup",X).attr("num",(function(e){return"n"+e.num})).attr("rnum",(function(e){return"n"+(e.rna.rnaLength-e.num+1)})).on("click",Y).transition().duration(750).ease("elastic");var t=e.filter((function(e){return"label"==e.nodeType||"protein"==e.nodeType})),n=e.filter((function(e){return"nucleotide"==e.nodeType}));return t.append("svg:circle").attr("class","outline_node").attr("r",(function(e){return e.radius+1})),n.append("svg:circle").attr("class","outline_node").attr("r",(function(e){return e.radius+1})),t.append("svg:circle").attr("class","node").classed("label",(function(e){return"label"==e.nodeType})).attr("r",(function(e){return"middle"==e.nodeType?0:e.radius})).attr("node_type",(function(e){return e.nodeType})).attr("node_num",(function(e){return e.num})),n.append("svg:circle").attr("class","node").attr("node_type",(function(e){return e.nodeType})).attr("node_num",(function(e){return e.num})).attr("r",(function(e){return e.radius})).append("svg:title").text((function(e){return"nucleotide"==e.nodeType?e.structName+":"+e.num:""})),n.append("svg:path").attr("class","node").attr("node_type",(function(e){return e.nodeType})).attr("node_num",(function(e){return e.num})).append("svg:title").text((function(e){return"nucleotide"==e.nodeType?e.structName+":"+e.num:""})),e.append("text").text((function(e){return e.name})).attr("text-anchor","middle").attr("font-size",8).attr("font-weight","bold").attr("y",2.5).attr("class","node-label").attr("label_type",(function(e){return e.nodeType})).append("svg:title").text((function(e){return"nucleotide"==e.nodeType?e.structName+":"+e.num:""})),e},n.update=function(){n.force.nodes(n.graph.nodes).links(n.graph.links),n.animation&&n.force.start();var e=E.selectAll("line.link").data(n.graph.links.filter(y),q);e.attr("class","").classed("link",!0).attr("link_type",(function(e){return e.linkType})).attr("class",(function(e){return c.default.select(this).attr("class")+" "+e.linkType}));var t=e.enter();n.createNewLinks(t),e.exit().remove(),c.default.scale.category10().domain([0,1,2,3,4,5,6,7,8,9]);var r=A.selectAll("g.gnode").data(n.graph.nodes,V),i=r.enter();n.createNewNodes(i),r.exit().remove();var a,o=n.graph.nodes.filter((function(e){return"nucleotide"==e.nodeType||"label"==e.nodeType}));a=n.displayFakeLinks?e:E.selectAll("[link_type=real],[link_type=pseudoknot],[link_type=protein_chain],[link_type=chain_chain],[link_type=label_link],[link_type=backbone],[link_type=basepair],[link_type=intermolecule],[link_type=external]"),r.selectAll("path").each(m),a.on("click",$),n.force.on("tick",(function(){for(var e=c.default.geom.quadtree(o),t=0,n=o.length;++t<n;)e.visit(z(o[t]));a.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),r.attr("transform",(function(e){return"translate("+[e.x,e.y]+")"})),r.select("path").each(m)})),n.changeColorScheme(n.colorScheme),n.animation&&n.force.start(),n.updateStyle()},n.setSize()},n(15);var s,u=n(17),c=(s=u)&&s.__esModule?s:{default:s},l=n(4),h=n(2),f=n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProteinGraph=o,t.RNAGraph=s,t.moleculesToJson=function(e){for(var t={},n=[],r=[],i=0;i<e.molecules.length;i++){var u,c=e.molecules[i];"rna"==c.type?((u=new s(c.seq,c.ss,c.header)).circularizeExternal=!0,u.elementsToJson().addPositions("nucleotide",c.positions).addLabels().reinforceStems().reinforceLoops()):"protein"==c.type&&(u=new o(c.header,c.size)),u.addUids(c.uids);for(var l=0;l<u.nodes.length;l++)t[u.nodes[l].uid]=u.nodes[l];n.push(u)}for(i=0;i<e.extraLinks.length;i++)link=e.extraLinks[i],link.source=t[link.source],link.target=t[link.target],link.uid=a(),r.push(link);return{graphs:n,extraLinks:r}};var r=n(2),i=function(e,t){return e-t};function a(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}function o(e,t,n){var r=this;r.type="protein",r.size=t,r.nodes=[{name:"P",num:1,radius:3*Math.sqrt(t),rna:r,nodeType:"protein",structName:e,elemType:"p",size:t,uid:a()}],r.links=[],r.uid=a(),r.addUids=function(e){for(var t=0;t<e.length;t++)r.nodes[t].uid=e[t];return r},r.getUids=function(){uids=[];for(var e=0;e<r.dotbracket.length;e++)uids.push(r.nodes[e].uid);return uids}}function s(e,t,n,o){var s=this;s.type="rna",s.circularizeExternal=!1,0===arguments.length?(s.seq="",s.dotbracket="",s.structName=""):(s.seq=e,s.dotbracket=t,s.structName=n),arguments.length<4&&(o=1),s.circular=!1,s.dotbracket.length>0&&"*"==s.dotbracket[s.dotbracket.length-1]&&(s.dotbracket=s.dotbracket.slice(0,s.dotbracket.length-1),s.circular=!0),s.uid=a(),s.elements=[],s.pseudoknotPairs=[],s.nucsToNodes={},s.addUids=function(e){for(var t=s.nodes.filter((function(e){return"nucleotide"==e.nodeType})),n=0;n<e.length&&n<t.length;n++)t[n].uid=e[n];return s},s.computePairtable=function(){s.pairtable=r.rnaUtilities.dotbracketToPairtable(s.dotbracket)},s.removeBreaks=function(e){for(var t=[],n=-1;(n=e.indexOf("&"))>=0;)t.push(n),e=e.substring(0,n)+"oo"+e.substring(n+1,e.length);return{targetString:e,breaks:t}};var u=s.removeBreaks(s.dotbracket);s.dotbracket=u.targetString,s.dotBracketBreaks=u.breaks,u=s.removeBreaks(s.seq),s.seq=u.targetString,s.seqBreaks=u.breaks,s.calculateStartNumberArray=function(){s.startNumberArray=[];for(var e=0;e<s.dotbracket.length;e++)s.startNumberArray.push(o),"o"==s.dotbracket[e]&&(o=-e)},s.calculateStartNumberArray(),s.rnaLength=s.dotbracket.length,(0,r.arraysEqual)(s.dotBracketBreaks,s.seqBreaks)||(console.log("WARNING: Sequence and structure breaks not equal"),console.log("WARNING: Using the breaks in the structure")),s.computePairtable(),s.addPositions=function(e,t){for(var n=s.nodes.filter((function(t){return t.nodeType==e})),r=0;r<n.length;r++)n[r].x=t[r][0],n[r].px=t[r][0],n[r].y=t[r][1],n[r].py=t[r][1];return s},s.breakNodesToFakeNodes=function(){for(var e=s.nodes.filter((function(e){return"nucleotide"==e.nodeType})),t=0;t<e.length;t++)"o"==s.dotbracket[t]&&(e[t].nodeType="middle");for(t=0;t<s.elements.length;t++){for(var n=!1,r=0;r<s.elements[t][2].length;r++)s.dotBracketBreaks.indexOf(s.elements[t][2][r])>=0&&(n=!0);n?s.elements[t][2].map((function(e){0!=e&&(s.nodes[e-1].elemType="e")})):s.elements[t][2].map((function(e){0!=e&&(s.nodes[e-1].elemType=s.elements[t][0])}))}return s},s.getPositions=function(e){for(var t=[],n=s.nodes.filter((function(t){return t.nodeType==e})),r=0;r<n.length;r++)t.push([n[r].x,n[r].y]);return t},s.getUids=function(){for(var e=[],t=0;t<s.dotbracket.length;t++)e.push(s.nodes[t].uid);return e},s.reinforceStems=function(){for(var e=s.pairtable,t=s.elements.filter((function(e){return"s"==e[0]&&e[2].length>=4})),n=0;n<t.length;n++)for(var r=t[n][2],i=r.slice(0,r.length/2),a=0;a<i.length-1;a++)s.addFakeNode([i[a],i[a+1],e[i[a+1]],e[i[a]]]);return s},s.reinforceLoops=function(){for(var e=function(e){return 0!==e&&e<=s.dotbracket.length},t=0;t<s.elements.length;t++)if("s"!=s.elements[t][0]&&(s.circularizeExternal||"e"!=s.elements[t][0])){var n=s.elements[t][2].filter(e);if("e"==s.elements[t][0]){var r={name:"",num:-3,radius:0,rna:s,nodeType:"middle",elemType:"f",nucs:[],x:s.nodes[s.rnaLength-1].x,y:s.nodes[s.rnaLength-1].y,px:s.nodes[s.rnaLength-1].px,py:s.nodes[s.rnaLength-1].py,uid:a()},i={name:"",num:-2,radius:0,rna:s,nodeType:"middle",elemType:"f",nucs:[],x:s.nodes[0].x,y:s.nodes[0].y,px:s.nodes[0].px,py:s.nodes[0].py,uid:a()};n.push(s.nodes.length+1),n.push(s.nodes.length+2),s.nodes.push(r),s.nodes.push(i)}s.addFakeNode(n)}return s},s.updateLinkUids=function(){for(var e=0;e<s.links.length;e++)s.links[e].uid=s.links[e].source.uid+s.links[e].target.uid;return s},s.addFakeNode=function(e){for(var t=6.283/(2*e.length),n=18/(2*Math.tan(t)),r="",i=0;i<e.length;i++)r+=s.nodes[e[i]-1].uid;var o={name:"",num:-1,radius:n,rna:s,nodeType:"middle",elemType:"f",nucs:e,uid:r};s.nodes.push(o);var u=0,c=0,l=0;t=3.14159*(e.length-2)/(2*e.length),n=.5/Math.cos(t);for(var h=0;h<e.length;h++)if(!(0===e[h]||e[h]>s.dotbracket.length)){s.links.push({source:s.nodes[e[h]-1],target:s.nodes[s.nodes.length-1],linkType:"fake",value:n,uid:a()}),e.length>4&&s.links.push({source:s.nodes[e[h]-1],target:s.nodes[e[(h+Math.floor(e.length/2))%e.length]-1],linkType:"fake",value:2*n,uid:a()});var f=3.14159*(e.length-2)/e.length,p=2*Math.cos(1.570795-f/2);s.links.push({source:s.nodes[e[h]-1],target:s.nodes[e[(h+2)%e.length]-1],linkType:"fake",value:p});var d=s.nodes[e[h]-1];"x"in d&&(u+=d.x,c+=d.y,l+=1)}return l>0&&(o.x=u/l,o.y=c/l,o.px=o.x,o.py=o.y),s},s.connectFakeNodes=function(){for(var e={},t=s.nodes.filter((function(e){return"middle"==e.nodeType})),n=new Set,r=1;r<=s.nodes.length;r++)e[r]=[];for(r=0;r<t.length;r++)for(var i=t[r],a=0;a<i.nucs.length;a++){for(var o=i.nucs[a],u=0;u<e[o].length;u++)if(!n.has(JSON.stringify([e[o][u].uid,i.uid].sort()))){var c=e[o][u].radius+i.radius;s.links.push({source:e[o][u],target:i,value:c/18,linkType:"fake_fake"}),n.add(JSON.stringify([e[o][u].uid,i.uid].sort()))}e[o].push(i)}return s},s.addExtraLinks=function(e){if(void 0===e)return s;for(var t=0;t<e.length;t++){var n={source:s.getNodeFromNucleotides(e[t].from),target:s.getNodeFromNucleotides(e[t].to),linkType:"extra",extraLinkType:e[t].linkType,uid:a()};s.links.push(n)}return s},s.elementsToJson=function(){var e=s.pairtable;s.elements,s.nodes=[],s.links=[];var t={};s.elements.sort();for(var n=0;n<s.elements.length;n++)for(var r=s.elements[n][2],i=0;i<r.length;i++)t[r[i]]=s.elements[n][0];for(n=1;n<=e[0];n++){var o=s.seq[n-1];(s.dotBracketBreaks.indexOf(n-1)>=0||s.dotBracketBreaks.indexOf(n-2)>=0)&&(o=""),s.nodes.push({name:o,num:n+s.startNumberArray[n-1]-1,radius:5,rna:s,nodeType:"nucleotide",structName:s.structName,elemType:t[n],uid:a(),linked:!1})}for(n=0;n<s.nodes.length;n++)s.nodes[n].prevNode=0===n?null:s.nodes[n-1],n==s.nodes.length-1?s.nodes[n].nextNode=null:s.nodes[n].nextNode=s.nodes[n+1];for(n=1;n<=e[0];n++)0!==e[n]&&s.links.push({source:s.nodes[n-1],target:s.nodes[e[n]-1],linkType:"basepair",value:1,uid:a()}),n>1&&-1===s.dotBracketBreaks.indexOf(n-1)&&-1==s.dotBracketBreaks.indexOf(n-2)&&-1==s.dotBracketBreaks.indexOf(n-3)&&(s.links.push({source:s.nodes[n-2],target:s.nodes[n-1],linkType:"backbone",value:1,uid:a()}),s.nodes[n-1].linked=!0);for(n=0;n<s.pseudoknotPairs.length;n++)s.links.push({source:s.nodes[s.pseudoknotPairs[n][0]-1],target:s.nodes[s.pseudoknotPairs[n][1]-1],linkType:"pseudoknot",value:1,uid:a()});return s.circular&&s.links.push({source:s.nodes[0],target:s.nodes[s.rnaLength-1],linkType:"backbone",value:1,uid:a()}),s},s.ptToElements=function(e,t,n,r){var a=[],o=[n-1],u=[r+1];if(n>r)return[];for(;0===e[n];n++)o.push(n);for(;0===e[r];r--)u.push(r);if(n>r){if(o.push(n),0===t)return[["e",t,o.sort(i)]];for(var c=!1,l=[],h=[],f=0;f<o.length;f++)c?h.push(o[f]):l.push(o[f]),s.dotBracketBreaks.indexOf(o[f])>=0&&(c=!0);return[["h",t,o.sort(i)]]}if(e[n]!=r){var p=o;for(f=n,p.push(f);f<=r;){for(a=a.concat(s.ptToElements(e,t,f,e[f])),p.push(e[f]),f=e[f]+1;0===e[f]&&f<=r;f++)p.push(f);p.push(f)}return p.pop(),(p=p.concat(u)).length>0&&(0===t?a.push(["e",t,p.sort(i)]):a.push(["m",t,p.sort(i)])),a}e[n]===r&&(o.push(n),u.push(r),o.concat(u).length>4&&(0===t?a.push(["e",t,o.concat(u).sort(i)]):a.push(["i",t,o.concat(u).sort(i)])));for(var d=[];e[n]===r&&n<r;)d.push(n),d.push(r),n+=1,r-=1,t+=1;return o=[n-1],u=[r+1],a.push(["s",t,d.sort(i)]),a.concat(s.ptToElements(e,t,n,r))},s.addLabels=function(e,t){if(0===arguments.length&&(e=1,t=10),1===arguments.length&&(t=10),0===t)return s;t<=0&&console.log("The label interval entered in invalid:",t);for(var n=1;n<=s.pairtable[0];n++)if(n%t==0){var r,i,o,u,c=s.nodes[n-1];1==s.rnaLength?(u=[c.x-15,c.y],o=[c.x-15,c.y]):(r=1==n?s.nodes[s.rnaLength-1]:s.nodes[n-2],i=n==s.rnaLength?s.nodes[0]:s.nodes[n],0!==s.pairtable[i.num]&&0!==s.pairtable[r.num]&&0!==s.pairtable[c.num]&&(r=i=s.nodes[s.pairtable[c.num]-1]),0===s.pairtable[c.num]||0!==s.pairtable[i.num]&&0!==s.pairtable[r.num]?(u=[i.x-c.x,i.y-c.y],o=[r.x-c.x,r.y-c.y]):(u=[c.x-i.x,c.y-i.y],o=[c.x-r.x,c.y-r.y]));var l=[u[0]+o[0],u[1]+o[1]],h=Math.sqrt(l[0]*l[0]+l[1]*l[1]),f=[l[0]/h,l[1]/h],p=[-15*f[0],-15*f[1]],d=s.nodes[n-1].x+p[0],g=s.nodes[n-1].y+p[1],v={name:n+s.startNumberArray[n-1]-1,num:-1,radius:6,rna:s,nodeType:"label",structName:s.structName,elemType:"l",x:d,y:g,px:d,py:g,uid:a()},m={source:s.nodes[n-1],target:v,value:1,linkType:"label_link",uid:a()};s.nodes.push(v),s.links.push(m)}return s},s.recalculateElements=function(){if(s.removePseudoknots(),s.elements=s.ptToElements(s.pairtable,0,1,s.dotbracket.length),s.circular&&(externalLoop=s.elements.filter((function(e){if("e"==e[0])return!0})),externalLoop.length>0)){eloop=externalLoop[0],nucs=eloop[2].sort(i),prev=nucs[0],hloop=!0,numGreater=0;for(var e=1;e<nucs.length;e++)nucs[e]-prev>1&&(numGreater+=1),prev=nucs[e];1==numGreater?eloop[0]="h":2==numGreater?eloop[0]="i":eloop[0]="m"}return s},s.reassignLinkUids=function(){for(var e=0;e<s.links.length;e++)s.links[e].uid=s.links[e].source.uid+s.links[e].target.uid;return s},s.removePseudoknots=function(){return s.pairtable.length>1&&(s.pseudoknotPairs=s.pseudoknotPairs.concat(r.rnaUtilities.removePseudoknotsFromPairtable(s.pairtable))),s},s.addPseudoknots=function(){for(var e=s.pairtable,t=s.pseudoknotPairs,n=0;n<t.length;n++)e[t[n][0]]=t[n][1],e[t[n][1]]=t[n][0];return s.pseudoknotPairs=[],s},s.addName=function(e){return void 0===e?(s.name="",s):(s.name=e,s)},s.rnaLength>0&&s.recalculateElements()}void 0===String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")})},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t){"use strict";function n(){var e=this;e.bracketLeft="([{<ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),e.bracketRight=")]}>abcdefghijklmnopqrstuvwxyz".split(""),e.inverseBrackets=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=n;return t},e.maximumMatching=function(e){for(var t=e[0],n=new Array(t+1),r=0;t>=r;r++){n[r]=new Array(t+1);for(var i=r;t>=i;i++)n[r][i]=0}var a=0;for(r=t-0-1;r>0;r--)for(i=r+0+1;t>=i;i++){a=n[r][i-1];for(var o=i-0-1;o>=r;o--)e[o]===i&&(a=Math.max(a,(o>r?n[r][o-1]:0)+1+(i-o-1>0?n[o+1][i-1]:0)));n[r][i]=a}return a=n[1][t],n},e.backtrackMaximumMatching=function(t,n){var r=Array.apply(null,Array(t.length)).map((function(){return 0}));return e.mmBt(t,r,n,1,t.length-1),r},e.mmBt=function(t,n,r,i,a){var o=t[i][a];if(!(0>a-i-1)){if(t[i][a-1]==o)return void e.mmBt(t,n,r,i,a-1);for(var s=a-0-1;s>=i;s--)if(r[a]===s&&(s>i?t[i][s-1]:0)+(a-s-1>0?t[s+1][a-1]:0)+1==o)return n[s]=a,n[a]=s,s>i&&e.mmBt(t,n,r,i,s-1),void e.mmBt(t,n,r,s+1,a-1);console.log("FAILED!!!"+i+","+a+": backtracking failed!")}},e.dotbracketToPairtable=function(t){var n=Array.apply(null,new Array(t.length+1)).map(Number.prototype.valueOf,0);n[0]=t.length;for(var r={},i=0;i<e.bracketLeft.length;i++)r[i]=[];var a=e.inverseBrackets(e.bracketLeft),o=e.inverseBrackets(e.bracketRight);for(i=0;i<t.length;i++){var s=t[i],u=i+1;if("."==s||"o"==s)n[u]=0;else if(s in a)r[a[s]].push(u);else{if(!(s in o))throw"Unknown symbol in dotbracket string";var c=r[o[s]].pop();n[u]=c,n[c]=u}}for(var l in r)if(r[l].length>0)throw"Unmatched base at position "+r[l][0];return n},e.insertIntoStack=function(e,t,n){for(var r=0;e[r].length>0&&e[r][e[r].length-1]<n;)r+=1;return e[r].push(n),r},e.deleteFromStack=function(e,t){for(var n=0;0===e[n].length||e[n][e[n].length-1]!=t;)n+=1;return e[n].pop(),n},e.pairtableToDotbracket=function(t){for(var n={},r=0;r<t[0];r++)n[r]=[];var i={},a="";for(r=1;r<t[0]+1;r++){if(0!==t[r]&&t[r]in i)throw"Invalid pairtable contains duplicate entries";i[t[r]]=!0,a+=0===t[r]?".":t[r]>r?e.bracketLeft[e.insertIntoStack(n,r,t[r])]:e.bracketRight[e.deleteFromStack(n,r)]}return a},e.findUnmatched=function(t,n,r){for(var i=[],a=[],o=n,s=r,u=n;r>=u;u++)0!==t[u]&&(t[u]<n||t[u]>r)&&a.push([u,t[u]]);for(u=o;s>=u;u++){for(;0===t[u]&&s>=u;)u++;for(r=t[u];t[u]===r;)u++,r--;i=i.concat(e.findUnmatched(t,u,r))}return a.length>0&&i.push(a),i},e.removePseudoknotsFromPairtable=function(t){for(var n=e.maximumMatching(t),r=e.backtrackMaximumMatching(n,t),i=[],a=1;a<t.length;a++)t[a]<a||r[a]!=t[a]&&(i.push([a,t[a]]),t[t[a]]=0,t[a]=0);return i},e.ptToElements=function(t,n,i,a,o){var s=[],u=[i-1],c=[a+1];if(arguments.length<5&&(o=[]),i>a)return[];for(;0===t[i];i++)u.push(i);for(;0===t[a];a--)c.push(a);if(i>a){if(u.push(i),0===n)return[["e",n,u.sort(r)]];for(var l=!1,h=[],f=[],p=0;p<u.length;p++)l?f.push(u[p]):h.push(u[p]),o.indexOf(u[p])>=0&&(l=!0);return[["h",n,u.sort(r)]]}if(t[i]!=a){var d=u;for(p=i,d.push(p);a>=p;){for(s=s.concat(e.ptToElements(t,n,p,t[p],o)),d.push(t[p]),p=t[p]+1;0===t[p]&&a>=p;p++)d.push(p);d.push(p)}return d.pop(),(d=d.concat(c)).length>0&&(0===n?s.push(["e",n,d.sort(r)]):s.push(["m",n,d.sort(r)])),s}if(t[i]===a){u.push(i),c.push(a);var g=u.concat(c);g.length>4&&(0===n?s.push(["e",n,u.concat(c).sort(r)]):s.push(["i",n,u.concat(c).sort(r)]))}for(var v=[];t[i]===a&&a>i;)v.push(i),v.push(a),i+=1,a-=1,n+=1;return u=[i-1],c=[a+1],s.push(["s",n,v.sort(r)]),s.concat(e.ptToElements(t,n,i,a,o))}}Object.defineProperty(t,"__esModule",{value:!0}),t.arraysEqual=function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},t.RNAUtilities=n,t.ColorScheme=function(e){var t=this;return t.colorsText=e,t.parseRange=function(e){for(var t=e.split(","),n=[],r=0;r<t.length;r++){var i=t[r].split("-");if(1==i.length)n.push(parseInt(i[0]));else if(2==i.length)for(var a=parseInt(i[0]),o=parseInt(i[1]),s=a;o>=s;s++)n.push(s);else console.log("Malformed range (too many dashes):",e)}return n},t.parseColorText=function(e){for(var n=e.split("\n"),r="",i=1,a={colorValues:{"":{}},range:["white","steelblue"]},o=[],s=0;s<n.length;s++)if(">"!=n[s][0])for(var u=n[s].trim().split(/[\s]+/),c=0;c<u.length;c++)if(isNaN(u[c])){if(0===u[c].search("range")){var l=u[c].split("=")[1].split(":");a.range=[l[0],l[1]];continue}if(0==u[c].search("domain")){l=u[c].split("=")[1].split(":"),a.domain=[l[0],l[1]];continue}for(var h=u[c].split(":"),f=t.parseRange(h[0]),p=h[1],d=0;d<f.length;d++)isNaN(p)?a.colorValues[r][f[d]]=p:(a.colorValues[r][f[d]]=+p,o.push(Number(p)))}else a.colorValues[r][i]=Number(u[c]),i+=1,o.push(Number(u[c]));else r=n[s].trim().slice(1),i=1,a.colorValues[r]={};return"domain"in a||(a.domain=[Math.min.apply(null,o),Math.max.apply(null,o)]),t.colorsJson=a,t},t.normalizeColors=function(){var e;for(var n in t.colorsJson){var r=Number.MAX_VALUE,i=Number.MIN_VALUE;for(var a in t.colorsJson.colorValues[n])"number"==typeof(e=t.colorsJson.colorValues[n][a])&&(r>e&&(r=e),e>i&&(i=e));for(a in t.colorsJson.colorValues[n])"number"==typeof(e=t.colorsJson.colorValues[n][a])&&(t.colorsJson.colorValues[n][a]=(e-r)/(i-r))}return t},t.parseColorText(t.colorsText),t};var r=function(e,t){return e-t};t.rnaUtilities=new n}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rnaPlot=function(){var e,t,n={width:400,height:400,nucleotideRadius:5,rnaEdgePadding:0,labelInterval:0,showNucleotideLabels:!0,startNucleotideNumber:1,bundleExternalLinks:!1};function a(a){a.each((function(a){var o=new r.RNAGraph(a.sequence,a.structure,a.name).recalculateElements().elementsToJson().addName(a.name);a.rnaGraph=o;for(var s=(new i.NAView).naview_xy_coordinates(o.pairtable),u=[],c=0;c<s.nbase;c++)u.push([s.x[c],s.y[c]]);o.addPositions("nucleotide",u).reinforceStems().reinforceLoops().addExtraLinks(a.extraLinks).addLabels(n.startNucleotideNumber,n.labelInterval);var l=function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=d3.extent(r),s=d3.extent(i),u=30;""!=a&&(s[1]+=u),o[0]-=n.nucleotideRadius+n.rnaEdgePadding,s[0]-=n.nucleotideRadius+n.rnaEdgePadding,o[1]+=n.nucleotideRadius+n.rnaEdgePadding,s[1]+=n.nucleotideRadius+n.rnaEdgePadding;var c,l=o[1]-o[0],h=s[1]-s[0],f=l-n.width,p=h-n.height;function d(e,t,n){var r=(e.range()[1]-e.range()[0])/(e.domain()[1]-e.domain()[0]),i=(t[1]-t[0])*r,a=(n[1]-n[0]-i)/2;return{scaleFactor:r,scale:d3.scale.linear().domain(t).range([n[0]+a,n[1]-a])}}return f>p?(c=d(e=d3.scale.linear().domain(o).range([0,n.width]),s,[0,n.height]),t=c.scale):(c=d(t=d3.scale.linear().domain(s).range([0,n.height]),o,[0,n.width]),e=c.scale),e.range()[0],e.domain()[0],t.range()[0],t.domain()[0],"translate("+-(e.domain()[0]*c.scaleFactor-e.range()[0])+","+-(t.domain()[0]*c.scaleFactor-t.range()[0])+")scale("+c.scaleFactor+")"}(o.nodes.map((function(e){return e.x})),o.nodes.map((function(e){return e.y}))),h=d3.select(this).append("g").attr("transform",l),f=o.nodes.filter((function(e){return"nucleotide"==e.nodeType})),p=o.nodes.filter((function(e){return"label"==e.nodeType})),d=o.links;!function(e,t){t=t.filter((function(e){return null!==e.source&&null!==e.target})),e.selectAll(".rna-link").data(t).enter().append("svg:line").attr("x1",(function(e){return e.source.x})).attr("x2",(function(e){return e.target.x})).attr("y1",(function(e){return e.source.y})).attr("y2",(function(e){return e.target.y})).attr("link-type",(function(e){return e.linkType})).attr("extra-link-type",(function(e){return e.extraLinkType})).classed("rna-link",!0)}(h,d),function(e,t){var r=e.selectAll(".rna-base").data(t).enter().append("svg:g").attr("transform",(function(e){return"translate("+e.x+","+e.y+")"}));r.append("svg:circle").attr("r",n.nucleotideRadius).classed("rna-base",!0),n.showNucleotideLabels&&r.append("svg:text").text((function(e){return e.name})).attr("text-anchor","middle").attr("dominant-baseline","central").classed("nucleotide-label",!0).append("svg:title").text((function(e){return e.struct_name+":"+e.num}))}(h,f),function(e,t){e.selectAll(".rnaLabel").data(t).enter().append("svg:g").attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).append("svg:text").text((function(e){return e.name})).attr("text-anchor","middle").attr("font-weight","bold").attr("dominant-baseline","central").classed("number-label",!0)}(h,p),function(r,i){r.append("svg:text").attr("transform","translate("+e.invert(n.width/2)+","+t.invert(n.height)+")").attr("dy",-10).classed("rna-name",!0).text(i)}(h,a.name),n.bundleExternalLinks&&function(e,t){var n={},r=[];t=t.filter((function(e){return"correct"==e.linkType||"incorrect"==e.linkType||"extra"==e.linkType})),e.selectAll("[link-type=extra]").remove();for(var i=0;i<t.length;i++)null!==t[i].source&&null!==t[i].target&&(n[t[i].source.uid]=t[i].source,n[t[i].target.uid]=t[i].target,r.push({source:t[i].source.uid,target:t[i].target.uid,linkType:t[i].linkType,extraLinkType:t[i].extraLinkType}));var a=d3.ForceEdgeBundling().nodes(n).edges(r).compatibility_threshold(.8).step_size(.2)(),o=d3.svg.line().x((function(e){return e.x})).y((function(e){return e.y})).interpolate("linear");for(i=0;i<a.length;i++){var s=a[i];e.append("path").attr("d",o(s)).style("fill","none").attr("link-type",(function(e){return r[i].linkType})).attr("extra-link-type",(function(e){return r[i].extraLinkType})).style("stroke-opacity",.4)}}(h,d)}))}return a.width=function(e){return arguments.length?(n.width=e,a):n.width},a.height=function(e){return arguments.length?(n.height=e,a):n.height},a.showNucleotideLabels=function(e){return arguments.length?(n.showNucleotideLabels=e,a):n.showNucleotideLabels},a.rnaEdgePadding=function(e){return arguments.length?(n.rnaEdgePadding=e,a):n.rnaEdgePadding},a.nucleotideRadius=function(e){return arguments.length?(n.nucleotideRadius=e,a):n.nucleotideRadius},a.labelInterval=function(e){return arguments.length?(n.labelInterval=e,a):n.labelInterval},a.showNucleotideLabels=function(e){return arguments.length?(n.showNucleotideLabels=e,a):n.showNucleotideLabels},a.startNucleotideNumber=function(e){return arguments.length?(n.startNucleotideNumber=e,a):n.startNucleotideNumber},a.bundleExternalLinks=function(e){return arguments.length?(n.bundleExternalLinks=e,a):n.bundleExternalLinks},a},n(4);var r=n(1),i=n(5);n(2),n(11),void 0===String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleXyCoordinates=function(e){var t,n,r,i=[],a=[];n=e[0];var o=Array.apply(null,new Array(n+5)).map(Number.prototype.valueOf,0),s=Array.apply(null,new Array(16+Math.floor(n/5))).map(Number.prototype.valueOf,0),u=Array.apply(null,new Array(16+Math.floor(n/5))).map(Number.prototype.valueOf,0),c=0,l=0,h=Math.PI/2;(function e(t,n,r){var i,a,f,p,d,g,v,m,y,b,w,x,k=2,S=0,_=0,C=Array.apply(null,new Array(3+2*Math.floor((n-t)/5))).map(Number.prototype.valueOf,0);for(i=t-1,n++;t!=n;)if((a=r[t])&&0!=t){k+=2,f=t,p=a,C[++S]=f,C[++S]=p,t=a+1,d=f,g=p,m=0;do{f++,p--,m++}while(r[f]==p&&r[f]>f);if(v=m-2,m>=2&&(o[d+1+v]+=h,o[g-1-v]+=h,o[d]+=h,o[g]+=h,m>2))for(;v>=1;v--)o[d+v]=Math.PI,o[g-v]=Math.PI;u[++l]=m,f<=p&&e(f,p,r)}else t++,k++,_++;for(x=Math.PI*(k-2)/k,C[++S]=n,y=i<0?0:i,b=1;b<=S;b++){for(w=C[b]-y,v=0;v<=w;v++)o[y+v]+=x;if(b>S)break;y=C[++b]}s[++c]=_})(0,n+1,e),s[c]-=2,r=0,i[0]=100,a[0]=100;var f=[];for(f.push([i[0],a[0]]),t=1;t<n;t++)i[t]=i[t-1]+15*Math.cos(r),a[t]=a[t-1]+15*Math.sin(r),f.push([i[t],a[t]]),r+=Math.PI-o[t+1];return f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAView=u;var r=n(6),i=n(7),a=n(9),o=n(10),s=n(8);function u(){this.ANUM=9999,this.MAXITER=500,this.bases=[],this.nbase=null,this.nregion=null,this.loop_count=null,this.root=new s.Loop,this.loops=[],this.regions=[],this.rlphead=new r.Radloop,this.lencut=.8,this.RADIUS_REDUCTION_FACTOR=1.4,this.angleinc=null,this._h=null,this.HELIX_FACTOR=.6,this.BACKBONE_DISTANCE=27}function c(){var e=new s.Loop,t=null,n=null;for(t=0;t<this.loop_count;t++){for(e=this.loops[t],n=0;n<this.loop_count;n++)this.loops[n].setMark(!1);e.setDepth(l(e))}}function l(e){var t=null,n=null,r=null;if(e.getNconnection()<=1)return 0;if(e.isMark())return-1;e.setMark(!0),t=0,n=0;for(var i=0;null!=e.getConnection(i);i++)(r=l(e.getConnection(i).getLoop()))>=0&&(1==++t?n=r:n>r&&(n=r));return e.setMark(!1),n+1}u.prototype.naview_xy_coordinates=function(e){var t,n=[],r=[];if(0===e.length||0===e[0])return 0;this.nbase=e[0],this.bases=[];for(var i=0;i<this.nbase+1;i++)this.bases.push(new o.Base);for(this.regions=[],i=0;i<this.nbase+1;i++)this.regions.push(new a.Region);for(this.read_in_bases(e),this.rlphead=null,this.find_regions(),this.loop_count=0,this.loops=[],i=0;i<this.nbase+1;i++)this.loops.push(new s.Loop);for(this.construct_loop(0),this.find_central_loop(),this.traverse_loop(this.root,null),t=0;t<this.nbase;t++)n.push(100+this.BACKBONE_DISTANCE*this.bases[t+1].getX()),r.push(100+this.BACKBONE_DISTANCE*this.bases[t+1].getY());return{nbase:this.nbase,x:n,y:r}},u.prototype.read_in_bases=function(e){var t=null,n=null;for(this.bases.push(new o.Base),this.bases[0].setMate(0),this.bases[0].setExtracted(!1),this.bases[0].setX(this.ANUM),this.bases[0].setY(this.ANUM),n=0,t=1;t<=this.nbase;t++)this.bases.push(new o.Base),this.bases[t].setExtracted(!1),this.bases[t].setX(this.ANUM),this.bases[t].setY(this.ANUM),this.bases[t].setMate(e[t]),e[t]>t&&n++;0==n&&(this.bases[1].setMate(this.nbase),this.bases[this.nbase].setMate(1))},u.prototype.find_regions=function(){var e,t=null,n=null;e=this.nbase+1;var r=[];for(t=0;t<e;t++)r.push(!1);for(this.nregion=0,t=0;t<=this.nbase;t++)if(0!=(n=this.bases[t].getMate())&&!r[t]){for(this.regions[this.nregion].setStart1(t),this.regions[this.nregion].setEnd2(n),r[t]=!0,r[n]=!0,this.bases[t].setRegion(this.regions[this.nregion]),this.bases[n].setRegion(this.regions[this.nregion]),t++,n--;t<n&&this.bases[t].getMate()==n;t++,n--)r[n]=!0,r[t]=!0,this.bases[t].setRegion(this.regions[this.nregion]),this.bases[n].setRegion(this.regions[this.nregion]);this.regions[this.nregion].setEnd1(--t),this.regions[this.nregion].setStart2(n+1),this.nregion++}},u.prototype.construct_loop=function(e){var t=null,n=null,o=new s.Loop,u=new s.Loop,c=new i.Connection,l=new a.Region,h=new r.Radloop;for((o=this.loops[this.loop_count++]).setNconnection(0),o.setDepth(0),o.setNumber(this.loop_count),o.setRadius(0),h=this.rlphead;null!=h;h=h.getNext())h.getLoopnumber()==this.loop_count&&o.setRadius(h.getRadius());t=e;do{0!=(n=this.bases[t].getMate())&&(l=this.bases[t].getRegion(),this.bases[l.getStart1()].isExtracted()||(t==l.getStart1()?(this.bases[l.getStart1()].setExtracted(!0),this.bases[l.getEnd1()].setExtracted(!0),this.bases[l.getStart2()].setExtracted(!0),this.bases[l.getEnd2()].setExtracted(!0),u=this.construct_loop(l.getEnd1()<this.nbase?l.getEnd1()+1:0)):t==l.getStart2()?(this.bases[l.getStart2()].setExtracted(!0),this.bases[l.getEnd2()].setExtracted(!0),this.bases[l.getStart1()].setExtracted(!0),this.bases[l.getEnd1()].setExtracted(!0),u=this.construct_loop(l.getEnd2()<this.nbase?l.getEnd2()+1:0)):console.log("Something went terribly wrong ...."),o.setNconnection(o.getNconnection()+1),c=new i.Connection,o.setConnection(o.getNconnection()-1,c),o.setConnection(o.getNconnection(),null),c.setLoop(u),c.setRegion(l),t==l.getStart1()?(c.setStart(l.getStart1()),c.setEnd(l.getEnd2())):(c.setStart(l.getStart2()),c.setEnd(l.getEnd1())),c.setExtruded(!1),c.setBroken(!1),u.setNconnection(u.getNconnection()+1),c=new i.Connection,u.setConnection(u.getNconnection()-1,c),u.setConnection(u.getNconnection(),null),c.setLoop(o),c.setRegion(l),t==l.getStart1()?(c.setStart(l.getStart2()),c.setEnd(l.getEnd1())):(c.setStart(l.getStart1()),c.setEnd(l.getEnd2())),c.setExtruded(!1),c.setBroken(!1)),t=n),++t>this.nbase&&(t=0)}while(t!=e);return o},u.prototype.find_central_loop=function(){var e=new s.Loop,t=null,n=null,r=null;for(c.bind(this)(),t=0,n=-1,r=0;r<this.loop_count;r++)(e=this.loops[r]).getNconnection()>t?(n=e.getDepth(),t=e.getNconnection(),this.root=e):e.getDepth()>n&&e.getNconnection()==t&&(n=e.getDepth(),this.root=e)},u.prototype.traverse_loop=function(e,t){var n,r,i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w,x,k,S,_,C,R,E,A,T,M,L,I,P,N,O,F,D,B,z,U,H,j,q,V,G,W,$,Y,X,Z,K,Q,J,ee,te,ne,re,ie,ae,oe,se,ue,ce,le,he,fe,pe,de,ge,ve,me=0;s=2*Math.PI/(this.nbase+1),b=null,L=-1;var ye=0;for(_=0;null!=(m=e.getConnection(ye));ye++,_++)n=-Math.sin(s*m.getStart()),r=Math.cos(s*m.getStart()),i=-Math.sin(s*m.getEnd()),a=Math.cos(s*m.getEnd())-r,o=n-i,u=Math.sqrt(a*a+o*o),m.setXrad(a/u),m.setYrad(o/u),m.setAngle(Math.atan2(o,a)),m.getAngle()<0&&m.setAngle(m.getAngle()+2*Math.PI),null!=t&&t.getRegion()==m.getRegion()&&(b=m,L=_);e:for(;;){this.determine_radius(e,this.lencut),c=e.getRadius()/this.RADIUS_REDUCTION_FACTOR,null==t?l=h=0:(f=(this.bases[b.getStart()].getX()+this.bases[b.getEnd()].getX())/2,p=(this.bases[b.getStart()].getY()+this.bases[b.getEnd()].getY())/2,l=f-c*b.getXrad(),h=p-c*b.getYrad()),A=-1==L?0:L,m=e.getConnection(A),E=0,I=!1;do{if((k=A-1)<0&&(k=e.getNconnection()-1),w=e.getConnection(k),this.connected_connection(w,m)?(A=k,m=w):I=!0,++E>e.getNconnection()){for(R=-1,_=0;_<e.getNconnection();_++)(k=_+1)>=e.getNconnection()&&(k=0),m=e.getConnection(_),(fe=(y=e.getConnection(k)).getAngle()-m.getAngle())<0&&(fe+=2*Math.PI),fe>R&&(R=fe,me=_);T=me,(A=me+1)>=e.getNconnection()&&(A=0),(m=e.getConnection(T)).setBroken(!0),I=!0}}while(!I);for(P=!1,$=A;!P;){for(E=0,I=!1,T=A,N=!1;!I;)if(m=e.getConnection(T),T==L&&(N=!0),(k=T+1)>=e.getNconnection()&&(k=0),y=e.getConnection(k),this.connected_connection(m,y)){if(++E>=e.getNconnection())break;T=k}else I=!0;for(_=Y=X=M=this.find_ic_middle(A,T,t,b,e),I=!1,K=0;!I;)(_=K<0?Y:0==K?M:X)>=0&&(m=e.getConnection(_),null!=t&&b==m||(0==K?(d=m.getAngle()-Math.asin(.5/c),g=m.getAngle()+Math.asin(.5/c),this.bases[m.getStart()].setX(l+c*Math.cos(d)),this.bases[m.getStart()].setY(h+c*Math.sin(d)),this.bases[m.getEnd()].setX(l+c*Math.cos(g)),this.bases[m.getEnd()].setY(h+c*Math.sin(g))):K<0?((k=_+1)>=e.getNconnection()&&(k=0),m=e.getConnection(_),y=e.getConnection(k),ne=m.getXrad(),re=m.getYrad(),fe=(m.getAngle()+y.getAngle())/2,m.getAngle()>y.getAngle()&&(fe-=Math.PI),oe=Math.cos(fe),ce=Math.sin(fe),le=-oe,(C=y.getAngle()-m.getAngle())<0&&(C+=2*Math.PI),he=m.isExtruded()?C<=Math.PI/2?2:1.5:1,this.bases[m.getEnd()].setX(this.bases[y.getStart()].getX()+he*ce),this.bases[m.getEnd()].setY(this.bases[y.getStart()].getY()+he*le),this.bases[m.getStart()].setX(this.bases[m.getEnd()].getX()+re),this.bases[m.getStart()].setY(this.bases[m.getEnd()].getY()-ne)):((k=_-1)<0&&(k=e.getNconnection()-1),m=e.getConnection(k),ie=(y=e.getConnection(_)).getXrad(),ae=y.getYrad(),fe=(m.getAngle()+y.getAngle())/2,m.getAngle()>y.getAngle()&&(fe-=Math.PI),oe=Math.cos(fe),ce=-Math.sin(fe),le=oe,(C=y.getAngle()-m.getAngle())<0&&(C+=2*Math.PI),he=m.isExtruded()?C<=Math.PI/2?2:1.5:1,this.bases[y.getStart()].setX(this.bases[m.getEnd()].getX()+he*ce),this.bases[y.getStart()].setY(this.bases[m.getEnd()].getY()+he*le),this.bases[y.getEnd()].setX(this.bases[y.getStart()].getX()-ae),this.bases[y.getEnd()].setY(this.bases[y.getStart()].getY()+ie)))),K<0?(X==T?X=-1:X>=0&&++X>=e.getNconnection()&&(X=0),K=1):(Y==A?Y=-1:Y>=0&&--Y<0&&(Y=e.getNconnection()-1),K=-1),I=-1==Y&&-1==X;if((Z=T+1)>=e.getNconnection()&&(Z=0),T!=A&&(A!=$||Z!=$))if(m=e.getConnection(A),y=e.getConnection(T),J=this.bases[y.getEnd()].getX()-this.bases[m.getStart()].getX(),ee=this.bases[y.getEnd()].getY()-this.bases[m.getStart()].getY(),F=this.bases[m.getStart()].getX()+J/2,D=this.bases[m.getStart()].getY()+ee/2,U=J/(te=Math.sqrt(J*J+ee*ee)),H=ee/te,j=l-F,q=h-D,B=(V=(j/=te=Math.sqrt(J*J+ee*ee))*U+(q/=te)*H)*U-j,z=V*H-q,B/=te=Math.sqrt(B*B+z*z),z/=te,J=this.bases[m.getStart()].getX()-l,ee=this.bases[m.getStart()].getY()-h,(fe=Math.atan2(ee,J))<0&&(fe+=2*Math.PI),J=this.bases[y.getEnd()].getX()-l,ee=this.bases[y.getEnd()].getY()-h,(pe=Math.atan2(ee,J))<0&&(pe+=2*Math.PI),pe<fe&&(pe+=2*Math.PI),G=l+(O=pe-fe>Math.PI?-1:1)*c*B,W=h+O*c*z,N)l-=G-F,h-=W-D;else for(_=A;x=(m=e.getConnection(_)).getStart(),this.bases[x].setX(this.bases[x].getX()+G-F),this.bases[x].setY(this.bases[x].getY()+W-D),x=m.getEnd(),this.bases[x].setX(this.bases[x].getX()+G-F),this.bases[x].setY(this.bases[x].getY()+W-D),_!=T;)++_>=e.getNconnection()&&(_=0);P=(A=Z)==$}for(_=0;_<e.getNconnection();_++){if(m=e.getConnection(_),(k=_+1)>=e.getNconnection()&&(k=0),y=e.getConnection(k),J=this.bases[m.getEnd()].getX()-l,ee=this.bases[m.getEnd()].getY()-h,ue=Math.sqrt(J*J+ee*ee),(fe=Math.atan2(ee,J))<0&&(fe+=2*Math.PI),J=this.bases[y.getStart()].getX()-l,ee=this.bases[y.getStart()].getY()-h,se=Math.sqrt(J*J+ee*ee),(pe=Math.atan2(ee,J))<0&&(pe+=2*Math.PI),pe<fe&&(pe+=2*Math.PI),Q=pe-fe,(ve=y.getAngle()-m.getAngle())<=0&&(ve+=2*Math.PI),Math.abs(Q-ve)>Math.PI)if(m.isExtruded())console.log("Warning from traverse_loop. Loop "+e.getNumber()+" has crossed regions\n");else if(y.getStart()-m.getEnd()!=1){m.setExtruded(!0);continue e}if(m.isExtruded())this.construct_extruded_segment(m,y);else for((S=y.getStart()-m.getEnd())<0&&(S+=this.nbase+1),s=Q/S,k=1;k<S;k++)(x=m.getEnd()+k)>this.nbase&&(x-=this.nbase+1),te=ue+(se-ue)*((v=fe+k*s)-fe)/Q,this.bases[x].setX(l+te*Math.cos(v)),this.bases[x].setY(h+te*Math.sin(v))}break}for(_=0;_<e.getNconnection();_++)L!=_&&(m=e.getConnection(_),this.generate_region(m),this.traverse_loop(m.getLoop(),m));for(S=0,de=0,ge=0,_=0;_<e.getNconnection();_++)if((k=_+1)>=e.getNconnection()&&(k=0),m=e.getConnection(_),y=e.getConnection(k),S+=2,de+=this.bases[m.getStart()].getX()+this.bases[m.getEnd()].getX(),ge+=this.bases[m.getStart()].getY()+this.bases[m.getEnd()].getY(),!m.isExtruded())for(k=m.getEnd()+1;k!=y.getStart();k++)k>this.nbase&&(k-=this.nbase+1),S++,de+=this.bases[k].getX(),ge+=this.bases[k].getY();e.setX(de/S),e.setY(ge/S)},u.prototype.determine_radius=function(e,t){var n,r,a,o,s,u,c,l,h,f,p,d=0,g=new i.Connection,v=new i.Connection;do{for(n=1e10,s=0,o=0,l=0;l<e.getNconnection();l++)g=e.getConnection(l),(h=l+1)>=e.getNconnection()&&(h=0),v=e.getConnection(h),f=g.getEnd(),(p=v.getStart())<f&&(p+=this.nbase+1),(a=v.getAngle()-g.getAngle())<=0&&(a+=2*Math.PI),o+=a*(1/(r=g.isExtruded()?a<=Math.PI/2?2:1.5:p-f)+1),s+=a*a/r,(c=a/r)<n&&!g.isExtruded()&&r>1&&(n=c,d=l);(u=o/s)<.7071068&&(u=.7071068),n*u<t&&e.getConnection(d).setExtruded(!0)}while(n*u<t);e.getRadius()>0?u=e.getRadius():e.setRadius(u)},u.prototype.find_ic_middle=function(e,t,n,r,i){var a,o,s,u,c;for(a=0,o=-1,s=e,c=!1;!c;)a++>2*i.getNconnection()&&console.log("Infinite loop in 'find_ic_middle'"),null!=n&&i.getConnection(s)==r&&(o=s),c=s==t,++s>=i.getNconnection()&&(s=0);if(-1==o){for(u=1,s=e;u<(a+1)/2;u++)++s>=i.getNconnection()&&(s=0);o=s}return o},u.prototype.construct_extruded_segment=function(e,t){var n,r,i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b;if(n=e.getAngle(),(i=r=t.getAngle())<n&&(i+=2*Math.PI),a=(n+i)/2,d=e.getEnd(),(v=(g=t.getStart())-d)<0&&(v+=this.nbase+1),(f=t.getAngle()-e.getAngle())<0&&(f+=2*Math.PI),2==v)this.construct_circle_segment(d,g);else{o=this.bases[g].getX()-this.bases[d].getX(),s=this.bases[g].getY()-this.bases[d].getY(),o/=h=Math.sqrt(o*o+s*s),s/=h,h>=1.5&&f<=Math.PI/2&&((m=d+1)>this.nbase&&(m-=this.nbase+1),(y=g-1)<0&&(y+=this.nbase+1),this.bases[m].setX(this.bases[d].getX()+.5*o),this.bases[m].setY(this.bases[d].getY()+.5*s),this.bases[y].setX(this.bases[g].getX()-.5*o),this.bases[y].setY(this.bases[g].getY()-.5*s),d=m,g=y);do{b=!1,this.construct_circle_segment(d,g),(m=d+1)>this.nbase&&(m-=this.nbase+1),o=this.bases[m].getX()-this.bases[d].getX(),s=this.bases[m].getY()-this.bases[d].getY(),(u=Math.atan2(s,o))<0&&(u+=2*Math.PI),(p=u-n)<0&&(p+=2*Math.PI),p>Math.PI&&(b=!0),(y=g-1)<0&&(y+=this.nbase+1),o=this.bases[y].getX()-this.bases[g].getX(),s=this.bases[y].getY()-this.bases[g].getY(),(c=Math.atan2(s,o))<0&&(c+=2*Math.PI),(p=r-c)<0&&(p+=2*Math.PI),p>Math.PI&&(b=!0),b&&(l=this.minf2(a,n+.5),this.bases[m].setX(this.bases[d].getX()+Math.cos(l)),this.bases[m].setY(this.bases[d].getY()+Math.sin(l)),d=m,l=this.maxf2(a,i-.5),this.bases[y].setX(this.bases[g].getX()+Math.cos(l)),this.bases[y].setY(this.bases[g].getY()+Math.sin(l)),g=y,v-=2)}while(b&&v>1)}},u.prototype.construct_circle_segment=function(e,t){var n,r,i,a,o,s,u,c,l,h,f,p,d,g,v;if(n=this.bases[t].getX()-this.bases[e].getX(),r=this.bases[t].getY()-this.bases[e].getY(),i=Math.sqrt(n*n+r*r),(d=t-e)<0&&(d+=this.nbase+1),i>=d)for(n/=i,r/=i,g=1;g<d;g++)(v=e+g)>this.nbase&&(v-=this.nbase+1),this.bases[v].setX(this.bases[e].getX()+n*g/d),this.bases[v].setY(this.bases[e].getY()+r*g/d);else for(this.find_center_for_arc(d-1,i),n/=i,r/=i,a=this.bases[e].getX()+n*i/2,o=this.bases[e].getY()+r*i/2,s=r,u=-n,c=a+this._h*s,l=o+this._h*u,h=this.bases[e].getX()-c,f=this.bases[e].getY()-l,i=Math.sqrt(h*h+f*f),p=Math.atan2(f,h),g=1;g<d;g++)(v=e+g)>this.nbase&&(v-=this.nbase+1),this.bases[v].setX(c+i*Math.cos(p+g*this.angleinc)),this.bases[v].setY(l+i*Math.sin(p+g*this.angleinc))},u.prototype.find_center_for_arc=function(e,t){var n,r,i,a,o,s,u,c;i=-(r=(e+1)/Math.PI)-t/(e+1.000001-t),t<1&&(i=0),c=0;do{n=(r+i)/2,o=1-.5/((a=Math.sqrt(n*n+t*t/4))*a),Math.abs(o)>1&&console.log("Unexpected large magnitude discriminant = "+o+" "+a),(u=(s=Math.acos(o))*(e+1)+2*Math.acos(n/a)-2*Math.PI)>0?i=n:r=n}while(Math.abs(u)>1e-4&&++c<this.MAXITER);c>=this.MAXITER&&(noIterationFailureYet&&(console.log("Iteration failed in find_center_for_arc"),noIterationFailureYet=!1),n=0,s=0),this._h=n,this.angleinc=s},u.prototype.generate_region=function(e){var t,n,r,i,a,o;for(o=e.getRegion(),t=0,e.getStart()==o.getStart1()?(n=o.getStart1(),r=o.getEnd1()):(n=o.getStart2(),r=o.getEnd2()),(this.bases[e.getStart()].getX()>this.ANUM-100||this.bases[e.getEnd()].getX()>this.ANUM-100)&&console.log("Bad region passed to generate_region. Coordinates not defined."),i=n+1;i<=r;i++)t++,this.bases[i].setX(this.bases[e.getStart()].getX()+this.HELIX_FACTOR*t*e.getXrad()),this.bases[i].setY(this.bases[e.getStart()].getY()+this.HELIX_FACTOR*t*e.getYrad()),a=this.bases[i].getMate(),this.bases[a].setX(this.bases[e.getEnd()].getX()+this.HELIX_FACTOR*t*e.getXrad()),this.bases[a].setY(this.bases[e.getEnd()].getY()+this.HELIX_FACTOR*t*e.getYrad())},u.prototype.minf2=function(e,t){return e<t?e:t},u.prototype.maxf2=function(e,t){return e>t?e:t},u.prototype.connected_connection=function(e,t){return!!e.isExtruded()||e.getEnd()+1==t.getStart()}},function(e,t){"use strict";function n(){this.radius=null,this.loopnumber=null,this.next=null,this.prev=null}Object.defineProperty(t,"__esModule",{value:!0}),t.Radloop=n,n.prototype.getRadius=function(){return this.radius},n.prototype.setRadius=function(e){this.radius=e},n.prototype.getLoopnumber=function(){return this.loopnumber},n.prototype.setLoopnumber=function(e){this.loopnumber=e},n.prototype.getNext=function(){return this.next},n.prototype.setNext=function(e){this.next=e},n.prototype.getPrev=function(){return this.prev},n.prototype.setPrev=function(e){this.prev=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=a;var r=n(8),i=n(9);function a(){this.loop=new r.Loop,this.region=new i.Region,this.start=null,this.end=null,this.xrad=null,this.yrad=null,this.angle=null,this.extruded=null,this.broken=null,this._isNull=!1}a.prototype.isNull=function(){return this._isNull},a.prototype.setNull=function(e){this._isNull=e},a.prototype.getLoop=function(){return this.loop},a.prototype.setLoop=function(e){this.loop=e},a.prototype.getRegion=function(){return this.region},a.prototype.setRegion=function(e){this.region=e},a.prototype.getStart=function(){return this.start},a.prototype.setStart=function(e){this.start=e},a.prototype.getEnd=function(){return this.end},a.prototype.setEnd=function(e){this.end=e},a.prototype.getXrad=function(){return this.xrad},a.prototype.setXrad=function(e){this.xrad=e},a.prototype.getYrad=function(){return this.yrad},a.prototype.setYrad=function(e){this.yrad=e},a.prototype.getAngle=function(){return this.angle},a.prototype.setAngle=function(e){this.angle=e},a.prototype.isExtruded=function(){return this.extruded},a.prototype.setExtruded=function(e){this.extruded=e},a.prototype.isBroken=function(){return this.broken},a.prototype.setBroken=function(e){this.broken=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Loop=i;var r=n(7);function i(){this.nconnection=null,this.connections=[],this._connections=[],this.number=null,this.depth=null,this.mark=null,this.x=null,this.y=null,this.radius=null}i.prototype.getNconnection=function(){return this.nconnection},i.prototype.setNconnection=function(e){this.nconnection=e},i.prototype.setConnection=function(e,t){null!=t?this._connections[e]=t:(this._connections[e]||(this._connections[e]=new r.Connection),this._connections[e].setNull(!0))},i.prototype.getConnection=function(e){var t=n(7);this._connections[e]||(this._connections[e]=new t);var r=this._connections[e];return r.isNull()?null:r},i.prototype.addConnection=function(e,t){this._connections.push(t)},i.prototype.getNumber=function(){return this.number},i.prototype.setNumber=function(e){this.number=e},i.prototype.getDepth=function(){return this.depth},i.prototype.setDepth=function(e){this.depth=e},i.prototype.isMark=function(){return this.mark},i.prototype.setMark=function(e){this.mark=e},i.prototype.getX=function(){return this.x},i.prototype.setX=function(e){this.x=e},i.prototype.getY=function(){return this.y},i.prototype.setY=function(e){this.y=e},i.prototype.getRadius=function(){return this.radius},i.prototype.setRadius=function(e){this.radius=e}},function(e,t){"use strict";function n(){this._start1=null,this._end1=null,this._start2=null,this._end2=null}Object.defineProperty(t,"__esModule",{value:!0}),t.Region=n,n.prototype.getStart1=function(){return this._start1},n.prototype.setStart1=function(e){this._start1=e},n.prototype.getEnd1=function(){return this._end1},n.prototype.setEnd1=function(e){this._end1=e},n.prototype.getStart2=function(){return this._start2},n.prototype.setStart2=function(e){this._start2=e},n.prototype.getEnd2=function(){return this._end2},n.prototype.setEnd2=function(e){this._end2=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base=i;var r=n(9);function i(){this.mate=null,this.x=null,this.y=null,this.extracted=null,this.region=new r.Region}i.prototype.getMate=function(){return this.mate},i.prototype.setMate=function(e){this.mate=e},i.prototype.getX=function(){return this.x},i.prototype.setX=function(e){this.x=e},i.prototype.getY=function(){return this.y},i.prototype.setY=function(e){this.y=e},i.prototype.isExtracted=function(){return this.extracted},i.prototype.setExtracted=function(e){this.extracted=e},i.prototype.getRegion=function(){return this.region},i.prototype.setRegion=function(e){this.region=e}},function(e,t,n){var r=n(12);"string"==typeof r&&(r=[[e.id,r,""]]),n(14)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(13)()).push([e.id,'.forna-container .structure-background-rect {\r\n    stroke: black;\r\n    stroke-width: 5;\r\n    fill: transparent;\r\n}\r\n\r\n.forna-container circle.rna-base {\r\n  stroke: #ccc;\r\n  stroke-width: 1px;\r\n  opacity: 1;\r\n  fill: white;\r\n}\r\n\r\n.forna-container circle.rna-base.label {\r\n    stroke: transparent;\r\n    stroke-width: 0;\r\n    fill: white;\r\n}\r\n\r\n.forna-container line.link {\r\n  stroke: #999;\r\n  stroke-opacity: 0.8;\r\n  stroke-width: 2;\r\n}\r\n\r\n.forna-container line.rna-link {\r\n  stroke: #999;\r\n  stroke-opacity: 0.8;\r\n  stroke-width: 2;\r\n}\r\n\r\n.forna-container .overlay {\r\n    fill: transparent;\r\n}\r\n\r\n.forna-container .rna-name {\r\n    text-anchor: middle;\r\n    dy: -10;\r\n    font-family: Tahoma, Geneva, sans-serif;\r\n    font-size: 8pt;\r\n}\r\n\r\n.forna-container line.rna-link[link-type="backbone"] {\r\n    stroke: transparent;\r\n}\r\n\r\n.forna-container line.rna-link[link-type="basepair"] {\r\n    stroke: transparent;\r\n}\r\n\r\n.forna-container line.rna-link[link-type="fake"] {\r\n    stroke: transparent;\r\n}\r\n\r\n.forna-container line.rna-link[link-type="extra"] {\r\n    stroke: grey;\r\n}\r\n\r\n.forna-container line.rna-link[extra-link-type="correct"] {\r\n    stroke: green;\r\n}\r\n\r\n.forna-container line.rna-link[extra-link-type="incorrect"] {\r\n    stroke: green;\r\n}\r\n\r\n\r\n.forna-container path {\r\n    stroke-width: 2;\r\n}\r\n\r\n.forna-container path[extra-link-type="correct"] {\r\n    stroke: green;\r\n}\r\n\r\n.forna-container path[extra-link-type="incorrect"] {\r\n    stroke: red;\r\n}\r\n\r\n\r\n.forna-container line.basepair {\r\n  stroke: red;\r\n}\r\n\r\n.forna-container line.intermolecule {\r\n  stroke: blue;\r\n}\r\n\r\n.forna-container line.chain_chain {\r\n  stroke-dasharray: 3,3;\r\n}\r\n\r\n.forna-container line.fake {\r\n  stroke: green;\r\n}\r\n\r\n.forna-container .transparent {\r\n    fill: transparent;\r\n    stroke-width: 0;\r\n    stroke-opacity: 0;\r\n    opacity: 0;\r\n}\r\n\r\n.forna-container .d3-tip {\r\n    line-height: 1;\r\n    font-weight: bold;\r\n    padding: 6px;\r\n    background: rgba(0, 0, 0, 0.6);\r\n    color: #fff;\r\n    border-radius: 4px;\r\n    pointer-events: none;\r\n}\r\n\r\n.forna-container text.nucleotide-label {\r\n    font-size: 5.5pt;\r\n    font-weight: bold;\r\n    font-family: Tahoma, Geneva, sans-serif;\r\n    color: rgb(100,100,100);\r\n    pointer-events: none;\r\n}\r\n\r\n.forna-container text.number-label {\r\n    font-size: 5.5pt;\r\n    font-weight: bold;\r\n    font-family: Tahoma, Geneva, sans-serif;\r\n    color: rgb(100,100,100);\r\n    pointer-events: none;\r\n}\r\n\r\n.forna-container text {\r\n    pointer-events: none;\r\n}\r\n\r\n.forna-container g.gnode {\r\n\r\n}\r\n\r\n.forna-container .brush .extent {\r\n  fill-opacity: .1;\r\n  stroke: #fff;\r\n  shape-rendering: crispEdges;\r\n}\r\n\r\n.forna-container .noselect {\r\n    -webkit-touch-callout: none;\r\n    -webkit-user-select: none;\r\n    -khtml-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n}\r\n',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(e,t,n){var r={},i=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},a=i((function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())})),o=i((function(){return document.head||document.getElementsByTagName("head")[0]})),s=null,u=0,c=[];function l(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=r[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(g(i.parts[o],t))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(g(i.parts[o],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function h(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],a=i[0],o={css:i[1],media:i[2],sourceMap:i[3]};n[a]?n[a].parts.push(o):t.push(n[a]={id:a,parts:[o]})}return t}function f(e,t){var n=o(),r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function p(e){e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function d(e){var t=document.createElement("style");return t.type="text/css",f(e,t),t}function g(e,t){var n,r,i;if(t.singleton){var a=u++;n=s||(s=d(t)),r=y.bind(null,n,a,!1),i=y.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return t.rel="stylesheet",f(e,t),t}(t),r=w.bind(null,n),i=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=d(t),r=b.bind(null,n),i=function(){p(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){void 0===(t=t||{}).singleton&&(t.singleton=a()),void 0===t.insertAt&&(t.insertAt="bottom");var n=h(e);return l(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var o=n[a];(s=r[o.id]).refs--,i.push(s)}for(e&&l(h(e),t),a=0;a<i.length;a++){var s;if(0===(s=i[a]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete r[s.id]}}}};var v,m=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function y(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function b(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function w(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(i),a&&URL.revokeObjectURL(a)}},function(e,t,n){var r=n(16);"string"==typeof r&&(r=[[e.id,r,""]]),n(14)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(13)()).push([e.id,".forna-container svg {\r\n  display: block;\r\n  min-width: 100%;\r\n  width: 100%;\r\n  min-height: 100%;\r\n}\r\n\r\n.forna-container circle.node {\r\n  stroke: #ccc;\r\n  stroke-width: 1px;\r\n  opacity: 1;\r\n  fill: white;\r\n}\r\n\r\n.forna-container polygon.node {\r\n  stroke: #ccc;\r\n  stroke-width: 1px;\r\n  opacity: 1;\r\n  fill: white;\r\n}\r\n\r\n.forna-container circle.node.label {\r\n    stroke: transparent;\r\n    stroke-width: 0;\r\n    fill: white;\r\n    display: inline;\r\n}\r\n\r\n.forna-container circle.outline_node {\r\n    stroke-width: 1px;\r\n    fill: red;\r\n}\r\n\r\n.forna-container circle.protein {\r\n    fill: gray;\r\n    fill-opacity: 0.5;\r\n    stroke-width: 4;\r\n}\r\n\r\n.forna-container circle.hidden_outline {\r\n    stroke-width: 0px;\r\n}\r\n\r\n\r\n.forna-container line.link {\r\n  stroke: #999;\r\n  stroke-opacity: 0.8;\r\n  stroke-width: 2;\r\n}\r\n\r\n.forna-container line.pseudoknot {\r\n    stroke: red;\r\n}\r\n\r\n.forna-container line.basepair {\r\n  stroke: red;\r\n}\r\n\r\n.forna-container line.intermolecule {\r\n  stroke: blue;\r\n}\r\n\r\n.forna-container line.chain_chain {\r\n  stroke-dasharray: 3,3;\r\n}\r\n\r\n.forna-container line.fake {\r\n  stroke: green;\r\n}\r\n\r\n.forna-container .transparent {\r\n    fill: transparent;\r\n    stroke-width: 0;\r\n    stroke-opacity: 0;\r\n    opacity: 0;\r\n    visibility: hidden;\r\n}\r\n\r\n.forna-container .drag_line {\r\n  stroke: #999;\r\n  stroke-width: 2;\r\n  pointer-events: none;\r\n}\r\n\r\n.forna-container .drag_line_hidden {\r\n  stroke: #999;\r\n  stroke-width: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.forna-container .d3-tip {\r\n    line-height: 1;\r\n    font-weight: bold;\r\n    padding: 6px;\r\n    background: rgba(0, 0, 0, 0.6);\r\n    color: #fff;\r\n    border-radius: 4px;\r\n    pointer-events: none;\r\n          }\r\n\r\n.forna-container text.node-label {\r\n    font-weight: bold;\r\n    font-family: Tahoma, Geneva, sans-serif;\r\n    color: rgb(100,100,100);\r\n    pointer-events: none;\r\n}\r\n\r\n.forna-container text {\r\n    pointer-events: none;\r\n}\r\n\r\n.forna-container g.gnode {\r\n\r\n}\r\n\r\n.forna-container circle.outline_node.selected {\r\n    visibility: visible;\r\n}\r\n\r\n.forna-container circle.outline_node {\r\n    visibility: hidden;\r\n}\r\n\r\n.forna-container .brush .extent {\r\n  fill-opacity: .1;\r\n  stroke: #fff;\r\n  shape-rendering: crispEdges;\r\n}\r\n\r\n.forna-container .noselect {\r\n    -webkit-touch-callout: none;\r\n    -webkit-user-select: none;\r\n    -khtml-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n}\r\n",""])},function(e,t,n){var r,i;!function(){var a={version:"3.5.17"},o=[].slice,s=function(e){return o.call(e)},u=this.document;function c(e){return e&&(e.ownerDocument||e.document||e).documentElement}function l(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(u)try{s(u.documentElement.childNodes)[0].nodeType}catch(e){s=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var h=this.Element.prototype,f=h.setAttribute,p=h.setAttributeNS,d=this.CSSStyleDeclaration.prototype,g=d.setProperty;h.setAttribute=function(e,t){f.call(this,e,t+"")},h.setAttributeNS=function(e,t,n){p.call(this,e,t,n+"")},d.setProperty=function(e,t,n){g.call(this,e,t+"",n)}}function v(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function m(e){return null===e?NaN:+e}function y(e){return!isNaN(e)}function b(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}a.ascending=v,a.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},a.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},a.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},a.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},a.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)y(n=+e[a])&&(r+=n);else for(;++a<i;)y(n=+t.call(e,e[a],a))&&(r+=n);return r},a.mean=function(e,t){var n,r=0,i=e.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)y(n=m(e[a]))?r+=n:--o;else for(;++a<i;)y(n=m(t.call(e,e[a],a)))?r+=n:--o;if(o)return r/o},a.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i},a.median=function(e,t){var n,r=[],i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)y(n=m(e[o]))&&r.push(n);else for(;++o<i;)y(n=m(t.call(e,e[o],o)))&&r.push(n);if(r.length)return a.quantile(r.sort(v),.5)},a.variance=function(e,t){var n,r,i=e.length,a=0,o=0,s=-1,u=0;if(1===arguments.length)for(;++s<i;)y(n=m(e[s]))&&(o+=(r=n-a)*(n-(a+=r/++u)));else for(;++s<i;)y(n=m(t.call(e,e[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++u)));if(u>1)return o/(u-1)},a.deviation=function(){var e=a.variance.apply(this,arguments);return e?Math.sqrt(e):e};var w=b(v);function x(e){return e.length}a.bisectLeft=w.left,a.bisect=a.bisectRight=w.right,a.bisector=function(e){return b(1===e.length?function(t,n){return v(e(t),n)}:e)},a.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,a<2&&(t=0));for(var r,i,a=n-t;a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},a.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},a.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},a.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=a.min(e,x),r=new Array(n);++t<n;)for(var i,o=-1,s=r[t]=new Array(i);++o<i;)s[o]=e[o][t];return r},a.zip=function(){return a.transpose(arguments)},a.keys=function(e){var t=[];for(var n in e)t.push(n);return t},a.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},a.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},a.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--o]=r[t];return n};var k=Math.abs;function S(e){for(var t=1;e*t%1;)t*=10;return t}function _(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function C(){this._=Object.create(null)}function R(e){return"__proto__"==(e+="")||"\0"===e[0]?"\0"+e:e}function E(e){return"\0"===(e+="")[0]?e.slice(1):e}function A(e){return R(e)in this._}function T(e){return(e=R(e))in this._&&delete this._[e]}function M(){var e=[];for(var t in this._)e.push(E(t));return e}function L(){var e=0;for(var t in this._)++e;return e}function I(){for(var e in this._)return!1;return!0}function P(){this._=Object.create(null)}function N(e){return e}function O(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function F(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=D.length;n<r;++n){var i=D[n]+t;if(i in e)return i}}a.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],a=S(k(n)),o=-1;if(e*=a,t*=a,(n*=a)<0)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},a.map=function(e,t){var n=new C;if(e instanceof C)e.forEach((function(e,t){n.set(e,t)}));else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n},_(C,{has:A,get:function(e){return this._[R(e)]},set:function(e,t){return this._[R(e)]=t},remove:T,keys:M,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:E(t),value:this._[t]});return e},size:L,empty:I,forEach:function(e){for(var t in this._)e.call(this,E(t),this._[t])}}),a.nest=function(){var e,t,n={},r=[],i=[];function o(i,a,s){if(s>=r.length)return t?t.call(n,a):e?a.sort(e):a;for(var u,c,l,h,f=-1,p=a.length,d=r[s++],g=new C;++f<p;)(h=g.get(u=d(c=a[f])))?h.push(c):g.set(u,[c]);return i?(c=i(),l=function(e,t){c.set(e,o(i,t,s))}):(c={},l=function(e,t){c[e]=o(i,t,s)}),g.forEach(l),c}return n.map=function(e,t){return o(t,e,0)},n.entries=function(e){return function e(t,n){if(n>=r.length)return t;var a=[],o=i[n++];return t.forEach((function(t,r){a.push({key:t,values:e(r,n)})})),o?a.sort((function(e,t){return o(e.key,t.key)})):a}(o(a.map,e,0),0)},n.key=function(e){return r.push(e),n},n.sortKeys=function(e){return i[r.length-1]=e,n},n.sortValues=function(t){return e=t,n},n.rollup=function(e){return t=e,n},n},a.set=function(e){var t=new P;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},_(P,{has:A,add:function(e){return this._[R(e+="")]=!0,e},remove:T,values:M,size:L,empty:I,forEach:function(e){for(var t in this._)e.call(this,E(t))}}),a.behavior={},a.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=O(e,t,t[n]);return e};var D=["webkit","ms","moz","Moz","o","O"];function B(){}function z(){}function U(e){var t=[],n=new C;function r(){for(var n,r=t,i=-1,a=r.length;++i<a;)(n=r[i].on)&&n.apply(this,arguments);return e}return r.on=function(r,i){var a,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,t=t.slice(0,a=t.indexOf(o)).concat(t.slice(a+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function H(){a.event.preventDefault()}function j(){for(var e,t=a.event;e=t.sourceEvent;)t=e;return t}function q(e){for(var t=new z,n=0,r=arguments.length;++n<r;)t[arguments[n]]=U(t);return t.of=function(n,r){return function(i){try{var o=i.sourceEvent=a.event;i.target=e,a.event=i,t[i.type].apply(n,r)}finally{a.event=o}}},t}a.dispatch=function(){for(var e=new z,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=U(e);return e},z.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},a.event=null,a.requote=function(e){return e.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,G={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function W(e){return G(e,Z),e}var $=function(e,t){return t.querySelector(e)},Y=function(e,t){return t.querySelectorAll(e)},X=function(e,t){var n=e.matches||e[F(e,"matchesSelector")];return(X=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&($=function(e,t){return Sizzle(e,t)[0]||null},Y=Sizzle,X=Sizzle.matchesSelector),a.selection=function(){return a.select(u.documentElement)};var Z=a.selection.prototype=[];function K(e){return"function"==typeof e?e:function(){return $(e,this)}}function Q(e){return"function"==typeof e?e:function(){return Y(e,this)}}Z.select=function(e){var t,n,r,i,a=[];e=K(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var u=-1,c=r.length;++u<c;)(i=r[u])?(t.push(n=e.call(i,i.__data__,u,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return W(a)},Z.selectAll=function(e){var t,n,r=[];e=Q(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],u=-1,c=o.length;++u<c;)(n=o[u])&&(r.push(t=s(e.call(n,n.__data__,u,i))),t.parentNode=n);return W(r)};var J="http://www.w3.org/1999/xhtml",ee={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function te(e,t){return e=a.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function ne(e){return e.trim().replace(/\s+/g," ")}function re(e){return new RegExp("(?:^|\\s+)"+a.requote(e)+"(?:\\s+|$)","g")}function ie(e){return(e+"").trim().split(/^|\s+/)}function ae(e,t){var n=(e=ie(e).map(oe)).length;return"function"==typeof t?function(){for(var r=-1,i=t.apply(this,arguments);++r<n;)e[r](this,i)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function oe(e){var t=re(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",ne(i+" "+e))):n.setAttribute("class",ne(i.replace(t," ")))}}function se(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function ue(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function ce(e){return"function"==typeof e?e:(e=a.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===J&&t.documentElement.namespaceURI===J?t.createElement(e):t.createElementNS(n,e)}}function le(){var e=this.parentNode;e&&e.removeChild(this)}function he(e){return{__data__:e}}function fe(e){return function(){return X(this,e)}}function pe(e){return arguments.length||(e=v),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function de(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,a=e[n],o=0,s=a.length;o<s;o++)(i=a[o])&&t(i,o,n);return e}function ge(e){return G(e,ve),e}a.ns={prefix:ee,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),ee.hasOwnProperty(n)?{space:ee[n],local:e}:e}},Z.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=a.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(te(t,e[t]));return this}return this.each(te(e,t))},Z.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=ie(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!re(e[i]).test(t))return!1;return!0}for(t in e)this.each(ae(t,e[t]));return this}return this.each(ae(e,t))},Z.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(se(n,e[n],t));return this}if(r<2){var i=this.node();return l(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(se(e,t,n))},Z.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(ue(t,e[t]));return this}return this.each(ue(e,t))},Z.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Z.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Z.append=function(e){return e=ce(e),this.select((function(){return this.appendChild(e.apply(this,arguments))}))},Z.insert=function(e,t){return e=ce(e),t=K(t),this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))},Z.remove=function(){return this.each(le)},Z.data=function(e,t){var n,r,i=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(n=this[0]).length);++i<a;)(r=n[i])&&(e[i]=r.__data__);return e}function o(e,n){var r,i,a,o=e.length,l=n.length,h=Math.min(o,l),f=new Array(l),p=new Array(l),d=new Array(o);if(t){var g,v=new C,m=new Array(o);for(r=-1;++r<o;)(i=e[r])&&(v.has(g=t.call(i,i.__data__,r))?d[r]=i:v.set(g,i),m[r]=g);for(r=-1;++r<l;)(i=v.get(g=t.call(n,a=n[r],r)))?!0!==i&&(f[r]=i,i.__data__=a):p[r]=he(a),v.set(g,!0);for(r=-1;++r<o;)r in m&&!0!==v.get(m[r])&&(d[r]=e[r])}else{for(r=-1;++r<h;)i=e[r],a=n[r],i?(i.__data__=a,f[r]=i):p[r]=he(a);for(;r<l;++r)p[r]=he(n[r]);for(;r<o;++r)d[r]=e[r]}p.update=f,p.parentNode=f.parentNode=d.parentNode=e.parentNode,s.push(p),u.push(f),c.push(d)}var s=ge([]),u=W([]),c=W([]);if("function"==typeof e)for(;++i<a;)o(n=this[i],e.call(n,n.parentNode.__data__,i));else for(;++i<a;)o(n=this[i],e);return u.enter=function(){return s},u.exit=function(){return c},u},Z.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Z.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=fe(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;s<u;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return W(i)},Z.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Z.sort=function(e){e=pe.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Z.each=function(e){return de(this,(function(t,n,r){e.call(t,t.__data__,n,r)}))},Z.call=function(e){var t=s(arguments);return e.apply(t[0]=this,t),this},Z.empty=function(){return!this.node()},Z.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},Z.size=function(){var e=0;return de(this,(function(){++e})),e};var ve=[];function me(e){var t,n;return function(r,i,a){var o,s=e[a].update,u=s.length;for(a!=n&&(n=a,t=0),i>=t&&(t=i+1);!(o=s[t])&&++t<u;);return o}}function ye(e,t,n){var r="__on"+e,i=e.indexOf("."),o=we;i>0&&(e=e.slice(0,i));var u=be.get(e);function c(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}return u&&(e=u,o=xe),i?t?function(){var i=o(t,s(arguments));c.call(this),this.addEventListener(e,this[r]=i,i.$=n),i._=t}:c:t?B:function(){var t,n=new RegExp("^__on([^.]+)"+a.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}}a.selection.enter=ge,a.selection.enter.prototype=ve,ve.append=Z.append,ve.empty=Z.empty,ve.node=Z.node,ve.call=Z.call,ve.size=Z.size,ve.select=function(e){for(var t,n,r,i,a,o=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(a=i[c])?(t.push(r[c]=n=e.call(i.parentNode,a.__data__,c,s)),n.__data__=a.__data__):t.push(null)}return W(o)},ve.insert=function(e,t){return arguments.length<2&&(t=me(this)),Z.insert.call(this,e,t)},a.select=function(e){var t;return"string"==typeof e?(t=[$(e,u)]).parentNode=u.documentElement:(t=[e]).parentNode=c(e),W([t])},a.selectAll=function(e){var t;return"string"==typeof e?(t=s(Y(e,u))).parentNode=u.documentElement:(t=s(e)).parentNode=null,W([t])},Z.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(ye(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(ye(e,t,n))};var be=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});function we(e,t){return function(n){var r=a.event;a.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{a.event=r}}}function xe(e,t){var n=we(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}u&&be.forEach((function(e){"on"+e in u&&be.remove(e)}));var ke,Se=0;function _e(e){var t=".dragsuppress-"+ ++Se,n="click"+t,r=a.select(l(e)).on("touchmove"+t,H).on("dragstart"+t,H).on("selectstart"+t,H);if(null==ke&&(ke=!("onselectstart"in e)&&F(e.style,"userSelect")),ke){var i=c(e).style,o=i[ke];i[ke]="none"}return function(e){if(r.on(t,null),ke&&(i[ke]=o),e){var a=function(){r.on(n,null)};r.on(n,(function(){H(),a()}),!0),setTimeout(a,0)}}}a.mouse=function(e){return Re(e,j())};var Ce=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Re(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(Ce<0){var i=l(e);if(i.scrollX||i.scrollY){var o=(n=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ce=!(o.f||o.e),n.remove()}}return Ce?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function Ee(){return a.event.changedTouches[0].identifier}a.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=j().changedTouches),t)for(var r,i=0,a=t.length;i<a;++i)if((r=t[i]).identifier===n)return Re(e,r)},a.behavior.drag=function(){var e=q(i,"drag","dragstart","dragend"),t=null,n=o(B,a.mouse,l,"mousemove","mouseup"),r=o(Ee,a.touch,N,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(n,r,i,o,s){return function(){var u,c=this,l=a.event.target.correspondingElement||a.event.target,h=c.parentNode,f=e.of(c,arguments),p=0,d=n(),g=".drag"+(null==d?"":"-"+d),v=a.select(i(l)).on(o+g,b).on(s+g,w),m=_e(l),y=r(h,d);function b(){var e,t,n=r(h,d);n&&(e=n[0]-y[0],t=n[1]-y[1],p|=e|t,y=n,f({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:e,dy:t}))}function w(){r(h,d)&&(v.on(o+g,null).on(s+g,null),m(p),f({type:"dragend"}))}u=t?[(u=t.apply(c,arguments)).x-y[0],u.y-y[1]]:[0,0],f({type:"dragstart"})}}return i.origin=function(e){return arguments.length?(t=e,i):t},a.rebind(i,e,"on")},a.touches=function(e,t){return arguments.length<2&&(t=j().touches),t?s(t).map((function(t){var n=Re(e,t);return n.identifier=t.identifier,n})):[]};var Ae=1e-6,Te=Ae*Ae,Me=Math.PI,Le=2*Me,Ie=Le-Ae,Pe=Me/2,Ne=Me/180,Oe=180/Me;function Fe(e){return e>0?1:e<0?-1:0}function De(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Be(e){return e>1?0:e<-1?Me:Math.acos(e)}function ze(e){return e>1?Pe:e<-1?-Pe:Math.asin(e)}function Ue(e){return((e=Math.exp(e))+1/e)/2}function He(e){return(e=Math.sin(e/2))*e}var je=Math.SQRT2;a.interpolateZoom=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],u=t[1],c=t[2],l=s-i,h=u-a,f=l*l+h*h;if(f<Te)r=Math.log(c/o)/je,n=function(e){return[i+e*l,a+e*h,o*Math.exp(je*e*r)]};else{var p=Math.sqrt(f),d=(c*c-o*o+4*f)/(2*o*2*p),g=(c*c-o*o-4*f)/(2*c*2*p),v=Math.log(Math.sqrt(d*d+1)-d),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/je,n=function(e){var t,n=e*r,s=Ue(v),u=o/(2*p)*(s*(t=je*n+v,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[i+u*l,a+u*h,o*s/Ue(je*n+v)]}}return n.duration=1e3*r,n},a.behavior.zoom=function(){var e,t,n,r,i,o,s,c,h,f={x:0,y:0,k:1},p=[960,500],d=Ge,g=250,v=0,m="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",w="touchstart.zoom",x=q(k,"zoomstart","zoom","zoomend");function k(e){e.on(m,L).on(Ve+".zoom",P).on("dblclick.zoom",N).on(w,I)}function S(e){return[(e[0]-f.x)/f.k,(e[1]-f.y)/f.k]}function _(e){f.k=Math.max(d[0],Math.min(d[1],e))}function C(e,t){t=function(e){return[e[0]*f.k+f.x,e[1]*f.k+f.y]}(t),f.x+=e[0]-t[0],f.y+=e[1]-t[1]}function R(e,n,r,i){e.__chart__={x:f.x,y:f.y,k:f.k},_(Math.pow(2,i)),C(t=n,r),e=a.select(e),g>0&&(e=e.transition().duration(g)),e.call(k.event)}function E(){s&&s.domain(o.range().map((function(e){return(e-f.x)/f.k})).map(o.invert)),h&&h.domain(c.range().map((function(e){return(e-f.y)/f.k})).map(c.invert))}function A(e){v++||e({type:"zoomstart"})}function T(e){E(),e({type:"zoom",scale:f.k,translate:[f.x,f.y]})}function M(e){--v||(e({type:"zoomend"}),t=null)}function L(){var e=this,t=x.of(e,arguments),n=0,r=a.select(l(e)).on(y,s).on(b,u),i=S(a.mouse(e)),o=_e(e);function s(){n=1,C(a.mouse(e),i),T(t)}function u(){r.on(y,null).on(b,null),o(n),M(t)}xs.call(e),A(t)}function I(){var e,t=this,n=x.of(t,arguments),r={},o=0,s=".zoom-"+a.event.changedTouches[0].identifier,u="touchmove"+s,c="touchend"+s,l=[],h=a.select(t),p=_e(t);function d(){var n=a.touches(t);return e=f.k,n.forEach((function(e){e.identifier in r&&(r[e.identifier]=S(e))})),n}function g(){var e=a.event.target;a.select(e).on(u,v).on(c,y),l.push(e);for(var n=a.event.changedTouches,s=0,h=n.length;s<h;++s)r[n[s].identifier]=null;var p=d(),g=Date.now();if(1===p.length){if(g-i<500){var m=p[0];R(t,m,r[m.identifier],Math.floor(Math.log(f.k)/Math.LN2)+1),H()}i=g}else if(p.length>1){m=p[0];var b=p[1],w=m[0]-b[0],x=m[1]-b[1];o=w*w+x*x}}function v(){var s,u,c,l,h=a.touches(t);xs.call(t);for(var f=0,p=h.length;f<p;++f,l=null)if(c=h[f],l=r[c.identifier]){if(u)break;s=c,u=l}if(l){var d=(d=c[0]-s[0])*d+(d=c[1]-s[1])*d,g=o&&Math.sqrt(d/o);s=[(s[0]+c[0])/2,(s[1]+c[1])/2],u=[(u[0]+l[0])/2,(u[1]+l[1])/2],_(g*e)}i=null,C(s,u),T(n)}function y(){if(a.event.touches.length){for(var e=a.event.changedTouches,t=0,i=e.length;t<i;++t)delete r[e[t].identifier];for(var o in r)return void d()}a.selectAll(l).on(s,null),h.on(m,L).on(w,I),p(),M(n)}g(),A(n),h.on(m,null).on(w,g)}function P(){var i=x.of(this,arguments);r?clearTimeout(r):(xs.call(this),e=S(t=n||a.mouse(this)),A(i)),r=setTimeout((function(){r=null,M(i)}),50),H(),_(Math.pow(2,.002*qe())*f.k),C(t,e),T(i)}function N(){var e=a.mouse(this),t=Math.log(f.k)/Math.LN2;R(this,e,S(e),a.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return Ve||(Ve="onwheel"in u?(qe=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(qe=function(){return a.event.wheelDelta},"mousewheel"):(qe=function(){return-a.event.detail},"MozMousePixelScroll")),k.event=function(e){e.each((function(){var e=x.of(this,arguments),n=f;_s?a.select(this).transition().each("start.zoom",(function(){f=this.__chart__||{x:0,y:0,k:1},A(e)})).tween("zoom:zoom",(function(){var r=p[0],i=p[1],o=t?t[0]:r/2,s=t?t[1]:i/2,u=a.interpolateZoom([(o-f.x)/f.k,(s-f.y)/f.k,r/f.k],[(o-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(t){var n=u(t),i=r/n[2];this.__chart__=f={x:o-n[0]*i,y:s-n[1]*i,k:i},T(e)}})).each("interrupt.zoom",(function(){M(e)})).each("end.zoom",(function(){M(e)})):(this.__chart__=f,A(e),T(e),M(e))}))},k.translate=function(e){return arguments.length?(f={x:+e[0],y:+e[1],k:f.k},E(),k):[f.x,f.y]},k.scale=function(e){return arguments.length?(f={x:f.x,y:f.y,k:null},_(+e),E(),k):f.k},k.scaleExtent=function(e){return arguments.length?(d=null==e?Ge:[+e[0],+e[1]],k):d},k.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],k):n},k.size=function(e){return arguments.length?(p=e&&[+e[0],+e[1]],k):p},k.duration=function(e){return arguments.length?(g=+e,k):g},k.x=function(e){return arguments.length?(s=e,o=e.copy(),f={x:0,y:0,k:1},k):s},k.y=function(e){return arguments.length?(h=e,c=e.copy(),f={x:0,y:0,k:1},k):h},a.rebind(k,x,"on")};var qe,Ve,Ge=[0,1/0];function We(){}function $e(e,t,n){return this instanceof $e?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof $e?new $e(e.h,e.s,e.l):ft(""+e,pt,$e):new $e(e,t,n)}a.color=We,We.prototype.toString=function(){return this.rgb()+""},a.hsl=$e;var Ye=$e.prototype=new We;function Xe(e,t,n){var r,i;function a(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),new st(a(e+120),a(e),a(e-120))}function Ze(e,t,n){return this instanceof Ze?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof Ze?new Ze(e.h,e.c,e.l):rt(e instanceof Je?e.l:(e=dt((e=a.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ze(e,t,n)}Ye.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new $e(this.h,this.s,this.l/e)},Ye.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new $e(this.h,this.s,e*this.l)},Ye.rgb=function(){return Xe(this.h,this.s,this.l)},a.hcl=Ze;var Ke=Ze.prototype=new We;function Qe(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Je(n,Math.cos(e*=Ne)*t,Math.sin(e)*t)}function Je(e,t,n){return this instanceof Je?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Je?new Je(e.l,e.a,e.b):e instanceof Ze?Qe(e.h,e.c,e.l):dt((e=st(e)).r,e.g,e.b):new Je(e,t,n)}Ke.brighter=function(e){return new Ze(this.h,this.c,Math.min(100,this.l+et*(arguments.length?e:1)))},Ke.darker=function(e){return new Ze(this.h,this.c,Math.max(0,this.l-et*(arguments.length?e:1)))},Ke.rgb=function(){return Qe(this.h,this.c,this.l).rgb()},a.lab=Je;var et=18,tt=Je.prototype=new We;function nt(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return new st(ot(3.2404542*(i=.95047*it(i))-1.5371385*(r=1*it(r))-.4985314*(a=1.08883*it(a))),ot(-.969266*i+1.8760108*r+.041556*a),ot(.0556434*i-.2040259*r+1.0572252*a))}function rt(e,t,n){return e>0?new Ze(Math.atan2(n,t)*Oe,Math.sqrt(t*t+n*n),e):new Ze(NaN,NaN,e)}function it(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function at(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ot(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function st(e,t,n){return this instanceof st?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof st?new st(e.r,e.g,e.b):ft(""+e,st,Xe):new st(e,t,n)}function ut(e){return new st(e>>16,e>>8&255,255&e)}function ct(e){return ut(e)+""}tt.brighter=function(e){return new Je(Math.min(100,this.l+et*(arguments.length?e:1)),this.a,this.b)},tt.darker=function(e){return new Je(Math.max(0,this.l-et*(arguments.length?e:1)),this.a,this.b)},tt.rgb=function(){return nt(this.l,this.a,this.b)},a.rgb=st;var lt=st.prototype=new We;function ht(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ft(e,t,n){var r,i,a,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(vt(i[0]),vt(i[1]),vt(i[2]))}return(a=mt.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,u=15&a,u|=u<<4):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,u=255&a)),t(o,s,u))}function pt(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,u=(o+a)/2;return s?(i=u<.5?s/(o+a):s/(2-o-a),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=u>0&&u<1?0:r),new $e(r,i,u)}function dt(e,t,n){var r=at((.4124564*(e=gt(e))+.3575761*(t=gt(t))+.1804375*(n=gt(n)))/.95047),i=at((.2126729*e+.7151522*t+.072175*n)/1);return Je(116*i-16,500*(r-i),200*(i-at((.0193339*e+.119192*t+.9503041*n)/1.08883)))}function gt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function vt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}lt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new st(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new st(i,i,i)},lt.darker=function(e){return new st((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},lt.hsl=function(){return pt(this.r,this.g,this.b)},lt.toString=function(){return"#"+ht(this.r)+ht(this.g)+ht(this.b)};var mt=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function yt(e){return"function"==typeof e?e:function(){return e}}function bt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),wt(t,n,e,r)}}function wt(e,t,n,r){var i={},o=a.dispatch("beforesend","progress","load","error"),u={},c=new XMLHttpRequest,l=null;function h(){var e,t=c.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(c)||t>=200&&t<300||304===t){try{e=n.call(i,c)}catch(e){return void o.error.call(i,e)}o.load.call(i,e)}else o.error.call(i,c)}return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(e)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=h:c.onreadystatechange=function(){c.readyState>3&&h()},c.onprogress=function(e){var t=a.event;a.event=e;try{o.progress.call(i,c)}finally{a.event=t}},i.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",i)},i.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",i):t},i.responseType=function(e){return arguments.length?(l=e,i):l},i.response=function(e){return n=e,i},["get","post"].forEach((function(e){i[e]=function(){return i.send.apply(i,[e].concat(s(arguments)))}})),i.send=function(n,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),c.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),c.setRequestHeader)for(var s in u)c.setRequestHeader(s,u[s]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=a&&i.on("error",a).on("load",(function(e){a(null,e)})),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},a.rebind(i,o,"on"),null==r?i:i.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(r))}mt.forEach((function(e,t){mt.set(e,ut(t))})),a.functor=yt,a.xhr=bt(N),a.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(e,n,r){arguments.length<3&&(r=n,n=null);var i=wt(e,t,null==n?a:o(n),r);return i.row=function(e){return arguments.length?i.response(null==(n=e)?a:o(e)):n},i}function a(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}function s(t){return t.map(u).join(e)}function u(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i.parse=function(e,t){var n;return i.parseRows(e,(function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i}))},i.parseRows=function(e,t){var n,i,a={},o={},s=[],u=e.length,c=0,l=0;function h(){if(c>=u)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return c=n+2,13===(s=e.charCodeAt(n+1))?(i=!0,10===e.charCodeAt(n+2)&&++c):10===s&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c<u;){var s,l=1;if(10===(s=e.charCodeAt(c++)))i=!0;else if(13===s)i=!0,10===e.charCodeAt(c)&&(++c,++l);else if(s!==r)continue;return e.slice(t,c-l)}return e.slice(t)}for(;(n=h())!==o;){for(var f=[];n!==a&&n!==o;)f.push(n),n=h();t&&null==(f=t(f,l++))||s.push(f)}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new P,r=[];return t.forEach((function(e){for(var t in e)n.has(t)||r.push(n.add(t))})),[r.map(u).join(e)].concat(t.map((function(t){return r.map((function(e){return u(t[e])})).join(e)}))).join("\n")},i.formatRows=function(e){return e.map(s).join("\n")},i},a.csv=a.dsv(",","text/csv"),a.tsv=a.dsv("\t","text/tab-separated-values");var xt,kt,St,_t,Ct=this[F(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function Rt(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i=n+t,a={c:e,t:i,n:null};return kt?kt.n=a:xt=a,kt=a,St||(_t=clearTimeout(_t),St=1,Ct(Et)),a}function Et(){var e=At(),t=Tt()-e;t>24?(isFinite(t)&&(clearTimeout(_t),_t=setTimeout(Et,t)),St=0):(St=1,Ct(Et))}function At(){for(var e=Date.now(),t=xt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Tt(){for(var e,t=xt,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:xt=t.n;return kt=e,n}function Mt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}a.timer=function(){Rt.apply(this,arguments)},a.timer.flush=function(){At(),Tt()},a.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Lt=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map((function(e,t){var n=Math.pow(10,3*k(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}));function It(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,o=r&&n?function(e,t){for(var i=e.length,a=[],o=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>t&&(s=Math.max(1,t-u)),a.push(e.substring(i-=s,i+s)),!((u+=s+1)>t));)s=r[o=(o+1)%r.length];return a.reverse().join(n)}:N;return function(e){var n=Pt.exec(e),r=n[1]||" ",s=n[2]||">",u=n[3]||"-",c=n[4]||"",l=n[5],h=+n[6],f=n[7],p=n[8],d=n[9],g=1,v="",m="",y=!1,b=!0;switch(p&&(p=+p.substring(1)),(l||"0"===r&&"="===s)&&(l=r="0",s="="),d){case"n":f=!0,d="g";break;case"%":g=100,m="%",d="f";break;case"p":g=100,m="%",d="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+d.toLowerCase());case"c":b=!1;case"d":y=!0,p=0;break;case"s":g=-1,d="r"}"$"===c&&(v=i[0],m=i[1]),"r"!=d||p||(d="g"),null!=p&&("g"==d?p=Math.max(1,Math.min(21,p)):"e"!=d&&"f"!=d||(p=Math.max(0,Math.min(20,p)))),d=Nt.get(d)||Ot;var w=l&&f;return function(e){var n=m;if(y&&e%1)return"";var i=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===u?"":u;if(g<0){var c=a.formatPrefix(e,p);e=c.scale(e),n=c.symbol+m}else e*=g;var x,k,S=(e=d(e,p)).lastIndexOf(".");if(S<0){var _=b?e.lastIndexOf("e"):-1;_<0?(x=e,k=""):(x=e.substring(0,_),k=e.substring(_))}else x=e.substring(0,S),k=t+e.substring(S+1);!l&&f&&(x=o(x,1/0));var C=v.length+x.length+k.length+(w?0:i.length),R=C<h?new Array(C=h-C+1).join(r):"";return w&&(x=o(R+x,R.length?h-k.length:1/0)),i+=v,e=x+k,("<"===s?i+e+R:">"===s?R+i+e:"^"===s?R.substring(0,C>>=1)+i+e+R.substring(C):i+(w?e:R+e))+n}}}a.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=a.round(e,Mt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Lt[8+n/3]};var Pt=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Nt=a.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=a.round(e,Mt(e,t))).toFixed(Math.max(0,Math.min(20,Mt(e*(1+1e-15),t))))}});function Ot(e){return e+""}var Ft=a.time={},Dt=Date;function Bt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Bt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){zt.setUTCDate.apply(this._,arguments)},setDay:function(){zt.setUTCDay.apply(this._,arguments)},setFullYear:function(){zt.setUTCFullYear.apply(this._,arguments)},setHours:function(){zt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){zt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){zt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){zt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){zt.setUTCSeconds.apply(this._,arguments)},setTime:function(){zt.setTime.apply(this._,arguments)}};var zt=Date.prototype;function Ut(e,t,n){function r(t){var n=e(t),r=a(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new Dt(n-1)),1),n}function a(e,n){return t(e=new Dt(+e),n),e}function o(e,r,a){var o=i(e),s=[];if(a>1)for(;o<r;)n(o)%a||s.push(new Date(+o)),t(o,1);else for(;o<r;)s.push(new Date(+o)),t(o,1);return s}e.floor=e,e.round=r,e.ceil=i,e.offset=a,e.range=o;var s=e.utc=Ht(e);return s.floor=s,s.round=Ht(r),s.ceil=Ht(i),s.offset=Ht(a),s.range=function(e,t,n){try{Dt=Bt;var r=new Bt;return r._=e,o(r,t,n)}finally{Dt=Date}},e}function Ht(e){return function(t,n){try{Dt=Bt;var r=new Bt;return r._=t,e(r,n)._}finally{Dt=Date}}}function jt(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,u=e.months,c=e.shortMonths;function l(e){var t=e.length;function n(n){for(var r,i,a,o=[],s=-1,u=0;++s<t;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=qt[r=e.charAt(++s)])&&(r=e.charAt(++s)),(a=x[r])&&(r=a(n,null==i?"e"===r?" ":"0":i)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(h(n,e,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Dt!==Bt,i=new(r?Bt:Dt);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return e},n}function h(e,t,n,r){for(var i,a,o,s=0,u=t.length,c=n.length;s<u;){if(r>=c)return-1;if(37===(i=t.charCodeAt(s++))){if(o=t.charAt(s++),!(a=k[o in qt?t.charAt(s++):o])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}l.utc=function(e){var t=l(e);function n(e){try{var n=new(Dt=Bt);return n._=e,t(n)}finally{Dt=Date}}return n.parse=function(e){try{Dt=Bt;var n=t.parse(e);return n&&n._}finally{Dt=Date}},n.toString=t.toString,n},l.multi=l.utc.multi=hn;var f=a.map(),p=$t(o),d=Yt(o),g=$t(s),v=Yt(s),m=$t(u),y=Yt(u),b=$t(c),w=Yt(c);i.forEach((function(e,t){f.set(e.toLowerCase(),t)}));var x={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:l(t),d:function(e,t){return Wt(e.getDate(),t,2)},e:function(e,t){return Wt(e.getDate(),t,2)},H:function(e,t){return Wt(e.getHours(),t,2)},I:function(e,t){return Wt(e.getHours()%12||12,t,2)},j:function(e,t){return Wt(1+Ft.dayOfYear(e),t,3)},L:function(e,t){return Wt(e.getMilliseconds(),t,3)},m:function(e,t){return Wt(e.getMonth()+1,t,2)},M:function(e,t){return Wt(e.getMinutes(),t,2)},p:function(e){return i[+(e.getHours()>=12)]},S:function(e,t){return Wt(e.getSeconds(),t,2)},U:function(e,t){return Wt(Ft.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Wt(Ft.mondayOfYear(e),t,2)},x:l(n),X:l(r),y:function(e,t){return Wt(e.getFullYear()%100,t,2)},Y:function(e,t){return Wt(e.getFullYear()%1e4,t,4)},Z:cn,"%":function(){return"%"}},k={a:function(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.w=v.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.m=w.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){m.lastIndex=0;var r=m.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,t,n){return h(e,x.c.toString(),t,n)},d:nn,e:nn,H:an,I:an,j:rn,L:un,m:tn,M:on,p:function(e,t,n){var r=f.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:sn,U:Zt,w:Xt,W:Kt,x:function(e,t,n){return h(e,x.x.toString(),t,n)},X:function(e,t,n){return h(e,x.X.toString(),t,n)},y:Jt,Y:Qt,Z:en,"%":ln};return l}Ft.year=Ut((function(e){return(e=Ft.day(e)).setMonth(0,1),e}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e){return e.getFullYear()})),Ft.years=Ft.year.range,Ft.years.utc=Ft.year.utc.range,Ft.day=Ut((function(e){var t=new Dt(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e){return e.getDate()-1})),Ft.days=Ft.day.range,Ft.days.utc=Ft.day.utc.range,Ft.dayOfYear=function(e){var t=Ft.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(e,t){t=7-t;var n=Ft[e]=Ut((function(e){return(e=Ft.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e}),(function(e,t){e.setDate(e.getDate()+7*Math.floor(t))}),(function(e){var n=Ft.year(e).getDay();return Math.floor((Ft.dayOfYear(e)+(n+t)%7)/7)-(n!==t)}));Ft[e+"s"]=n.range,Ft[e+"s"].utc=n.utc.range,Ft[e+"OfYear"]=function(e){var n=Ft.year(e).getDay();return Math.floor((Ft.dayOfYear(e)+(n+t)%7)/7)}})),Ft.week=Ft.sunday,Ft.weeks=Ft.sunday.range,Ft.weeks.utc=Ft.sunday.utc.range,Ft.weekOfYear=Ft.sundayOfYear;var qt={"-":"",_:" ",0:"0"},Vt=/^\s*\d+/,Gt=/^%/;function Wt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function $t(e){return new RegExp("^(?:"+e.map(a.requote).join("|")+")","i")}function Yt(e){for(var t=new C,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Xt(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Zt(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Kt(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Qt(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Jt(e,t,n){Vt.lastIndex=0;var r,i=Vt.exec(t.slice(n,n+2));return i?(e.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function en(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function tn(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function nn(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function rn(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function an(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function on(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function sn(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function un(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function cn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=k(t)/60|0,i=k(t)%60;return n+Wt(r,"0",2)+Wt(i,"0",2)}function ln(e,t,n){Gt.lastIndex=0;var r=Gt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function hn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}a.locale=function(e){return{numberFormat:It(e),timeFormat:jt(e)}};var fn=a.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pn(){}a.format=fn.numberFormat,a.geo={},pn.prototype={s:0,t:0,add:function(e){gn(e,this.t,dn),gn(dn.s,this.s,this),this.s?this.t+=dn.t:this.s=dn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var dn=new pn;function gn(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}function vn(e,t){e&&yn.hasOwnProperty(e.type)&&yn[e.type](e,t)}a.geo.stream=function(e,t){e&&mn.hasOwnProperty(e.type)?mn[e.type](e,t):vn(e,t)};var mn={Feature:function(e,t){vn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)vn(n[r].geometry,t)}},yn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){bn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)bn(n[r],t,0)},Polygon:function(e,t){wn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)wn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)vn(n[r],t)}};function bn(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function wn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)bn(e[n],t,1);t.polygonEnd()}a.geo.area=function(e){return xn=0,a.geo.stream(e,Nn),xn};var xn,kn,Sn,_n,Cn,Rn,En,An,Tn,Mn,Ln,In,Pn=new pn,Nn={sphere:function(){xn+=4*Me},point:B,lineStart:B,lineEnd:B,polygonStart:function(){Pn.reset(),Nn.lineStart=On},polygonEnd:function(){var e=2*Pn;xn+=e<0?4*Me+e:e,Nn.lineStart=Nn.lineEnd=Nn.point=B}};function On(){var e,t,n,r,i;function a(e,t){t=t*Ne/2+Me/4;var a=(e*=Ne)-n,o=a>=0?1:-1,s=o*a,u=Math.cos(t),c=Math.sin(t),l=i*c,h=r*u+l*Math.cos(s),f=l*o*Math.sin(s);Pn.add(Math.atan2(f,h)),n=e,r=u,i=c}Nn.point=function(o,s){Nn.point=a,n=(e=o)*Ne,r=Math.cos(s=(t=s)*Ne/2+Me/4),i=Math.sin(s)},Nn.lineEnd=function(){a(e,t)}}function Fn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Dn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Bn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function zn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Un(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Hn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function jn(e){return[Math.atan2(e[1],e[0]),ze(e[2])]}function qn(e,t){return k(e[0]-t[0])<Ae&&k(e[1]-t[1])<Ae}a.geo.bounds=function(){var e,t,n,r,i,o,s,u,c,l,h,f={point:p,lineStart:g,lineEnd:v,polygonStart:function(){f.point=m,f.lineStart=y,f.lineEnd=b,c=0,Nn.polygonStart()},polygonEnd:function(){Nn.polygonEnd(),f.point=p,f.lineStart=g,f.lineEnd=v,Pn<0?(e=-(n=180),t=-(r=90)):c>Ae?r=90:c<-Ae&&(t=-90),h[0]=e,h[1]=n}};function p(i,a){l.push(h=[e=i,n=i]),a<t&&(t=a),a>r&&(r=a)}function d(a,o){var s=Fn([a*Ne,o*Ne]);if(u){var c=Bn(u,s),l=Bn([c[1],-c[0],0],c);Hn(l),l=jn(l);var h=a-i,f=h>0?1:-1,d=l[0]*Oe*f,g=k(h)>180;if(g^(f*i<d&&d<f*a))(v=l[1]*Oe)>r&&(r=v);else if(g^(f*i<(d=(d+360)%360-180)&&d<f*a)){var v;(v=-l[1]*Oe)<t&&(t=v)}else o<t&&(t=o),o>r&&(r=o);g?a<i?w(e,a)>w(e,n)&&(n=a):w(a,n)>w(e,n)&&(e=a):n>=e?(a<e&&(e=a),a>n&&(n=a)):a>i?w(e,a)>w(e,n)&&(n=a):w(a,n)>w(e,n)&&(e=a)}else p(a,o);u=s,i=a}function g(){f.point=d}function v(){h[0]=e,h[1]=n,f.point=p,u=null}function m(e,t){if(u){var n=e-i;c+=k(n)>180?n+(n>0?360:-360):n}else o=e,s=t;Nn.point(e,t),d(e,t)}function y(){Nn.lineStart()}function b(){m(o,s),Nn.lineEnd(),k(c)>Ae&&(e=-(n=180)),h[0]=e,h[1]=n,u=null}function w(e,t){return(t-=e)<0?t+360:t}function x(e,t){return e[0]-t[0]}function S(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(i){if(r=n=-(e=t=1/0),l=[],a.geo.stream(i,f),c=l.length){l.sort(x);for(var o=1,s=[g=l[0]];o<c;++o)S((p=l[o])[0],g)||S(p[1],g)?(w(g[0],p[1])>w(g[0],g[1])&&(g[1]=p[1]),w(p[0],g[1])>w(g[0],g[1])&&(g[0]=p[0])):s.push(g=p);for(var u,c,p,d=-1/0,g=(o=0,s[c=s.length-1]);o<=c;g=p,++o)p=s[o],(u=w(g[1],p[0]))>d&&(d=u,e=p[0],n=g[1])}return l=h=null,e===1/0||t===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,t],[n,r]]}}(),a.geo.centroid=function(e){kn=Sn=_n=Cn=Rn=En=An=Tn=Mn=Ln=In=0,a.geo.stream(e,Vn);var t=Mn,n=Ln,r=In,i=t*t+n*n+r*r;return i<Te&&(t=En,n=An,r=Tn,Sn<Ae&&(t=_n,n=Cn,r=Rn),(i=t*t+n*n+r*r)<Te)?[NaN,NaN]:[Math.atan2(n,t)*Oe,ze(r/Math.sqrt(i))*Oe]};var Vn={sphere:B,point:Gn,lineStart:$n,lineEnd:Yn,polygonStart:function(){Vn.lineStart=Xn},polygonEnd:function(){Vn.lineStart=$n}};function Gn(e,t){e*=Ne;var n=Math.cos(t*=Ne);Wn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Wn(e,t,n){++kn,_n+=(e-_n)/kn,Cn+=(t-Cn)/kn,Rn+=(n-Rn)/kn}function $n(){var e,t,n;function r(r,i){r*=Ne;var a=Math.cos(i*=Ne),o=a*Math.cos(r),s=a*Math.sin(r),u=Math.sin(i),c=Math.atan2(Math.sqrt((c=t*u-n*s)*c+(c=n*o-e*u)*c+(c=e*s-t*o)*c),e*o+t*s+n*u);Sn+=c,En+=c*(e+(e=o)),An+=c*(t+(t=s)),Tn+=c*(n+(n=u)),Wn(e,t,n)}Vn.point=function(i,a){i*=Ne;var o=Math.cos(a*=Ne);e=o*Math.cos(i),t=o*Math.sin(i),n=Math.sin(a),Vn.point=r,Wn(e,t,n)}}function Yn(){Vn.point=Gn}function Xn(){var e,t,n,r,i;function a(e,t){e*=Ne;var a=Math.cos(t*=Ne),o=a*Math.cos(e),s=a*Math.sin(e),u=Math.sin(t),c=r*u-i*s,l=i*o-n*u,h=n*s-r*o,f=Math.sqrt(c*c+l*l+h*h),p=n*o+r*s+i*u,d=f&&-Be(p)/f,g=Math.atan2(f,p);Mn+=d*c,Ln+=d*l,In+=d*h,Sn+=g,En+=g*(n+(n=o)),An+=g*(r+(r=s)),Tn+=g*(i+(i=u)),Wn(n,r,i)}Vn.point=function(o,s){e=o,t=s,Vn.point=a,o*=Ne;var u=Math.cos(s*=Ne);n=u*Math.cos(o),r=u*Math.sin(o),i=Math.sin(s),Wn(n,r,i)},Vn.lineEnd=function(){a(e,t),Vn.lineEnd=Yn,Vn.point=Gn}}function Zn(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Kn(){return!0}function Qn(e,t,n,r,i){var a=[],o=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(qn(n,r)){i.lineStart();for(var s=0;s<t;++s)i.point((n=e[s])[0],n[1]);i.lineEnd()}else{var u=new er(n,e,null,!0),c=new er(n,null,u,!1);u.o=c,a.push(u),o.push(c),u=new er(r,e,null,!1),c=new er(r,null,u,!0),u.o=c,a.push(u),o.push(c)}}})),o.sort(t),Jn(a),Jn(o),a.length){for(var s=0,u=n,c=o.length;s<c;++s)o[s].e=u=!u;for(var l,h,f=a[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(s=0,c=l.length;s<c;++s)i.point((h=l[s])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d)for(s=(l=p.p.z).length-1;s>=0;--s)i.point((h=l[s])[0],h[1]);else r(p.x,p.p.x,-1,i);p=p.p}l=(p=p.o).z,d=!d}while(!p.v);i.lineEnd()}}}function Jn(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function er(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function tr(e,t,n,r){return function(i,o){var s,u=t(o),c=i.invert(r[0],r[1]),l={point:h,lineStart:p,lineEnd:d,polygonStart:function(){l.point=w,l.lineStart=x,l.lineEnd=k,s=[],g=[]},polygonEnd:function(){l.point=h,l.lineStart=p,l.lineEnd=d,s=a.merge(s);var e=function(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Pn.reset();for(var s=0,u=t.length;s<u;++s){var c=t[s],l=c.length;if(l)for(var h=c[0],f=h[0],p=h[1]/2+Me/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===l&&(v=0);var m=(e=c[v])[0],y=e[1]/2+Me/4,b=Math.sin(y),w=Math.cos(y),x=m-f,k=x>=0?1:-1,S=k*x,_=S>Me,C=d*b;if(Pn.add(Math.atan2(C*k*Math.sin(S),g*w+C*Math.cos(S))),a+=_?x+k*Le:x,_^f>=n^m>=n){var R=Bn(Fn(h),Fn(e));Hn(R);var E=Bn(i,R);Hn(E);var A=(_^x>=0?-1:1)*ze(E[2]);(r>A||r===A&&(R[0]||R[1]))&&(o+=_^x>=0?1:-1)}if(!v++)break;f=m,d=b,g=w,h=e}}return(a<-Ae||a<Ae&&Pn<-Ae)^1&o}(c,g);s.length?(b||(o.polygonStart(),b=!0),Qn(s,ir,e,n,o)):e&&(b||(o.polygonStart(),b=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),s=g=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function h(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function f(e,t){var n=i(e,t);u.point(n[0],n[1])}function p(){l.point=f,u.lineStart()}function d(){l.point=h,u.lineEnd()}var g,v,m=rr(),y=t(m),b=!1;function w(e,t){v.push([e,t]);var n=i(e,t);y.point(n[0],n[1])}function x(){y.lineStart(),v=[]}function k(){w(v[0][0],v[0][1]),y.lineEnd();var e,t=y.clean(),n=m.buffer(),r=n.length;if(v.pop(),g.push(v),v=null,r)if(1&t){var i,a=-1;if((r=(e=n[0]).length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++a<r;)o.point((i=e[a])[0],i[1]);o.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),s.push(n.filter(nr))}return l}}function nr(e){return e.length>1}function rr(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:B,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function ir(e,t){return((e=e.x)[0]<0?e[1]-Pe-Ae:Pe-e[1])-((t=t.x)[0]<0?t[1]-Pe-Ae:Pe-t[1])}var ar=tr(Kn,(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?Me:-Me,u=k(a-n);k(u-Me)<Ae?(e.point(n,r=(r+o)/2>0?Pe:-Pe),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(a,r),t=0):i!==s&&u>=Me&&(k(n-i)<Ae&&(n-=i*Ae),k(a-s)<Ae&&(a-=s*Ae),r=function(e,t,n,r){var i,a,o=Math.sin(e-n);return k(o)>Ae?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*o)):(t+r)/2}(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=a,r=o),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*Pe,r.point(-Me,i),r.point(0,i),r.point(Me,i),r.point(Me,0),r.point(Me,-i),r.point(0,-i),r.point(-Me,-i),r.point(-Me,0),r.point(-Me,i);else if(k(e[0]-t[0])>Ae){var a=e[0]<t[0]?Me:-Me;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}),[-Me,-Me/2]);function or(e){var t=Math.cos(e),n=t>0,r=k(t)>Ae;return tr(i,(function(e){var t,s,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,f){var p,d=[h,f],g=i(h,f),v=n?g?0:o(h,f):g?o(h+(h<0?Me:-Me),f):0;if(!t&&(c=u=g)&&e.lineStart(),g!==u&&(p=a(t,d),(qn(t,p)||qn(d,p))&&(d[0]+=Ae,d[1]+=Ae,g=i(d[0],d[1]))),g!==u)l=0,g?(e.lineStart(),p=a(d,t),e.point(p[0],p[1])):(p=a(t,d),e.point(p[0],p[1]),e.lineEnd()),t=p;else if(r&&t&&n^g){var m;v&s||!(m=a(d,t,!0))||(l=0,n?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1])))}!g||t&&qn(t,d)||e.point(d[0],d[1]),t=d,u=g,s=v},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return l|(c&&u)<<1}}}),jr(e,6*Ne),n?[0,-e]:[-Me,e-Me]);function i(e,n){return Math.cos(e)*Math.cos(n)>t}function a(e,n,r){var i=[1,0,0],a=Bn(Fn(e),Fn(n)),o=Dn(a,a),s=a[0],u=o-s*s;if(!u)return!r&&e;var c=t*o/u,l=-t*s/u,h=Bn(i,a),f=Un(i,c);zn(f,Un(a,l));var p=h,d=Dn(f,p),g=Dn(p,p),v=d*d-g*(Dn(f,f)-1);if(!(v<0)){var m=Math.sqrt(v),y=Un(p,(-d-m)/g);if(zn(y,f),y=jn(y),!r)return y;var b,w=e[0],x=n[0],S=e[1],_=n[1];x<w&&(b=w,w=x,x=b);var C=x-w,R=k(C-Me)<Ae;if(!R&&_<S&&(b=S,S=_,_=b),R||C<Ae?R?S+_>0^y[1]<(k(y[0]-w)<Ae?S:_):S<=y[1]&&y[1]<=_:C>Me^(w<=y[0]&&y[0]<=x)){var E=Un(p,(-d+m)/g);return zn(E,f),[y,jn(E)]}}}function o(t,r){var i=n?e:Me-e,a=0;return t<-i?a|=1:t>i&&(a|=2),r<-i?a|=4:r>i&&(a|=8),a}}function sr(e,t,n,r){return function(i){var a,o=i.a,s=i.b,u=o.x,c=o.y,l=0,h=1,f=s.x-u,p=s.y-c;if(a=e-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<h&&(h=a)}else if(f>0){if(a>h)return;a>l&&(l=a)}if(a=n-u,f||!(a<0)){if(a/=f,f<0){if(a>h)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<h&&(h=a)}if(a=t-c,p||!(a>0)){if(a/=p,p<0){if(a<l)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>l&&(l=a)}if(a=r-c,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>l&&(l=a)}else if(p>0){if(a<l)return;a<h&&(h=a)}return l>0&&(i.a={x:u+l*f,y:c+l*p}),h<1&&(i.b={x:u+h*f,y:c+h*p}),i}}}}}}function ur(e,t,n,r){return function(u){var c,l,h,f,p,d,g,v,m,y,b,w=u,x=rr(),k=sr(e,t,n,r),S={point:R,lineStart:function(){S.point=E,l&&l.push(h=[]),y=!0,m=!1,g=v=NaN},lineEnd:function(){c&&(E(f,p),d&&m&&x.rejoin(),c.push(x.buffer())),S.point=R,m&&u.lineEnd()},polygonStart:function(){u=x,c=[],l=[],b=!0},polygonEnd:function(){u=w,c=a.merge(c);var t=function(e){for(var t=0,n=l.length,r=e[1],i=0;i<n;++i)for(var a,o=1,s=l[i],u=s.length,c=s[0];o<u;++o)a=s[o],c[1]<=r?a[1]>r&&De(c,a,e)>0&&++t:a[1]<=r&&De(c,a,e)<0&&--t,c=a;return 0!==t}([e,r]),n=b&&t,i=c.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),_(null,null,1,u),u.lineEnd()),i&&Qn(c,o,t,_,u),u.polygonEnd()),c=l=h=null}};function _(a,o,u,c){var l=0,h=0;if(null==a||(l=i(a,u))!==(h=i(o,u))||s(a,o)<0^u>0)do{c.point(0===l||3===l?e:n,l>1?r:t)}while((l=(l+u+4)%4)!==h);else c.point(o[0],o[1])}function C(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function R(e,t){C(e,t)&&u.point(e,t)}function E(e,t){var n=C(e=Math.max(-1e9,Math.min(1e9,e)),t=Math.max(-1e9,Math.min(1e9,t)));if(l&&h.push([e,t]),y)f=e,p=t,d=n,y=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&m)u.point(e,t);else{var r={a:{x:g,y:v},b:{x:e,y:t}};k(r)?(m||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),b=!1):n&&(u.lineStart(),u.point(e,t),b=!1)}g=e,v=t,m=n}return S};function i(r,i){return k(r[0]-e)<Ae?i>0?0:3:k(r[0]-n)<Ae?i>0?2:1:k(r[1]-t)<Ae?i>0?1:0:i>0?3:2}function o(e,t){return s(e.x,t.x)}function s(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function cr(e){var t=0,n=Me/3,r=Nr(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Me/180,n=e[1]*Me/180):[t/Me*180,n/Me*180]},i}function lr(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),a-n*Math.cos(e)]}return o.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,ze((i-(e*e+n*n)*r*r)/(2*r))]},o}a.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){return i&&(i.valid=!1),(i=a(e)).valid=!0,i},extent:function(s){return arguments.length?(a=ur(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(a.geo.conicEqualArea=function(){return cr(lr)}).raw=lr,a.geo.albers=function(){return a.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},a.geo.albersUsa=function(){var e,t,n,r,i=a.geo.albers(),o=a.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=a.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};function c(i){var a=i[0],o=i[1];return e=null,t(a,o),e||(n(a,o),e)||r(a,o),e}return c.invert=function(e){var t=i.scale(),n=i.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?o:a>=.166&&a<.234&&r>=-.214&&r<-.115?s:i).invert(e)},c.stream=function(e){var t=i.stream(e),n=o.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},c.precision=function(e){return arguments.length?(i.precision(e),o.precision(e),s.precision(e),c):i.precision()},c.scale=function(e){return arguments.length?(i.scale(e),o.scale(.35*e),s.scale(e),c.translate(i.translate())):i.scale()},c.translate=function(e){if(!arguments.length)return i.translate();var a=i.scale(),l=+e[0],h=+e[1];return t=i.translate(e).clipExtent([[l-.455*a,h-.238*a],[l+.455*a,h+.238*a]]).stream(u).point,n=o.translate([l-.307*a,h+.201*a]).clipExtent([[l-.425*a+Ae,h+.12*a+Ae],[l-.214*a-Ae,h+.234*a-Ae]]).stream(u).point,r=s.translate([l-.205*a,h+.212*a]).clipExtent([[l-.214*a+Ae,h+.166*a+Ae],[l-.115*a-Ae,h+.234*a-Ae]]).stream(u).point,c},c.scale(1070)};var hr,fr,pr,dr,gr,vr,mr={point:B,lineStart:B,lineEnd:B,polygonStart:function(){fr=0,mr.lineStart=yr},polygonEnd:function(){mr.lineStart=mr.lineEnd=mr.point=B,hr+=k(fr/2)}};function yr(){var e,t,n,r;function i(e,t){fr+=r*e-n*t,n=e,r=t}mr.point=function(a,o){mr.point=i,e=n=a,t=r=o},mr.lineEnd=function(){i(e,t)}}var br={point:function(e,t){e<pr&&(pr=e),e>gr&&(gr=e),t<dr&&(dr=t),t>vr&&(vr=t)},lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B};function wr(){var e=xr(4.5),t=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=xr(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r),n.point=a}function a(e,n){t.push("L",e,",",n)}function o(){n.point=r}function s(){t.push("Z")}return n}function xr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var kr,Sr={point:_r,lineStart:Cr,lineEnd:Rr,polygonStart:function(){Sr.lineStart=Er},polygonEnd:function(){Sr.point=_r,Sr.lineStart=Cr,Sr.lineEnd=Rr}};function _r(e,t){_n+=e,Cn+=t,++Rn}function Cr(){var e,t;function n(n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a);En+=o*(e+n)/2,An+=o*(t+r)/2,Tn+=o,_r(e=n,t=r)}Sr.point=function(r,i){Sr.point=n,_r(e=r,t=i)}}function Rr(){Sr.point=_r}function Er(){var e,t,n,r;function i(e,t){var i=e-n,a=t-r,o=Math.sqrt(i*i+a*a);En+=o*(n+e)/2,An+=o*(r+t)/2,Tn+=o,Mn+=(o=r*e-n*t)*(n+e),Ln+=o*(r+t),In+=3*o,_r(n=e,r=t)}Sr.point=function(a,o){Sr.point=i,_r(e=n=a,t=r=o)},Sr.lineEnd=function(){i(e,t)}}function Ar(e){var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:B};function r(n,r){e.moveTo(n+t,r),e.arc(n,r,t,0,Le)}function i(t,r){e.moveTo(t,r),n.point=a}function a(t,n){e.lineTo(t,n)}function o(){n.point=r}function s(){e.closePath()}return n}function Tr(e){var t=.5,n=Math.cos(30*Ne),r=16;function i(e){return(r?o:a)(e)}function a(t){return Ir(t,(function(n,r){n=e(n,r),t.point(n[0],n[1])}))}function o(t){var n,i,a,o,u,c,l,h,f,p,d,g,v={point:m,lineStart:y,lineEnd:w,polygonStart:function(){t.polygonStart(),v.lineStart=x},polygonEnd:function(){t.polygonEnd(),v.lineStart=y}};function m(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){h=NaN,v.point=b,t.lineStart()}function b(n,i){var a=Fn([n,i]),o=e(n,i);s(h,f,l,p,d,g,h=o[0],f=o[1],l=n,p=a[0],d=a[1],g=a[2],r,t),t.point(h,f)}function w(){v.point=m,t.lineEnd()}function x(){y(),v.point=k,v.lineEnd=S}function k(e,t){b(n=e,t),i=h,a=f,o=p,u=d,c=g,v.point=b}function S(){s(h,f,l,p,d,g,i,a,n,o,u,c,r,t),v.lineEnd=w,w()}return v}function s(r,i,a,o,u,c,l,h,f,p,d,g,v,m){var y=l-r,b=h-i,w=y*y+b*b;if(w>4*t&&v--){var x=o+p,S=u+d,_=c+g,C=Math.sqrt(x*x+S*S+_*_),R=Math.asin(_/=C),E=k(k(_)-1)<Ae||k(a-f)<Ae?(a+f)/2:Math.atan2(S,x),A=e(E,R),T=A[0],M=A[1],L=T-r,I=M-i,P=b*L-y*I;(P*P/w>t||k((y*L+b*I)/w-.5)>.3||o*p+u*d+c*g<n)&&(s(r,i,a,o,u,c,T,M,E,x/=C,S/=C,_,v,m),m.point(T,M),s(T,M,E,x,S,_,l,h,f,p,d,g,v,m))}}return i.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,i):Math.sqrt(t)},i}function Mr(e){var t=Tr((function(t,n){return e([t*Oe,n*Oe])}));return function(e){return Or(t(e))}}function Lr(e){this.stream=e}function Ir(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Pr(e){return Nr((function(){return e}))()}function Nr(e){var t,n,r,i,o,s,u=Tr((function(e,n){return[(e=t(e,n))[0]*c+i,o-e[1]*c]})),c=150,l=480,h=250,f=0,p=0,d=0,g=0,v=0,m=ar,y=N,b=null,w=null;function x(e){return[(e=r(e[0]*Ne,e[1]*Ne))[0]*c+i,o-e[1]*c]}function k(e){return(e=r.invert((e[0]-i)/c,(o-e[1])/c))&&[e[0]*Oe,e[1]*Oe]}function S(){r=Zn(n=Br(d,g,v),t);var e=t(f,p);return i=l-e[0]*c,o=h+e[1]*c,_()}function _(){return s&&(s.valid=!1,s=null),x}return x.stream=function(e){return s&&(s.valid=!1),(s=Or(m(n,u(y(e))))).valid=!0,s},x.clipAngle=function(e){return arguments.length?(m=null==e?(b=e,ar):or((b=+e)*Ne),_()):b},x.clipExtent=function(e){return arguments.length?(w=e,y=e?ur(e[0][0],e[0][1],e[1][0],e[1][1]):N,_()):w},x.scale=function(e){return arguments.length?(c=+e,S()):c},x.translate=function(e){return arguments.length?(l=+e[0],h=+e[1],S()):[l,h]},x.center=function(e){return arguments.length?(f=e[0]%360*Ne,p=e[1]%360*Ne,S()):[f*Oe,p*Oe]},x.rotate=function(e){return arguments.length?(d=e[0]%360*Ne,g=e[1]%360*Ne,v=e.length>2?e[2]%360*Ne:0,S()):[d*Oe,g*Oe,v*Oe]},a.rebind(x,u,"precision"),function(){return t=e.apply(this,arguments),x.invert=t.invert&&k,S()}}function Or(e){return Ir(e,(function(t,n){e.point(t*Ne,n*Ne)}))}function Fr(e,t){return[e,t]}function Dr(e,t){return[e>Me?e-Le:e<-Me?e+Le:e,t]}function Br(e,t,n){return e?t||n?Zn(Ur(e),Hr(t,n)):Ur(e):t||n?Hr(t,n):Dr}function zr(e){return function(t,n){return[(t+=e)>Me?t-Le:t<-Me?t+Le:t,n]}}function Ur(e){var t=zr(e);return t.invert=zr(-e),t}function Hr(e,t){var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),a=Math.sin(t);function o(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,c=Math.sin(t),l=c*n+s*r;return[Math.atan2(u*i-l*a,s*n-c*r),ze(l*i+u*a)]}return o.invert=function(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,c=Math.sin(t),l=c*i-u*a;return[Math.atan2(u*i+c*a,s*n+l*r),ze(l*n-s*r)]},o}function jr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var u=o*t;null!=i?(i=qr(n,i),a=qr(n,a),(o>0?i<a:i>a)&&(i+=o*Le)):(i=e+o*Le,a=e-.5*u);for(var c,l=i;o>0?l>a:l<a;l-=u)s.point((c=jn([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],c[1])}}function qr(e,t){var n=Fn(t);n[0]-=e,Hn(n);var r=Be(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ae)%(2*Math.PI)}function Vr(e,t,n){var r=a.range(e,t-Ae,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function Gr(e,t,n){var r=a.range(e,t-Ae,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function Wr(e){return e.source}function $r(e){return e.target}a.geo.path=function(){var e,t,n,r,i,o=4.5;function s(e){return e&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),i&&i.valid||(i=n(r)),a.geo.stream(e,i)),r.result()}function u(){return i=null,s}return s.area=function(e){return hr=0,a.geo.stream(e,n(mr)),hr},s.centroid=function(e){return _n=Cn=Rn=En=An=Tn=Mn=Ln=In=0,a.geo.stream(e,n(Sr)),In?[Mn/In,Ln/In]:Tn?[En/Tn,An/Tn]:Rn?[_n/Rn,Cn/Rn]:[NaN,NaN]},s.bounds=function(e){return gr=vr=-(pr=dr=1/0),a.geo.stream(e,n(br)),[[pr,dr],[gr,vr]]},s.projection=function(t){return arguments.length?(n=(e=t)?t.stream||Mr(t):N,u()):e},s.context=function(e){return arguments.length?(r=null==(t=e)?new wr:new Ar(e),"function"!=typeof o&&r.pointRadius(o),u()):t},s.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(r.pointRadius(+e),+e),s):o},s.projection(a.geo.albersUsa()).context(null)},a.geo.transform=function(e){return{stream:function(t){var n=new Lr(t);for(var r in e)n[r]=e[r];return n}}},Lr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},a.geo.projection=Pr,a.geo.projectionMutator=Nr,(a.geo.equirectangular=function(){return Pr(Fr)}).raw=Fr.invert=Fr,a.geo.rotation=function(e){function t(t){return(t=e(t[0]*Ne,t[1]*Ne))[0]*=Oe,t[1]*=Oe,t}return e=Br(e[0]%360*Ne,e[1]*Ne,e.length>2?e[2]*Ne:0),t.invert=function(t){return(t=e.invert(t[0]*Ne,t[1]*Ne))[0]*=Oe,t[1]*=Oe,t},t},Dr.invert=Fr,a.geo.circle=function(){var e,t,n=[0,0],r=6;function i(){var e="function"==typeof n?n.apply(this,arguments):n,r=Br(-e[0]*Ne,-e[1]*Ne,0).invert,i=[];return t(null,null,1,{point:function(e,t){i.push(e=r(e,t)),e[0]*=Oe,e[1]*=Oe}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(e){return arguments.length?(n=e,i):n},i.angle=function(n){return arguments.length?(t=jr((e=+n)*Ne,r*Ne),i):e},i.precision=function(n){return arguments.length?(t=jr(e*Ne,(r=+n)*Ne),i):r},i.angle(90)},a.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Ne,i=e[1]*Ne,a=t[1]*Ne,o=Math.sin(r),s=Math.cos(r),u=Math.sin(i),c=Math.cos(i),l=Math.sin(a),h=Math.cos(a);return Math.atan2(Math.sqrt((n=h*o)*n+(n=c*l-u*h*s)*n),u*l+c*h*s)},a.geo.graticule=function(){var e,t,n,r,i,o,s,u,c,l,h,f,p=10,d=p,g=90,v=360,m=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return a.range(Math.ceil(r/g)*g,n,g).map(h).concat(a.range(Math.ceil(u/v)*v,s,v).map(f)).concat(a.range(Math.ceil(t/p)*p,e,p).filter((function(e){return k(e%g)>Ae})).map(c)).concat(a.range(Math.ceil(o/d)*d,i,d).filter((function(e){return k(e%v)>Ae})).map(l))}return y.lines=function(){return b().map((function(e){return{type:"LineString",coordinates:e}}))},y.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(f(s).slice(1),h(n).reverse().slice(1),f(u).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],s=+e[1][1],r>n&&(e=r,r=n,n=e),u>s&&(e=u,u=s,s=e),y.precision(m)):[[r,u],[n,s]]},y.minorExtent=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),y.precision(m)):[[t,o],[e,i]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(g=+e[0],v=+e[1],y):[g,v]},y.minorStep=function(e){return arguments.length?(p=+e[0],d=+e[1],y):[p,d]},y.precision=function(a){return arguments.length?(m=+a,c=Vr(o,i,90),l=Gr(t,e,m),h=Vr(u,s,90),f=Gr(r,n,m),y):m},y.majorExtent([[-180,-90+Ae],[180,90-Ae]]).minorExtent([[-180,-80-Ae],[180,80+Ae]])},a.geo.greatArc=function(){var e,t,n=Wr,r=$r;function i(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),t||r.apply(this,arguments)]}}return i.distance=function(){return a.geo.distance(e||n.apply(this,arguments),t||r.apply(this,arguments))},i.source=function(t){return arguments.length?(n=t,e="function"==typeof t?null:t,i):n},i.target=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,i):r},i.precision=function(){return arguments.length?i:0},i},a.geo.interpolate=function(e,t){return n=e[0]*Ne,r=e[1]*Ne,i=t[0]*Ne,a=t[1]*Ne,o=Math.cos(r),s=Math.sin(r),u=Math.cos(a),c=Math.sin(a),l=o*Math.cos(n),h=o*Math.sin(n),f=u*Math.cos(i),p=u*Math.sin(i),d=2*Math.asin(Math.sqrt(He(a-r)+o*u*He(i-n))),g=1/Math.sin(d),(v=d?function(e){var t=Math.sin(e*=d)*g,n=Math.sin(d-e)*g,r=n*l+t*f,i=n*h+t*p,a=n*s+t*c;return[Math.atan2(i,r)*Oe,Math.atan2(a,Math.sqrt(r*r+i*i))*Oe]}:function(){return[n*Oe,r*Oe]}).distance=d,v;var n,r,i,a,o,s,u,c,l,h,f,p,d,g,v},a.geo.length=function(e){return kr=0,a.geo.stream(e,Yr),kr};var Yr={sphere:B,point:B,lineStart:function(){var e,t,n;function r(r,i){var a=Math.sin(i*=Ne),o=Math.cos(i),s=k((r*=Ne)-e),u=Math.cos(s);kr+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-t*o*u)*s),t*a+n*o*u),e=r,t=a,n=o}Yr.point=function(i,a){e=i*Ne,t=Math.sin(a*=Ne),n=Math.cos(a),Yr.point=r},Yr.lineEnd=function(){Yr.point=Yr.lineEnd=B}},lineEnd:B,polygonStart:B,polygonEnd:B};function Xr(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]},n}var Zr=Xr((function(e){return Math.sqrt(2/(1+e))}),(function(e){return 2*Math.asin(e/2)}));(a.geo.azimuthalEqualArea=function(){return Pr(Zr)}).raw=Zr;var Kr=Xr((function(e){var t=Math.acos(e);return t&&t/Math.sin(t)}),N);function Qr(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Me/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),a=n*Math.pow(r(e),i)/i;if(!i)return ti;function o(e,t){a>0?t<-Pe+Ae&&(t=-Pe+Ae):t>Pe-Ae&&(t=Pe-Ae);var n=a/Math.pow(r(t),i);return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}return o.invert=function(e,t){var n=a-t,r=Fe(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/r,1/i))-Pe]},o}function Jr(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;if(k(r)<Ae)return Fr;function a(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}return a.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-Fe(r)*Math.sqrt(e*e+n*n)]},a}(a.geo.azimuthalEquidistant=function(){return Pr(Kr)}).raw=Kr,(a.geo.conicConformal=function(){return cr(Qr)}).raw=Qr,(a.geo.conicEquidistant=function(){return cr(Jr)}).raw=Jr;var ei=Xr((function(e){return 1/e}),Math.atan);function ti(e,t){return[e,Math.log(Math.tan(Me/4+t/2))]}function ni(e){var t,n=Pr(e),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=Me*r(),u=i();a([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}(a.geo.gnomonic=function(){return Pr(ei)}).raw=ei,ti.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Pe]},(a.geo.mercator=function(){return ni(ti)}).raw=ti;var ri=Xr((function(){return 1}),Math.asin);(a.geo.orthographic=function(){return Pr(ri)}).raw=ri;var ii=Xr((function(e){return 1/(1+e)}),(function(e){return 2*Math.atan(e)}));function ai(e,t){return[Math.log(Math.tan(Me/4+t/2)),-e]}function oi(e){return e[0]}function si(e){return e[1]}function ui(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;r>1&&De(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function ci(e,t){return e[0]-t[0]||e[1]-t[1]}(a.geo.stereographic=function(){return Pr(ii)}).raw=ii,ai.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Pe]},(a.geo.transverseMercator=function(){var e=ni(ai),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=ai,a.geom={},a.geom.hull=function(e){var t=oi,n=si;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r,i=yt(t),a=yt(n),o=e.length,s=[],u=[];for(r=0;r<o;r++)s.push([+i.call(this,e[r],r),+a.call(this,e[r],r),r]);for(s.sort(ci),r=0;r<o;r++)u.push([s[r][0],-s[r][1]]);var c=ui(s),l=ui(u),h=l[0]===c[0],f=l[l.length-1]===c[c.length-1],p=[];for(r=c.length-1;r>=0;--r)p.push(e[s[c[r]][2]]);for(r=+h;r<l.length-f;++r)p.push(e[s[l[r]][2]]);return p}return r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},a.geom.polygon=function(e){return G(e,li),e};var li=a.geom.polygon.prototype=[];function hi(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function fi(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,u=e[1],c=n[1],l=t[1]-u,h=r[1]-c,f=(s*(u-c)-h*(i-a))/(h*o-s*l);return[i+f*o,u+f*l]}function pi(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}li.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},li.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},li.clip=function(e){for(var t,n,r,i,a,o,s=pi(e),u=-1,c=this.length-pi(this),l=this[c-1];++u<c;){for(t=e.slice(),e.length=0,i=this[u],a=t[(r=t.length-s)-1],n=-1;++n<r;)hi(o=t[n],l,i)?(hi(a,l,i)||e.push(fi(a,o,l,i)),e.push(o)):hi(a,l,i)&&e.push(fi(a,o,l,i)),a=o;s&&e.push(e[0]),l=i}return e};var di,gi,vi,mi,yi,bi=[],wi=[];function xi(){zi(this),this.edge=this.site=this.circle=null}function ki(e){var t=bi.pop()||new xi;return t.site=e,t}function Si(e){Ii(e),vi.remove(e),bi.push(e),zi(e)}function _i(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Si(e);for(var u=a;u.circle&&k(n-u.circle.x)<Ae&&k(r-u.circle.cy)<Ae;)a=u.P,s.unshift(u),Si(u),u=a;s.unshift(u),Ii(u);for(var c=o;c.circle&&k(n-c.circle.x)<Ae&&k(r-c.circle.cy)<Ae;)o=c.N,s.push(c),Si(c),c=o;s.push(c),Ii(c);var l,h=s.length;for(l=1;l<h;++l)c=s[l],u=s[l-1],Fi(c.edge,u.site,c.site,i);u=s[0],(c=s[h-1]).edge=Oi(u.site,c.site,null,i),Li(u),Li(c)}function Ci(e){for(var t,n,r,i,a=e.x,o=e.y,s=vi._;s;)if((r=Ri(s,o)-a)>Ae)s=s.L;else{if(!((i=a-Ei(s,o))>Ae)){r>-Ae?(t=s.P,n=s):i>-Ae?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var u=ki(e);if(vi.insert(t,u),t||n){if(t===n)return Ii(t),n=ki(t.site),vi.insert(u,n),u.edge=n.edge=Oi(t.site,u.site),Li(t),void Li(n);if(n){Ii(t),Ii(n);var c=t.site,l=c.x,h=c.y,f=e.x-l,p=e.y-h,d=n.site,g=d.x-l,v=d.y-h,m=2*(f*v-p*g),y=f*f+p*p,b=g*g+v*v,w={x:(v*y-p*b)/m+l,y:(f*b-g*y)/m+h};Fi(n.edge,c,d,w),u.edge=Oi(c,e,null,w),n.edge=Oi(e,d,null,w),Li(t),Li(n)}else u.edge=Oi(t.site,u.site)}}function Ri(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,u=n.y,c=u-t;if(!c)return s;var l=s-r,h=1/a-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-a/2)))/h+r:(r+s)/2}function Ei(e,t){var n=e.N;if(n)return Ri(n,t);var r=e.site;return r.y===t?r.x:1/0}function Ai(e){this.site=e,this.edges=[]}function Ti(e,t){return t.angle-e.angle}function Mi(){zi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Li(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,s=i.y,u=r.x-o,c=r.y-s,l=a.x-o,h=2*(u*(v=a.y-s)-c*l);if(!(h>=-Te)){var f=u*u+c*c,p=l*l+v*v,d=(v*f-c*p)/h,g=(u*p-l*f)/h,v=g+s,m=wi.pop()||new Mi;m.arc=e,m.site=i,m.x=d+o,m.y=v+Math.sqrt(d*d+g*g),m.cy=v,e.circle=m;for(var y=null,b=yi._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}yi.insert(y,m),y||(mi=m)}}}}function Ii(e){var t=e.circle;t&&(t.P||(mi=t.N),yi.remove(t),wi.push(t),zi(t),e.circle=null)}function Pi(e,t){var n=e.b;if(n)return!0;var r,i,a=e.a,o=t[0][0],s=t[1][0],u=t[0][1],c=t[1][1],l=e.l,h=e.r,f=l.x,p=l.y,d=h.x,g=h.y,v=(f+d)/2,m=(p+g)/2;if(g===p){if(v<o||v>=s)return;if(f>d){if(a){if(a.y>=c)return}else a={x:v,y:u};n={x:v,y:c}}else{if(a){if(a.y<u)return}else a={x:v,y:c};n={x:v,y:u}}}else if(i=m-(r=(f-d)/(g-p))*v,r<-1||r>1)if(f>d){if(a){if(a.y>=c)return}else a={x:(u-i)/r,y:u};n={x:(c-i)/r,y:c}}else{if(a){if(a.y<u)return}else a={x:(c-i)/r,y:c};n={x:(u-i)/r,y:u}}else if(p<g){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return e.a=a,e.b=n,!0}function Ni(e,t){this.l=e,this.r=t,this.a=this.b=null}function Oi(e,t,n,r){var i=new Ni(e,t);return di.push(i),n&&Fi(i,e,t,n),r&&Fi(i,t,e,r),gi[e.i].edges.push(new Di(i,e,t)),gi[t.i].edges.push(new Di(i,t,e)),i}function Fi(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Di(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Bi(){this._=null}function zi(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Ui(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Hi(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ji(e){for(;e.L;)e=e.L;return e}function qi(e,t){var n,r,i,a=e.sort(Vi).pop();for(di=[],gi=new Array(e.length),vi=new Bi,yi=new Bi;;)if(i=mi,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(gi[a.i]=new Ai(a),Ci(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;_i(i.arc)}t&&(function(e){for(var t,n=di,r=sr(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)(!Pi(t=n[i],e)||!r(t)||k(t.a.x-t.b.x)<Ae&&k(t.a.y-t.b.y)<Ae)&&(t.a=t.b=null,n.splice(i,1))}(t),function(e){for(var t,n,r,i,a,o,s,u,c,l,h=e[0][0],f=e[1][0],p=e[0][1],d=e[1][1],g=gi,v=g.length;v--;)if((a=g[v])&&a.prepare())for(u=(s=a.edges).length,o=0;o<u;)r=(l=s[o].end()).x,i=l.y,t=(c=s[++o%u].start()).x,n=c.y,(k(r-t)>Ae||k(i-n)>Ae)&&(s.splice(o,0,new Di((m=a.site,y=l,b=k(r-h)<Ae&&d-i>Ae?{x:h,y:k(t-h)<Ae?n:d}:k(i-d)<Ae&&f-r>Ae?{x:k(n-d)<Ae?t:f,y:d}:k(r-f)<Ae&&i-p>Ae?{x:f,y:k(t-f)<Ae?n:p}:k(i-p)<Ae&&r-h>Ae?{x:k(n-p)<Ae?t:h,y:p}:null,w=void 0,(w=new Ni(m,null)).a=y,w.b=b,di.push(w),w),a.site,null)),++u);var m,y,b,w}(t));var o={cells:gi,edges:di};return vi=yi=di=gi=null,o}function Vi(e,t){return t.y-e.y||t.x-e.x}Ai.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Ti),t.length},Di.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Bi.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ji(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Ui(this,n),n=(e=n).U),n.C=!1,r.C=!0,Hi(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Hi(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ui(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?ji(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,Ui(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Hi(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Ui(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Hi(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Ui(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Hi(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},a.geom.voronoi=function(e){var t=oi,n=si,r=t,i=n,a=Gi;if(e)return o(e);function o(e){var t=new Array(e.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];return qi(s(e),a).cells.forEach((function(a,s){var u=a.edges,c=a.site;(t[s]=u.length?u.map((function(e){var t=e.start();return[t.x,t.y]})):c.x>=n&&c.x<=i&&c.y>=r&&c.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[]).point=e[s]})),t}function s(e){return e.map((function(e,t){return{x:Math.round(r(e,t)/Ae)*Ae,y:Math.round(i(e,t)/Ae)*Ae,i:t}}))}return o.links=function(e){return qi(s(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))},o.triangles=function(e){var t=[];return qi(s(e)).cells.forEach((function(n,r){for(var i,a=n.site,o=n.edges.sort(Ti),s=-1,u=o.length,c=o[u-1].edge,l=c.l===a?c.r:c.l;++s<u;)i=l,l=(c=o[s].edge).l===a?c.r:c.l,r<i.i&&r<l.i&&Wi(a,i,l)<0&&t.push([e[r],e[i.i],e[l.i]])})),t},o.x=function(e){return arguments.length?(r=yt(t=e),o):t},o.y=function(e){return arguments.length?(i=yt(n=e),o):n},o.clipExtent=function(e){return arguments.length?(a=null==e?Gi:e,o):a===Gi?null:a},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):a===Gi?null:a&&a[1]},o};var Gi=[[-1e6,-1e6],[1e6,1e6]];function Wi(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function $i(e){return e.x}function Yi(e){return e.y}function Xi(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),u=t.nodes;u[0]&&Xi(e,u[0],n,r,o,s),u[1]&&Xi(e,u[1],o,r,i,s),u[2]&&Xi(e,u[2],n,s,o,a),u[3]&&Xi(e,u[3],o,s,i,a)}}function Zi(e,t,n,r,i,a,o){var s,u=1/0;return function e(c,l,h,f,p){if(!(l>a||h>o||f<r||p<i)){if(d=c.point){var d,g=t-c.x,v=n-c.y,m=g*g+v*v;if(m<u){var y=Math.sqrt(u=m);r=t-y,i=n-y,a=t+y,o=n+y,s=d}}for(var b=c.nodes,w=.5*(l+f),x=.5*(h+p),k=(n>=x)<<1|t>=w,S=k+4;k<S;++k)if(c=b[3&k])switch(3&k){case 0:e(c,l,h,w,x);break;case 1:e(c,w,h,f,x);break;case 2:e(c,l,x,w,p);break;case 3:e(c,w,x,f,p)}}}(e,r,i,a,o),s}function Ki(e,t){e=a.rgb(e),t=a.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,s=t.g-r,u=t.b-i;return function(e){return"#"+ht(Math.round(n+o*e))+ht(Math.round(r+s*e))+ht(Math.round(i+u*e))}}function Qi(e,t){var n,r={},i={};for(n in e)n in t?r[n]=ra(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function Ji(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ea(e,t){var n,r,i,a=ta.lastIndex=na.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=ta.exec(e))&&(r=na.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Ji(n,r)})),a=na.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}a.geom.delaunay=function(e){return a.geom.voronoi().triangles(e)},a.geom.quadtree=function(e,t,n,r,i){var a,o=oi,s=si;if(a=arguments.length)return o=$i,s=Yi,3===a&&(i=n,r=t,n=t=0),u(e);function u(e){var u,c,l,h,f,p,d,g,v,m=yt(o),y=yt(s);if(null!=t)p=t,d=n,g=r,v=i;else if(g=v=-(p=d=1/0),c=[],l=[],f=e.length,a)for(h=0;h<f;++h)(u=e[h]).x<p&&(p=u.x),u.y<d&&(d=u.y),u.x>g&&(g=u.x),u.y>v&&(v=u.y),c.push(u.x),l.push(u.y);else for(h=0;h<f;++h){var b=+m(u=e[h],h),w=+y(u,h);b<p&&(p=b),w<d&&(d=w),b>g&&(g=b),w>v&&(v=w),c.push(b),l.push(w)}var x=g-p,S=v-d;function _(e,t,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var u=e.x,c=e.y;if(null!=u)if(k(u-n)+k(c-r)<.01)C(e,t,n,r,i,a,o,s);else{var l=e.point;e.x=e.y=e.point=null,C(e,l,u,c,i,a,o,s),C(e,t,n,r,i,a,o,s)}else e.x=n,e.y=r,e.point=t}else C(e,t,n,r,i,a,o,s)}function C(e,t,n,r,i,a,o,s){var u=.5*(i+o),c=.5*(a+s),l=n>=u,h=r>=c,f=h<<1|l;e.leaf=!1,l?i=u:o=u,h?a=c:s=c,_(e=e.nodes[f]||(e.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,r,i,a,o,s)}x>S?v=d+x:g=p+S;var R={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){_(R,e,+m(e,++h),+y(e,h),p,d,g,v)},visit:function(e){Xi(e,R,p,d,g,v)},find:function(e){return Zi(R,e[0],e[1],p,d,g,v)}};if(h=-1,null==t){for(;++h<f;)_(R,e[h],c[h],l[h],p,d,g,v);--h}else e.forEach(R.add);return c=l=e=u=null,R}return u.x=function(e){return arguments.length?(o=e,u):o},u.y=function(e){return arguments.length?(s=e,u):s},u.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),u):null==t?null:[[t,n],[r,i]]},u.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),u):null==t?null:[r-t,i-n]},u},a.interpolateRgb=Ki,a.interpolateObject=Qi,a.interpolateNumber=Ji,a.interpolateString=ea;var ta=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,na=new RegExp(ta.source,"g");function ra(e,t){for(var n,r=a.interpolators.length;--r>=0&&!(n=a.interpolators[r](e,t)););return n}function ia(e,t){var n,r=[],i=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(ra(e[n],t[n]));for(;n<a;++n)i[n]=e[n];for(;n<o;++n)i[n]=t[n];return function(e){for(n=0;n<s;++n)i[n]=r[n](e);return i}}a.interpolate=ra,a.interpolators=[function(e,t){var n=typeof t;return("string"===n?mt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?Ki:ea:t instanceof We?Ki:Array.isArray(t)?ia:"object"===n&&isNaN(t)?Qi:Ji)(e,t)}],a.interpolateArray=ia;var aa=function(){return N},oa=a.map({linear:aa,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return ha},cubic:function(){return fa},sin:function(){return da},exp:function(){return ga},circle:function(){return va},elastic:function(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Le*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Le/t)}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},bounce:function(){return ma}}),sa=a.map({in:N,out:ca,"in-out":la,"out-in":function(e){return la(ca(e))}});function ua(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function ca(e){return function(t){return 1-e(1-t)}}function la(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function ha(e){return e*e}function fa(e){return e*e*e}function pa(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function da(e){return 1-Math.cos(e*Pe)}function ga(e){return Math.pow(2,10*(e-1))}function va(e){return 1-Math.sqrt(1-e*e)}function ma(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function ya(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function ba(e){var t=[e.a,e.b],n=[e.c,e.d],r=xa(t),i=wa(t,n),a=xa(function(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Oe,this.translate=[e.e,e.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*Oe:0}function wa(e,t){return e[0]*t[0]+e[1]*t[1]}function xa(e){var t=Math.sqrt(wa(e,e));return t&&(e[0]/=t,e[1]/=t),t}a.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=oa.get(n)||aa,ua((r=sa.get(r)||N)(n.apply(null,o.call(arguments,1))))},a.interpolateHcl=function(e,t){e=a.hcl(e),t=a.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,s=t.c-r,u=t.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?t.c:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360),function(e){return Qe(n+o*e,r+s*e,i+u*e)+""}},a.interpolateHsl=function(e,t){e=a.hsl(e),t=a.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,s=t.s-r,u=t.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?t.s:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360),function(e){return Xe(n+o*e,r+s*e,i+u*e)+""}},a.interpolateLab=function(e,t){e=a.lab(e),t=a.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,s=t.a-r,u=t.b-i;return function(e){return nt(n+o*e,r+s*e,i+u*e)+""}},a.interpolateRound=ya,a.transform=function(e){var t=u.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new ba(n?n.matrix:ka)})(e)},ba.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ka={a:1,b:0,c:0,d:1,e:0,f:0};function Sa(e){return e.length?e.pop()+",":""}function _a(e,t){var n=[],r=[];return e=a.transform(e),t=a.transform(t),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Ji(e[0],t[0])},{i:i-2,x:Ji(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,n,r),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(Sa(n)+"rotate(",null,")")-2,x:Ji(e,t)})):t&&n.push(Sa(n)+"rotate("+t+")")}(e.rotate,t.rotate,n,r),function(e,t,n,r){e!==t?r.push({i:n.push(Sa(n)+"skewX(",null,")")-2,x:Ji(e,t)}):t&&n.push(Sa(n)+"skewX("+t+")")}(e.skew,t.skew,n,r),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Sa(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Ji(e[0],t[0])},{i:i-2,x:Ji(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(Sa(n)+"scale("+t+")")}(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,a=r.length;++i<a;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Ca(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Ra(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Ea(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;for(var n=Aa(e),r=Aa(t),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Aa(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Ta(e){e.fixed|=2}function Ma(e){e.fixed&=-7}function La(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Ia(e){e.fixed&=-5}a.interpolateTransform=_a,a.layout={},a.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Ea(e[n]));return t}},a.layout.chord=function(){var e,t,n,r,i,o,s,u={},c=0;function l(){var u,l,f,p,d,g={},v=[],m=a.range(r),y=[];for(e=[],t=[],u=0,p=-1;++p<r;){for(l=0,d=-1;++d<r;)l+=n[p][d];v.push(l),y.push(a.range(r)),u+=l}for(i&&m.sort((function(e,t){return i(v[e],v[t])})),o&&y.forEach((function(e,t){e.sort((function(e,r){return o(n[t][e],n[t][r])}))})),u=(Le-c*r)/u,l=0,p=-1;++p<r;){for(f=l,d=-1;++d<r;){var b=m[p],w=y[b][d],x=n[b][w],k=l,S=l+=x*u;g[b+"-"+w]={index:b,subindex:w,startAngle:k,endAngle:S,value:x}}t[b]={index:b,startAngle:f,endAngle:l,value:v[b]},l+=c}for(p=-1;++p<r;)for(d=p-1;++d<r;){var _=g[p+"-"+d],C=g[d+"-"+p];(_.value||C.value)&&e.push(_.value<C.value?{source:C,target:_}:{source:_,target:C})}s&&h()}function h(){e.sort((function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}return u.matrix=function(i){return arguments.length?(r=(n=i)&&n.length,e=t=null,u):n},u.padding=function(n){return arguments.length?(c=n,e=t=null,u):c},u.sortGroups=function(n){return arguments.length?(i=n,e=t=null,u):i},u.sortSubgroups=function(t){return arguments.length?(o=t,e=null,u):o},u.sortChords=function(t){return arguments.length?(s=t,e&&h(),u):s},u.chords=function(){return e||l(),e},u.groups=function(){return t||l(),t},u},a.layout.force=function(){var e,t,n,r,i,o,s={},u=a.dispatch("start","tick","end"),c=[1,1],l=.9,h=Pa,f=Na,p=-30,d=Oa,g=.1,v=.64,m=[],y=[];function b(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,u=a*a+o*o;if(s*s/v<u){if(u<d){var c=t.charge/u;e.px-=a*c,e.py-=o*c}return!0}t.point&&u&&u<d&&(c=t.pointCharge/u,e.px-=a*c,e.py-=o*c)}return!t.charge}}function w(e){e.px=a.event.x,e.py=a.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return e=null,u.end({type:"end",alpha:n=0}),!0;var t,s,h,f,d,v,w,x,k,S=m.length,_=y.length;for(s=0;s<_;++s)f=(h=y[s]).source,(v=(x=(d=h.target).x-f.x)*x+(k=d.y-f.y)*k)&&(x*=v=n*i[s]*((v=Math.sqrt(v))-r[s])/v,k*=v,d.x-=x*(w=f.weight+d.weight?f.weight/(f.weight+d.weight):.5),d.y-=k*w,f.x+=x*(w=1-w),f.y+=k*w);if((w=n*g)&&(x=c[0]/2,k=c[1]/2,s=-1,w))for(;++s<S;)(h=m[s]).x+=(x-h.x)*w,h.y+=(k-h.y)*w;if(p)for(function e(t,n,r){var i=0,a=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,u=s.length,c=-1;++c<u;)null!=(o=s[c])&&(e(o,n,r),t.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=n*r[t.point.index];t.charge+=t.pointCharge=l,i+=l*t.point.x,a+=l*t.point.y}t.cx=i/t.charge,t.cy=a/t.charge}(t=a.geom.quadtree(m),n,o),s=-1;++s<S;)(h=m[s]).fixed||t.visit(b(h));for(s=-1;++s<S;)(h=m[s]).fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*l,h.y-=(h.py-(h.py=h.y))*l);u.tick({type:"tick",alpha:n})},s.nodes=function(e){return arguments.length?(m=e,s):m},s.links=function(e){return arguments.length?(y=e,s):y},s.size=function(e){return arguments.length?(c=e,s):c},s.linkDistance=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.friction=function(e){return arguments.length?(l=+e,s):l},s.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.chargeDistance=function(e){return arguments.length?(d=e*e,s):Math.sqrt(d)},s.gravity=function(e){return arguments.length?(g=+e,s):g},s.theta=function(e){return arguments.length?(v=e*e,s):Math.sqrt(v)},s.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,u.end({type:"end",alpha:n=0})):t>0&&(u.start({type:"start",alpha:n=t}),e=Rt(s.tick)),s):n},s.start=function(){var e,t,n,a=m.length,u=y.length,l=c[0],d=c[1];for(e=0;e<a;++e)(n=m[e]).index=e,n.weight=0;for(e=0;e<u;++e)"number"==typeof(n=y[e]).source&&(n.source=m[n.source]),"number"==typeof n.target&&(n.target=m[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<a;++e)n=m[e],isNaN(n.x)&&(n.x=g("x",l)),isNaN(n.y)&&(n.y=g("y",d)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"==typeof h)for(e=0;e<u;++e)r[e]=+h.call(this,y[e],e);else for(e=0;e<u;++e)r[e]=h;if(i=[],"function"==typeof f)for(e=0;e<u;++e)i[e]=+f.call(this,y[e],e);else for(e=0;e<u;++e)i[e]=f;if(o=[],"function"==typeof p)for(e=0;e<a;++e)o[e]=+p.call(this,m[e],e);else for(e=0;e<a;++e)o[e]=p;function g(n,r){if(!t){for(t=new Array(a),c=0;c<a;++c)t[c]=[];for(c=0;c<u;++c){var i=y[c];t[i.source.index].push(i.target),t[i.target.index].push(i.source)}}for(var o,s=t[e],c=-1,l=s.length;++c<l;)if(!isNaN(o=s[c][n]))return o;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(t||(t=a.behavior.drag().origin(N).on("dragstart.force",Ta).on("drag.force",w).on("dragend.force",Ma)),!arguments.length)return t;this.on("mouseover.force",La).on("mouseout.force",Ia).call(t)},a.rebind(s,u,"on")};var Pa=20,Na=1,Oa=1/0;function Fa(e,t){return a.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ja,e}function Da(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Ba(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function za(e){return e.children}function Ua(e){return e.value}function Ha(e,t){return t.value-e.value}function ja(e){return a.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}a.layout.hierarchy=function(){var e=Ha,t=za,n=Ua;function r(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(c=t.call(r,a,a.depth))&&(u=c.length)){for(var u,c,l;--u>=0;)o.push(l=c[u]),l.parent=a,l.depth=a.depth+1;n&&(a.value=0),a.children=c}else n&&(a.value=+n.call(r,a,a.depth)||0),delete a.children;return Ba(i,(function(t){var r,i;e&&(r=t.children)&&r.sort(e),n&&(i=t.parent)&&(i.value+=t.value)})),s}return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(Da(e,(function(e){e.children&&(e.value=0)})),Ba(e,(function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)}))),e},r},a.layout.partition=function(){var e=a.layout.hierarchy(),t=[1,1];function n(n,r){var i=e.call(this,n,r);return function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,s,u,c=-1;for(r=t.value?r/t.value:0;++c<o;)e(s=a[c],n,u=s.value*r,i),n+=u}}(i[0],0,t[0],t[1]/function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,e(n[a]));return 1+r}(i[0])),i}return n.size=function(e){return arguments.length?(t=e,n):t},Fa(n,e)},a.layout.pie=function(){var e=Number,t=qa,n=0,r=Le,i=0;function o(s){var u,c=s.length,l=s.map((function(t,n){return+e.call(o,t,n)})),h=+("function"==typeof n?n.apply(this,arguments):n),f=("function"==typeof r?r.apply(this,arguments):r)-h,p=Math.min(Math.abs(f)/c,+("function"==typeof i?i.apply(this,arguments):i)),d=p*(f<0?-1:1),g=a.sum(l),v=g?(f-c*d)/g:0,m=a.range(c),y=[];return null!=t&&m.sort(t===qa?function(e,t){return l[t]-l[e]}:function(e,n){return t(s[e],s[n])}),m.forEach((function(e){y[e]={data:s[e],value:u=l[e],startAngle:h,endAngle:h+=u*v+d,padAngle:p}})),y}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(e){return arguments.length?(t=e,o):t},o.startAngle=function(e){return arguments.length?(n=e,o):n},o.endAngle=function(e){return arguments.length?(r=e,o):r},o.padAngle=function(e){return arguments.length?(i=e,o):i},o};var qa={};function Va(e){return e.x}function Ga(e){return e.y}function Wa(e,t,n){e.y0=t,e.y=n}a.layout.stack=function(){var e=N,t=Xa,n=Za,r=Wa,i=Va,o=Ga;function s(u,c){if(!(p=u.length))return u;var l=u.map((function(t,n){return e.call(s,t,n)})),h=l.map((function(e){return e.map((function(e,t){return[i.call(s,e,t),o.call(s,e,t)]}))})),f=t.call(s,h,c);l=a.permute(l,f),h=a.permute(h,f);var p,d,g,v,m=n.call(s,h,c),y=l[0].length;for(g=0;g<y;++g)for(r.call(s,l[0][g],v=m[g],h[0][g][1]),d=1;d<p;++d)r.call(s,l[d][g],v+=h[d-1][g][1],h[d][g][1]);return u}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(e){return arguments.length?(t="function"==typeof e?e:$a.get(e)||Xa,s):t},s.offset=function(e){return arguments.length?(n="function"==typeof e?e:Ya.get(e)||Za,s):n},s.x=function(e){return arguments.length?(i=e,s):i},s.y=function(e){return arguments.length?(o=e,s):o},s.out=function(e){return arguments.length?(r=e,s):r},s};var $a=a.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(Ka),o=e.map(Qa),s=a.range(r).sort((function(e,t){return i[e]-i[t]})),u=0,c=0,l=[],h=[];for(t=0;t<r;++t)n=s[t],u<c?(u+=o[n],l.push(n)):(c+=o[n],h.push(n));return h.reverse().concat(l)},reverse:function(e){return a.range(e.length).reverse()},default:Xa}),Ya=a.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,o=[],s=0,u=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)u[n]=(s-o[n])/2;return u},wiggle:function(e){var t,n,r,i,a,o,s,u,c,l=e.length,h=e[0],f=h.length,p=[];for(p[0]=u=c=0,n=1;n<f;++n){for(t=0,i=0;t<l;++t)i+=e[t][n][1];for(t=0,a=0,s=h[n][0]-h[n-1][0];t<l;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;a+=o*e[t][n][1]}p[n]=u-=i?a/i*s:0,u<c&&(c=u)}for(n=0;n<f;++n)p[n]-=c;return p},expand:function(e){var t,n,r,i=e.length,a=e[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:Za});function Xa(e){return a.range(e.length)}function Za(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function Ka(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;n<a;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function Qa(e){return e.reduce(Ja,0)}function Ja(e,t){return e+t[1]}function eo(e,t){return to(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function to(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function no(e){return[a.min(e),a.max(e)]}function ro(e,t){return e.value-t.value}function io(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function ao(e,t){e._pack_next=t,t._pack_prev=e}function oo(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function so(e){if((t=e.children)&&(u=t.length)){var t,n,r,i,a,o,s,u,c=1/0,l=-1/0,h=1/0,f=-1/0;if(t.forEach(uo),(n=t[0]).x=-n.r,n.y=0,b(n),u>1&&((r=t[1]).x=r.r,r.y=0,b(r),u>2))for(lo(n,r,i=t[2]),b(i),io(n,i),n._pack_prev=i,io(i,r),r=n._pack_next,a=3;a<u;a++){lo(n,r,i=t[a]);var p=0,d=1,g=1;for(o=r._pack_next;o!==r;o=o._pack_next,d++)if(oo(o,i)){p=1;break}if(1==p)for(s=n._pack_prev;s!==o._pack_prev&&!oo(s,i);s=s._pack_prev,g++);p?(d<g||d==g&&r.r<n.r?ao(n,r=o):ao(n=s,r),a--):(io(n,i),r=i,b(i))}var v=(c+l)/2,m=(h+f)/2,y=0;for(a=0;a<u;a++)(i=t[a]).x-=v,i.y-=m,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=y,t.forEach(co)}function b(e){c=Math.min(e.x-e.r,c),l=Math.max(e.x+e.r,l),h=Math.min(e.y-e.r,h),f=Math.max(e.y+e.r,f)}}function uo(e){e._pack_next=e._pack_prev=e}function co(e){delete e._pack_next,delete e._pack_prev}function lo(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a,u=.5+((r*=r)-(o*=o))/(2*s),c=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+u*i+c*a,n.y=e.y+u*a-c*i}else n.x=e.x+r,n.y=e.y}function ho(e,t){return e.parent==t.parent?1:2}function fo(e){var t=e.children;return t.length?t[0]:e.t}function po(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function go(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function vo(e,t,n){return e.a.parent===t.parent?e.a:n}function mo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function yo(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function bo(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function wo(e){return e.rangeExtent?e.rangeExtent():bo(e.range())}function xo(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function ko(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function So(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:_o}a.layout.histogram=function(){var e=!0,t=Number,n=no,r=eo;function i(i,o){for(var s,u,c=[],l=i.map(t,this),h=n.call(this,l,o),f=r.call(this,h,l,o),p=(o=-1,l.length),d=f.length-1,g=e?1:1/p;++o<d;)(s=c[o]=[]).dx=f[o+1]-(s.x=f[o]),s.y=0;if(d>0)for(o=-1;++o<p;)(u=l[o])>=h[0]&&u<=h[1]&&((s=c[a.bisect(f,u,1,d)-1]).y+=g,s.push(i[o]));return c}return i.value=function(e){return arguments.length?(t=e,i):t},i.range=function(e){return arguments.length?(n=yt(e),i):n},i.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return to(t,e)}:yt(e),i):r},i.frequency=function(t){return arguments.length?(e=!!t,i):e},i},a.layout.pack=function(){var e,t=a.layout.hierarchy().sort(ro),n=0,r=[1,1];function i(i,a){var o=t.call(this,i,a),s=o[0],u=r[0],c=r[1],l=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Ba(s,(function(e){e.r=+l(e.value)})),Ba(s,so),n){var h=n*(e?1:Math.max(2*s.r/u,2*s.r/c))/2;Ba(s,(function(e){e.r+=h})),Ba(s,so),Ba(s,(function(e){e.r-=h}))}return function e(t,n,r,i){var a=t.children;if(t.x=n+=i*t.x,t.y=r+=i*t.y,t.r*=i,a)for(var o=-1,s=a.length;++o<s;)e(a[o],n,r,i)}(s,u/2,c/2,e?1:1/Math.max(2*s.r/u,2*s.r/c)),o}return i.size=function(e){return arguments.length?(r=e,i):r},i.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,i):e},i.padding=function(e){return arguments.length?(n=+e,i):n},Fa(i,t)},a.layout.tree=function(){var e=a.layout.hierarchy().sort(null).value(null),t=ho,n=[1,1],r=null;function i(i,a){var c=e.call(this,i,a),l=c[0],h=function(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,a=t.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:t,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}(l);if(Ba(h,o),h.parent.m=-h.z,Da(h,s),r)Da(l,u);else{var f=l,p=l,d=l;Da(l,(function(e){e.x<f.x&&(f=e),e.x>p.x&&(p=e),e.depth>d.depth&&(d=e)}));var g=t(f,p)/2-f.x,v=n[0]/(p.x+t(p,f)/2+g),m=n[1]/(d.depth||1);Da(l,(function(e){e.x=(e.x+g)*v,e.y=e.depth*m}))}return c}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n.length){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,u=a.parent.children[0],c=a.m,l=o.m,h=s.m,f=u.m;s=po(s),a=fo(a),s&&a;)u=fo(u),(o=po(o)).a=e,(i=s.z+h-a.z-c+t(s._,a._))>0&&(go(vo(s,e,r),e,i),c+=i,l+=i),h+=s.m,c+=a.m,f+=u.m,l+=o.m;s&&!po(o)&&(o.t=s,o.m+=h-l),a&&!fo(u)&&(u.t=a,u.m+=c-f,r=e)}return r}(e,i,e.parent.A||r[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(e){e.x*=n[0],e.y=e.depth*n[1]}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e)?u:null,i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null==(n=e)?null:u,i):r?n:null},Fa(i,e)},a.layout.cluster=function(){var e=a.layout.hierarchy().sort(null).value(null),t=ho,n=[1,1],r=!1;function i(i,o){var s,u=e.call(this,i,o),c=u[0],l=0;Ba(c,(function(e){var n=e.children;n&&n.length?(e.x=function(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}(n),e.y=function(e){return 1+a.max(e,(function(e){return e.y}))}(n)):(e.x=s?l+=t(e,s):0,e.y=0,s=e)}));var h=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(c),f=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(c),p=h.x-t(h,f)/2,d=f.x+t(f,h)/2;return Ba(c,r?function(e){e.x=(e.x-c.x)*n[0],e.y=(c.y-e.y)*n[1]}:function(e){e.x=(e.x-p)/(d-p)*n[0],e.y=(1-(c.y?e.y/c.y:1))*n[1]}),u}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e),i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null!=(n=e),i):r?n:null},Fa(i,e)},a.layout.treemap=function(){var e,t=a.layout.hierarchy(),n=Math.round,r=[1,1],i=null,o=mo,s=!1,u="squarify",c=.5*(1+Math.sqrt(5));function l(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function h(e){var t=e.children;if(t&&t.length){var n,r,i,a=o(e),s=[],c=t.slice(),f=1/0,g="slice"===u?a.dx:"dice"===u?a.dy:"slice-dice"===u?1&e.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(l(c,a.dx*a.dy/e.value),s.area=0;(i=c.length)>0;)s.push(n=c[i-1]),s.area+=n.area,"squarify"!==u||(r=p(s,g))<=f?(c.pop(),f=r):(s.area-=s.pop().area,d(s,g,a,!1),g=Math.min(a.dx,a.dy),s.length=s.area=0,f=1/0);s.length&&(d(s,g,a,!0),s.length=s.area=0),t.forEach(h)}}function f(e){var t=e.children;if(t&&t.length){var n,r=o(e),i=t.slice(),a=[];for(l(i,r.dx*r.dy/e.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(d(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);t.forEach(f)}}function p(e,t){for(var n,r=e.area,i=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(n<a&&(a=n),n>i&&(i=n));return t*=t,(r*=r)?Math.max(t*i*c/r,r/(t*a*c)):1/0}function d(e,t,r,i){var a,o=-1,s=e.length,u=r.x,c=r.y,l=t?n(e.area/t):0;if(t==r.dx){for((i||l>r.dy)&&(l=r.dy);++o<s;)(a=e[o]).x=u,a.y=c,a.dy=l,u+=a.dx=Math.min(r.x+r.dx-u,l?n(a.area/l):0);a.z=!0,a.dx+=r.x+r.dx-u,r.y+=l,r.dy-=l}else{for((i||l>r.dx)&&(l=r.dx);++o<s;)(a=e[o]).x=u,a.y=c,a.dx=l,c+=a.dy=Math.min(r.y+r.dy-c,l?n(a.area/l):0);a.z=!1,a.dy+=r.y+r.dy-c,r.x+=l,r.dx-=l}}function g(n){var i=e||t(n),a=i[0];return a.x=a.y=0,a.value?(a.dx=r[0],a.dy=r[1]):a.dx=a.dy=0,e&&t.revalue(a),l([a],a.dx*a.dy/a.value),(e?f:h)(a),s&&(e=i),i}return g.size=function(e){return arguments.length?(r=e,g):r},g.padding=function(e){if(!arguments.length)return i;function t(t){var n=e.call(g,t,t.depth);return null==n?mo(t):yo(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return yo(t,e)}var r;return o=null==(i=e)?mo:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,g},g.round=function(e){return arguments.length?(n=e?Math.round:Number,g):n!=Number},g.sticky=function(t){return arguments.length?(s=t,e=null,g):s},g.ratio=function(e){return arguments.length?(c=e,g):c},g.mode=function(e){return arguments.length?(u=e+"",g):u},Fa(g,t)},a.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=a.random.normal.apply(a,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=a.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},a.scale={};var _o={floor:N,ceil:N};function Co(e,t,n,r){var i=[],o=[],s=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<=u;)i.push(n(e[s-1],e[s])),o.push(r(t[s-1],t[s]));return function(t){var n=a.bisect(e,t,1,u)-1;return o[n](i[n](t))}}function Ro(e,t){return a.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Eo(e,t){return ko(e,So(Ao(e,t)[2])),ko(e,So(Ao(e,t)[2])),e}function Ao(e,t){null==t&&(t=10);var n=bo(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function To(e,t){return a.range.apply(a,Ao(e,t))}function Mo(e,t,n){var r=Ao(e,t);if(n){var i=Pt.exec(n);if(i.shift(),"s"===i[8]){var o=a.formatPrefix(Math.max(k(r[0]),k(r[1])));return i[7]||(i[7]="."+Io(o.scale(r[2]))),i[8]="f",n=a.format(i.join("")),function(e){return n(o.scale(e))+o.symbol}}i[7]||(i[7]="."+function(e,t){var n=Io(t[2]);return e in Lo?Math.abs(n-Io(Math.max(k(t[0]),k(t[1]))))+ +("e"!==e):n-2*("%"===e)}(i[8],r)),n=i.join("")}else n=",."+Io(r[2])+"f";return a.format(n)}a.scale.linear=function(){return function e(t,n,r,i){var a,o;function s(){var e=Math.min(t.length,n.length)>2?Co:xo,s=i?Ra:Ca;return a=e(t,n,s,r),o=e(n,t,s,ra),u}function u(e){return a(e)}return u.invert=function(e){return o(e)},u.domain=function(e){return arguments.length?(t=e.map(Number),s()):t},u.range=function(e){return arguments.length?(n=e,s()):n},u.rangeRound=function(e){return u.range(e).interpolate(ya)},u.clamp=function(e){return arguments.length?(i=e,s()):i},u.interpolate=function(e){return arguments.length?(r=e,s()):r},u.ticks=function(e){return To(t,e)},u.tickFormat=function(e,n){return Mo(t,e,n)},u.nice=function(e){return Eo(t,e),s()},u.copy=function(){return e(t,n,r,i)},s()}([0,1],[0,1],ra,!1)};var Lo={s:1,g:1,p:1,r:1,e:1};function Io(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}a.scale.log=function(){return function e(t,n,r,i){function o(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function s(e){return r?Math.pow(n,e):-Math.pow(n,-e)}function u(e){return t(o(e))}return u.invert=function(e){return s(t.invert(e))},u.domain=function(e){return arguments.length?(r=e[0]>=0,t.domain((i=e.map(Number)).map(o)),u):i},u.base=function(e){return arguments.length?(n=+e,t.domain(i.map(o)),u):n},u.nice=function(){var e=ko(i.map(o),r?Math:No);return t.domain(e),i=e.map(s),u},u.ticks=function(){var e=bo(i),t=[],a=e[0],u=e[1],c=Math.floor(o(a)),l=Math.ceil(o(u)),h=n%1?2:n;if(isFinite(l-c)){if(r){for(;c<l;c++)for(var f=1;f<h;f++)t.push(s(c)*f);t.push(s(c))}else for(t.push(s(c));c++<l;)for(f=h-1;f>0;f--)t.push(s(c)*f);for(c=0;t[c]<a;c++);for(l=t.length;t[l-1]>u;l--);t=t.slice(c,l)}return t},u.tickFormat=function(e,t){if(!arguments.length)return Po;arguments.length<2?t=Po:"function"!=typeof t&&(t=a.format(t));var r=Math.max(1,n*e/u.ticks().length);return function(e){var i=e/s(Math.round(o(e)));return i*n<n-.5&&(i*=n),i<=r?t(e):""}},u.copy=function(){return e(t.copy(),n,r,i)},Ro(u,t)}(a.scale.linear().domain([0,1]),10,!0,[1,10])};var Po=a.format(".0e"),No={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Oo(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}a.scale.pow=function(){return function e(t,n,r){var i=Oo(n),a=Oo(1/n);function o(e){return t(i(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(i)),o):r},o.ticks=function(e){return To(r,e)},o.tickFormat=function(e,t){return Mo(r,e,t)},o.nice=function(e){return o.domain(Eo(r,e))},o.exponent=function(e){return arguments.length?(i=Oo(n=e),a=Oo(1/n),t.domain(r.map(i)),o):n},o.copy=function(){return e(t.copy(),n,r)},Ro(o,t)}(a.scale.linear(),1,[0,1])},a.scale.sqrt=function(){return a.scale.pow().exponent(.5)},a.scale.ordinal=function(){return function e(t,n){var r,i,o;function s(e){return i[((r.get(e)||("range"===n.t?r.set(e,t.push(e)):NaN))-1)%i.length]}function u(e,n){return a.range(t.length).map((function(t){return e+n*t}))}return s.domain=function(e){if(!arguments.length)return t;t=[],r=new C;for(var i,a=-1,o=e.length;++a<o;)r.has(i=e[a])||r.set(i,t.push(i));return s[n.t].apply(s,n.a)},s.range=function(e){return arguments.length?(i=e,o=0,n={t:"range",a:arguments},s):i},s.rangePoints=function(e,r){arguments.length<2&&(r=0);var a=e[0],c=e[1],l=t.length<2?(a=(a+c)/2,0):(c-a)/(t.length-1+r);return i=u(a+l*r/2,l),o=0,n={t:"rangePoints",a:arguments},s},s.rangeRoundPoints=function(e,r){arguments.length<2&&(r=0);var a=e[0],c=e[1],l=t.length<2?(a=c=Math.round((a+c)/2),0):(c-a)/(t.length-1+r)|0;return i=u(a+Math.round(l*r/2+(c-a-(t.length-1+r)*l)/2),l),o=0,n={t:"rangeRoundPoints",a:arguments},s},s.rangeBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var c=e[1]<e[0],l=e[c-0],h=e[1-c],f=(h-l)/(t.length-r+2*a);return i=u(l+f*a,f),c&&i.reverse(),o=f*(1-r),n={t:"rangeBands",a:arguments},s},s.rangeRoundBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var c=e[1]<e[0],l=e[c-0],h=e[1-c],f=Math.floor((h-l)/(t.length-r+2*a));return i=u(l+Math.round((h-l-(t.length-r)*f)/2),f),c&&i.reverse(),o=Math.round(f*(1-r)),n={t:"rangeRoundBands",a:arguments},s},s.rangeBand=function(){return o},s.rangeExtent=function(){return bo(n.a[0])},s.copy=function(){return e(t,n)},s.domain(t)}([],{t:"range",a:[[]]})},a.scale.category10=function(){return a.scale.ordinal().range(Fo)},a.scale.category20=function(){return a.scale.ordinal().range(Do)},a.scale.category20b=function(){return a.scale.ordinal().range(Bo)},a.scale.category20c=function(){return a.scale.ordinal().range(zo)};var Fo=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ct),Do=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ct),Bo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ct),zo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ct);function Uo(){return 0}a.scale.quantile=function(){return function e(t,n){var r;function i(){var e=0,i=n.length;for(r=[];++e<i;)r[e-1]=a.quantile(t,e/i);return o}function o(e){if(!isNaN(e=+e))return n[a.bisect(r,e)]}return o.domain=function(e){return arguments.length?(t=e.map(m).filter(y).sort(v),i()):t},o.range=function(e){return arguments.length?(n=e,i()):n},o.quantiles=function(){return r},o.invertExtent=function(e){return(e=n.indexOf(e))<0?[NaN,NaN]:[e>0?r[e-1]:t[0],e<r.length?r[e]:t[t.length-1]]},o.copy=function(){return e(t,n)},i()}([],[])},a.scale.quantize=function(){return function e(t,n,r){var i,a;function o(e){return r[Math.max(0,Math.min(a,Math.floor(i*(e-t))))]}function s(){return i=r.length/(n-t),a=r.length-1,o}return o.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]},o.range=function(e){return arguments.length?(r=e,s()):r},o.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/i+t,e+1/i]},o.copy=function(){return e(t,n,r)},s()}(0,1,[0,1])},a.scale.threshold=function(){return function e(t,n){function r(e){if(e<=e)return n[a.bisect(t,e)]}return r.domain=function(e){return arguments.length?(t=e,r):t},r.range=function(e){return arguments.length?(n=e,r):n},r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},r.copy=function(){return e(t,n)},r}([.5],[0,1])},a.scale.identity=function(){return function e(t){function n(e){return+e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(e){return To(t,e)},n.tickFormat=function(e,n){return Mo(t,e,n)},n.copy=function(){return e(t)},n}([0,1])},a.svg={},a.svg.arc=function(){var e=jo,t=qo,n=Uo,r=Ho,i=Vo,a=Go,o=Wo;function s(){var s=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+t.apply(this,arguments)),l=i.apply(this,arguments)-Pe,h=a.apply(this,arguments)-Pe,f=Math.abs(h-l),p=l>h?0:1;if(c<s&&(d=c,c=s,s=d),f>=Ie)return u(c,p)+(s?u(s,1-p):"")+"Z";var d,g,v,m,y,b,w,x,k,S,_,C,R=0,E=0,A=[];if((m=(+o.apply(this,arguments)||0)/2)&&(v=r===Ho?Math.sqrt(s*s+c*c):+r.apply(this,arguments),p||(E*=-1),c&&(E=ze(v/c*Math.sin(m))),s&&(R=ze(v/s*Math.sin(m)))),c){y=c*Math.cos(l+E),b=c*Math.sin(l+E),w=c*Math.cos(h-E),x=c*Math.sin(h-E);var T=Math.abs(h-l-2*E)<=Me?0:1;if(E&&$o(y,b,w,x)===p^T){var M=(l+h)/2;y=c*Math.cos(M),b=c*Math.sin(M),w=x=null}}else y=b=0;if(s){k=s*Math.cos(h-R),S=s*Math.sin(h-R),_=s*Math.cos(l+R),C=s*Math.sin(l+R);var L=Math.abs(l-h+2*R)<=Me?0:1;if(R&&$o(k,S,_,C)===1-p^L){var I=(l+h)/2;k=s*Math.cos(I),S=s*Math.sin(I),_=C=null}}else k=S=0;if(f>Ae&&(d=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){g=s<c^p?0:1;var P=d,N=d;if(f<Me){var O=null==_?[k,S]:null==w?[y,b]:fi([y,b],[_,C],[w,x],[k,S]),F=y-O[0],D=b-O[1],B=w-O[0],z=x-O[1],U=1/Math.sin(Math.acos((F*B+D*z)/(Math.sqrt(F*F+D*D)*Math.sqrt(B*B+z*z)))/2),H=Math.sqrt(O[0]*O[0]+O[1]*O[1]);N=Math.min(d,(s-H)/(U-1)),P=Math.min(d,(c-H)/(U+1))}if(null!=w){var j=Yo(null==_?[k,S]:[_,C],[y,b],c,P,p),q=Yo([w,x],[k,S],c,P,p);d===P?A.push("M",j[0],"A",P,",",P," 0 0,",g," ",j[1],"A",c,",",c," 0 ",1-p^$o(j[1][0],j[1][1],q[1][0],q[1][1]),",",p," ",q[1],"A",P,",",P," 0 0,",g," ",q[0]):A.push("M",j[0],"A",P,",",P," 0 1,",g," ",q[0])}else A.push("M",y,",",b);if(null!=_){var V=Yo([y,b],[_,C],s,-N,p),G=Yo([k,S],null==w?[y,b]:[w,x],s,-N,p);d===N?A.push("L",G[0],"A",N,",",N," 0 0,",g," ",G[1],"A",s,",",s," 0 ",p^$o(G[1][0],G[1][1],V[1][0],V[1][1]),",",1-p," ",V[1],"A",N,",",N," 0 0,",g," ",V[0]):A.push("L",G[0],"A",N,",",N," 0 0,",g," ",V[0])}else A.push("L",k,",",S)}else A.push("M",y,",",b),null!=w&&A.push("A",c,",",c," 0 ",T,",",p," ",w,",",x),A.push("L",k,",",S),null!=_&&A.push("A",s,",",s," 0 ",L,",",1-p," ",_,",",C);return A.push("Z"),A.join("")}function u(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=yt(t),s):e},s.outerRadius=function(e){return arguments.length?(t=yt(e),s):t},s.cornerRadius=function(e){return arguments.length?(n=yt(e),s):n},s.padRadius=function(e){return arguments.length?(r=e==Ho?Ho:yt(e),s):r},s.startAngle=function(e){return arguments.length?(i=yt(e),s):i},s.endAngle=function(e){return arguments.length?(a=yt(e),s):a},s.padAngle=function(e){return arguments.length?(o=yt(e),s):o},s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Pe;return[Math.cos(r)*n,Math.sin(r)*n]},s};var Ho="auto";function jo(e){return e.innerRadius}function qo(e){return e.outerRadius}function Vo(e){return e.startAngle}function Go(e){return e.endAngle}function Wo(e){return e&&e.padAngle}function $o(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function Yo(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,c=-s*a,l=e[0]+u,h=e[1]+c,f=t[0]+u,p=t[1]+c,d=(l+f)/2,g=(h+p)/2,v=f-l,m=p-h,y=v*v+m*m,b=n-r,w=l*p-f*h,x=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-w*w)),k=(w*m-v*x)/y,S=(-w*v-m*x)/y,_=(w*m+v*x)/y,C=(-w*v+m*x)/y,R=k-d,E=S-g,A=_-d,T=C-g;return R*R+E*E>A*A+T*T&&(k=_,S=C),[[k-u,S-c],[k*n/b,S*n/b]]}function Xo(e){var t=oi,n=si,r=Kn,i=Ko,a=i.key,o=.7;function s(a){var s,u=[],c=[],l=-1,h=a.length,f=yt(t),p=yt(n);function d(){u.push("M",i(e(c),o))}for(;++l<h;)r.call(this,s=a[l],l)?c.push([+f.call(this,s,l),+p.call(this,s,l)]):c.length&&(d(),c=[]);return c.length&&d(),u.length?u.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(n=e,s):n},s.defined=function(e){return arguments.length?(r=e,s):r},s.interpolate=function(e){return arguments.length?(a="function"==typeof e?i=e:(i=Zo.get(e)||Ko).key,s):a},s.tension=function(e){return arguments.length?(o=e,s):o},s}a.svg.line=function(){return Xo(N)};var Zo=a.map({linear:Ko,"linear-closed":Qo,step:function(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":Jo,"step-after":es,basis:rs,"basis-open":function(e){if(e.length<4)return Ko(e);for(var t,n=[],r=-1,i=e.length,a=[0],o=[0];++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);for(n.push(is(ss,a)+","+is(ss,o)),--r;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),us(n,a,o);return n.join("")},"basis-closed":function(e){for(var t,n,r=-1,i=e.length,a=i+4,o=[],s=[];++r<4;)n=e[r%i],o.push(n[0]),s.push(n[1]);for(t=[is(ss,o),",",is(ss,s)],--r;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),us(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],s=e[n][0]-a,u=e[n][1]-o,c=-1;++c<=n;)r=e[c],i=c/n,r[0]=t*r[0]+(1-t)*(a+i*s),r[1]=t*r[1]+(1-t)*(o+i*u);return rs(e)},cardinal:function(e,t){return e.length<3?Ko(e):e[0]+ts(e,ns(e,t))},"cardinal-open":function(e,t){return e.length<4?Ko(e):e[1]+ts(e.slice(1,-1),ns(e,t))},"cardinal-closed":function(e,t){return e.length<3?Qo(e):e[0]+ts((e.push(e[0]),e),ns([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?Ko(e):e[0]+ts(e,function(e){for(var t,n,r,i,a=[],o=function(e){for(var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=cs(i,a);++t<n;)r[t]=(o+(o=cs(i=a,a=e[t+1])))/2;return r[t]=o,r}(e),s=-1,u=e.length-1;++s<u;)t=cs(e[s],e[s+1]),k(t)<Ae?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,(i=n*n+r*r)>9&&(i=3*t/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));for(s=-1;++s<=u;)i=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(e))}});function Ko(e){return e.length>1?e.join("L"):e+"Z"}function Qo(e){return e.join("L")+"Z"}function Jo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function es(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function ts(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Ko(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,u=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],u=2),t.length>1){s=t[1],a=e[u],u++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<t.length;c++,u++)a=e[u],s=t[c],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var l=e[u];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+l[0]+","+l[1]}return r}function ns(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],s=1,u=e.length;++s<u;)n=a,a=o,o=e[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function rs(e){if(e.length<3)return Ko(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",is(ss,o),",",is(ss,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),us(u,o,s);return e.pop(),u.push("L",r),u.join("")}function is(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}Zo.forEach((function(e,t){t.key=e,t.closed=/-closed$/.test(e)}));var as=[0,2/3,1/3,0],os=[0,1/3,2/3,0],ss=[0,1/6,2/3,1/6];function us(e,t,n){e.push("C",is(as,t),",",is(as,n),",",is(os,t),",",is(os,n),",",is(ss,t),",",is(ss,n))}function cs(e,t){return(t[1]-e[1])/(t[0]-e[0])}function ls(e){for(var t,n,r,i=-1,a=e.length;++i<a;)n=(t=e[i])[0],r=t[1]-Pe,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function hs(e){var t=oi,n=oi,r=0,i=si,a=Kn,o=Ko,s=o.key,u=o,c="L",l=.7;function h(s){var h,f,p,d=[],g=[],v=[],m=-1,y=s.length,b=yt(t),w=yt(r),x=t===n?function(){return f}:yt(n),k=r===i?function(){return p}:yt(i);function S(){d.push("M",o(e(v),l),c,u(e(g.reverse()),l),"Z")}for(;++m<y;)a.call(this,h=s[m],m)?(g.push([f=+b.call(this,h,m),p=+w.call(this,h,m)]),v.push([+x.call(this,h,m),+k.call(this,h,m)])):g.length&&(S(),g=[],v=[]);return g.length&&S(),d.length?d.join(""):null}return h.x=function(e){return arguments.length?(t=n=e,h):n},h.x0=function(e){return arguments.length?(t=e,h):t},h.x1=function(e){return arguments.length?(n=e,h):n},h.y=function(e){return arguments.length?(r=i=e,h):i},h.y0=function(e){return arguments.length?(r=e,h):r},h.y1=function(e){return arguments.length?(i=e,h):i},h.defined=function(e){return arguments.length?(a=e,h):a},h.interpolate=function(e){return arguments.length?(s="function"==typeof e?o=e:(o=Zo.get(e)||Ko).key,u=o.reverse||o,c=o.closed?"M":"L",h):s},h.tension=function(e){return arguments.length?(l=e,h):l},h}function fs(e){return e.radius}function ps(e){return[e.x,e.y]}function ds(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Pe;return[n*Math.cos(r),n*Math.sin(r)]}}function gs(){return 64}function vs(){return"circle"}function ms(e){var t=Math.sqrt(e/Me);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}a.svg.line.radial=function(){var e=Xo(ls);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Jo.reverse=es,es.reverse=Jo,a.svg.area=function(){return hs(N)},a.svg.area.radial=function(){var e=hs(ls);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},a.svg.chord=function(){var e=Wr,t=$r,n=fs,r=Vo,i=Go;function a(n,r){var i=o(this,e,n,r),a=o(this,t,n,r);return"M"+i.p0+s(i.r,i.p1,i.a1-i.a0)+(function(e,t){return e.a0==t.a0&&e.a1==t.a1}(i,a)?u(i.r,i.p1,i.r,i.p0):u(i.r,i.p1,a.r,a.p0)+s(a.r,a.p1,a.a1-a.a0)+u(a.r,a.p1,i.r,i.p0))+"Z"}function o(e,t,a,o){var s=t.call(e,a,o),u=n.call(e,s,o),c=r.call(e,s,o)-Pe,l=i.call(e,s,o)-Pe;return{r:u,a0:c,a1:l,p0:[u*Math.cos(c),u*Math.sin(c)],p1:[u*Math.cos(l),u*Math.sin(l)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Me)+",1 "+t}function u(e,t,n,r){return"Q 0,0 "+r}return a.radius=function(e){return arguments.length?(n=yt(e),a):n},a.source=function(t){return arguments.length?(e=yt(t),a):e},a.target=function(e){return arguments.length?(t=yt(e),a):t},a.startAngle=function(e){return arguments.length?(r=yt(e),a):r},a.endAngle=function(e){return arguments.length?(i=yt(e),a):i},a},a.svg.diagonal=function(){var e=Wr,t=$r,n=ps;function r(r,i){var a=e.call(this,r,i),o=t.call(this,r,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return r.source=function(t){return arguments.length?(e=yt(t),r):e},r.target=function(e){return arguments.length?(t=yt(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},a.svg.diagonal.radial=function(){var e=a.svg.diagonal(),t=ps,n=e.projection;return e.projection=function(e){return arguments.length?n(ds(t=e)):t},e},a.svg.symbol=function(){var e=vs,t=gs;function n(n,r){return(ys.get(e.call(this,n,r))||ms)(t.call(this,n,r))}return n.type=function(t){return arguments.length?(e=yt(t),n):e},n.size=function(e){return arguments.length?(t=yt(e),n):t},n};var ys=a.map({circle:ms,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ws)),n=t*ws;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/bs),n=t*bs/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/bs),n=t*bs/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});a.svg.symbolTypes=ys.keys();var bs=Math.sqrt(3),ws=Math.tan(30*Ne);Z.transition=function(e){for(var t,n,r=_s||++Es,i=Ms(e),a=[],o=Cs||{time:Date.now(),ease:pa,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(t=[]);for(var c=this[s],l=-1,h=c.length;++l<h;)(n=c[l])&&Ls(n,l,i,r,o),t.push(n)}return Ss(a,i,r)},Z.interrupt=function(e){return this.each(null==e?xs:ks(Ms(e)))};var xs=ks(Ms());function ks(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ss(e,t,n){return G(e,Rs),e.namespace=t,e.id=n,e}var _s,Cs,Rs=[],Es=0;function As(e,t,n,r){var i=e.id,a=e.namespace;return de(e,"function"==typeof n?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}function Ts(e){return null==e&&(e=""),function(){this.textContent=e}}function Ms(e){return null==e?"__transition__":"__transition_"+e+"__"}function Ls(e,t,n,r,i){var a,o,s,u,c,l=e[n]||(e[n]={active:0,count:0}),h=l[r];function f(n){var i=l.active,f=l[i];for(var d in f&&(f.timer.c=null,f.timer.t=NaN,--l.count,delete l[i],f.event&&f.event.interrupt.call(e,e.__data__,f.index)),l)if(+d<r){var g=l[d];g.timer.c=null,g.timer.t=NaN,--l.count,delete l[d]}o.c=p,Rt((function(){return o.c&&p(n||1)&&(o.c=null,o.t=NaN),1}),0,a),l.active=r,h.event&&h.event.start.call(e,e.__data__,t),c=[],h.tween.forEach((function(n,r){(r=r.call(e,e.__data__,t))&&c.push(r)})),u=h.ease,s=h.duration}function p(i){for(var a=i/s,o=u(a),f=c.length;f>0;)c[--f].call(e,o);if(a>=1)return h.event&&h.event.end.call(e,e.__data__,t),--l.count?delete l[r]:delete e[n],1}h||(a=i.time,o=Rt((function(e){var t=h.delay;if(o.t=t+a,t<=e)return f(e-t);o.c=f}),0,a),h=l[r]={tween:new C,time:a,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++l.count)}Rs.call=Z.call,Rs.empty=Z.empty,Rs.node=Z.node,Rs.size=Z.size,a.transition=function(e,t){return e&&e.transition?_s?e.transition(t):e:a.selection().transition(e)},a.transition.prototype=Rs,Rs.select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=K(e);for(var s=-1,u=this.length;++s<u;){o.push(t=[]);for(var c=this[s],l=-1,h=c.length;++l<h;)(r=c[l])&&(n=e.call(r,r.__data__,l,s))?("__data__"in r&&(n.__data__=r.__data__),Ls(n,l,a,i,r[a][i]),t.push(n)):t.push(null)}return Ss(o,a,i)},Rs.selectAll=function(e){var t,n,r,i,a,o=this.id,s=this.namespace,u=[];e=Q(e);for(var c=-1,l=this.length;++c<l;)for(var h=this[c],f=-1,p=h.length;++f<p;)if(r=h[f]){a=r[s][o],n=e.call(r,r.__data__,f,c),u.push(t=[]);for(var d=-1,g=n.length;++d<g;)(i=n[d])&&Ls(i,d,s,o,a),t.push(i)}return Ss(u,s,o)},Rs.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=fe(e));for(var i=0,a=this.length;i<a;i++){r.push(t=[]);for(var o,s=0,u=(o=this[i]).length;s<u;s++)(n=o[s])&&e.call(n,n.__data__,s,i)&&t.push(n)}return Ss(r,this.namespace,this.id)},Rs.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):de(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Rs.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n="transform"==e?_a:ra,r=a.ns.qualify(e);function i(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}function s(e){return null==e?i:(e+="",function(){var t,i=this.getAttribute(r);return i!==e&&(t=n(i,e),function(e){this.setAttribute(r,t(e))})})}function u(e){return null==e?o:(e+="",function(){var t,i=this.getAttributeNS(r.space,r.local);return i!==e&&(t=n(i,e),function(e){this.setAttributeNS(r.space,r.local,t(e))})})}return As(this,"attr."+e,t,r.local?u:s)},Rs.attrTween=function(e,t){var n=a.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,r){var i=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}:function(e,r){var i=t.call(this,e,r,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}})},Rs.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function i(){this.style.removeProperty(e)}function a(t){return null==t?i:(t+="",function(){var r,i=l(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=ra(i,t),function(t){this.style.setProperty(e,r(t),n)})})}return As(this,"style."+e,t,a)},Rs.styleTween=function(e,t,n){function r(r,i){var a=t.call(this,r,i,l(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Rs.text=function(e){return As(this,"text",e,Ts)},Rs.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)}))},Rs.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=a.ease.apply(a,arguments)),de(this,(function(r){r[n][t].ease=e})))},Rs.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:de(this,"function"==typeof e?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))},Rs.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:de(this,"function"==typeof e?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Rs.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Cs,o=_s;try{_s=n,de(this,(function(t,i,a){Cs=t[r][n],e.call(t,t.__data__,i,a)}))}finally{Cs=i,_s=o}}else de(this,(function(i){var o=i[r][n];(o.event||(o.event=a.dispatch("start","end","interrupt"))).on(e,t)}));return this},Rs.transition=function(){for(var e,t,n,r=this.id,i=++Es,a=this.namespace,o=[],s=0,u=this.length;s<u;s++){o.push(e=[]);for(var c,l=0,h=(c=this[s]).length;l<h;l++)(t=c[l])&&Ls(t,l,a,i,{time:(n=t[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Ss(o,a,i)},a.svg.axis=function(){var e,t=a.scale.linear(),n=Is,r=6,i=6,o=3,u=[10],c=null;function l(s){s.each((function(){var s,l=a.select(this),h=this.__chart__||t,f=this.__chart__=t.copy(),p=null==c?f.ticks?f.ticks.apply(f,u):f.domain():c,d=null==e?f.tickFormat?f.tickFormat.apply(f,u):N:e,g=l.selectAll(".tick").data(p,f),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Ae),m=a.transition(g.exit()).style("opacity",Ae).remove(),y=a.transition(g.order()).style("opacity",1),b=Math.max(r,0)+o,w=wo(f),x=l.selectAll(".domain").data([0]),k=(x.enter().append("path").attr("class","domain"),a.transition(x));v.append("line"),v.append("text");var S,_,C,R,E=v.select("line"),A=y.select("line"),T=g.select("text").text(d),M=v.select("text"),L=y.select("text"),I="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=Ns,S="x",C="y",_="x2",R="y2",T.attr("dy",I<0?"0em":".71em").style("text-anchor","middle"),k.attr("d","M"+w[0]+","+I*i+"V0H"+w[1]+"V"+I*i)):(s=Os,S="y",C="x",_="y2",R="x2",T.attr("dy",".32em").style("text-anchor",I<0?"end":"start"),k.attr("d","M"+I*i+","+w[0]+"H0V"+w[1]+"H"+I*i)),E.attr(R,I*r),M.attr(C,I*b),A.attr(_,0).attr(R,I*r),L.attr(S,0).attr(C,I*b),f.rangeBand){var P=f,O=P.rangeBand()/2;h=f=function(e){return P(e)+O}}else h.rangeBand?h=f:m.call(s,f,h);v.call(s,h,f),y.call(s,f,f)}))}return l.scale=function(e){return arguments.length?(t=e,l):t},l.orient=function(e){return arguments.length?(n=e in Ps?e+"":Is,l):n},l.ticks=function(){return arguments.length?(u=s(arguments),l):u},l.tickValues=function(e){return arguments.length?(c=e,l):c},l.tickFormat=function(t){return arguments.length?(e=t,l):e},l.tickSize=function(e){var t=arguments.length;return t?(r=+e,i=+arguments[t-1],l):r},l.innerTickSize=function(e){return arguments.length?(r=+e,l):r},l.outerTickSize=function(e){return arguments.length?(i=+e,l):i},l.tickPadding=function(e){return arguments.length?(o=+e,l):o},l.tickSubdivide=function(){return arguments.length&&l},l};var Is="bottom",Ps={top:1,right:1,bottom:1,left:1};function Ns(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"}))}function Os(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"}))}a.svg.brush=function(){var e,t,n=q(f,"brushstart","brush","brushend"),r=null,i=null,o=[0,0],s=[0,0],u=!0,c=!0,h=Ds[0];function f(e){e.each((function(){var e=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(h,N);n.exit().remove(),n.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return Fs[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",f.empty()?"none":null);var o,s=a.transition(e),u=a.transition(t);r&&(o=wo(r),u.attr("x",o[0]).attr("width",o[1]-o[0]),d(s)),i&&(o=wo(i),u.attr("y",o[0]).attr("height",o[1]-o[0]),g(s)),p(s)}))}function p(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+o[+/e$/.test(e)]+","+s[+/^s/.test(e)]+")"}))}function d(e){e.select(".extent").attr("x",o[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1]-o[0])}function g(e){e.select(".extent").attr("y",s[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function v(){var h,v,m=this,y=a.select(a.event.target),b=n.of(m,arguments),w=a.select(m),x=y.datum(),k=!/^(n|s)$/.test(x)&&r,S=!/^(e|w)$/.test(x)&&i,_=y.classed("extent"),C=_e(m),R=a.mouse(m),E=a.select(l(m)).on("keydown.brush",M).on("keyup.brush",L);if(a.event.changedTouches?E.on("touchmove.brush",I).on("touchend.brush",N):E.on("mousemove.brush",I).on("mouseup.brush",N),w.interrupt().selectAll("*").interrupt(),_)R[0]=o[0]-R[0],R[1]=s[0]-R[1];else if(x){var A=+/w$/.test(x),T=+/^n/.test(x);v=[o[1-A]-R[0],s[1-T]-R[1]],R[0]=o[A],R[1]=s[T]}else a.event.altKey&&(h=R.slice());function M(){32==a.event.keyCode&&(_||(h=null,R[0]-=o[1],R[1]-=s[1],_=2),H())}function L(){32==a.event.keyCode&&2==_&&(R[0]+=o[1],R[1]+=s[1],_=0,H())}function I(){var e=a.mouse(m),t=!1;v&&(e[0]+=v[0],e[1]+=v[1]),_||(a.event.altKey?(h||(h=[(o[0]+o[1])/2,(s[0]+s[1])/2]),R[0]=o[+(e[0]<h[0])],R[1]=s[+(e[1]<h[1])]):h=null),k&&P(e,r,0)&&(d(w),t=!0),S&&P(e,i,1)&&(g(w),t=!0),t&&(p(w),b({type:"brush",mode:_?"move":"resize"}))}function P(n,r,i){var a,l,f=wo(r),p=f[0],d=f[1],g=R[i],v=i?s:o,m=v[1]-v[0];if(_&&(p-=g,d-=m+g),a=(i?c:u)?Math.max(p,Math.min(d,n[i])):n[i],_?l=(a+=g)+m:(h&&(g=Math.max(p,Math.min(d,2*h[i]-a))),g<a?(l=a,a=g):l=g),v[0]!=a||v[1]!=l)return i?t=null:e=null,v[0]=a,v[1]=l,!0}function N(){I(),w.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null),a.select("body").style("cursor",null),E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),b({type:"brushend"})}w.style("pointer-events","none").selectAll(".resize").style("display",null),a.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),I()}return f.event=function(r){r.each((function(){var r=n.of(this,arguments),i={x:o,y:s,i:e,j:t},u=this.__chart__||i;this.__chart__=i,_s?a.select(this).transition().each("start.brush",(function(){e=u.i,t=u.j,o=u.x,s=u.y,r({type:"brushstart"})})).tween("brush:brush",(function(){var n=ia(o,i.x),a=ia(s,i.y);return e=t=null,function(e){o=i.x=n(e),s=i.y=a(e),r({type:"brush",mode:"resize"})}})).each("end.brush",(function(){e=i.i,t=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})})):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))}))},f.x=function(e){return arguments.length?(h=Ds[!(r=e)<<1|!i],f):r},f.y=function(e){return arguments.length?(h=Ds[!r<<1|!(i=e)],f):i},f.clamp=function(e){return arguments.length?(r&&i?(u=!!e[0],c=!!e[1]):r?u=!!e:i&&(c=!!e),f):r&&i?[u,c]:r?u:i?c:null},f.extent=function(n){var a,u,c,l,h;return arguments.length?(r&&(a=n[0],u=n[1],i&&(a=a[0],u=u[0]),e=[a,u],r.invert&&(a=r(a),u=r(u)),u<a&&(h=a,a=u,u=h),a==o[0]&&u==o[1]||(o=[a,u])),i&&(c=n[0],l=n[1],r&&(c=c[1],l=l[1]),t=[c,l],i.invert&&(c=i(c),l=i(l)),l<c&&(h=c,c=l,l=h),c==s[0]&&l==s[1]||(s=[c,l])),f):(r&&(e?(a=e[0],u=e[1]):(a=o[0],u=o[1],r.invert&&(a=r.invert(a),u=r.invert(u)),u<a&&(h=a,a=u,u=h))),i&&(t?(c=t[0],l=t[1]):(c=s[0],l=s[1],i.invert&&(c=i.invert(c),l=i.invert(l)),l<c&&(h=c,c=l,l=h))),r&&i?[[a,c],[u,l]]:r?[a,u]:i&&[c,l])},f.clear=function(){return f.empty()||(o=[0,0],s=[0,0],e=t=null),f},f.empty=function(){return!!r&&o[0]==o[1]||!!i&&s[0]==s[1]},a.rebind(f,n,"on")};var Fs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ds=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bs=Ft.format=fn.timeFormat,zs=Bs.utc,Us=zs("%Y-%m-%dT%H:%M:%S.%LZ");function Hs(e){return e.toISOString()}function js(e,t,n){function r(t){return e(t)}function i(e,n){var r=(e[1]-e[0])/n,i=a.bisect(Vs,r);return i==Vs.length?[t.year,Ao(e.map((function(e){return e/31536e6})),n)[2]]:i?t[r/Vs[i-1]<Vs[i]/r?i-1:i]:[$s,Ao(e,n)[2]]}return r.invert=function(t){return qs(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(qs)},r.nice=function(e,t){var n=r.domain(),a=bo(n),o=null==e?i(a,10):"number"==typeof e&&i(a,e);function s(n){return!isNaN(n)&&!e.range(n,qs(+n+1),t).length}return o&&(e=o[0],t=o[1]),r.domain(ko(n,t>1?{floor:function(t){for(;s(t=e.floor(t));)t=qs(t-1);return t},ceil:function(t){for(;s(t=e.ceil(t));)t=qs(+t+1);return t}}:e))},r.ticks=function(e,t){var n=bo(r.domain()),a=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],qs(+n[1]+1),t<1?1:t)},r.tickFormat=function(){return n},r.copy=function(){return js(e.copy(),t,n)},Ro(r,e)}function qs(e){return new Date(e)}Bs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Hs:Us,Hs.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Hs.toString=Us.toString,Ft.second=Ut((function(e){return new Dt(1e3*Math.floor(e/1e3))}),(function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))}),(function(e){return e.getSeconds()})),Ft.seconds=Ft.second.range,Ft.seconds.utc=Ft.second.utc.range,Ft.minute=Ut((function(e){return new Dt(6e4*Math.floor(e/6e4))}),(function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))}),(function(e){return e.getMinutes()})),Ft.minutes=Ft.minute.range,Ft.minutes.utc=Ft.minute.utc.range,Ft.hour=Ut((function(e){var t=e.getTimezoneOffset()/60;return new Dt(36e5*(Math.floor(e/36e5-t)+t))}),(function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))}),(function(e){return e.getHours()})),Ft.hours=Ft.hour.range,Ft.hours.utc=Ft.hour.utc.range,Ft.month=Ut((function(e){return(e=Ft.day(e)).setDate(1),e}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e){return e.getMonth()})),Ft.months=Ft.month.range,Ft.months.utc=Ft.month.utc.range;var Vs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Gs=[[Ft.second,1],[Ft.second,5],[Ft.second,15],[Ft.second,30],[Ft.minute,1],[Ft.minute,5],[Ft.minute,15],[Ft.minute,30],[Ft.hour,1],[Ft.hour,3],[Ft.hour,6],[Ft.hour,12],[Ft.day,1],[Ft.day,2],[Ft.week,1],[Ft.month,1],[Ft.month,3],[Ft.year,1]],Ws=Bs.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Kn]]),$s={range:function(e,t,n){return a.range(Math.ceil(e/n)*n,+t,n).map(qs)},floor:N,ceil:N};Gs.year=Ft.year,Ft.scale=function(){return js(a.scale.linear(),Gs,Ws)};var Ys=Gs.map((function(e){return[e[0].utc,e[1]]})),Xs=zs.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Kn]]);function Zs(e){return JSON.parse(e.responseText)}function Ks(e){var t=u.createRange();return t.selectNode(u.body),t.createContextualFragment(e.responseText)}Ys.year=Ft.year.utc,Ft.scale.utc=function(){return js(a.scale.linear(),Ys,Xs)},a.text=bt((function(e){return e.responseText})),a.json=function(e,t){return wt(e,"application/json",Zs,t)},a.html=function(e,t){return wt(e,"text/html",Ks,t)},a.xml=bt((function(e){return e.responseXML})),this.d3=a,void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)}()}])},e.exports=a()},function(e,t,n){(function(t,n,r){var i;i=function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function i(e,t){return e(t={exports:{}},t.exports),t.exports}var a=function(e){return e&&e.Math==Math&&e},o=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof e&&e)||function(){return this}()||Function("return this")(),s=function(e){try{return!!e()}catch(e){return!0}},u=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,h={f:l&&!c.call({1:2},1)?function(e){var t=l(this,e);return!!t&&t.enumerable}:c},f=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},p={}.toString,d=function(e){return p.call(e).slice(8,-1)},g="".split,v=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==d(e)?g.call(e,""):Object(e)}:Object,m=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},y=function(e){return v(m(e))},b=function(e){return"object"==typeof e?null!==e:"function"==typeof e},w=function(e,t){if(!b(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!b(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!b(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!b(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},x={}.hasOwnProperty,k=function(e,t){return x.call(e,t)},S=o.document,_=b(S)&&b(S.createElement),C=function(e){return _?S.createElement(e):{}},R=!u&&!s((function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a})),E=Object.getOwnPropertyDescriptor,A={f:u?E:function(e,t){if(e=y(e),t=w(t,!0),R)try{return E(e,t)}catch(e){}if(k(e,t))return f(!h.f.call(e,t),e[t])}},T=function(e){if(!b(e))throw TypeError(String(e)+" is not an object");return e},M=Object.defineProperty,L={f:u?M:function(e,t,n){if(T(e),t=w(t,!0),T(n),R)try{return M(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},I=u?function(e,t,n){return L.f(e,t,f(1,n))}:function(e,t,n){return e[t]=n,e},P=function(e,t){try{I(o,e,t)}catch(n){o[e]=t}return t},N=o["__core-js_shared__"]||P("__core-js_shared__",{}),O=Function.toString;"function"!=typeof N.inspectSource&&(N.inspectSource=function(e){return O.call(e)});var F,D,B,z=N.inspectSource,U=o.WeakMap,H="function"==typeof U&&/native code/.test(z(U)),j=i((function(e){(e.exports=function(e,t){return N[e]||(N[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})})),q=0,V=Math.random(),G=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++q+V).toString(36)},W=j("keys"),$=function(e){return W[e]||(W[e]=G(e))},Y={},X=o.WeakMap;if(H){var Z=N.state||(N.state=new X),K=Z.get,Q=Z.has,J=Z.set;F=function(e,t){return t.facade=e,J.call(Z,e,t),t},D=function(e){return K.call(Z,e)||{}},B=function(e){return Q.call(Z,e)}}else{var ee=$("state");Y[ee]=!0,F=function(e,t){return t.facade=e,I(e,ee,t),t},D=function(e){return k(e,ee)?e[ee]:{}},B=function(e){return k(e,ee)}}var te,ne,re={set:F,get:D,has:B,enforce:function(e){return B(e)?D(e):F(e,{})},getterFor:function(e){return function(t){var n;if(!b(t)||(n=D(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},ie=i((function(e){var t=re.get,n=re.enforce,r=String(String).split("String");(e.exports=function(e,t,i,a){var s,u=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof t||k(i,"name")||I(i,"name",t),(s=n(i)).source||(s.source=r.join("string"==typeof t?t:""))),e!==o?(u?!l&&e[t]&&(c=!0):delete e[t],c?e[t]=i:I(e,t,i)):c?e[t]=i:P(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||z(this)}))})),ae=o,oe=function(e){return"function"==typeof e?e:void 0},se=function(e,t){return arguments.length<2?oe(ae[e])||oe(o[e]):ae[e]&&ae[e][t]||o[e]&&o[e][t]},ue=Math.ceil,ce=Math.floor,le=function(e){return isNaN(e=+e)?0:(e>0?ce:ue)(e)},he=Math.min,fe=function(e){return e>0?he(le(e),9007199254740991):0},pe=Math.max,de=Math.min,ge=function(e,t){var n=le(e);return n<0?pe(n+t,0):de(n,t)},ve=function(e){return function(t,n,r){var i,a=y(t),o=fe(a.length),s=ge(r,o);if(e&&n!=n){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===n)return e||s||0;return!e&&-1}},me={includes:ve(!0),indexOf:ve(!1)},ye=me.indexOf,be=function(e,t){var n,r=y(e),i=0,a=[];for(n in r)!k(Y,n)&&k(r,n)&&a.push(n);for(;t.length>i;)k(r,n=t[i++])&&(~ye(a,n)||a.push(n));return a},we=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xe=we.concat("length","prototype"),ke={f:Object.getOwnPropertyNames||function(e){return be(e,xe)}},Se={f:Object.getOwnPropertySymbols},_e=se("Reflect","ownKeys")||function(e){var t=ke.f(T(e)),n=Se.f;return n?t.concat(n(e)):t},Ce=function(e,t){for(var n=_e(t),r=L.f,i=A.f,a=0;a<n.length;a++){var o=n[a];k(e,o)||r(e,o,i(t,o))}},Re=/#|\.prototype\./,Ee=function(e,t){var n=Te[Ae(e)];return n==Le||n!=Me&&("function"==typeof t?s(t):!!t)},Ae=Ee.normalize=function(e){return String(e).replace(Re,".").toLowerCase()},Te=Ee.data={},Me=Ee.NATIVE="N",Le=Ee.POLYFILL="P",Ie=Ee,Pe=A.f,Ne=function(e,t){var n,r,i,a,s,u=e.target,c=e.global,l=e.stat;if(n=c?o:l?o[u]||P(u,{}):(o[u]||{}).prototype)for(r in t){if(a=t[r],i=e.noTargetGet?(s=Pe(n,r))&&s.value:n[r],!Ie(c?r:u+(l?".":"#")+r,e.forced)&&void 0!==i){if(typeof a==typeof i)continue;Ce(a,i)}(e.sham||i&&i.sham)&&I(a,"sham",!0),ie(n,r,a,e)}},Oe=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Fe=function(e,t,n){if(Oe(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},De=function(e){return Object(m(e))},Be=Array.isArray||function(e){return"Array"==d(e)},ze=!!Object.getOwnPropertySymbols&&!s((function(){return!String(Symbol())})),Ue=ze&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,He=j("wks"),je=o.Symbol,qe=Ue?je:je&&je.withoutSetter||G,Ve=function(e){return k(He,e)||(ze&&k(je,e)?He[e]=je[e]:He[e]=qe("Symbol."+e)),He[e]},Ge=Ve("species"),We=function(e,t){var n;return Be(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Be(n.prototype)?b(n)&&null===(n=n[Ge])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},$e=[].push,Ye=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,a=6==e,o=7==e,s=5==e||a;return function(u,c,l,h){for(var f,p,d=De(u),g=v(d),m=Fe(c,l,3),y=fe(g.length),b=0,w=h||We,x=t?w(u,y):n||o?w(u,0):void 0;y>b;b++)if((s||b in g)&&(p=m(f=g[b],b,d),e))if(t)x[b]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return b;case 2:$e.call(x,f)}else switch(e){case 4:return!1;case 7:$e.call(x,f)}return a?-1:r||i?i:x}},Xe={forEach:Ye(0),map:Ye(1),filter:Ye(2),some:Ye(3),every:Ye(4),find:Ye(5),findIndex:Ye(6),filterOut:Ye(7)},Ze=se("navigator","userAgent")||"",Ke=o.process,Qe=Ke&&Ke.versions,Je=Qe&&Qe.v8;Je?ne=(te=Je.split("."))[0]+te[1]:Ze&&(!(te=Ze.match(/Edge\/(\d+)/))||te[1]>=74)&&(te=Ze.match(/Chrome\/(\d+)/))&&(ne=te[1]);var et=ne&&+ne,tt=Ve("species"),nt=function(e){return et>=51||!s((function(){var t=[];return(t.constructor={})[tt]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},rt=Object.defineProperty,it={},at=function(e){throw e},ot=function(e,t){if(k(it,e))return it[e];t||(t={});var n=[][e],r=!!k(t,"ACCESSORS")&&t.ACCESSORS,i=k(t,0)?t[0]:at,a=k(t,1)?t[1]:void 0;return it[e]=!!n&&!s((function(){if(r&&!u)return!0;var e={length:-1};r?rt(e,1,{enumerable:!0,get:at}):e[1]=1,n.call(e,i,a)}))},st=Xe.filter,ut=nt("filter"),ct=ot("filter");Ne({target:"Array",proto:!0,forced:!ut||!ct},{filter:function(e){return st(this,e,arguments.length>1?arguments[1]:void 0)}});var lt=function(e,t){var n=[][e];return!!n&&s((function(){n.call(null,t||function(){throw 1},1)}))},ht=Xe.forEach,ft=lt("forEach"),pt=ot("forEach"),dt=ft&&pt?[].forEach:function(e){return ht(this,e,arguments.length>1?arguments[1]:void 0)};Ne({target:"Array",proto:!0,forced:[].forEach!=dt},{forEach:dt});var gt=me.indexOf,vt=[].indexOf,mt=!!vt&&1/[1].indexOf(1,-0)<0,yt=lt("indexOf"),bt=ot("indexOf",{ACCESSORS:!0,1:0});Ne({target:"Array",proto:!0,forced:mt||!yt||!bt},{indexOf:function(e){return mt?vt.apply(this,arguments)||0:gt(this,e,arguments.length>1?arguments[1]:void 0)}});var wt=Math.min,xt=[].lastIndexOf,kt=!!xt&&1/[1].lastIndexOf(1,-0)<0,St=lt("lastIndexOf"),_t=ot("indexOf",{ACCESSORS:!0,1:0}),Ct=!kt&&St&&_t?xt:function(e){if(kt)return xt.apply(this,arguments)||0;var t=y(this),n=fe(t.length),r=n-1;for(arguments.length>1&&(r=wt(r,le(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1};Ne({target:"Array",proto:!0,forced:Ct!==[].lastIndexOf},{lastIndexOf:Ct});var Rt=function(){var e=T(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function Et(e,t){return RegExp(e,t)}var At={UNSUPPORTED_Y:s((function(){var e=Et("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:s((function(){var e=Et("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},Tt=RegExp.prototype.exec,Mt=String.prototype.replace,Lt=Tt,It=function(){var e=/a/,t=/b*/g;return Tt.call(e,"a"),Tt.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Pt=At.UNSUPPORTED_Y||At.BROKEN_CARET,Nt=void 0!==/()??/.exec("")[1];(It||Nt||Pt)&&(Lt=function(e){var t,n,r,i,a=this,o=Pt&&a.sticky,s=Rt.call(a),u=a.source,c=0,l=e;return o&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),l=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(u="(?: "+u+")",l=" "+l,c++),n=new RegExp("^(?:"+u+")",s)),Nt&&(n=new RegExp("^"+u+"$(?!\\s)",s)),It&&(t=a.lastIndex),r=Tt.call(o?n:a,l),o?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:It&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),Nt&&r&&r.length>1&&Mt.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var Ot=Lt;Ne({target:"RegExp",proto:!0,forced:/./.exec!==Ot},{exec:Ot});var Ft,Dt=Ve("match"),Bt=function(e){var t;return b(e)&&(void 0!==(t=e[Dt])?!!t:"RegExp"==d(e))},zt=function(e){if(Bt(e))throw TypeError("The method doesn't accept regular expressions");return e},Ut=Ve("match"),Ht=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Ut]=!1,"/./"[e](t)}catch(e){}}return!1},jt=A.f,qt="".endsWith,Vt=Math.min,Gt=Ht("endsWith"),Wt=!(Gt||(Ft=jt(String.prototype,"endsWith"),!Ft||Ft.writable));Ne({target:"String",proto:!0,forced:!Wt&&!Gt},{endsWith:function(e){var t=String(m(this));zt(e);var n=arguments.length>1?arguments[1]:void 0,r=fe(t.length),i=void 0===n?r:Vt(fe(n),r),a=String(e);return qt?qt.call(t,a,i):t.slice(i-a.length,i)===a}});var $t=Ve("species"),Yt=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Xt="$0"==="a".replace(/./,"$0"),Zt=Ve("replace"),Kt=!!/./[Zt]&&""===/./[Zt]("a","$0"),Qt=!s((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Jt=function(e,t,n,r){var i=Ve(e),a=!s((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),o=a&&!s((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[$t]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!a||!o||"replace"===e&&(!Yt||!Xt||Kt)||"split"===e&&!Qt){var u=/./[i],c=n(i,""[e],(function(e,t,n,r,i){return t.exec===Ot?a&&!i?{done:!0,value:u.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Xt,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Kt}),l=c[0],h=c[1];ie(String.prototype,e,l),ie(RegExp.prototype,i,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)})}r&&I(RegExp.prototype[i],"sham",!0)},en=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},tn=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==d(e))throw TypeError("RegExp#exec called on incompatible receiver");return Ot.call(e,t)};Jt("search",1,(function(e,t,n){return[function(t){var n=m(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=T(e),a=String(this),o=i.lastIndex;en(o,0)||(i.lastIndex=0);var s=tn(i,a);return en(i.lastIndex,o)||(i.lastIndex=o),null===s?-1:s.index}]}));var nn=Ve("species"),rn=function(e,t){var n,r=T(e).constructor;return void 0===r||null==(n=T(r)[nn])?t:Oe(n)},an=function(e){return function(t,n){var r,i,a=String(m(t)),o=le(n),s=a.length;return o<0||o>=s?e?"":void 0:(r=a.charCodeAt(o))<55296||r>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?e?a.charAt(o):r:e?a.slice(o,o+2):i-56320+(r-55296<<10)+65536}},on={codeAt:an(!1),charAt:an(!0)},sn=on.charAt,un=function(e,t,n){return t+(n?sn(e,t).length:1)},cn=[].push,ln=Math.min,hn=!s((function(){return!RegExp(4294967295,"y")}));Jt("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(m(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!Bt(e))return t.call(r,e,i);for(var a,o,s,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,h=new RegExp(e.source,c+"g");(a=Ot.call(h,r))&&!((o=h.lastIndex)>l&&(u.push(r.slice(l,a.index)),a.length>1&&a.index<r.length&&cn.apply(u,a.slice(1)),s=a[0].length,l=o,u.length>=i));)h.lastIndex===a.index&&h.lastIndex++;return l===r.length?!s&&h.test("")||u.push(""):u.push(r.slice(l)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=m(this),a=null==t?void 0:t[e];return void 0!==a?a.call(t,i,n):r.call(String(i),t,n)},function(e,i){var a=n(r,e,this,i,r!==t);if(a.done)return a.value;var o=T(e),s=String(this),u=rn(o,RegExp),c=o.unicode,l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(hn?"y":"g"),h=new u(hn?o:"^(?:"+o.source+")",l),f=void 0===i?4294967295:i>>>0;if(0===f)return[];if(0===s.length)return null===tn(h,s)?[s]:[];for(var p=0,d=0,g=[];d<s.length;){h.lastIndex=hn?d:0;var v,m=tn(h,hn?s:s.slice(d));if(null===m||(v=ln(fe(h.lastIndex+(hn?0:d)),s.length))===p)d=un(s,d,c);else{if(g.push(s.slice(p,d)),g.length===f)return g;for(var y=1;y<=m.length-1;y++)if(g.push(m[y]),g.length===f)return g;d=p=v}}return g.push(s.slice(p)),g}]}),!hn);var fn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var pn in fn){var dn=o[pn],gn=dn&&dn.prototype;if(gn&&gn.forEach!==dt)try{I(gn,"forEach",dt)}catch(e){gn.forEach=dt}}function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mn(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function yn(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){mn(a,r,i,o,s,"next",e)}function s(e){mn(a,r,i,o,s,"throw",e)}o(void 0)}))}}function bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xn(e,t,n){return t&&wn(e.prototype,t),n&&wn(e,n),e}function kn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Rn(e,t,n){return(Rn=Cn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_n(i,n.prototype),i}).apply(null,arguments)}function En(e){var t="function"==typeof Map?new Map:void 0;return(En=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Rn(e,arguments,Sn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_n(r,e)})(e)}function An(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?An(e):t}function Mn(e){var t=Cn();return function(){var n,r=Sn(e);if(t){var i=Sn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Tn(this,n)}}function Ln(e,t,n){return(Ln="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sn(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function In(e,t){return Nn(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||Fn(e,t)||Bn()}function Pn(e){return function(e){if(Array.isArray(e))return Dn(e)}(e)||On(e)||Fn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e){if(Array.isArray(e))return e}function On(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Fn(e,t){if(e){if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(e,t):void 0}}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Fn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}i((function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function h(){}function f(){}function p(){}var d={};d[i]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(_([])));v&&v!==t&&n.call(v,i)&&(d=v);var m=p.prototype=h.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var r;this._invoke=function(i,a){function o(){return new t((function(r,o){!function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=m.constructor=p,p.constructor=f,f.displayName=s(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(b.prototype),b.prototype[a]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(m),s(m,o,"Generator"),m[i]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));var Un=i((function(e){e.exports=function(e){return(e instanceof n?e:n.from(e.toString(),"binary")).toString("base64")}}));function Hn(e){return function(e,t){const n=document.createElement(e);return t&&(t.class&&n.classList.add(t.class),t.id&&(n.id=t.id),t.style&&function(e,t){for(let n of Object.keys(t))e.style[n]=t[n]}(n,t.style)),n}("div",e)}function jn(e){const t=getComputedStyle(e);"none"!==t.display&&(e._initialDisplay=t.display),e.style.display="none"}function qn(e){if("none"===getComputedStyle(e).display){const t=e._initialDisplay||"block";e.style.display=t}}function Vn(e,t){t=t||"currentColor";let n=Gn[e];n||(console.error(`No icon named: ${e}`),n=Gn.question);const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"viewBox","0 0 "+n[0]+" "+n[1]);const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"fill",t),i.setAttributeNS(null,"d",n[4]),r.appendChild(i),r}const Gn={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]};function Wn(e,t){var n=document.createElement("div");e.appendChild(n),n.appendChild(function(e,t){return Vn(e,t)}("times")),n.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t()}))}var $n={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(e){e=e||{},this.files=[],this.comment=e.comment,this.password}};$n.Zip.CompressionMethod={STORE:0,DEFLATE:8},$n.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},$n.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},$n.Zip.FileHeaderSignature=[80,75,1,2],$n.Zip.LocalFileHeaderSignature=[80,75,3,4],$n.Zip.CentralDirectorySignature=[80,75,5,6],$n.Zip.prototype.addFile=function(e,t){(t=t||{}).filename;var n,r=e.length,i=0;if(e instanceof Array&&(e=new Uint8Array(e)),"number"!=typeof t.compressionMethod&&(t.compressionMethod=$n.Zip.CompressionMethod.DEFLATE),t.compress)switch(t.compressionMethod){case $n.Zip.CompressionMethod.STORE:break;case $n.Zip.CompressionMethod.DEFLATE:i=$n.CRC32.calc(e),e=this.deflateWithOption(e,t),n=!0;break;default:throw new Error("unknown compression method:"+t.compressionMethod)}this.files.push({buffer:e,option:t,compressed:n,encrypted:!1,size:r,crc32:i})},$n.Zip.prototype.setPassword=function(e){this.password=e},$n.Zip.prototype.compress=function(){var e,t,n,r,i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w,x,k,S,_,C,R=this.files,E=0,A=0;for(k=0,S=R.length;k<S;++k){if(p=(e=R[k]).option.filename?e.option.filename.length:0,d=e.option.extraField?e.option.extraField.length:0,g=e.option.comment?e.option.comment.length:0,!e.compressed)switch(e.crc32=$n.CRC32.calc(e.buffer),e.option.compressionMethod){case $n.Zip.CompressionMethod.STORE:break;case $n.Zip.CompressionMethod.DEFLATE:e.buffer=this.deflateWithOption(e.buffer,e.option),e.compressed=!0;break;default:throw new Error("unknown compression method:"+e.option.compressionMethod)}if(void 0!==e.option.password||void 0!==this.password){for(x=this.createEncryptionKey(e.option.password||this.password),b=e.buffer,(w=new Uint8Array(b.length+12)).set(b,12),b=w,_=0;_<12;++_)b[_]=this.encode(x,11===k?255&e.crc32:256*Math.random()|0);for(C=b.length;_<C;++_)b[_]=this.encode(x,b[_]);e.buffer=b}E+=30+p+e.buffer.length,A+=46+p+g}for(a=22+(this.comment?this.comment.length:0),t=new Uint8Array(E+A+a),n=0,i=(r=E)+A,k=0,S=R.length;k<S;++k)p=(e=R[k]).option.filename?e.option.filename.length:0,d=0,g=e.option.comment?e.option.comment.length:0,o=n,t[n++]=$n.Zip.LocalFileHeaderSignature[0],t[n++]=$n.Zip.LocalFileHeaderSignature[1],t[n++]=$n.Zip.LocalFileHeaderSignature[2],t[n++]=$n.Zip.LocalFileHeaderSignature[3],t[r++]=$n.Zip.FileHeaderSignature[0],t[r++]=$n.Zip.FileHeaderSignature[1],t[r++]=$n.Zip.FileHeaderSignature[2],t[r++]=$n.Zip.FileHeaderSignature[3],t[r++]=20,t[r++]=e.option.os||$n.Zip.OperatingSystem.MSDOS,t[n++]=t[r++]=20,t[n++]=t[r++]=0,s=0,(e.option.password||this.password)&&(s|=$n.Zip.Flags.ENCRYPT),t[n++]=t[r++]=255&s,t[n++]=t[r++]=s>>8&255,u=e.option.compressionMethod,t[n++]=t[r++]=255&u,t[n++]=t[r++]=u>>8&255,c=e.option.date||new Date,t[n++]=t[r++]=(7&c.getMinutes())<<5|c.getSeconds()/2|0,t[n++]=t[r++]=c.getHours()<<3|c.getMinutes()>>3,t[n++]=t[r++]=(c.getMonth()+1&7)<<5|c.getDate(),t[n++]=t[r++]=(c.getFullYear()-1980&127)<<1|c.getMonth()+1>>3,l=e.crc32,t[n++]=t[r++]=255&l,t[n++]=t[r++]=l>>8&255,t[n++]=t[r++]=l>>16&255,t[n++]=t[r++]=l>>24&255,h=e.buffer.length,t[n++]=t[r++]=255&h,t[n++]=t[r++]=h>>8&255,t[n++]=t[r++]=h>>16&255,t[n++]=t[r++]=h>>24&255,f=e.size,t[n++]=t[r++]=255&f,t[n++]=t[r++]=f>>8&255,t[n++]=t[r++]=f>>16&255,t[n++]=t[r++]=f>>24&255,t[n++]=t[r++]=255&p,t[n++]=t[r++]=p>>8&255,t[n++]=t[r++]=255&d,t[n++]=t[r++]=d>>8&255,t[r++]=255&g,t[r++]=g>>8&255,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=255&o,t[r++]=o>>8&255,t[r++]=o>>16&255,t[r++]=o>>24&255,(v=e.option.filename)&&(t.set(v,n),t.set(v,r),n+=p,r+=p),(m=e.option.extraField)&&(t.set(m,n),t.set(m,r),n+=d,r+=d),(y=e.option.comment)&&(t.set(y,r),r+=g),t.set(e.buffer,n),n+=e.buffer.length;return t[i++]=$n.Zip.CentralDirectorySignature[0],t[i++]=$n.Zip.CentralDirectorySignature[1],t[i++]=$n.Zip.CentralDirectorySignature[2],t[i++]=$n.Zip.CentralDirectorySignature[3],t[i++]=0,t[i++]=0,t[i++]=0,t[i++]=0,t[i++]=255&S,t[i++]=S>>8&255,t[i++]=255&S,t[i++]=S>>8&255,t[i++]=255&A,t[i++]=A>>8&255,t[i++]=A>>16&255,t[i++]=A>>24&255,t[i++]=255&E,t[i++]=E>>8&255,t[i++]=E>>16&255,t[i++]=E>>24&255,g=this.comment?this.comment.length:0,t[i++]=255&g,t[i++]=g>>8&255,this.comment&&(t.set(this.comment,i),i+=g),t},$n.Zip.prototype.deflateWithOption=function(e,t){return new $n.RawDeflate(e,t.deflateOption).compress()},$n.Zip.prototype.getByte=function(e){var t=65535&e[2]|2;return t*(1^t)>>8&255},$n.Zip.prototype.encode=function(e,t){var n=this.getByte(e);return this.updateKeys(e,t),n^t},$n.Zip.prototype.updateKeys=function(e,t){e[0]=$n.CRC32.single(e[0],t),e[1]=1+(6681*(20173*(e[1]+(255&e[0]))>>>0)>>>0)>>>0,e[2]=$n.CRC32.single(e[2],e[1]>>>24)},$n.Zip.prototype.createEncryptionKey=function(e){var t,n,r=[305419896,591751049,878082192];for(r=new Uint32Array(r),t=0,n=e.length;t<n;++t)this.updateKeys(r,255&e[t]);return r},$n.Huffman.buildHuffmanTable=function(e){var t,n,r,i,a,o,s,u,c,l,h,f=e.length,p=0,d=Number.POSITIVE_INFINITY;for(u=0,c=f;u<c;++u)e[u]>p&&(p=e[u]),e[u]<d&&(d=e[u]);for(t=1<<p,n=new Uint32Array(t),r=1,i=0,a=2;r<=p;){for(u=0;u<f;++u)if(e[u]===r){for(o=0,s=i,l=0;l<r;++l)o=o<<1|1&s,s>>=1;for(h=r<<16|u,l=o;l<t;l+=a)n[l]=h;++i}++r,i<<=1,a<<=1}return[n,p,d]};var Yn=$n.Huffman.buildHuffmanTable;let Xn;function Zn(e,t){t.addEventListener("mousedown",Kn.bind(e))}function Kn(e){e.stopPropagation(),e.preventDefault(),function(e){if(!e.getClientRects().length)return{top:0,left:0};const t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;t.top,n.pageYOffset,t.left,n.pageXOffset}(this);const t=Qn.bind(this),n=Jn.bind(this),r=getComputedStyle(this),i=parseInt(r.top.replace("px","")),a=parseInt(r.left.replace("px",""));Xn={dragFunction:t,dragEndFunction:n,screenX:e.screenX,screenY:e.screenY,top:i,left:a},document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),document.addEventListener("mouseleave",n),document.addEventListener("mouseexit",n)}function Qn(e){if(!Xn)return;e.stopPropagation(),e.preventDefault();const t=e.screenX-Xn.screenX,n=e.screenY-Xn.screenY;this.style.left=`${Xn.left+t}px`,this.style.top=`${Xn.top+n}px`}function Jn(e){if(!Xn)return;e.stopPropagation(),e.preventDefault();const t=Xn.dragFunction,n=Xn.dragEndFunction;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n),document.removeEventListener("mouseleave",n),document.removeEventListener("mouseexit",n),Xn=void 0}$n.RawInflate=function(e,t){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output,this.op,this.bfinal=!1,this.bufferType=$n.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!t&&(t={})||(t.index&&(this.ip=t.index),t.bufferSize&&(this.bufferSize=t.bufferSize),t.bufferType&&(this.bufferType=t.bufferType),t.resize&&(this.resize=t.resize)),this.bufferType){case $n.RawInflate.BufferType.BLOCK:this.op=$n.RawInflate.MaxBackwardLength,this.output=new Uint8Array($n.RawInflate.MaxBackwardLength+this.bufferSize+$n.RawInflate.MaxCopyLength);break;case $n.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},$n.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},$n.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case $n.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case $n.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},$n.RawInflate.MaxBackwardLength=32768,$n.RawInflate.MaxCopyLength=258,$n.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$n.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),$n.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),$n.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),$n.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),$n.RawInflate.FixedLiteralLengthTable=function(){var e,t,n=new Uint8Array(288);for(e=0,t=n.length;e<t;++e)n[e]=e<=143?8:e<=255?9:e<=279?7:8;return Yn(n)}(),$n.RawInflate.FixedDistanceTable=function(){var e,t,n=new Uint8Array(30);for(e=0,t=n.length;e<t;++e)n[e]=5;return Yn(n)}(),$n.RawInflate.prototype.parseBlock=function(){var e=this.readBits(3);switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+e)}},$n.RawInflate.prototype.readBits=function(e){var t,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,a=this.ip;if(a+(e-r+7>>3)>=i.length)throw new Error("input buffer is broken");for(;r<e;)n|=i[a++]<<r,r+=8;return t=n&(1<<e)-1,n>>>=e,r-=e,this.bitsbuf=n,this.bitsbuflen=r,this.ip=a,t},$n.RawInflate.prototype.readCodeByTable=function(e){for(var t,n,r=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=a.length,u=e[0],c=e[1];i<c&&!(o>=s);)r|=a[o++]<<i,i+=8;if((n=(t=u[r&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=o,65535&t},$n.RawInflate.prototype.parseUncompressedBlock=function(){var e,t,n=this.input,r=this.ip,i=this.output,a=this.op,o=n.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,r+1>=o)throw new Error("invalid uncompressed block header: LEN");if(e=n[r++]|n[r++]<<8,r+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(e===~(n[r++]|n[r++]<<8))throw new Error("invalid uncompressed block header: length verify");if(r+e>n.length)throw new Error("input buffer is broken");switch(this.bufferType){case $n.RawInflate.BufferType.BLOCK:for(;a+e>i.length;)e-=t=s-a,i.set(n.subarray(r,r+t),a),a+=t,r+=t,this.op=a,i=this.expandBufferBlock(),a=this.op;break;case $n.RawInflate.BufferType.ADAPTIVE:for(;a+e>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(n.subarray(r,r+e),a),a+=e,r+=e,this.ip=r,this.op=a,this.output=i},$n.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case $n.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive($n.RawInflate.FixedLiteralLengthTable,$n.RawInflate.FixedDistanceTable);break;case $n.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock($n.RawInflate.FixedLiteralLengthTable,$n.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},$n.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var e,t,n,r,i,a,o,s,u,c=this.readBits(5)+257,l=this.readBits(5)+1,h=this.readBits(4)+4,f=new Uint8Array($n.RawInflate.Order.length);for(s=0;s<h;++s)f[$n.RawInflate.Order[s]]=this.readBits(3);for(e=Yn(f),r=new Uint8Array(c+l),s=0,u=c+l;s<u;)switch(i=this.readCodeByTable(e)){case 16:for(o=3+this.readBits(2);o--;)r[s++]=a;break;case 17:for(o=3+this.readBits(3);o--;)r[s++]=0;a=0;break;case 18:for(o=11+this.readBits(7);o--;)r[s++]=0;a=0;break;default:r[s++]=i,a=i}switch(t=Yn(r.subarray(0,c)),n=Yn(r.subarray(c)),this.bufferType){case $n.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(t,n);break;case $n.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(t,n);break;default:throw new Error("invalid inflate mode")}},$n.RawInflate.prototype.decodeHuffmanBlock=function(e,t){var n=this.output,r=this.op;this.currentLitlenTable=e;for(var i,a,o,s,u=n.length-$n.RawInflate.MaxCopyLength,c=$n.RawInflate.LengthCodeTable,l=$n.RawInflate.LengthExtraTable,h=$n.RawInflate.DistCodeTable,f=$n.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(e));)if(i<256)r>=u&&(this.op=r,n=this.expandBufferBlock(),r=this.op),n[r++]=i;else for(s=c[a=i-257],l[a]>0&&(s+=this.readBits(l[a])),o=h[i=this.readCodeByTable(t)],f[i]>0&&(o+=this.readBits(f[i])),r>=u&&(this.op=r,n=this.expandBufferBlock(),r=this.op);s--;)n[r]=n[r++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},$n.RawInflate.prototype.decodeHuffmanAdaptive=function(e,t){var n=this.output,r=this.op;this.currentLitlenTable=e;for(var i,a,o,s,u=n.length,c=$n.RawInflate.LengthCodeTable,l=$n.RawInflate.LengthExtraTable,h=$n.RawInflate.DistCodeTable,f=$n.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(e));)if(i<256)r>=u&&(u=(n=this.expandBufferAdaptive()).length),n[r++]=i;else for(s=c[a=i-257],l[a]>0&&(s+=this.readBits(l[a])),o=h[i=this.readCodeByTable(t)],f[i]>0&&(o+=this.readBits(f[i])),r+s>u&&(u=(n=this.expandBufferAdaptive()).length);s--;)n[r]=n[r++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},$n.RawInflate.prototype.expandBufferBlock=function(e){var t=new Uint8Array(this.op-$n.RawInflate.MaxBackwardLength),n=this.op-$n.RawInflate.MaxBackwardLength,r=this.output;return t.set(r.subarray($n.RawInflate.MaxBackwardLength,t.length)),this.blocks.push(t),this.totalpos+=t.length,r.set(r.subarray(n,n+$n.RawInflate.MaxBackwardLength)),this.op=$n.RawInflate.MaxBackwardLength,r},$n.RawInflate.prototype.expandBufferAdaptive=function(e){var t,n,r,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return e&&("number"==typeof e.fixRatio&&(i=e.fixRatio),"number"==typeof e.addRatio&&(i+=e.addRatio)),n=i<2?(r=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<o.length?o.length+r:o.length<<1:o.length*i,(t=new Uint8Array(n)).set(o),this.output=t,this.output},$n.RawInflate.prototype.concatBufferBlock=function(){var e,t,n,r,i,a=0,o=this.totalpos+(this.op-$n.RawInflate.MaxBackwardLength),s=this.output,u=this.blocks,c=new Uint8Array(o);if(0===u.length)return this.output.subarray($n.RawInflate.MaxBackwardLength,this.op);for(t=0,n=u.length;t<n;++t)for(r=0,i=(e=u[t]).length;r<i;++r)c[a++]=e[r];for(t=$n.RawInflate.MaxBackwardLength,n=this.op;t<n;++t)c[a++]=s[t];return this.blocks=[],this.buffer=c,this.buffer},$n.RawInflate.prototype.concatBufferDynamic=function(){var e,t=this.op;return this.resize?(e=new Uint8Array(t)).set(this.output.subarray(0,t)):e=this.output.subarray(0,t),this.buffer=e,this.buffer},Yn=$n.Huffman.buildHuffmanTable,$n.RawInflateStream=function(e,t,n){this.blocks=[],this.bufferSize=n||65e3,this.totalpos=0,this.ip=void 0===t?0:t,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=$n.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},$n.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},$n.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},$n.RawInflateStream.prototype.decompress=function(e,t){var n=!1;for(void 0!==e&&(this.input=e),void 0!==t&&(this.ip=t);!n;)switch(this.status){case $n.RawInflateStream.Status.INITIALIZED:case $n.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(n=!0);break;case $n.RawInflateStream.Status.BLOCK_HEADER_END:case $n.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case $n.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(n=!0);break;case $n.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(n=!0);break;case $n.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(n=!0)}break;case $n.RawInflateStream.Status.BLOCK_BODY_END:case $n.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case $n.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(n=!0);break;case $n.RawInflateStream.BlockType.FIXED:case $n.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(n=!0)}break;case $n.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?n=!0:this.status=$n.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},$n.RawInflateStream.MaxBackwardLength=32768,$n.RawInflateStream.MaxCopyLength=258,$n.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$n.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),$n.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),$n.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),$n.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),$n.RawInflateStream.FixedLiteralLengthTable=function(){var e,t,n=new Uint8Array(288);for(e=0,t=n.length;e<t;++e)n[e]=e<=143?8:e<=255?9:e<=279?7:8;return Yn(n)}(),$n.RawInflateStream.FixedDistanceTable=function(){var e,t,n=new Uint8Array(30);for(e=0,t=n.length;e<t;++e)n[e]=5;return Yn(n)}(),$n.RawInflateStream.prototype.readBlockHeader=function(){var e;if(this.status=$n.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(e=this.readBits(3))<0)return this.restore_(),-1;switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.currentBlockType=$n.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=$n.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=$n.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+e)}this.status=$n.RawInflateStream.Status.BLOCK_HEADER_END},$n.RawInflateStream.prototype.readBits=function(e){for(var t,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,a=this.ip;r<e;){if(i.length<=a)return-1;n|=(t=i[a++])<<r,r+=8}return t=n&(1<<e)-1,n>>>=e,r-=e,this.bitsbuf=n,this.bitsbuflen=r,this.ip=a,t},$n.RawInflateStream.prototype.readCodeByTable=function(e){for(var t,n,r=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=e[0],u=e[1];i<u;){if(a.length<=o)return-1;r|=a[o++]<<i,i+=8}if((n=(t=s[r&(1<<u)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=o,65535&t},$n.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var e,t=this.input,n=this.ip;if(this.status=$n.RawInflateStream.Status.BLOCK_BODY_START,n+4>=t.length)return-1;if((e=t[n++]|t[n++]<<8)==~(t[n++]|t[n++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=n,this.blockLength=e,this.status=$n.RawInflateStream.Status.BLOCK_BODY_END},$n.RawInflateStream.prototype.parseUncompressedBlock=function(){var e=this.input,t=this.ip,n=this.output,r=this.op,i=this.blockLength;for(this.status=$n.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(r===n.length&&(n=this.expandBuffer({fixRatio:2})),t>=e.length)return this.ip=t,this.op=r,this.blockLength=i+1,-1;n[r++]=e[t++]}return i<0&&(this.status=$n.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=t,this.op=r,0},$n.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=$n.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=$n.RawInflateStream.FixedLiteralLengthTable,this.distTable=$n.RawInflateStream.FixedDistanceTable,this.status=$n.RawInflateStream.Status.BLOCK_BODY_END,0},$n.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},$n.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},$n.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var e,t,n,r,i=new Uint8Array($n.RawInflateStream.Order.length);if(this.status=$n.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),e=this.readBits(5)+257,t=this.readBits(5)+1,n=this.readBits(4)+4,e<0||t<0||n<0)return this.restore_(),-1;try{(function(){var a,o,s,u,c,l,h=0;for(c=0;c<n;++c){if((a=this.readBits(3))<0)throw new Error("not enough input");i[$n.RawInflateStream.Order[c]]=a}for(r=Yn(i),u=new Uint8Array(e+t),c=0,l=e+t;c<l;){if((o=this.readCodeByTable(r))<0)throw new Error("not enough input");switch(o){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(s=3+a;s--;)u[c++]=h;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(s=3+a;s--;)u[c++]=0;h=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(s=11+a;s--;)u[c++]=0;h=0;break;default:u[c++]=o,h=o}}this.litlenTable=Yn(u.subarray(0,e)),this.distTable=Yn(u.subarray(e))}).call(this)}catch(e){return this.restore_(),-1}return this.status=$n.RawInflateStream.Status.BLOCK_BODY_END,0},$n.RawInflateStream.prototype.decodeHuffman=function(){var e,t,n,r,i,a=this.output,o=this.op,s=this.litlenTable,u=this.distTable,c=a.length;for(this.status=$n.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(e=this.readCodeByTable(s))<0)return this.op=o,this.restore_(),-1;if(256===e)break;if(e<256)o===c&&(c=(a=this.expandBuffer()).length),a[o++]=e;else{if(t=e-257,r=$n.RawInflateStream.LengthCodeTable[t],$n.RawInflateStream.LengthExtraTable[t]>0){if((i=this.readBits($n.RawInflateStream.LengthExtraTable[t]))<0)return this.op=o,this.restore_(),-1;r+=i}if((e=this.readCodeByTable(u))<0)return this.op=o,this.restore_(),-1;if(n=$n.RawInflateStream.DistCodeTable[e],$n.RawInflateStream.DistExtraTable[e]>0){if((i=this.readBits($n.RawInflateStream.DistExtraTable[e]))<0)return this.op=o,this.restore_(),-1;n+=i}for(o+r>=c&&(c=(a=this.expandBuffer()).length);r--;)a[o]=a[o++-n];if(this.ip===this.input.length)return this.op=o,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=o,this.status=$n.RawInflateStream.Status.DECODE_BLOCK_END},$n.RawInflateStream.prototype.expandBuffer=function(e){var t,n,r,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return e&&("number"==typeof e.fixRatio&&(i=e.fixRatio),"number"==typeof e.addRatio&&(i+=e.addRatio)),n=i<2?(r=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<o.length?o.length+r:o.length<<1:o.length*i,(t=new Uint8Array(n)).set(o),this.output=t,this.output},$n.RawInflateStream.prototype.concatBuffer=function(){var e,t,n=this.op;return e=this.resize?new Uint8Array(this.output.subarray(this.sp,n)):this.output.subarray(this.sp,n),this.sp=n,n>$n.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=$n.RawInflateStream.MaxBackwardLength,t=this.output,this.output=new Uint8Array(this.bufferSize+$n.RawInflateStream.MaxBackwardLength),this.output.set(t.subarray(n-$n.RawInflateStream.MaxBackwardLength,n))),e},$n.Inflate=function(e,t){var n,r;switch(this.input=e,this.ip=0,this.rawinflate,this.verify,!t&&(t={})||(t.index&&(this.ip=t.index),t.verify&&(this.verify=t.verify)),n=e[this.ip++],r=e[this.ip++],15&n){case $n.CompressionMethod.DEFLATE:this.method=$n.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.rawinflate=new $n.RawInflate(e,{index:this.ip,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})},$n.Inflate.BufferType=$n.RawInflate.BufferType,$n.Inflate.prototype.decompress=function(){var e,t=this.input;if(e=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(t[this.ip++]<<24|t[this.ip++]<<16|t[this.ip++]<<8|t[this.ip++])>>>0!==$n.Adler32(e))throw new Error("invalid adler-32 checksum");return e},$n.InflateStream=function(e){this.input=void 0===e?new Uint8Array:e,this.ip=0,this.rawinflate=new $n.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},$n.InflateStream.prototype.decompress=function(e){var t;if(void 0!==e){var n=new Uint8Array(this.input.length+e.length);n.set(this.input,0),n.set(e,this.input.length),this.input=n}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(t=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),t)},$n.InflateStream.prototype.readHeader=function(){var e=this.ip,t=this.input,n=t[e++],r=t[e++];if(void 0===n||void 0===r)return-1;switch(15&n){case $n.CompressionMethod.DEFLATE:this.method=$n.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.ip=e},$n.Gunzip=function(e,t){this.input=e,this.ip=0,this.member=[],this.decompressed=!1},$n.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},$n.Gunzip.prototype.decompress=function(){for(var e=this.input.length;this.ip<e;)this.decodeMember();return this.decompressed=!0,this.concatMember()},$n.Gunzip.prototype.decodeMember=function(){var e,t,n,r,i,a,o,s,u,c=new $n.GunzipMember,l=this.input,h=this.ip;if(c.id1=l[h++],c.id2=l[h++],31!==c.id1||139!==c.id2)throw new Error("invalid file signature:"+c.id1+","+c.id2);switch(c.cm=l[h++],c.cm){case 8:break;default:throw new Error("unknown compression method: "+c.cm)}if(c.flg=l[h++],s=l[h++]|l[h++]<<8|l[h++]<<16|l[h++]<<24,c.mtime=new Date(1e3*s),c.xfl=l[h++],c.os=l[h++],(c.flg&$n.Gzip.FlagsMask.FEXTRA)>0&&(c.xlen=l[h++]|l[h++]<<8,h=this.decodeSubField(h,c.xlen)),(c.flg&$n.Gzip.FlagsMask.FNAME)>0){for(o=[],a=0;(i=l[h++])>0;)o[a++]=String.fromCharCode(i);c.name=o.join("")}if((c.flg&$n.Gzip.FlagsMask.FCOMMENT)>0){for(o=[],a=0;(i=l[h++])>0;)o[a++]=String.fromCharCode(i);c.comment=o.join("")}if((c.flg&$n.Gzip.FlagsMask.FHCRC)>0&&(c.crc16=65535&$n.CRC32.calc(l,0,h),c.crc16!==(l[h++]|l[h++]<<8)))throw new Error("invalid header crc16");if(e=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24,l.length-h-4-4<512*e&&(r=e),t=new $n.RawInflate(l,{index:h,bufferSize:r}),c.data=n=t.decompress(),h=t.ip,c.crc32=u=(l[h++]|l[h++]<<8|l[h++]<<16|l[h++]<<24)>>>0,$n.CRC32.calc(n)!==u)throw new Error("invalid CRC-32 checksum: 0x"+$n.CRC32.calc(n).toString(16)+" / 0x"+u.toString(16));if(c.isize=e=(l[h++]|l[h++]<<8|l[h++]<<16|l[h++]<<24)>>>0,(4294967295&n.length)!==e)throw new Error("invalid input size: "+(4294967295&n.length)+" / "+e);this.member.push(c),this.ip=h},$n.Gunzip.prototype.decodeSubField=function(e,t){return e+t},$n.Gunzip.prototype.concatMember=function(){var e,t,n,r=this.member,i=0,a=0;for(e=0,t=r.length;e<t;++e)a+=r[e].data.length;for(n=new Uint8Array(a),e=0;e<t;++e)n.set(r[e].data,i),i+=r[e].data.length;return n},$n.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},$n.GunzipMember.prototype.getName=function(){return this.name},$n.GunzipMember.prototype.getData=function(){return this.data},$n.GunzipMember.prototype.getMtime=function(){return this.mtime},$n.Gzip=function(e,t){this.input=e,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,t&&(t.flags&&(this.flags=t.flags),"string"==typeof t.filename&&(this.filename=t.filename),"string"==typeof t.comment&&(this.comment=t.comment),t.deflateOptions&&(this.deflateOptions=t.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},$n.Gzip.DefaultBufferSize=32768,$n.Gzip.prototype.compress=function(){var e,t,n,r,i,a,o,s,u=new Uint8Array($n.Gzip.DefaultBufferSize),c=0,l=this.input,h=this.ip,f=this.filename,p=this.comment;if(u[c++]=31,u[c++]=139,u[c++]=8,e=0,this.flags.fname&&(e|=$n.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(e|=$n.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(e|=$n.Gzip.FlagsMask.FHCRC),u[c++]=e,t=(Date.now?Date.now():+new Date)/1e3|0,u[c++]=255&t,u[c++]=t>>>8&255,u[c++]=t>>>16&255,u[c++]=t>>>24&255,u[c++]=0,u[c++]=$n.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(o=0,s=f.length;o<s;++o)(a=f.charCodeAt(o))>255&&(u[c++]=a>>>8&255),u[c++]=255&a;u[c++]=0}if(this.flags.comment){for(o=0,s=p.length;o<s;++o)(a=p.charCodeAt(o))>255&&(u[c++]=a>>>8&255),u[c++]=255&a;u[c++]=0}return this.flags.fhcrc&&(n=65535&$n.CRC32.calc(u,0,c),u[c++]=255&n,u[c++]=n>>>8&255),this.deflateOptions.outputBuffer=u,this.deflateOptions.outputIndex=c,u=(i=new $n.RawDeflate(l,this.deflateOptions)).compress(),(c=i.op)+8>u.buffer.byteLength?(this.output=new Uint8Array(c+8),this.output.set(new Uint8Array(u.buffer)),u=this.output):u=new Uint8Array(u.buffer),r=$n.CRC32.calc(l),u[c++]=255&r,u[c++]=r>>>8&255,u[c++]=r>>>16&255,u[c++]=r>>>24&255,s=l.length,u[c++]=255&s,u[c++]=s>>>8&255,u[c++]=s>>>16&255,u[c++]=s>>>24&255,this.ip=h,c<u.length&&(this.output=u=u.subarray(0,c)),u},$n.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},$n.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},$n.Heap=function(e){this.buffer=new Uint16Array(2*e),this.length=0},$n.Heap.prototype.getParent=function(e){return 2*((e-2)/4|0)},$n.Heap.prototype.getChild=function(e){return 2*e+2},$n.Heap.prototype.push=function(e,t){var n,r,i,a=this.buffer;for(n=this.length,a[this.length++]=t,a[this.length++]=e;n>0&&(r=this.getParent(n),a[n]>a[r]);)i=a[n],a[n]=a[r],a[r]=i,i=a[n+1],a[n+1]=a[r+1],a[r+1]=i,n=r;return this.length},$n.Heap.prototype.pop=function(){var e,t,n,r,i,a=this.buffer;for(t=a[0],e=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],i=0;!((r=this.getChild(i))>=this.length)&&(r+2<this.length&&a[r+2]>a[r]&&(r+=2),a[r]>a[i]);)n=a[i],a[i]=a[r],a[r]=n,n=a[i+1],a[i+1]=a[r+1],a[r+1]=n,i=r;return{index:e,value:t,length:this.length}},$n.RawDeflate=function(e,t){this.compressionType=$n.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=e instanceof Array?new Uint8Array(e):e,this.output,this.op=0,t&&(t.lazy&&(this.lazy=t.lazy),"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t.outputBuffer&&(this.output=t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.op=t.outputIndex)),this.output||(this.output=new Uint8Array(32768))},$n.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},$n.RawDeflate.Lz77MinLength=3,$n.RawDeflate.Lz77MaxLength=258,$n.RawDeflate.WindowSize=32768,$n.RawDeflate.MaxCodeLength=16,$n.RawDeflate.HUFMAX=286,$n.RawDeflate.FixedHuffmanTable=function(){var e,t=[];for(e=0;e<288;e++)switch(!0){case e<=143:t.push([e+48,8]);break;case e<=255:t.push([e-144+400,9]);break;case e<=279:t.push([e-256+0,7]);break;case e<=287:t.push([e-280+192,8]);break;default:throw"invalid literal: "+e}return t}(),$n.RawDeflate.prototype.compress=function(){var e,t,n,r=this.input;switch(this.compressionType){case $n.RawDeflate.CompressionType.NONE:for(t=0,n=r.length;t<n;)t+=(e=r.subarray(t,t+65535)).length,this.makeNocompressBlock(e,t===n);break;case $n.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(r,!0),this.op=this.output.length;break;case $n.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(r,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},$n.RawDeflate.prototype.makeNocompressBlock=function(e,t){var n,r,i,a,o=this.output,s=this.op;for(o=new Uint8Array(this.output.buffer);o.length<=s+e.length+5;)o=new Uint8Array(o.length<<1);return o.set(this.output),n=t?1:0,r=$n.RawDeflate.CompressionType.NONE,o[s++]=n|r<<1,a=65536+~(i=e.length)&65535,o[s++]=255&i,o[s++]=i>>>8&255,o[s++]=255&a,o[s++]=a>>>8&255,o.set(e,s),s+=e.length,o=o.subarray(0,s),this.op=s,this.output=o,o},$n.RawDeflate.prototype.makeFixedHuffmanBlock=function(e,t){var n,r,i,a=new $n.BitStream(new Uint8Array(this.output.buffer),this.op);return n=t?1:0,r=$n.RawDeflate.CompressionType.FIXED,a.writeBits(n,1,!0),a.writeBits(r,2,!0),i=this.lz77(e),this.fixedHuffman(i,a),a.finish()},$n.RawDeflate.prototype.makeDynamicHuffmanBlock=function(e,t){var n,r,i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b=new $n.BitStream(new Uint8Array(this.output.buffer),this.op),w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(19);for(n=t?1:0,r=$n.RawDeflate.CompressionType.DYNAMIC,b.writeBits(n,1,!0),b.writeBits(r,2,!0),i=this.lz77(e),u=this.getLengths_(this.freqsLitLen,15),c=this.getCodesFromLengths_(u),l=this.getLengths_(this.freqsDist,7),h=this.getCodesFromLengths_(l),a=286;a>257&&0===u[a-1];a--);for(o=30;o>1&&0===l[o-1];o--);for(f=this.getTreeSymbols_(a,u,o,l),p=this.getLengths_(f.freqs,7),m=0;m<19;m++)x[m]=p[w[m]];for(s=19;s>4&&0===x[s-1];s--);for(d=this.getCodesFromLengths_(p),b.writeBits(a-257,5,!0),b.writeBits(o-1,5,!0),b.writeBits(s-4,4,!0),m=0;m<s;m++)b.writeBits(x[m],3,!0);for(m=0,y=f.codes.length;m<y;m++)if(g=f.codes[m],b.writeBits(d[g],p[g],!0),g>=16){switch(m++,g){case 16:v=2;break;case 17:v=3;break;case 18:v=7;break;default:throw"invalid code: "+g}b.writeBits(f.codes[m],v,!0)}return this.dynamicHuffman(i,[c,u],[h,l],b),b.finish()},$n.RawDeflate.prototype.dynamicHuffman=function(e,t,n,r){var i,a,o,s,u,c,l,h;for(u=t[0],c=t[1],l=n[0],h=n[1],i=0,a=e.length;i<a;++i)if(o=e[i],r.writeBits(u[o],c[o],!0),o>256)r.writeBits(e[++i],e[++i],!0),s=e[++i],r.writeBits(l[s],h[s],!0),r.writeBits(e[++i],e[++i],!0);else if(256===o)break;return r},$n.RawDeflate.prototype.fixedHuffman=function(e,t){var n,r,i;for(n=0,r=e.length;n<r;n++)if(i=e[n],$n.BitStream.prototype.writeBits.apply(t,$n.RawDeflate.FixedHuffmanTable[i]),i>256)t.writeBits(e[++n],e[++n],!0),t.writeBits(e[++n],5),t.writeBits(e[++n],e[++n],!0);else if(256===i)break;return t},$n.RawDeflate.Lz77Match=function(e,t){this.length=e,this.backwardDistance=t},$n.RawDeflate.Lz77Match.LengthCodeTable=function(e){return new Uint32Array(e)}(function(){var e,t,n=[];for(e=3;e<=258;e++)t=r(e),n[e]=t[2]<<24|t[1]<<16|t[0];function r(e){switch(!0){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case e<=12:return[265,e-11,1];case e<=14:return[266,e-13,1];case e<=16:return[267,e-15,1];case e<=18:return[268,e-17,1];case e<=22:return[269,e-19,2];case e<=26:return[270,e-23,2];case e<=30:return[271,e-27,2];case e<=34:return[272,e-31,2];case e<=42:return[273,e-35,3];case e<=50:return[274,e-43,3];case e<=58:return[275,e-51,3];case e<=66:return[276,e-59,3];case e<=82:return[277,e-67,4];case e<=98:return[278,e-83,4];case e<=114:return[279,e-99,4];case e<=130:return[280,e-115,4];case e<=162:return[281,e-131,5];case e<=194:return[282,e-163,5];case e<=226:return[283,e-195,5];case e<=257:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}return n}()),$n.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(e){var t;switch(!0){case 1===e:t=[0,e-1,0];break;case 2===e:t=[1,e-2,0];break;case 3===e:t=[2,e-3,0];break;case 4===e:t=[3,e-4,0];break;case e<=6:t=[4,e-5,1];break;case e<=8:t=[5,e-7,1];break;case e<=12:t=[6,e-9,2];break;case e<=16:t=[7,e-13,2];break;case e<=24:t=[8,e-17,3];break;case e<=32:t=[9,e-25,3];break;case e<=48:t=[10,e-33,4];break;case e<=64:t=[11,e-49,4];break;case e<=96:t=[12,e-65,5];break;case e<=128:t=[13,e-97,5];break;case e<=192:t=[14,e-129,6];break;case e<=256:t=[15,e-193,6];break;case e<=384:t=[16,e-257,7];break;case e<=512:t=[17,e-385,7];break;case e<=768:t=[18,e-513,8];break;case e<=1024:t=[19,e-769,8];break;case e<=1536:t=[20,e-1025,9];break;case e<=2048:t=[21,e-1537,9];break;case e<=3072:t=[22,e-2049,10];break;case e<=4096:t=[23,e-3073,10];break;case e<=6144:t=[24,e-4097,11];break;case e<=8192:t=[25,e-6145,11];break;case e<=12288:t=[26,e-8193,12];break;case e<=16384:t=[27,e-12289,12];break;case e<=24576:t=[28,e-16385,13];break;case e<=32768:t=[29,e-24577,13];break;default:throw"invalid distance"}return t},$n.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var e,t=this.length,n=this.backwardDistance,r=[],i=0;return e=$n.RawDeflate.Lz77Match.LengthCodeTable[t],r[i++]=65535&e,r[i++]=e>>16&255,r[i++]=e>>24,e=this.getDistanceCode_(n),r[i++]=e[0],r[i++]=e[1],r[i++]=e[2],r},$n.RawDeflate.prototype.lz77=function(e){var t,n,r,i,a,o,s,u,c,l={},h=$n.RawDeflate.WindowSize,f=new Uint16Array(2*e.length),p=0,d=0,g=new Uint32Array(286),v=new Uint32Array(30),m=this.lazy;function y(e,t){var n,r,i=e.toLz77Array();for(n=0,r=i.length;n<r;++n)f[p++]=i[n];g[i[0]]++,v[i[3]]++,d=e.length+t-1,u=null}for(g[256]=1,t=0,n=e.length;t<n;++t){for(a=0,r=0,i=$n.RawDeflate.Lz77MinLength;r<i&&t+r!==n;++r)a=a<<8|e[t+r];if(void 0===l[a]&&(l[a]=[]),o=l[a],d-- >0)o.push(t);else{for(;o.length>0&&t-o[0]>h;)o.shift();if(t+$n.RawDeflate.Lz77MinLength>=n){for(u&&y(u,-1),r=0,i=n-t;r<i;++r)c=e[t+r],f[p++]=c,++g[c];break}o.length>0?(s=this.searchLongestMatch_(e,t,o),u?u.length<s.length?(c=e[t-1],f[p++]=c,++g[c],y(s,0)):y(u,-1):s.length<m?u=s:y(s,0)):u?y(u,-1):(c=e[t],f[p++]=c,++g[c]),o.push(t)}}return f[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=v,f.subarray(0,p)},$n.RawDeflate.prototype.searchLongestMatch_=function(e,t,n){var r,i,a,o,s,u,c=0,l=e.length;e:for(o=0,u=n.length;o<u;o++){if(r=n[u-o-1],a=$n.RawDeflate.Lz77MinLength,c>$n.RawDeflate.Lz77MinLength){for(s=c;s>$n.RawDeflate.Lz77MinLength;s--)if(e[r+s-1]!==e[t+s-1])continue e;a=c}for(;a<$n.RawDeflate.Lz77MaxLength&&t+a<l&&e[r+a]===e[t+a];)++a;if(a>c&&(i=r,c=a),a===$n.RawDeflate.Lz77MaxLength)break}return new $n.RawDeflate.Lz77Match(c,t-i)},$n.RawDeflate.prototype.getTreeSymbols_=function(e,t,n,r){var i,a,o,s,u,c,l=new Uint32Array(e+n),h=new Uint32Array(316),f=new Uint8Array(19);for(a=0,i=0;i<e;i++)l[a++]=t[i];for(i=0;i<n;i++)l[a++]=r[i];for(u=0,i=0,s=l.length;i<s;i+=a){for(a=1;i+a<s&&l[i+a]===l[i];++a);if(o=a,0===l[i])if(o<3)for(;o-- >0;)h[u++]=0,f[0]++;else for(;o>0;)(c=o<138?o:138)>o-3&&c<o&&(c=o-3),c<=10?(h[u++]=17,h[u++]=c-3,f[17]++):(h[u++]=18,h[u++]=c-11,f[18]++),o-=c;else if(h[u++]=l[i],f[l[i]]++,--o<3)for(;o-- >0;)h[u++]=l[i],f[l[i]]++;else for(;o>0;)(c=o<6?o:6)>o-3&&c<o&&(c=o-3),h[u++]=16,h[u++]=c-3,f[16]++,o-=c}return{codes:h.subarray(0,u),freqs:f}},$n.RawDeflate.prototype.getLengths_=function(e,t){var n,r,i,a,o,s=e.length,u=new $n.Heap(2*$n.RawDeflate.HUFMAX),c=new Uint8Array(s);for(a=0;a<s;++a)e[a]>0&&u.push(a,e[a]);if(n=new Array(u.length/2),r=new Uint32Array(u.length/2),1===n.length)return c[u.pop().index]=1,c;for(a=0,o=u.length/2;a<o;++a)n[a]=u.pop(),r[a]=n[a].value;for(i=this.reversePackageMerge_(r,r.length,t),a=0,o=n.length;a<o;++a)c[n[a].index]=i[a];return c},$n.RawDeflate.prototype.reversePackageMerge_=function(e,t,n){var r,i,a,o,s,u=new Uint16Array(n),c=new Uint8Array(n),l=new Uint8Array(t),h=new Array(n),f=new Array(n),p=new Array(n),d=(1<<n)-t,g=1<<n-1;function v(e){var n=f[e][p[e]];n===t?(v(e+1),v(e+1)):--l[n],++p[e]}for(u[n-1]=t,i=0;i<n;++i)d<g?c[i]=0:(c[i]=1,d-=g),d<<=1,u[n-2-i]=(u[n-1-i]/2|0)+t;for(u[0]=c[0],h[0]=new Array(u[0]),f[0]=new Array(u[0]),i=1;i<n;++i)u[i]>2*u[i-1]+c[i]&&(u[i]=2*u[i-1]+c[i]),h[i]=new Array(u[i]),f[i]=new Array(u[i]);for(r=0;r<t;++r)l[r]=n;for(a=0;a<u[n-1];++a)h[n-1][a]=e[a],f[n-1][a]=a;for(r=0;r<n;++r)p[r]=0;for(1===c[n-1]&&(--l[0],++p[n-1]),i=n-2;i>=0;--i){for(r=0,o=0,s=p[i+1],a=0;a<u[i];a++)(o=h[i+1][s]+h[i+1][s+1])>e[r]?(h[i][a]=o,f[i][a]=t,s+=2):(h[i][a]=e[r],f[i][a]=r,++r);p[i]=0,1===c[i]&&v(i)}return l},$n.RawDeflate.prototype.getCodesFromLengths_=function(e){var t,n,r,i,a=new Uint16Array(e.length),o=[],s=[],u=0;for(t=0,n=e.length;t<n;t++)o[e[t]]=1+(0|o[e[t]]);for(t=1,n=$n.RawDeflate.MaxCodeLength;t<=n;t++)s[t]=u,u+=0|o[t],u<<=1;for(t=0,n=e.length;t<n;t++)for(u=s[e[t]],s[e[t]]+=1,a[t]=0,r=0,i=e[t];r<i;r++)a[t]=a[t]<<1|1&u,u>>>=1;return a},$n.Unzip=function(e,t){t=t||{},this.input=e instanceof Array?new Uint8Array(e):e,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=t.verify||!1,this.password=t.password},$n.Unzip.CompressionMethod=$n.Zip.CompressionMethod,$n.Unzip.FileHeaderSignature=$n.Zip.FileHeaderSignature,$n.Unzip.LocalFileHeaderSignature=$n.Zip.LocalFileHeaderSignature,$n.Unzip.CentralDirectorySignature=$n.Zip.CentralDirectorySignature,$n.Unzip.FileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},$n.Unzip.FileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==$n.Unzip.FileHeaderSignature[0]||e[t++]!==$n.Unzip.FileHeaderSignature[1]||e[t++]!==$n.Unzip.FileHeaderSignature[2]||e[t++]!==$n.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=e[t++],this.os=e[t++],this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.fileCommentLength=e[t++]|e[t++]<<8,this.diskNumberStart=e[t++]|e[t++]<<8,this.internalFileAttributes=e[t++]|e[t++]<<8,this.externalFileAttributes=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,this.relativeOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.comment=e.subarray(t,t+this.fileCommentLength),this.length=t-this.offset},$n.Unzip.LocalFileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},$n.Unzip.LocalFileHeader.Flags=$n.Zip.Flags,$n.Unzip.LocalFileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==$n.Unzip.LocalFileHeaderSignature[0]||e[t++]!==$n.Unzip.LocalFileHeaderSignature[1]||e[t++]!==$n.Unzip.LocalFileHeaderSignature[2]||e[t++]!==$n.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.length=t-this.offset},$n.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var e,t=this.input;for(e=t.length-12;e>0;--e)if(t[e]===$n.Unzip.CentralDirectorySignature[0]&&t[e+1]===$n.Unzip.CentralDirectorySignature[1]&&t[e+2]===$n.Unzip.CentralDirectorySignature[2]&&t[e+3]===$n.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=e);throw new Error("End of Central Directory Record not found")},$n.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var e,t=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),e=this.eocdrOffset,t[e++]!==$n.Unzip.CentralDirectorySignature[0]||t[e++]!==$n.Unzip.CentralDirectorySignature[1]||t[e++]!==$n.Unzip.CentralDirectorySignature[2]||t[e++]!==$n.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=t[e++]|t[e++]<<8,this.startDisk=t[e++]|t[e++]<<8,this.totalEntriesThisDisk=t[e++]|t[e++]<<8,this.totalEntries=t[e++]|t[e++]<<8,this.centralDirectorySize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.centralDirectoryOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.commentLength=t[e++]|t[e++]<<8,this.comment=t.subarray(e,e+this.commentLength)},$n.Unzip.prototype.parseFileHeader=function(){var e,t,n,r,i=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),e=this.centralDirectoryOffset,n=0,r=this.totalEntries;n<r;++n)(t=new $n.Unzip.FileHeader(this.input,e)).parse(),e+=t.length,i[n]=t,a[t.filename]=n;if(this.centralDirectorySize<e-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=a}},$n.Unzip.prototype.getFileData=function(e,t){t=t||{};var n,r,i,a,o,s,u,c,l=this.input,h=this.fileHeaderList;if(h||this.parseFileHeader(),void 0===h[e])throw new Error("wrong index");if(r=h[e].relativeOffset,(n=new $n.Unzip.LocalFileHeader(this.input,r)).parse(),r+=n.length,i=n.compressedSize,0!=(n.flags&$n.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!t.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(t.password||this.password),u=r,c=r+12;u<c;++u)this.decode(s,l[u]);for(u=r+=12,c=r+(i-=12);u<c;++u)l[u]=this.decode(s,l[u])}switch(n.compression){case $n.Unzip.CompressionMethod.STORE:a=this.input.subarray(r,r+i);break;case $n.Unzip.CompressionMethod.DEFLATE:a=new $n.RawInflate(this.input,{index:r,bufferSize:n.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(o=$n.CRC32.calc(a),n.crc32!==o))throw new Error("wrong crc: file=0x"+n.crc32.toString(16)+", data=0x"+o.toString(16));return a},$n.Unzip.prototype.getFilenames=function(){var e,t,n,r=[];for(this.fileHeaderList||this.parseFileHeader(),e=0,t=(n=this.fileHeaderList).length;e<t;++e)r[e]=n[e].filename;return r},$n.Unzip.prototype.decompress=function(e,t){var n;if(this.filenameToIndex||this.parseFileHeader(),void 0===(n=this.filenameToIndex[e]))throw new Error(e+" not found");return this.getFileData(n,t)},$n.Unzip.prototype.setPassword=function(e){this.password=e},$n.Unzip.prototype.decode=function(e,t){return t^=this.getByte(e),this.updateKeys(e,t),t},$n.Unzip.prototype.updateKeys=$n.Zip.prototype.updateKeys,$n.Unzip.prototype.createDecryptionKey=$n.Zip.prototype.createEncryptionKey,$n.Unzip.prototype.getByte=$n.Zip.prototype.getByte,$n.Util.stringToByteArray=function(e){var t,n,r=e.split("");for(t=0,n=r.length;t<n;t++)r[t]=(255&r[t].charCodeAt(0))>>>0;return r},$n.Adler32=function(e){return"string"==typeof e&&(e=$n.Util.stringToByteArray(e)),$n.Adler32.update(1,e)},$n.Adler32.update=function(e,t){for(var n,r=65535&e,i=e>>>16&65535,a=t.length,o=0;a>0;){a-=n=a>$n.Adler32.OptimizationParameter?$n.Adler32.OptimizationParameter:a;do{i+=r+=t[o++]}while(--n);r%=65521,i%=65521}return(i<<16|r)>>>0},$n.Adler32.OptimizationParameter=1024,$n.BitStream=function(e,t){if(this.index="number"==typeof t?t:0,this.bitindex=0,this.buffer=e instanceof Uint8Array?e:new Uint8Array($n.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},$n.BitStream.DefaultBlockSize=32768,$n.BitStream.prototype.expandBuffer=function(){var e=this.buffer,t=e.length,n=new Uint8Array(t<<1);return n.set(e),this.buffer=n},$n.BitStream.prototype.writeBits=function(e,t,n){var r,i=this.buffer,a=this.index,o=this.bitindex,s=i[a];if(n&&t>1&&(e=t>8?function(e){return $n.BitStream.ReverseTable[255&e]<<24|$n.BitStream.ReverseTable[e>>>8&255]<<16|$n.BitStream.ReverseTable[e>>>16&255]<<8|$n.BitStream.ReverseTable[e>>>24&255]}(e)>>32-t:$n.BitStream.ReverseTable[e]>>8-t),t+o<8)s=s<<t|e,o+=t;else for(r=0;r<t;++r)s=s<<1|e>>t-r-1&1,8==++o&&(o=0,i[a++]=$n.BitStream.ReverseTable[s],s=0,a===i.length&&(i=this.expandBuffer()));i[a]=s,this.buffer=i,this.bitindex=o,this.index=a},$n.BitStream.prototype.finish=function(){var e=this.buffer,t=this.index;return this.bitindex>0&&(e[t]<<=8-this.bitindex,e[t]=$n.BitStream.ReverseTable[e[t]],t++),e.subarray(0,t)},$n.BitStream.ReverseTable=function(){var e,t=new Uint8Array(256);for(e=0;e<256;++e)t[e]=function(e){var t=e,n=7;for(e>>>=1;e;e>>>=1)t<<=1,t|=1&e,--n;return(t<<n&255)>>>0}(e);return t}(),$n.CRC32.calc=function(e,t,n){return $n.CRC32.update(e,0,t,n)},$n.CRC32.update=function(e,t,n,r){var i=$n.CRC32.Table,a="number"==typeof n?n:n=0,o="number"==typeof r?r:e.length;for(t^=4294967295,a=7&o;a--;++n)t=t>>>8^i[255&(t^e[n])];for(a=o>>3;a--;n+=8)t=(t=(t=(t=(t=(t=(t=(t=t>>>8^i[255&(t^e[n])])>>>8^i[255&(t^e[n+1])])>>>8^i[255&(t^e[n+2])])>>>8^i[255&(t^e[n+3])])>>>8^i[255&(t^e[n+4])])>>>8^i[255&(t^e[n+5])])>>>8^i[255&(t^e[n+6])])>>>8^i[255&(t^e[n+7])];return(4294967295^t)>>>0},$n.CRC32.single=function(e,t){return($n.CRC32.Table[255&(e^t)]^e>>>8)>>>0},$n.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],$n.CRC32.Table=new Uint32Array($n.CRC32.Table_),$n.Deflate=function(e,t){this.input=e,this.output=new Uint8Array($n.Deflate.DefaultBufferSize),this.compressionType=$n.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var n,r={};for(n in!t&&(t={})||"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t)r[n]=t[n];r.outputBuffer=this.output,this.rawDeflate=new $n.RawDeflate(this.input,r)},$n.Deflate.DefaultBufferSize=32768,$n.Deflate.CompressionType=$n.RawDeflate.CompressionType,$n.Deflate.compress=function(e,t){return new $n.Deflate(e,t).compress()},$n.Deflate.prototype.compress=function(){var e,t,n,r,i,a,o,s=0;switch(o=this.output,e=$n.CompressionMethod.DEFLATE){case $n.CompressionMethod.DEFLATE:t=Math.LOG2E*Math.log($n.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(n=t<<4|e,o[s++]=n,e){case $n.CompressionMethod.DEFLATE:switch(this.compressionType){case $n.Deflate.CompressionType.NONE:i=0;break;case $n.Deflate.CompressionType.FIXED:i=1;break;case $n.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return r=i<<6|0,r|=31-(256*n+r)%31,o[s++]=r,a=$n.Adler32(this.input),this.rawDeflate.op=s,s=(o=this.rawDeflate.compress()).length,(o=new Uint8Array(o.buffer)).length<=s+4&&(this.output=new Uint8Array(o.length+4),this.output.set(o),o=this.output),(o=o.subarray(0,s+4))[s++]=a>>24&255,o[s++]=a>>16&255,o[s++]=a>>8&255,o[s++]=255&a,o},"object"==typeof r&&"undefined"==typeof window&&(t.atob=function(e){return n.from(e,"base64").toString("binary")});const er={licorice:"#000000",lead:"#1e1e1e",tungsten:"#3a3a3a",iron:"#545453",steel:"#6e6e6e",tin:"#878687",nickel:"#888787",aluminum:"#a09fa0",magnesium:"#b8b8b8",silver:"#d0d0d0",mercury:"#e8e8e8",snow:"#ffffff",cayenne:"#891100",mocha:"#894800",aspargus:"#888501",fern:"#458401",clover:"#028401",moss:"#018448",teal:"#008688",ocean:"#004a88",midnight:"#001888",eggplant:"#491a88",plum:"#891e88",maroon:"#891648",maraschino:"#ff2101",tangerine:"#ff8802",lemon:"#fffa03",lime:"#83f902",spring:"#05f802",seam_foam:"#03f987",turquoise:"#00fdff",aqua:"#008cff",blueberry:"#002eff",grape:"#8931ff",magenta:"#ff39ff",strawberry:"#ff2987",salmon:"#ff726e",cantaloupe:"#ffce6e",banana:"#fffb6d",honeydew:"#cefa6e",flora:"#68f96e",spindrift:"#68fbd0",ice:"#68fdff",sky:"#6acfff",orchid:"#6e76ff",lavender:"#d278ff",bubblegum:"#ff7aff",carnation:"#ff7fd3"},tr={401:"Access unauthorized",403:"Access forbidden",404:"Not found"};class nr{constructor(e){this.container=Hn({class:"igv-ui-alert-dialog-container"}),e.appendChild(this.container),this.container.setAttribute("tabIndex","-1");const t=Hn();this.container.appendChild(t);const n=Hn();t.appendChild(n),n.textContent="ERROR";let r=Hn({id:"igv-ui-alert-dialog-body"});this.container.appendChild(r),this.body=Hn({id:"igv-ui-alert-dialog-body-copy"}),r.appendChild(this.body);let i=Hn();this.container.appendChild(i),this.ok=Hn(),i.appendChild(this.ok),this.ok.textContent="OK";const a=()=>{"function"==typeof this.callback&&(this.callback("OK"),this.callback=void 0),this.body.innerHTML="",jn(this.container)};this.ok.addEventListener("click",e=>{e.stopPropagation(),a()}),this.container.addEventListener("keypress",e=>{e.stopPropagation(),"Enter"===e.key&&a()}),Zn(this.container,t),jn(this.container)}present(e,t){let n=e.message||e;tr.hasOwnProperty(n)&&(n=tr[n]),this.body.innerHTML=n,this.callback=t,qn(this.container),this.container.focus()}}let rr;const ir={init(e){rr||(rr=new nr(e))},presentAlert:function(e,t){rr.present(e,t)}};class ar{constructor(e){this.parent=e,this.container=Hn({class:"igv-ui-generic-dialog-container"}),e.appendChild(this.container);const t=Hn({class:"igv-ui-generic-dialog-header"});this.container.appendChild(t),this.label=Hn({class:"igv-ui-generic-dialog-one-liner"}),this.container.appendChild(this.label),this.label.text="Unlabeled",this.input_container=Hn({class:"igv-ui-generic-dialog-input"}),this.container.appendChild(this.input_container),this.input=document.createElement("input"),this.input_container.appendChild(this.input);const n=Hn({class:"igv-ui-generic-dialog-ok-cancel"});this.container.appendChild(n),this.ok=Hn(),n.appendChild(this.ok),this.ok.textContent="OK",this.cancel=Hn(),n.appendChild(this.cancel),this.cancel.textContent="Cancel",jn(this.container),this.input.addEventListener("keyup",e=>{13===e.keyCode&&("function"==typeof this.callback&&(this.callback(this.input.value),this.callback=void 0),this.input.value=void 0,jn(this.container))}),this.ok.addEventListener("click",()=>{"function"==typeof this.callback&&(this.callback(this.input.value),this.callback=void 0),this.input.value=void 0,jn(this.container)});const r=()=>{this.input.value="",jn(this.container)};this.cancel.addEventListener("click",r),Wn(t,r),Zn(this.container,t)}present(e,t){this.label.textContent=e.label,this.input.value=e.value,this.callback=e.callback||e.click,qn(this.container);const{x:n,y:r}=function(e){if(e.type.startsWith("touch")){const t=e.touches[0];return{x:t.pageX,y:t.pageY}}return{x:e.pageX,y:e.pageY}}(t);this.clampLocation(n,r)}clampLocation(e,t){const{width:n,height:r}=this.container.getBoundingClientRect(),{x:i,y:a,width:o,height:s}=this.parent.getBoundingClientRect(),u=Math.min(Math.max(t,a),a+s-r),c=Math.min(Math.max(e,i),i+o-n);this.container.style.left=`${c}px`,this.container.style.top=`${u}px`}}class or extends class{constructor({parent:e,top:t,left:n,width:r,height:i,border:a,closeHandler:o}){let s=Hn({class:"igv-ui-generic-container"});e.appendChild(s),jn(s),this.container=s,void 0!==t&&(this.container.style.width=t+"px"),void 0!==n&&(this.container.style.width=n+"px"),void 0!==r&&(this.container.style.width=r+"px"),void 0!==i&&(this.container.style.height=i+"px"),a&&(this.container.style.border=a);const u=Hn();this.container.appendChild(u),Wn(u,e=>{jn(this.container),"function"==typeof o&&o(e)}),Zn(this.container,u)}show(){qn(this.container)}hide(){jn(this.container)}dispose(){this.container.parent&&this.container.parent.removeChild(this.container)}}{constructor({parent:e,top:t,left:n,width:r,height:i,defaultColors:a,colorHandler:o}){super({parent:e,top:t,left:n,width:r,height:i,border:"1px solid gray"}),sr(this.container,o,a)}}const sr=(e,t,n)=>{const r=Object.values(er);for(let n of r){const r=Hn({class:"igv-ui-color-swatch"});e.appendChild(r),ur(r,n,t)}if(n)for(let r of n){const n=Hn({class:"igv-ui-color-swatch"});e.appendChild(n),ur(n,r,t)}},ur=(e,t,n)=>{e.style.backgroundColor=t,e.onmouseenter=()=>e.style.borderColor=t,e.onmouseenter=()=>e.style.borderColor="white",e.addEventListener("click",e=>{e.stopPropagation(),n(t)}),e.addEventListener("touchend",e=>{e.stopPropagation(),n(t)})};class cr{constructor(e){this.parent=e,this.popover=Hn({class:"igv-ui-popover"}),e.appendChild(this.popover);const t=Hn();this.popover.appendChild(t),Wn(t,()=>this.hide()),Zn(this.popover,t),this.popoverContent=Hn(),this.popover.appendChild(this.popoverContent),this.popover.style.display="none"}presentContentWithEvent(e,t){this.popover.style.display="block",this.popoverContent.innerHTML=t,lr(e,this.popover)}presentMenu(e,t){if(0===t.length)return;this.popover.style.display="block";const n=(r=t,i=this.popover,r.map((function(e,t){let n;if("string"==typeof e)n=Hn(),n.innerHTML=e;else if("Node"==typeof e)n=e;else{if("function"==typeof e.init&&e.init(),"checkbox"===e.type)n=function(e,t){const n=Hn({class:"igv-ui-trackgear-popover-check-container"}),r=Vn("check",!0===t?"#444":"transparent");r.style.borderColor="gray",r.style.borderWidth="1px",r.style.borderStyle="solid",n.appendChild(r);let i=Hn();return i.textContent=e,n.appendChild(i),n}("Show all bases",e.value);else if("color"===e.type){const t=new or({parent:i.parentElement,width:364,colorHandler:t=>e.click(t)});n=Hn(),"string"==typeof e.label&&(n.innerHTML=e.label);const r=e=>{t.show(),jn(i),e.preventDefault(),e.stopPropagation()};n.addEventListener("click",r),n.addEventListener("touchend",r),n.addEventListener("mouseup",(function(e){e.preventDefault(),e.stopPropagation()}))}else n=Hn(),"string"==typeof e.label&&(n.innerHTML=e.label);if(e.click&&"color"!==e.type){function r(t){e.click(),jn(i),t.preventDefault(),t.stopPropagation()}n.addEventListener("click",r),n.addEventListener("touchend",r),n.addEventListener("mouseup",(function(e){e.preventDefault(),e.stopPropagation()}))}}return{object:n,init:e.init}})));var r,i;for(let e of n)this.popoverContent.appendChild(e.object);lr(e,this.popover)}hide(){this.popover.style.display="none",this.dispose()}dispose(){this.popover&&this.popover.parentNode.removeChild(this.popover);const e=Object.keys(this);for(let t of e)this[t]=void 0}}function lr(e,t){const{x:n,y:r}=function(e,t){const{clientX:n,clientY:r}=e;return((e,{clientX:t,clientY:n})=>{const{left:r,top:i,width:a,height:o}=e.getBoundingClientRect(),s=t-r,u=n-i;return{x:s,y:u,xNormalized:s/a,yNormalized:u/o,width:a,height:o}})(t,{clientX:n,clientY:r})}(e,t.parentNode),{width:i}=t.parentNode.getBoundingClientRect(),{width:a}=t.getBoundingClientRect(),o=n+a;t.style.left=`${o>i?n-(o-i):n}px`,t.style.top=`${r}px`}var hr;function fr(e){return function(e,t){const n=document.createElement(e);return t&&(t.class&&n.classList.add(t.class),t.id&&(n.id=t.id),t.style&&function(e,t){for(let n of Object.keys(t))e.style[n]=t[n]}(n,t.style)),n}("div",e)}function pr(e){const t=getComputedStyle(e);"none"!==t.display&&(e._initialDisplay=t.display),e.style.display="none"}function dr(e){if(e.type.startsWith("touch")){const t=e.touches[0];return{x:t.pageX,y:t.pageY}}return{x:e.pageX,y:e.pageY}}function gr(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}function vr(e,t){const{clientX:n,clientY:r}=e;return((e,{clientX:t,clientY:n})=>{const{left:r,top:i,width:a,height:o}=e.getBoundingClientRect(),s=t-r,u=n-i;return{x:s,y:u,xNormalized:s/a,yNormalized:u/o,width:a,height:o}})(t,{clientX:n,clientY:r})}function mr(e,t){return function(e,t){t=t||"currentColor";let n=yr[e];n||(console.error(`No icon named: ${e}`),n=yr.question);const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"viewBox","0 0 "+n[0]+" "+n[1]);const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"fill",t),i.setAttributeNS(null,"d",n[4]),r.appendChild(i),r}(e,t)}"undefined"!=typeof document&&(function(e){for(let t of document.styleSheets)if(t=t.href?t.href.replace(/^.*[\\\/]/,""):"",t===e)return!0;return!1}("igv-ui.css")||((hr=document.createElement("style")).setAttribute("type","text/css"),hr.innerHTML='.igv-ui-popover {\n  cursor: default;\n  position: absolute;\n  z-index: 2048;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: 1px;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  background-color: white; }\n  .igv-ui-popover > div:first-child {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-popover > div:first-child > div {\n      margin-right: 4px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-popover > div:first-child > div:hover {\n      color: #444; }\n  .igv-ui-popover > div:last-child {\n    overflow-y: auto;\n    overflow-x: hidden;\n    max-height: 400px;\n    background-color: white; }\n    .igv-ui-popover > div:last-child > div {\n      -webkit-user-select: all;\n      /* Chrome/Safari */\n      -moz-user-select: all;\n      /* Firefox */\n      margin-left: 4px;\n      margin-right: 4px;\n      max-width: 384px;\n      min-width: 220px;\n      overflow-x: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap; }\n      .igv-ui-popover > div:last-child > div > span {\n        font-weight: bolder; }\n    .igv-ui-popover > div:last-child hr {\n      width: 100%; }\n\n.igv-ui-alert-dialog-container {\n  box-sizing: content-box;\n  position: absolute;\n  z-index: 2048;\n  top: 50%;\n  left: 50%;\n  width: 400px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  outline: none;\n  font-family: "Open Sans", sans-serif;\n  font-size: 15px;\n  font-weight: 400;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center; }\n  .igv-ui-alert-dialog-container > div:first-child {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-alert-dialog-container > div:first-child div:first-child {\n      padding-left: 8px; }\n  .igv-ui-alert-dialog-container #igv-ui-alert-dialog-body {\n    color: #373737;\n    width: 100%;\n    height: calc(100% - 24px - 64px);\n    overflow-y: scroll; }\n    .igv-ui-alert-dialog-container #igv-ui-alert-dialog-body #igv-ui-alert-dialog-body-copy {\n      cursor: pointer;\n      margin: 16px;\n      width: auto;\n      height: auto;\n      overflow-wrap: break-word;\n      word-break: break-word;\n      background-color: white;\n      border: unset; }\n  .igv-ui-alert-dialog-container > div:last-child {\n    width: 100%;\n    margin-bottom: 10px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: center;\n    align-items: center; }\n    .igv-ui-alert-dialog-container > div:last-child div {\n      margin: unset;\n      width: 40px;\n      height: 30px;\n      line-height: 30px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: small;\n      font-weight: 400;\n      border-color: #2B81AF;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-alert-dialog-container > div:last-child div:hover {\n      cursor: pointer;\n      border-color: #25597f;\n      background-color: #25597f; }\n\n.igv-ui-color-swatch {\n  box-sizing: content-box;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  width: 32px;\n  height: 32px;\n  border-style: solid;\n  border-width: 2px;\n  border-color: white;\n  border-radius: 4px; }\n\n.igv-ui-colorpicker-menu-close-button {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  height: 32px;\n  margin-top: 4px;\n  margin-bottom: 4px;\n  padding-right: 8px; }\n  .igv-ui-colorpicker-menu-close-button i.fa {\n    display: block;\n    margin-left: 4px;\n    margin-right: 4px;\n    color: #5f5f5f; }\n  .igv-ui-colorpicker-menu-close-button i.fa:hover,\n  .igv-ui-colorpicker-menu-close-button i.fa:focus,\n  .igv-ui-colorpicker-menu-close-button i.fa:active {\n    cursor: pointer;\n    color: #0f0f0f; }\n\n.igv-ui-generic-dialog-container {\n  box-sizing: content-box;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 300px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-one-liner {\n    color: #373737;\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin-top: 8px;\n    padding-left: 8px;\n    overflow-wrap: break-word;\n    background-color: white; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input {\n    margin-top: 8px;\n    width: 95%;\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    padding-left: 8px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input div {\n      width: 30%;\n      height: 100%;\n      font-size: 16px;\n      text-align: right;\n      padding-right: 8px;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input input {\n      width: 50%;\n      font-size: 16px; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input {\n    margin-top: 8px;\n    width: calc(100% - 16px);\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-input input {\n      font-size: 16px; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel {\n    width: 100%;\n    height: 28px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div {\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:first-child {\n      margin-left: 32px;\n      margin-right: 0;\n      background-color: #5ea4e0; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:last-child {\n      margin-left: 0;\n      margin-right: 32px;\n      background-color: #c4c4c4; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-ui-generic-container {\n  box-sizing: content-box;\n  position: absolute;\n  z-index: 2048;\n  background-color: white;\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-ui-generic-container div:first-child {\n    cursor: move;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    height: 24px;\n    width: 100%;\n    background-color: #dddddd; }\n    .igv-ui-generic-container div:first-child div {\n      display: block;\n      color: #5f5f5f;\n      cursor: pointer;\n      width: 14px;\n      height: 14px;\n      margin-right: 8px;\n      margin-bottom: 4px; }\n\n.igv-ui-dialog {\n  z-index: 2048;\n  position: fixed;\n  width: fit-content;\n  height: fit-content;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  background-color: white;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400; }\n  .igv-ui-dialog .igv-ui-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-ui-dialog .igv-ui-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-ui-dialog .igv-ui-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-ui-dialog .igv-ui-dialog-one-liner {\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin: 8px;\n    overflow-wrap: break-word;\n    background-color: white;\n    font-weight: bold; }\n  .igv-ui-dialog .igv-ui-dialog-ok-cancel {\n    width: 100%;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div {\n      margin: 16px;\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:first-child {\n      background-color: #5ea4e0; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:last-child {\n      background-color: #c4c4c4; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-ui-dialog .igv-ui-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-ui-dialog .igv-ui-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-ui-dialog .igv-ui-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-ui-dialog .igv-ui-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-ui-panel, .igv-ui-panel-column, .igv-ui-panel-row {\n  z-index: 2048;\n  background-color: white;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start; }\n\n.igv-ui-panel-column {\n  display: flex;\n  flex-direction: column; }\n\n.igv-ui-panel-row {\n  display: flex;\n  flex-direction: row; }\n\n.igv-ui-textbox {\n  background-color: white;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start; }\n\n/*# sourceMappingURL=igv-ui.css.map */\n',document.head.insertBefore(hr,document.head.childNodes[document.head.childNodes.length-1])));const yr={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]};function br(e,t){var n=document.createElement("div");e.appendChild(n),n.appendChild(mr("times")),n.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t()}))}var wr={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(e){e=e||{},this.files=[],this.comment=e.comment,this.password}};wr.Zip.CompressionMethod={STORE:0,DEFLATE:8},wr.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},wr.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},wr.Zip.FileHeaderSignature=[80,75,1,2],wr.Zip.LocalFileHeaderSignature=[80,75,3,4],wr.Zip.CentralDirectorySignature=[80,75,5,6],wr.Zip.prototype.addFile=function(e,t){(t=t||{}).filename;var n,r=e.length,i=0;if(e instanceof Array&&(e=new Uint8Array(e)),"number"!=typeof t.compressionMethod&&(t.compressionMethod=wr.Zip.CompressionMethod.DEFLATE),t.compress)switch(t.compressionMethod){case wr.Zip.CompressionMethod.STORE:break;case wr.Zip.CompressionMethod.DEFLATE:i=wr.CRC32.calc(e),e=this.deflateWithOption(e,t),n=!0;break;default:throw new Error("unknown compression method:"+t.compressionMethod)}this.files.push({buffer:e,option:t,compressed:n,encrypted:!1,size:r,crc32:i})},wr.Zip.prototype.setPassword=function(e){this.password=e},wr.Zip.prototype.compress=function(){var e,t,n,r,i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w,x,k,S,_,C,R=this.files,E=0,A=0;for(k=0,S=R.length;k<S;++k){if(p=(e=R[k]).option.filename?e.option.filename.length:0,d=e.option.extraField?e.option.extraField.length:0,g=e.option.comment?e.option.comment.length:0,!e.compressed)switch(e.crc32=wr.CRC32.calc(e.buffer),e.option.compressionMethod){case wr.Zip.CompressionMethod.STORE:break;case wr.Zip.CompressionMethod.DEFLATE:e.buffer=this.deflateWithOption(e.buffer,e.option),e.compressed=!0;break;default:throw new Error("unknown compression method:"+e.option.compressionMethod)}if(void 0!==e.option.password||void 0!==this.password){for(x=this.createEncryptionKey(e.option.password||this.password),b=e.buffer,(w=new Uint8Array(b.length+12)).set(b,12),b=w,_=0;_<12;++_)b[_]=this.encode(x,11===k?255&e.crc32:256*Math.random()|0);for(C=b.length;_<C;++_)b[_]=this.encode(x,b[_]);e.buffer=b}E+=30+p+e.buffer.length,A+=46+p+g}for(a=22+(this.comment?this.comment.length:0),t=new Uint8Array(E+A+a),n=0,i=(r=E)+A,k=0,S=R.length;k<S;++k)p=(e=R[k]).option.filename?e.option.filename.length:0,d=0,g=e.option.comment?e.option.comment.length:0,o=n,t[n++]=wr.Zip.LocalFileHeaderSignature[0],t[n++]=wr.Zip.LocalFileHeaderSignature[1],t[n++]=wr.Zip.LocalFileHeaderSignature[2],t[n++]=wr.Zip.LocalFileHeaderSignature[3],t[r++]=wr.Zip.FileHeaderSignature[0],t[r++]=wr.Zip.FileHeaderSignature[1],t[r++]=wr.Zip.FileHeaderSignature[2],t[r++]=wr.Zip.FileHeaderSignature[3],t[r++]=20,t[r++]=e.option.os||wr.Zip.OperatingSystem.MSDOS,t[n++]=t[r++]=20,t[n++]=t[r++]=0,s=0,(e.option.password||this.password)&&(s|=wr.Zip.Flags.ENCRYPT),t[n++]=t[r++]=255&s,t[n++]=t[r++]=s>>8&255,u=e.option.compressionMethod,t[n++]=t[r++]=255&u,t[n++]=t[r++]=u>>8&255,c=e.option.date||new Date,t[n++]=t[r++]=(7&c.getMinutes())<<5|c.getSeconds()/2|0,t[n++]=t[r++]=c.getHours()<<3|c.getMinutes()>>3,t[n++]=t[r++]=(c.getMonth()+1&7)<<5|c.getDate(),t[n++]=t[r++]=(c.getFullYear()-1980&127)<<1|c.getMonth()+1>>3,l=e.crc32,t[n++]=t[r++]=255&l,t[n++]=t[r++]=l>>8&255,t[n++]=t[r++]=l>>16&255,t[n++]=t[r++]=l>>24&255,h=e.buffer.length,t[n++]=t[r++]=255&h,t[n++]=t[r++]=h>>8&255,t[n++]=t[r++]=h>>16&255,t[n++]=t[r++]=h>>24&255,f=e.size,t[n++]=t[r++]=255&f,t[n++]=t[r++]=f>>8&255,t[n++]=t[r++]=f>>16&255,t[n++]=t[r++]=f>>24&255,t[n++]=t[r++]=255&p,t[n++]=t[r++]=p>>8&255,t[n++]=t[r++]=255&d,t[n++]=t[r++]=d>>8&255,t[r++]=255&g,t[r++]=g>>8&255,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=255&o,t[r++]=o>>8&255,t[r++]=o>>16&255,t[r++]=o>>24&255,(v=e.option.filename)&&(t.set(v,n),t.set(v,r),n+=p,r+=p),(m=e.option.extraField)&&(t.set(m,n),t.set(m,r),n+=d,r+=d),(y=e.option.comment)&&(t.set(y,r),r+=g),t.set(e.buffer,n),n+=e.buffer.length;return t[i++]=wr.Zip.CentralDirectorySignature[0],t[i++]=wr.Zip.CentralDirectorySignature[1],t[i++]=wr.Zip.CentralDirectorySignature[2],t[i++]=wr.Zip.CentralDirectorySignature[3],t[i++]=0,t[i++]=0,t[i++]=0,t[i++]=0,t[i++]=255&S,t[i++]=S>>8&255,t[i++]=255&S,t[i++]=S>>8&255,t[i++]=255&A,t[i++]=A>>8&255,t[i++]=A>>16&255,t[i++]=A>>24&255,t[i++]=255&E,t[i++]=E>>8&255,t[i++]=E>>16&255,t[i++]=E>>24&255,g=this.comment?this.comment.length:0,t[i++]=255&g,t[i++]=g>>8&255,this.comment&&(t.set(this.comment,i),i+=g),t},wr.Zip.prototype.deflateWithOption=function(e,t){return new wr.RawDeflate(e,t.deflateOption).compress()},wr.Zip.prototype.getByte=function(e){var t=65535&e[2]|2;return t*(1^t)>>8&255},wr.Zip.prototype.encode=function(e,t){var n=this.getByte(e);return this.updateKeys(e,t),n^t},wr.Zip.prototype.updateKeys=function(e,t){e[0]=wr.CRC32.single(e[0],t),e[1]=1+(6681*(20173*(e[1]+(255&e[0]))>>>0)>>>0)>>>0,e[2]=wr.CRC32.single(e[2],e[1]>>>24)},wr.Zip.prototype.createEncryptionKey=function(e){var t,n,r=[305419896,591751049,878082192];for(r=new Uint32Array(r),t=0,n=e.length;t<n;++t)this.updateKeys(r,255&e[t]);return r},wr.Huffman.buildHuffmanTable=function(e){var t,n,r,i,a,o,s,u,c,l,h,f=e.length,p=0,d=Number.POSITIVE_INFINITY;for(u=0,c=f;u<c;++u)e[u]>p&&(p=e[u]),e[u]<d&&(d=e[u]);for(t=1<<p,n=new Uint32Array(t),r=1,i=0,a=2;r<=p;){for(u=0;u<f;++u)if(e[u]===r){for(o=0,s=i,l=0;l<r;++l)o=o<<1|1&s,s>>=1;for(h=r<<16|u,l=o;l<t;l+=a)n[l]=h;++i}++r,i<<=1,a<<=1}return[n,p,d]};var xr=wr.Huffman.buildHuffmanTable;let kr;function Sr(e){return"string"==typeof e||e instanceof String}function _r(e){var t=String(e).split(/[.,]/);return t[0].split("").reverse().reduce((function(e,t,n){return n%3==0?e+","+t:e+t})).split("").reverse().join("")+(t[1]?"."+t[1]:"")}wr.RawInflate=function(e,t){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output,this.op,this.bfinal=!1,this.bufferType=wr.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!t&&(t={})||(t.index&&(this.ip=t.index),t.bufferSize&&(this.bufferSize=t.bufferSize),t.bufferType&&(this.bufferType=t.bufferType),t.resize&&(this.resize=t.resize)),this.bufferType){case wr.RawInflate.BufferType.BLOCK:this.op=wr.RawInflate.MaxBackwardLength,this.output=new Uint8Array(wr.RawInflate.MaxBackwardLength+this.bufferSize+wr.RawInflate.MaxCopyLength);break;case wr.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},wr.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},wr.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case wr.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case wr.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},wr.RawInflate.MaxBackwardLength=32768,wr.RawInflate.MaxCopyLength=258,wr.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wr.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),wr.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),wr.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),wr.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),wr.RawInflate.FixedLiteralLengthTable=function(){var e,t,n=new Uint8Array(288);for(e=0,t=n.length;e<t;++e)n[e]=e<=143?8:e<=255?9:e<=279?7:8;return xr(n)}(),wr.RawInflate.FixedDistanceTable=function(){var e,t,n=new Uint8Array(30);for(e=0,t=n.length;e<t;++e)n[e]=5;return xr(n)}(),wr.RawInflate.prototype.parseBlock=function(){var e=this.readBits(3);switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+e)}},wr.RawInflate.prototype.readBits=function(e){var t,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,a=this.ip;if(a+(e-r+7>>3)>=i.length)throw new Error("input buffer is broken");for(;r<e;)n|=i[a++]<<r,r+=8;return t=n&(1<<e)-1,n>>>=e,r-=e,this.bitsbuf=n,this.bitsbuflen=r,this.ip=a,t},wr.RawInflate.prototype.readCodeByTable=function(e){for(var t,n,r=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=a.length,u=e[0],c=e[1];i<c&&!(o>=s);)r|=a[o++]<<i,i+=8;if((n=(t=u[r&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=o,65535&t},wr.RawInflate.prototype.parseUncompressedBlock=function(){var e,t,n=this.input,r=this.ip,i=this.output,a=this.op,o=n.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,r+1>=o)throw new Error("invalid uncompressed block header: LEN");if(e=n[r++]|n[r++]<<8,r+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(e===~(n[r++]|n[r++]<<8))throw new Error("invalid uncompressed block header: length verify");if(r+e>n.length)throw new Error("input buffer is broken");switch(this.bufferType){case wr.RawInflate.BufferType.BLOCK:for(;a+e>i.length;)e-=t=s-a,i.set(n.subarray(r,r+t),a),a+=t,r+=t,this.op=a,i=this.expandBufferBlock(),a=this.op;break;case wr.RawInflate.BufferType.ADAPTIVE:for(;a+e>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(n.subarray(r,r+e),a),a+=e,r+=e,this.ip=r,this.op=a,this.output=i},wr.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case wr.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(wr.RawInflate.FixedLiteralLengthTable,wr.RawInflate.FixedDistanceTable);break;case wr.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(wr.RawInflate.FixedLiteralLengthTable,wr.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},wr.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var e,t,n,r,i,a,o,s,u,c=this.readBits(5)+257,l=this.readBits(5)+1,h=this.readBits(4)+4,f=new Uint8Array(wr.RawInflate.Order.length);for(s=0;s<h;++s)f[wr.RawInflate.Order[s]]=this.readBits(3);for(e=xr(f),r=new Uint8Array(c+l),s=0,u=c+l;s<u;)switch(i=this.readCodeByTable(e)){case 16:for(o=3+this.readBits(2);o--;)r[s++]=a;break;case 17:for(o=3+this.readBits(3);o--;)r[s++]=0;a=0;break;case 18:for(o=11+this.readBits(7);o--;)r[s++]=0;a=0;break;default:r[s++]=i,a=i}switch(t=xr(r.subarray(0,c)),n=xr(r.subarray(c)),this.bufferType){case wr.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(t,n);break;case wr.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(t,n);break;default:throw new Error("invalid inflate mode")}},wr.RawInflate.prototype.decodeHuffmanBlock=function(e,t){var n=this.output,r=this.op;this.currentLitlenTable=e;for(var i,a,o,s,u=n.length-wr.RawInflate.MaxCopyLength,c=wr.RawInflate.LengthCodeTable,l=wr.RawInflate.LengthExtraTable,h=wr.RawInflate.DistCodeTable,f=wr.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(e));)if(i<256)r>=u&&(this.op=r,n=this.expandBufferBlock(),r=this.op),n[r++]=i;else for(s=c[a=i-257],l[a]>0&&(s+=this.readBits(l[a])),o=h[i=this.readCodeByTable(t)],f[i]>0&&(o+=this.readBits(f[i])),r>=u&&(this.op=r,n=this.expandBufferBlock(),r=this.op);s--;)n[r]=n[r++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},wr.RawInflate.prototype.decodeHuffmanAdaptive=function(e,t){var n=this.output,r=this.op;this.currentLitlenTable=e;for(var i,a,o,s,u=n.length,c=wr.RawInflate.LengthCodeTable,l=wr.RawInflate.LengthExtraTable,h=wr.RawInflate.DistCodeTable,f=wr.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(e));)if(i<256)r>=u&&(u=(n=this.expandBufferAdaptive()).length),n[r++]=i;else for(s=c[a=i-257],l[a]>0&&(s+=this.readBits(l[a])),o=h[i=this.readCodeByTable(t)],f[i]>0&&(o+=this.readBits(f[i])),r+s>u&&(u=(n=this.expandBufferAdaptive()).length);s--;)n[r]=n[r++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},wr.RawInflate.prototype.expandBufferBlock=function(e){var t=new Uint8Array(this.op-wr.RawInflate.MaxBackwardLength),n=this.op-wr.RawInflate.MaxBackwardLength,r=this.output;return t.set(r.subarray(wr.RawInflate.MaxBackwardLength,t.length)),this.blocks.push(t),this.totalpos+=t.length,r.set(r.subarray(n,n+wr.RawInflate.MaxBackwardLength)),this.op=wr.RawInflate.MaxBackwardLength,r},wr.RawInflate.prototype.expandBufferAdaptive=function(e){var t,n,r,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return e&&("number"==typeof e.fixRatio&&(i=e.fixRatio),"number"==typeof e.addRatio&&(i+=e.addRatio)),n=i<2?(r=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<o.length?o.length+r:o.length<<1:o.length*i,(t=new Uint8Array(n)).set(o),this.output=t,this.output},wr.RawInflate.prototype.concatBufferBlock=function(){var e,t,n,r,i,a=0,o=this.totalpos+(this.op-wr.RawInflate.MaxBackwardLength),s=this.output,u=this.blocks,c=new Uint8Array(o);if(0===u.length)return this.output.subarray(wr.RawInflate.MaxBackwardLength,this.op);for(t=0,n=u.length;t<n;++t)for(r=0,i=(e=u[t]).length;r<i;++r)c[a++]=e[r];for(t=wr.RawInflate.MaxBackwardLength,n=this.op;t<n;++t)c[a++]=s[t];return this.blocks=[],this.buffer=c,this.buffer},wr.RawInflate.prototype.concatBufferDynamic=function(){var e,t=this.op;return this.resize?(e=new Uint8Array(t)).set(this.output.subarray(0,t)):e=this.output.subarray(0,t),this.buffer=e,this.buffer},xr=wr.Huffman.buildHuffmanTable,wr.RawInflateStream=function(e,t,n){this.blocks=[],this.bufferSize=n||65e3,this.totalpos=0,this.ip=void 0===t?0:t,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=wr.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},wr.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},wr.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},wr.RawInflateStream.prototype.decompress=function(e,t){var n=!1;for(void 0!==e&&(this.input=e),void 0!==t&&(this.ip=t);!n;)switch(this.status){case wr.RawInflateStream.Status.INITIALIZED:case wr.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(n=!0);break;case wr.RawInflateStream.Status.BLOCK_HEADER_END:case wr.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case wr.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(n=!0);break;case wr.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(n=!0);break;case wr.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(n=!0)}break;case wr.RawInflateStream.Status.BLOCK_BODY_END:case wr.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case wr.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(n=!0);break;case wr.RawInflateStream.BlockType.FIXED:case wr.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(n=!0)}break;case wr.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?n=!0:this.status=wr.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},wr.RawInflateStream.MaxBackwardLength=32768,wr.RawInflateStream.MaxCopyLength=258,wr.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wr.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),wr.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),wr.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),wr.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),wr.RawInflateStream.FixedLiteralLengthTable=function(){var e,t,n=new Uint8Array(288);for(e=0,t=n.length;e<t;++e)n[e]=e<=143?8:e<=255?9:e<=279?7:8;return xr(n)}(),wr.RawInflateStream.FixedDistanceTable=function(){var e,t,n=new Uint8Array(30);for(e=0,t=n.length;e<t;++e)n[e]=5;return xr(n)}(),wr.RawInflateStream.prototype.readBlockHeader=function(){var e;if(this.status=wr.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(e=this.readBits(3))<0)return this.restore_(),-1;switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.currentBlockType=wr.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=wr.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=wr.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+e)}this.status=wr.RawInflateStream.Status.BLOCK_HEADER_END},wr.RawInflateStream.prototype.readBits=function(e){for(var t,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,a=this.ip;r<e;){if(i.length<=a)return-1;n|=(t=i[a++])<<r,r+=8}return t=n&(1<<e)-1,n>>>=e,r-=e,this.bitsbuf=n,this.bitsbuflen=r,this.ip=a,t},wr.RawInflateStream.prototype.readCodeByTable=function(e){for(var t,n,r=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=e[0],u=e[1];i<u;){if(a.length<=o)return-1;r|=a[o++]<<i,i+=8}if((n=(t=s[r&(1<<u)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=o,65535&t},wr.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var e,t=this.input,n=this.ip;if(this.status=wr.RawInflateStream.Status.BLOCK_BODY_START,n+4>=t.length)return-1;if((e=t[n++]|t[n++]<<8)==~(t[n++]|t[n++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=n,this.blockLength=e,this.status=wr.RawInflateStream.Status.BLOCK_BODY_END},wr.RawInflateStream.prototype.parseUncompressedBlock=function(){var e=this.input,t=this.ip,n=this.output,r=this.op,i=this.blockLength;for(this.status=wr.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(r===n.length&&(n=this.expandBuffer({fixRatio:2})),t>=e.length)return this.ip=t,this.op=r,this.blockLength=i+1,-1;n[r++]=e[t++]}return i<0&&(this.status=wr.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=t,this.op=r,0},wr.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=wr.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=wr.RawInflateStream.FixedLiteralLengthTable,this.distTable=wr.RawInflateStream.FixedDistanceTable,this.status=wr.RawInflateStream.Status.BLOCK_BODY_END,0},wr.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},wr.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},wr.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var e,t,n,r,i=new Uint8Array(wr.RawInflateStream.Order.length);if(this.status=wr.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),e=this.readBits(5)+257,t=this.readBits(5)+1,n=this.readBits(4)+4,e<0||t<0||n<0)return this.restore_(),-1;try{(function(){var a,o,s,u,c,l,h=0;for(c=0;c<n;++c){if((a=this.readBits(3))<0)throw new Error("not enough input");i[wr.RawInflateStream.Order[c]]=a}for(r=xr(i),u=new Uint8Array(e+t),c=0,l=e+t;c<l;){if((o=this.readCodeByTable(r))<0)throw new Error("not enough input");switch(o){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(s=3+a;s--;)u[c++]=h;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(s=3+a;s--;)u[c++]=0;h=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(s=11+a;s--;)u[c++]=0;h=0;break;default:u[c++]=o,h=o}}this.litlenTable=xr(u.subarray(0,e)),this.distTable=xr(u.subarray(e))}).call(this)}catch(e){return this.restore_(),-1}return this.status=wr.RawInflateStream.Status.BLOCK_BODY_END,0},wr.RawInflateStream.prototype.decodeHuffman=function(){var e,t,n,r,i,a=this.output,o=this.op,s=this.litlenTable,u=this.distTable,c=a.length;for(this.status=wr.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(e=this.readCodeByTable(s))<0)return this.op=o,this.restore_(),-1;if(256===e)break;if(e<256)o===c&&(c=(a=this.expandBuffer()).length),a[o++]=e;else{if(t=e-257,r=wr.RawInflateStream.LengthCodeTable[t],wr.RawInflateStream.LengthExtraTable[t]>0){if((i=this.readBits(wr.RawInflateStream.LengthExtraTable[t]))<0)return this.op=o,this.restore_(),-1;r+=i}if((e=this.readCodeByTable(u))<0)return this.op=o,this.restore_(),-1;if(n=wr.RawInflateStream.DistCodeTable[e],wr.RawInflateStream.DistExtraTable[e]>0){if((i=this.readBits(wr.RawInflateStream.DistExtraTable[e]))<0)return this.op=o,this.restore_(),-1;n+=i}for(o+r>=c&&(c=(a=this.expandBuffer()).length);r--;)a[o]=a[o++-n];if(this.ip===this.input.length)return this.op=o,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=o,this.status=wr.RawInflateStream.Status.DECODE_BLOCK_END},wr.RawInflateStream.prototype.expandBuffer=function(e){var t,n,r,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return e&&("number"==typeof e.fixRatio&&(i=e.fixRatio),"number"==typeof e.addRatio&&(i+=e.addRatio)),n=i<2?(r=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<o.length?o.length+r:o.length<<1:o.length*i,(t=new Uint8Array(n)).set(o),this.output=t,this.output},wr.RawInflateStream.prototype.concatBuffer=function(){var e,t,n=this.op;return e=this.resize?new Uint8Array(this.output.subarray(this.sp,n)):this.output.subarray(this.sp,n),this.sp=n,n>wr.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=wr.RawInflateStream.MaxBackwardLength,t=this.output,this.output=new Uint8Array(this.bufferSize+wr.RawInflateStream.MaxBackwardLength),this.output.set(t.subarray(n-wr.RawInflateStream.MaxBackwardLength,n))),e},wr.Inflate=function(e,t){var n,r;switch(this.input=e,this.ip=0,this.rawinflate,this.verify,!t&&(t={})||(t.index&&(this.ip=t.index),t.verify&&(this.verify=t.verify)),n=e[this.ip++],r=e[this.ip++],15&n){case wr.CompressionMethod.DEFLATE:this.method=wr.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.rawinflate=new wr.RawInflate(e,{index:this.ip,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})},wr.Inflate.BufferType=wr.RawInflate.BufferType,wr.Inflate.prototype.decompress=function(){var e,t=this.input;if(e=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(t[this.ip++]<<24|t[this.ip++]<<16|t[this.ip++]<<8|t[this.ip++])>>>0!==wr.Adler32(e))throw new Error("invalid adler-32 checksum");return e},wr.InflateStream=function(e){this.input=void 0===e?new Uint8Array:e,this.ip=0,this.rawinflate=new wr.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},wr.InflateStream.prototype.decompress=function(e){var t;if(void 0!==e){var n=new Uint8Array(this.input.length+e.length);n.set(this.input,0),n.set(e,this.input.length),this.input=n}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(t=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),t)},wr.InflateStream.prototype.readHeader=function(){var e=this.ip,t=this.input,n=t[e++],r=t[e++];if(void 0===n||void 0===r)return-1;switch(15&n){case wr.CompressionMethod.DEFLATE:this.method=wr.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.ip=e},wr.Gunzip=function(e,t){this.input=e,this.ip=0,this.member=[],this.decompressed=!1},wr.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},wr.Gunzip.prototype.decompress=function(){for(var e=this.input.length;this.ip<e;)this.decodeMember();return this.decompressed=!0,this.concatMember()},wr.Gunzip.prototype.decodeMember=function(){var e,t,n,r,i,a,o,s,u,c=new wr.GunzipMember,l=this.input,h=this.ip;if(c.id1=l[h++],c.id2=l[h++],31!==c.id1||139!==c.id2)throw new Error("invalid file signature:"+c.id1+","+c.id2);switch(c.cm=l[h++],c.cm){case 8:break;default:throw new Error("unknown compression method: "+c.cm)}if(c.flg=l[h++],s=l[h++]|l[h++]<<8|l[h++]<<16|l[h++]<<24,c.mtime=new Date(1e3*s),c.xfl=l[h++],c.os=l[h++],(c.flg&wr.Gzip.FlagsMask.FEXTRA)>0&&(c.xlen=l[h++]|l[h++]<<8,h=this.decodeSubField(h,c.xlen)),(c.flg&wr.Gzip.FlagsMask.FNAME)>0){for(o=[],a=0;(i=l[h++])>0;)o[a++]=String.fromCharCode(i);c.name=o.join("")}if((c.flg&wr.Gzip.FlagsMask.FCOMMENT)>0){for(o=[],a=0;(i=l[h++])>0;)o[a++]=String.fromCharCode(i);c.comment=o.join("")}if((c.flg&wr.Gzip.FlagsMask.FHCRC)>0&&(c.crc16=65535&wr.CRC32.calc(l,0,h),c.crc16!==(l[h++]|l[h++]<<8)))throw new Error("invalid header crc16");if(e=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24,l.length-h-4-4<512*e&&(r=e),t=new wr.RawInflate(l,{index:h,bufferSize:r}),c.data=n=t.decompress(),h=t.ip,c.crc32=u=(l[h++]|l[h++]<<8|l[h++]<<16|l[h++]<<24)>>>0,wr.CRC32.calc(n)!==u)throw new Error("invalid CRC-32 checksum: 0x"+wr.CRC32.calc(n).toString(16)+" / 0x"+u.toString(16));if(c.isize=e=(l[h++]|l[h++]<<8|l[h++]<<16|l[h++]<<24)>>>0,(4294967295&n.length)!==e)throw new Error("invalid input size: "+(4294967295&n.length)+" / "+e);this.member.push(c),this.ip=h},wr.Gunzip.prototype.decodeSubField=function(e,t){return e+t},wr.Gunzip.prototype.concatMember=function(){var e,t,n,r=this.member,i=0,a=0;for(e=0,t=r.length;e<t;++e)a+=r[e].data.length;for(n=new Uint8Array(a),e=0;e<t;++e)n.set(r[e].data,i),i+=r[e].data.length;return n},wr.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},wr.GunzipMember.prototype.getName=function(){return this.name},wr.GunzipMember.prototype.getData=function(){return this.data},wr.GunzipMember.prototype.getMtime=function(){return this.mtime},wr.Gzip=function(e,t){this.input=e,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,t&&(t.flags&&(this.flags=t.flags),"string"==typeof t.filename&&(this.filename=t.filename),"string"==typeof t.comment&&(this.comment=t.comment),t.deflateOptions&&(this.deflateOptions=t.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},wr.Gzip.DefaultBufferSize=32768,wr.Gzip.prototype.compress=function(){var e,t,n,r,i,a,o,s,u=new Uint8Array(wr.Gzip.DefaultBufferSize),c=0,l=this.input,h=this.ip,f=this.filename,p=this.comment;if(u[c++]=31,u[c++]=139,u[c++]=8,e=0,this.flags.fname&&(e|=wr.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(e|=wr.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(e|=wr.Gzip.FlagsMask.FHCRC),u[c++]=e,t=(Date.now?Date.now():+new Date)/1e3|0,u[c++]=255&t,u[c++]=t>>>8&255,u[c++]=t>>>16&255,u[c++]=t>>>24&255,u[c++]=0,u[c++]=wr.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(o=0,s=f.length;o<s;++o)(a=f.charCodeAt(o))>255&&(u[c++]=a>>>8&255),u[c++]=255&a;u[c++]=0}if(this.flags.comment){for(o=0,s=p.length;o<s;++o)(a=p.charCodeAt(o))>255&&(u[c++]=a>>>8&255),u[c++]=255&a;u[c++]=0}return this.flags.fhcrc&&(n=65535&wr.CRC32.calc(u,0,c),u[c++]=255&n,u[c++]=n>>>8&255),this.deflateOptions.outputBuffer=u,this.deflateOptions.outputIndex=c,u=(i=new wr.RawDeflate(l,this.deflateOptions)).compress(),(c=i.op)+8>u.buffer.byteLength?(this.output=new Uint8Array(c+8),this.output.set(new Uint8Array(u.buffer)),u=this.output):u=new Uint8Array(u.buffer),r=wr.CRC32.calc(l),u[c++]=255&r,u[c++]=r>>>8&255,u[c++]=r>>>16&255,u[c++]=r>>>24&255,s=l.length,u[c++]=255&s,u[c++]=s>>>8&255,u[c++]=s>>>16&255,u[c++]=s>>>24&255,this.ip=h,c<u.length&&(this.output=u=u.subarray(0,c)),u},wr.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},wr.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},wr.Heap=function(e){this.buffer=new Uint16Array(2*e),this.length=0},wr.Heap.prototype.getParent=function(e){return 2*((e-2)/4|0)},wr.Heap.prototype.getChild=function(e){return 2*e+2},wr.Heap.prototype.push=function(e,t){var n,r,i,a=this.buffer;for(n=this.length,a[this.length++]=t,a[this.length++]=e;n>0&&(r=this.getParent(n),a[n]>a[r]);)i=a[n],a[n]=a[r],a[r]=i,i=a[n+1],a[n+1]=a[r+1],a[r+1]=i,n=r;return this.length},wr.Heap.prototype.pop=function(){var e,t,n,r,i,a=this.buffer;for(t=a[0],e=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],i=0;!((r=this.getChild(i))>=this.length)&&(r+2<this.length&&a[r+2]>a[r]&&(r+=2),a[r]>a[i]);)n=a[i],a[i]=a[r],a[r]=n,n=a[i+1],a[i+1]=a[r+1],a[r+1]=n,i=r;return{index:e,value:t,length:this.length}},wr.RawDeflate=function(e,t){this.compressionType=wr.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=e instanceof Array?new Uint8Array(e):e,this.output,this.op=0,t&&(t.lazy&&(this.lazy=t.lazy),"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t.outputBuffer&&(this.output=t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.op=t.outputIndex)),this.output||(this.output=new Uint8Array(32768))},wr.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},wr.RawDeflate.Lz77MinLength=3,wr.RawDeflate.Lz77MaxLength=258,wr.RawDeflate.WindowSize=32768,wr.RawDeflate.MaxCodeLength=16,wr.RawDeflate.HUFMAX=286,wr.RawDeflate.FixedHuffmanTable=function(){var e,t=[];for(e=0;e<288;e++)switch(!0){case e<=143:t.push([e+48,8]);break;case e<=255:t.push([e-144+400,9]);break;case e<=279:t.push([e-256+0,7]);break;case e<=287:t.push([e-280+192,8]);break;default:throw"invalid literal: "+e}return t}(),wr.RawDeflate.prototype.compress=function(){var e,t,n,r=this.input;switch(this.compressionType){case wr.RawDeflate.CompressionType.NONE:for(t=0,n=r.length;t<n;)t+=(e=r.subarray(t,t+65535)).length,this.makeNocompressBlock(e,t===n);break;case wr.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(r,!0),this.op=this.output.length;break;case wr.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(r,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},wr.RawDeflate.prototype.makeNocompressBlock=function(e,t){var n,r,i,a,o=this.output,s=this.op;for(o=new Uint8Array(this.output.buffer);o.length<=s+e.length+5;)o=new Uint8Array(o.length<<1);return o.set(this.output),n=t?1:0,r=wr.RawDeflate.CompressionType.NONE,o[s++]=n|r<<1,a=65536+~(i=e.length)&65535,o[s++]=255&i,o[s++]=i>>>8&255,o[s++]=255&a,o[s++]=a>>>8&255,o.set(e,s),s+=e.length,o=o.subarray(0,s),this.op=s,this.output=o,o},wr.RawDeflate.prototype.makeFixedHuffmanBlock=function(e,t){var n,r,i,a=new wr.BitStream(new Uint8Array(this.output.buffer),this.op);return n=t?1:0,r=wr.RawDeflate.CompressionType.FIXED,a.writeBits(n,1,!0),a.writeBits(r,2,!0),i=this.lz77(e),this.fixedHuffman(i,a),a.finish()},wr.RawDeflate.prototype.makeDynamicHuffmanBlock=function(e,t){var n,r,i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b=new wr.BitStream(new Uint8Array(this.output.buffer),this.op),w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(19);for(n=t?1:0,r=wr.RawDeflate.CompressionType.DYNAMIC,b.writeBits(n,1,!0),b.writeBits(r,2,!0),i=this.lz77(e),u=this.getLengths_(this.freqsLitLen,15),c=this.getCodesFromLengths_(u),l=this.getLengths_(this.freqsDist,7),h=this.getCodesFromLengths_(l),a=286;a>257&&0===u[a-1];a--);for(o=30;o>1&&0===l[o-1];o--);for(f=this.getTreeSymbols_(a,u,o,l),p=this.getLengths_(f.freqs,7),m=0;m<19;m++)x[m]=p[w[m]];for(s=19;s>4&&0===x[s-1];s--);for(d=this.getCodesFromLengths_(p),b.writeBits(a-257,5,!0),b.writeBits(o-1,5,!0),b.writeBits(s-4,4,!0),m=0;m<s;m++)b.writeBits(x[m],3,!0);for(m=0,y=f.codes.length;m<y;m++)if(g=f.codes[m],b.writeBits(d[g],p[g],!0),g>=16){switch(m++,g){case 16:v=2;break;case 17:v=3;break;case 18:v=7;break;default:throw"invalid code: "+g}b.writeBits(f.codes[m],v,!0)}return this.dynamicHuffman(i,[c,u],[h,l],b),b.finish()},wr.RawDeflate.prototype.dynamicHuffman=function(e,t,n,r){var i,a,o,s,u,c,l,h;for(u=t[0],c=t[1],l=n[0],h=n[1],i=0,a=e.length;i<a;++i)if(o=e[i],r.writeBits(u[o],c[o],!0),o>256)r.writeBits(e[++i],e[++i],!0),s=e[++i],r.writeBits(l[s],h[s],!0),r.writeBits(e[++i],e[++i],!0);else if(256===o)break;return r},wr.RawDeflate.prototype.fixedHuffman=function(e,t){var n,r,i;for(n=0,r=e.length;n<r;n++)if(i=e[n],wr.BitStream.prototype.writeBits.apply(t,wr.RawDeflate.FixedHuffmanTable[i]),i>256)t.writeBits(e[++n],e[++n],!0),t.writeBits(e[++n],5),t.writeBits(e[++n],e[++n],!0);else if(256===i)break;return t},wr.RawDeflate.Lz77Match=function(e,t){this.length=e,this.backwardDistance=t},wr.RawDeflate.Lz77Match.LengthCodeTable=function(e){return new Uint32Array(e)}(function(){var e,t,n=[];for(e=3;e<=258;e++)t=r(e),n[e]=t[2]<<24|t[1]<<16|t[0];function r(e){switch(!0){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case e<=12:return[265,e-11,1];case e<=14:return[266,e-13,1];case e<=16:return[267,e-15,1];case e<=18:return[268,e-17,1];case e<=22:return[269,e-19,2];case e<=26:return[270,e-23,2];case e<=30:return[271,e-27,2];case e<=34:return[272,e-31,2];case e<=42:return[273,e-35,3];case e<=50:return[274,e-43,3];case e<=58:return[275,e-51,3];case e<=66:return[276,e-59,3];case e<=82:return[277,e-67,4];case e<=98:return[278,e-83,4];case e<=114:return[279,e-99,4];case e<=130:return[280,e-115,4];case e<=162:return[281,e-131,5];case e<=194:return[282,e-163,5];case e<=226:return[283,e-195,5];case e<=257:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}return n}()),wr.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(e){var t;switch(!0){case 1===e:t=[0,e-1,0];break;case 2===e:t=[1,e-2,0];break;case 3===e:t=[2,e-3,0];break;case 4===e:t=[3,e-4,0];break;case e<=6:t=[4,e-5,1];break;case e<=8:t=[5,e-7,1];break;case e<=12:t=[6,e-9,2];break;case e<=16:t=[7,e-13,2];break;case e<=24:t=[8,e-17,3];break;case e<=32:t=[9,e-25,3];break;case e<=48:t=[10,e-33,4];break;case e<=64:t=[11,e-49,4];break;case e<=96:t=[12,e-65,5];break;case e<=128:t=[13,e-97,5];break;case e<=192:t=[14,e-129,6];break;case e<=256:t=[15,e-193,6];break;case e<=384:t=[16,e-257,7];break;case e<=512:t=[17,e-385,7];break;case e<=768:t=[18,e-513,8];break;case e<=1024:t=[19,e-769,8];break;case e<=1536:t=[20,e-1025,9];break;case e<=2048:t=[21,e-1537,9];break;case e<=3072:t=[22,e-2049,10];break;case e<=4096:t=[23,e-3073,10];break;case e<=6144:t=[24,e-4097,11];break;case e<=8192:t=[25,e-6145,11];break;case e<=12288:t=[26,e-8193,12];break;case e<=16384:t=[27,e-12289,12];break;case e<=24576:t=[28,e-16385,13];break;case e<=32768:t=[29,e-24577,13];break;default:throw"invalid distance"}return t},wr.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var e,t=this.length,n=this.backwardDistance,r=[],i=0;return e=wr.RawDeflate.Lz77Match.LengthCodeTable[t],r[i++]=65535&e,r[i++]=e>>16&255,r[i++]=e>>24,e=this.getDistanceCode_(n),r[i++]=e[0],r[i++]=e[1],r[i++]=e[2],r},wr.RawDeflate.prototype.lz77=function(e){var t,n,r,i,a,o,s,u,c,l={},h=wr.RawDeflate.WindowSize,f=new Uint16Array(2*e.length),p=0,d=0,g=new Uint32Array(286),v=new Uint32Array(30),m=this.lazy;function y(e,t){var n,r,i=e.toLz77Array();for(n=0,r=i.length;n<r;++n)f[p++]=i[n];g[i[0]]++,v[i[3]]++,d=e.length+t-1,u=null}for(g[256]=1,t=0,n=e.length;t<n;++t){for(a=0,r=0,i=wr.RawDeflate.Lz77MinLength;r<i&&t+r!==n;++r)a=a<<8|e[t+r];if(void 0===l[a]&&(l[a]=[]),o=l[a],d-- >0)o.push(t);else{for(;o.length>0&&t-o[0]>h;)o.shift();if(t+wr.RawDeflate.Lz77MinLength>=n){for(u&&y(u,-1),r=0,i=n-t;r<i;++r)c=e[t+r],f[p++]=c,++g[c];break}o.length>0?(s=this.searchLongestMatch_(e,t,o),u?u.length<s.length?(c=e[t-1],f[p++]=c,++g[c],y(s,0)):y(u,-1):s.length<m?u=s:y(s,0)):u?y(u,-1):(c=e[t],f[p++]=c,++g[c]),o.push(t)}}return f[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=v,f.subarray(0,p)},wr.RawDeflate.prototype.searchLongestMatch_=function(e,t,n){var r,i,a,o,s,u,c=0,l=e.length;e:for(o=0,u=n.length;o<u;o++){if(r=n[u-o-1],a=wr.RawDeflate.Lz77MinLength,c>wr.RawDeflate.Lz77MinLength){for(s=c;s>wr.RawDeflate.Lz77MinLength;s--)if(e[r+s-1]!==e[t+s-1])continue e;a=c}for(;a<wr.RawDeflate.Lz77MaxLength&&t+a<l&&e[r+a]===e[t+a];)++a;if(a>c&&(i=r,c=a),a===wr.RawDeflate.Lz77MaxLength)break}return new wr.RawDeflate.Lz77Match(c,t-i)},wr.RawDeflate.prototype.getTreeSymbols_=function(e,t,n,r){var i,a,o,s,u,c,l=new Uint32Array(e+n),h=new Uint32Array(316),f=new Uint8Array(19);for(a=0,i=0;i<e;i++)l[a++]=t[i];for(i=0;i<n;i++)l[a++]=r[i];for(u=0,i=0,s=l.length;i<s;i+=a){for(a=1;i+a<s&&l[i+a]===l[i];++a);if(o=a,0===l[i])if(o<3)for(;o-- >0;)h[u++]=0,f[0]++;else for(;o>0;)(c=o<138?o:138)>o-3&&c<o&&(c=o-3),c<=10?(h[u++]=17,h[u++]=c-3,f[17]++):(h[u++]=18,h[u++]=c-11,f[18]++),o-=c;else if(h[u++]=l[i],f[l[i]]++,--o<3)for(;o-- >0;)h[u++]=l[i],f[l[i]]++;else for(;o>0;)(c=o<6?o:6)>o-3&&c<o&&(c=o-3),h[u++]=16,h[u++]=c-3,f[16]++,o-=c}return{codes:h.subarray(0,u),freqs:f}},wr.RawDeflate.prototype.getLengths_=function(e,t){var n,r,i,a,o,s=e.length,u=new wr.Heap(2*wr.RawDeflate.HUFMAX),c=new Uint8Array(s);for(a=0;a<s;++a)e[a]>0&&u.push(a,e[a]);if(n=new Array(u.length/2),r=new Uint32Array(u.length/2),1===n.length)return c[u.pop().index]=1,c;for(a=0,o=u.length/2;a<o;++a)n[a]=u.pop(),r[a]=n[a].value;for(i=this.reversePackageMerge_(r,r.length,t),a=0,o=n.length;a<o;++a)c[n[a].index]=i[a];return c},wr.RawDeflate.prototype.reversePackageMerge_=function(e,t,n){var r,i,a,o,s,u=new Uint16Array(n),c=new Uint8Array(n),l=new Uint8Array(t),h=new Array(n),f=new Array(n),p=new Array(n),d=(1<<n)-t,g=1<<n-1;function v(e){var n=f[e][p[e]];n===t?(v(e+1),v(e+1)):--l[n],++p[e]}for(u[n-1]=t,i=0;i<n;++i)d<g?c[i]=0:(c[i]=1,d-=g),d<<=1,u[n-2-i]=(u[n-1-i]/2|0)+t;for(u[0]=c[0],h[0]=new Array(u[0]),f[0]=new Array(u[0]),i=1;i<n;++i)u[i]>2*u[i-1]+c[i]&&(u[i]=2*u[i-1]+c[i]),h[i]=new Array(u[i]),f[i]=new Array(u[i]);for(r=0;r<t;++r)l[r]=n;for(a=0;a<u[n-1];++a)h[n-1][a]=e[a],f[n-1][a]=a;for(r=0;r<n;++r)p[r]=0;for(1===c[n-1]&&(--l[0],++p[n-1]),i=n-2;i>=0;--i){for(r=0,o=0,s=p[i+1],a=0;a<u[i];a++)(o=h[i+1][s]+h[i+1][s+1])>e[r]?(h[i][a]=o,f[i][a]=t,s+=2):(h[i][a]=e[r],f[i][a]=r,++r);p[i]=0,1===c[i]&&v(i)}return l},wr.RawDeflate.prototype.getCodesFromLengths_=function(e){var t,n,r,i,a=new Uint16Array(e.length),o=[],s=[],u=0;for(t=0,n=e.length;t<n;t++)o[e[t]]=1+(0|o[e[t]]);for(t=1,n=wr.RawDeflate.MaxCodeLength;t<=n;t++)s[t]=u,u+=0|o[t],u<<=1;for(t=0,n=e.length;t<n;t++)for(u=s[e[t]],s[e[t]]+=1,a[t]=0,r=0,i=e[t];r<i;r++)a[t]=a[t]<<1|1&u,u>>>=1;return a},wr.Unzip=function(e,t){t=t||{},this.input=e instanceof Array?new Uint8Array(e):e,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=t.verify||!1,this.password=t.password},wr.Unzip.CompressionMethod=wr.Zip.CompressionMethod,wr.Unzip.FileHeaderSignature=wr.Zip.FileHeaderSignature,wr.Unzip.LocalFileHeaderSignature=wr.Zip.LocalFileHeaderSignature,wr.Unzip.CentralDirectorySignature=wr.Zip.CentralDirectorySignature,wr.Unzip.FileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},wr.Unzip.FileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==wr.Unzip.FileHeaderSignature[0]||e[t++]!==wr.Unzip.FileHeaderSignature[1]||e[t++]!==wr.Unzip.FileHeaderSignature[2]||e[t++]!==wr.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=e[t++],this.os=e[t++],this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.fileCommentLength=e[t++]|e[t++]<<8,this.diskNumberStart=e[t++]|e[t++]<<8,this.internalFileAttributes=e[t++]|e[t++]<<8,this.externalFileAttributes=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,this.relativeOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.comment=e.subarray(t,t+this.fileCommentLength),this.length=t-this.offset},wr.Unzip.LocalFileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},wr.Unzip.LocalFileHeader.Flags=wr.Zip.Flags,wr.Unzip.LocalFileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==wr.Unzip.LocalFileHeaderSignature[0]||e[t++]!==wr.Unzip.LocalFileHeaderSignature[1]||e[t++]!==wr.Unzip.LocalFileHeaderSignature[2]||e[t++]!==wr.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.length=t-this.offset},wr.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var e,t=this.input;for(e=t.length-12;e>0;--e)if(t[e]===wr.Unzip.CentralDirectorySignature[0]&&t[e+1]===wr.Unzip.CentralDirectorySignature[1]&&t[e+2]===wr.Unzip.CentralDirectorySignature[2]&&t[e+3]===wr.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=e);throw new Error("End of Central Directory Record not found")},wr.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var e,t=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),e=this.eocdrOffset,t[e++]!==wr.Unzip.CentralDirectorySignature[0]||t[e++]!==wr.Unzip.CentralDirectorySignature[1]||t[e++]!==wr.Unzip.CentralDirectorySignature[2]||t[e++]!==wr.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=t[e++]|t[e++]<<8,this.startDisk=t[e++]|t[e++]<<8,this.totalEntriesThisDisk=t[e++]|t[e++]<<8,this.totalEntries=t[e++]|t[e++]<<8,this.centralDirectorySize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.centralDirectoryOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.commentLength=t[e++]|t[e++]<<8,this.comment=t.subarray(e,e+this.commentLength)},wr.Unzip.prototype.parseFileHeader=function(){var e,t,n,r,i=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),e=this.centralDirectoryOffset,n=0,r=this.totalEntries;n<r;++n)(t=new wr.Unzip.FileHeader(this.input,e)).parse(),e+=t.length,i[n]=t,a[t.filename]=n;if(this.centralDirectorySize<e-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=a}},wr.Unzip.prototype.getFileData=function(e,t){t=t||{};var n,r,i,a,o,s,u,c,l=this.input,h=this.fileHeaderList;if(h||this.parseFileHeader(),void 0===h[e])throw new Error("wrong index");if(r=h[e].relativeOffset,(n=new wr.Unzip.LocalFileHeader(this.input,r)).parse(),r+=n.length,i=n.compressedSize,0!=(n.flags&wr.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!t.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(t.password||this.password),u=r,c=r+12;u<c;++u)this.decode(s,l[u]);for(u=r+=12,c=r+(i-=12);u<c;++u)l[u]=this.decode(s,l[u])}switch(n.compression){case wr.Unzip.CompressionMethod.STORE:a=this.input.subarray(r,r+i);break;case wr.Unzip.CompressionMethod.DEFLATE:a=new wr.RawInflate(this.input,{index:r,bufferSize:n.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(o=wr.CRC32.calc(a),n.crc32!==o))throw new Error("wrong crc: file=0x"+n.crc32.toString(16)+", data=0x"+o.toString(16));return a},wr.Unzip.prototype.getFilenames=function(){var e,t,n,r=[];for(this.fileHeaderList||this.parseFileHeader(),e=0,t=(n=this.fileHeaderList).length;e<t;++e)r[e]=n[e].filename;return r},wr.Unzip.prototype.decompress=function(e,t){var n;if(this.filenameToIndex||this.parseFileHeader(),void 0===(n=this.filenameToIndex[e]))throw new Error(e+" not found");return this.getFileData(n,t)},wr.Unzip.prototype.setPassword=function(e){this.password=e},wr.Unzip.prototype.decode=function(e,t){return t^=this.getByte(e),this.updateKeys(e,t),t},wr.Unzip.prototype.updateKeys=wr.Zip.prototype.updateKeys,wr.Unzip.prototype.createDecryptionKey=wr.Zip.prototype.createEncryptionKey,wr.Unzip.prototype.getByte=wr.Zip.prototype.getByte,wr.Util.stringToByteArray=function(e){var t,n,r=e.split("");for(t=0,n=r.length;t<n;t++)r[t]=(255&r[t].charCodeAt(0))>>>0;return r},wr.Adler32=function(e){return"string"==typeof e&&(e=wr.Util.stringToByteArray(e)),wr.Adler32.update(1,e)},wr.Adler32.update=function(e,t){for(var n,r=65535&e,i=e>>>16&65535,a=t.length,o=0;a>0;){a-=n=a>wr.Adler32.OptimizationParameter?wr.Adler32.OptimizationParameter:a;do{i+=r+=t[o++]}while(--n);r%=65521,i%=65521}return(i<<16|r)>>>0},wr.Adler32.OptimizationParameter=1024,wr.BitStream=function(e,t){if(this.index="number"==typeof t?t:0,this.bitindex=0,this.buffer=e instanceof Uint8Array?e:new Uint8Array(wr.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},wr.BitStream.DefaultBlockSize=32768,wr.BitStream.prototype.expandBuffer=function(){var e=this.buffer,t=e.length,n=new Uint8Array(t<<1);return n.set(e),this.buffer=n},wr.BitStream.prototype.writeBits=function(e,t,n){var r,i=this.buffer,a=this.index,o=this.bitindex,s=i[a];if(n&&t>1&&(e=t>8?function(e){return wr.BitStream.ReverseTable[255&e]<<24|wr.BitStream.ReverseTable[e>>>8&255]<<16|wr.BitStream.ReverseTable[e>>>16&255]<<8|wr.BitStream.ReverseTable[e>>>24&255]}(e)>>32-t:wr.BitStream.ReverseTable[e]>>8-t),t+o<8)s=s<<t|e,o+=t;else for(r=0;r<t;++r)s=s<<1|e>>t-r-1&1,8==++o&&(o=0,i[a++]=wr.BitStream.ReverseTable[s],s=0,a===i.length&&(i=this.expandBuffer()));i[a]=s,this.buffer=i,this.bitindex=o,this.index=a},wr.BitStream.prototype.finish=function(){var e=this.buffer,t=this.index;return this.bitindex>0&&(e[t]<<=8-this.bitindex,e[t]=wr.BitStream.ReverseTable[e[t]],t++),e.subarray(0,t)},wr.BitStream.ReverseTable=function(){var e,t=new Uint8Array(256);for(e=0;e<256;++e)t[e]=function(e){var t=e,n=7;for(e>>>=1;e;e>>>=1)t<<=1,t|=1&e,--n;return(t<<n&255)>>>0}(e);return t}(),wr.CRC32.calc=function(e,t,n){return wr.CRC32.update(e,0,t,n)},wr.CRC32.update=function(e,t,n,r){var i=wr.CRC32.Table,a="number"==typeof n?n:n=0,o="number"==typeof r?r:e.length;for(t^=4294967295,a=7&o;a--;++n)t=t>>>8^i[255&(t^e[n])];for(a=o>>3;a--;n+=8)t=(t=(t=(t=(t=(t=(t=(t=t>>>8^i[255&(t^e[n])])>>>8^i[255&(t^e[n+1])])>>>8^i[255&(t^e[n+2])])>>>8^i[255&(t^e[n+3])])>>>8^i[255&(t^e[n+4])])>>>8^i[255&(t^e[n+5])])>>>8^i[255&(t^e[n+6])])>>>8^i[255&(t^e[n+7])];return(4294967295^t)>>>0},wr.CRC32.single=function(e,t){return(wr.CRC32.Table[255&(e^t)]^e>>>8)>>>0},wr.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],wr.CRC32.Table=new Uint32Array(wr.CRC32.Table_),wr.Deflate=function(e,t){this.input=e,this.output=new Uint8Array(wr.Deflate.DefaultBufferSize),this.compressionType=wr.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var n,r={};for(n in!t&&(t={})||"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t)r[n]=t[n];r.outputBuffer=this.output,this.rawDeflate=new wr.RawDeflate(this.input,r)},wr.Deflate.DefaultBufferSize=32768,wr.Deflate.CompressionType=wr.RawDeflate.CompressionType,wr.Deflate.compress=function(e,t){return new wr.Deflate(e,t).compress()},wr.Deflate.prototype.compress=function(){var e,t,n,r,i,a,o,s=0;switch(o=this.output,e=wr.CompressionMethod.DEFLATE){case wr.CompressionMethod.DEFLATE:t=Math.LOG2E*Math.log(wr.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(n=t<<4|e,o[s++]=n,e){case wr.CompressionMethod.DEFLATE:switch(this.compressionType){case wr.Deflate.CompressionType.NONE:i=0;break;case wr.Deflate.CompressionType.FIXED:i=1;break;case wr.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return r=i<<6|0,r|=31-(256*n+r)%31,o[s++]=r,a=wr.Adler32(this.input),this.rawDeflate.op=s,s=(o=this.rawDeflate.compress()).length,(o=new Uint8Array(o.buffer)).length<=s+4&&(this.output=new Uint8Array(o.length+4),this.output.set(o),o=this.output),(o=o.subarray(0,s+4))[s++]=a>>24&255,o[s++]=a>>16&255,o[s++]=a>>8&255,o[s++]=255&a,o},kr="undefined"==typeof btoa?Un:btoa;const Cr=function(e){return e.split(/\n|\r\n|\r/g)};function Rr(e,t){var n,r,i=[],a=e.length,o=0,s=!1;if(a>0)for(i[o]=e.charAt(0),n=1;n<a;n++)'"'===(r=e.charAt(n))?s=!s:s||r!==t?i[o]+=r:i[++o]="";return i}function Er(e){return e.includes("googleapis")&&!e.includes("urlshortener")||Ar(e)||Tr(e)}function Ar(e){return e.startsWith("gs://")||e.startsWith("https://www.googleapis.com/storage")||e.startsWith("https://storage.cloud.google.com")||e.startsWith("https://storage.googleapis.com")}function Tr(e){return e.indexOf("drive.google.com")>=0||e.indexOf("www.googleapis.com/drive")>0}function Mr(e){var t,n,r,i,a,o;return t=e.indexOf("/",5),i=e.indexOf("?"),t<0?(console.log("Invalid gs url: "+e),e):(n=e.substring(5,t),a=i<0?e.substring(t+1):e.substring(t+1,i),r=encodeURIComponent(a),i>0&&(o=e.substring(i)),"https://www.googleapis.com/storage/v1/b/"+n+"/o/"+r+(o?o+"&alt=media":"?alt=media"))}function Lr(e){var t=Ir(e);return t?"https://www.googleapis.com/drive/v3/files/"+t+"?alt=media&supportsTeamDrives=true":e}function Ir(e){var t,n;if(e.includes("/open?id=")){if(t=e.indexOf("/open?id=")+9,n=e.indexOf("&"),t>0&&n>t)return e.substring(t,n);if(t>0)return e.substring(t)}else if(e.includes("/file/d/"))return t=e.indexOf("/file/d/")+8,n=e.lastIndexOf("/"),e.substring(t,n)}async function Pr(e){if(Nr())return void console.warn("oAuth has already been initialized");gapi.apiKey=e.apiKey;const t=Object.assign({},e);return t.scope||(t.scope="profile"),e.client_id||(e.client_id=e.clientId),await async function(e){return new Promise((function(t,n){gapi.load(e,{callback:t,onerror:n})}))}("auth2"),new Promise((function(e,n){gapi.auth2.init(t).then(e,n)}))}function Nr(){return"undefined"!=typeof gapi&&gapi.auth2&&gapi.auth2.getAuthInstance()}let Or=!1;async function Fr(e){if("undefined"==typeof gapi)throw Error("Google authentication requires the 'gapi' library");if(!gapi.auth2)throw Error("Google 'auth2' has not been initialized");if(Or)return new Promise((function(t,n){let r;r=setInterval(()=>{try{!1===Or&&(t(Fr(e)),clearInterval(r))}catch(e){clearInterval(r),n(e)}},100)}));Or=!0;try{let t,n=gapi.auth2.getAuthInstance().currentUser.get();if(n.isSignedIn()){n.hasGrantedScopes(e)||await n.grant({scope:e});const{access_token:r,expires_at:i}=n.getAuthResponse();if(Date.now()<i-3e5)t={access_token:r,expires_at:i};else{const{access_token:e,expires_at:r}=n.reloadAuthResponse();t={access_token:e,expires_at:r}}}else{n=await async function(e){const t=new gapi.auth2.SigninOptionsBuilder;return t.setPrompt("select_account"),t.setScope(e),gapi.auth2.getAuthInstance().signIn(t)}(e);const{access_token:r,expires_at:i}=n.getAuthResponse();t={access_token:r,expires_at:i}}return t}finally{Or=!1}}function Dr(e){return Tr(e)?"https://www.googleapis.com/auth/drive.file":Ar(e)?"https://www.googleapis.com/auth/devstorage.read_only":"https://www.googleapis.com/auth/userinfo.profile"}function Br(){return gapi.apiKey}async function zr(e){let t="https://www.googleapis.com/drive/v3/files/"+Ir(e)+"?supportsTeamDrives=true";const n=Br();n&&(t+="&key="+n);const r=await fetch(t);let i=await r.json();if(i.error&&404===i.error.code){const{access_token:e}=await Fr("https://www.googleapis.com/auth/drive.readonly");if(!e)throw Error(i.error);{const n=await fetch(t,{headers:{Authorization:`Bearer ${e}`}});if(i=await n.json(),i.error)throw Error(i.error)}}return i}function Ur(e){const t=e.split(","),n=t[0].split(":")[1];let r=t[1];r=n.indexOf("base64")>=0?atob(r):decodeURI(r);const i=new Uint8Array(r.length);for(let e=0;e<r.length;e++)i[e]=r.charCodeAt(e);let a;return a=n.indexOf("gzip")>0?new wr.Gunzip(i).decompress():i,a}function Hr(e){for(var t=jr,n=t.parser.loose.exec(e),r={},i=14;i--;)r[t.key[i]]=n[i]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,(function(e,n,i){n&&(r[t.q.name][n]=i)})),r}"object"==typeof r&&"undefined"==typeof window&&(t.atob=function(e){return n.from(e,"base64").toString("binary")});const jr={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};async function qr(e){return"function"==typeof e?e():e}function Vr(e){if(e instanceof File)return e.name;if(Sr(e)){let t=e.lastIndexOf("/"),n=t<0?e:e.substr(t+1);return t=n.indexOf("?"),t>0&&(n=n.substr(0,t)),n}throw Error(`Expected File or string, got ${typeof e}`)}function Gr(e){return e instanceof File}function Wr(e,t){const n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}const $r={gwascatalog:{fields:["bin","chr","start","end","name","pubMedID","author","pubDate","journal","title","trait","initSample","replSample","region","genes","riskAllele","riskAlFreq","pValue","pValueDesc","orOrBeta","ci95","platform","cnv"]},wgrna:{fields:["bin","chr","start","end","name","score","strand","thickStart","thickEnd","type"]},cpgislandext:{fields:["bin","chr","start","end","name","length","cpgNum","gcNum","perCpg","perGc","obsExp"]},clinVarMain:{fields:["chr1","start","end","name","score","strand","thickStart","thickEnd","reserved","blockCount","blockSizes","chromStarts","origName","clinSign","reviewStatus","type","geneId","snpId","nsvId","rcvAcc","testedInGtr","phenotypeList","phenotype","origin","assembly","cytogenetic","hgvsCod","hgvsProt","numSubmit","lastEval","guidelines","otherIds"]}},Yr=new Set(["narrowpeak","broadpeak","regionpeak","peaks","bedgraph","wig","gff3","gff","gtf","fusionjuncspan","refflat","seg","aed","bed","vcf","bb","bigbed","bw","bigwig","bam","tdf","refgene","genepred","genepredext","bedpe","bp","snp","rmsk","cram","gwas"]);function Xr(e){var t,n;if((e=e.toLowerCase()).endsWith("refgene.txt.gz")||e.endsWith("refgene.txt.bgz")||e.endsWith("refgene.txt")||e.endsWith("refgene.sorted.txt.gz")||e.endsWith("refgene.sorted.txt.bgz"))return"refgene";switch((t=e.indexOf("?"))>0&&(e=e.substr(0,t)),e.endsWith(".gz")&&(e=e.substr(0,e.length-3)),(e.endsWith(".txt")||e.endsWith(".tab")||e.endsWith(".bgz"))&&(e=e.substr(0,e.length-4)),n=(t=e.lastIndexOf("."))<0?e:e.substr(t+1)){case"bw":return"bigwig";case"bb":return"bigbed";default:return Yr.has(n)?n:void 0}}const Zr=function(e,t){if(0!==e.length){var n=Math.floor(e.length*((100-t)/100));return 0===n?(e.sort((function(e,t){return t-e})),e[n]):function(e,t){var n,r=new Jr;for(n=0;n<e.length;n++){var i=e[n];(r.content.length<t||i>r.content[0])&&(r.content.length===t&&r.pop(),r.push(i))}return r.content[0]}(e,n)}},Kr=function(e,t,n){return Math.min(Math.max(e,t),n)},Qr=function(e){return Math.log(e)/Math.LN2};function Jr(){this.content=[]}Jr.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},remove:function(e){for(var t=this.content.length,n=0;n<t;n++)if(this.content[n]===e){var r=this.content.pop();if(n===t-1)break;this.content[n]=r,this.bubbleUp(n),this.sinkDown(n);break}},size:function(){return this.content.length},bubbleUp:function(e){for(var t=this.content[e],n=t;e>0;){var r=Math.floor((e+1)/2)-1,i=this.content[r];if(n>=i)break;this.content[r]=t,this.content[e]=i,e=r}},sinkDown:function(e){for(var t=this.content.length,n=this.content[e],r=n;;){var i=2*(e+1),a=i-1,o=null;if(a<t){var s=this.content[a],u=s;s<r&&(o=a)}if(i<t&&this.content[i]<(null==o?r:u)&&(o=i),null==o)break;this.content[e]=this.content[o],this.content[o]=n,e=o}}};const ei={rgbListFromHSV:()=>{let e=[];for(let t=1;t>=.5;t-=.1)for(let n=0;n<1;n+=1/28){const r="rgb("+ei.hsvToRgb(n,1,t).join(",")+")";e.push(r)}return e.pop(),e.push(ei.rgbColor(16,16,16)),e},rgbToHex:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(null!==t)return"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")"},hsvToRgb:function(e,t,n){var r,i,a,o=Math.floor(6*e),s=6*e-o,u=n*(1-t),c=n*(1-s*t),l=n*(1-(1-s)*t);switch(o%6){case 0:r=n,i=l,a=u;break;case 1:r=c,i=n,a=u;break;case 2:r=u,i=n,a=l;break;case 3:r=u,i=c,a=n;break;case 4:r=l,i=u,a=n;break;case 5:r=n,i=u,a=c}return[Math.floor(255*r),Math.floor(255*i),Math.floor(255*a)]},hslToRgb:function(e,t,n){var r,i,a;if(0===t)r=i=a=n;else{var o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;r=ei.hue2rgb(s,o,e+1/3),i=ei.hue2rgb(s,o,e),a=ei.hue2rgb(s,o,e-1/3)}return[255*r,255*i,255*a]},hue2rgb:(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),rgbaColor:function(e,t,n,r){return"rgba("+(e=Kr(e,0,255))+","+(t=Kr(t,0,255))+","+(n=Kr(n,0,255))+","+(r=Kr(r,0,1))+")"},rgbColor:function(e,t,n){return"rgb("+(e=Kr(e,0,255))+","+(t=Kr(t,0,255))+","+(n=Kr(n,0,255))+")"},greyScale:function(e){var t=Kr(e,0,255);return"rgb("+t+","+t+","+t+")"},randomGrey:function(e,t){e=Kr(e,0,255),t=Kr(t,0,255);var n=Math.round(Math.random(e,t)).toString(10);return"rgb("+n+","+n+","+n+")"},randomRGB:function(e,t){return e=Kr(e,0,255),t=Kr(t,0,255),"rgb("+Math.round(Math.random(e,t)).toString(10)+","+Math.round(Math.random(e,t)).toString(10)+","+Math.round(Math.random(e,t)).toString(10)+")"},randomRGBConstantAlpha:function(e,t,n){return e=Kr(e,0,255),t=Kr(t,0,255),"rgba("+Math.round(Math.random(e,t)).toString(10)+","+Math.round(Math.random(e,t)).toString(10)+","+Math.round(Math.random(e,t)).toString(10)+","+n+")"},addAlpha:function(e,t){if("0"===e||"."===e)e="rgb(0,0,0)";else{const t=this.colorNameToHex(e);t&&(e=t)}var n=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);if(e.startsWith("rgba")){const n=e.lastIndexOf(",");return e.substring(0,n+1)+t.toString()+")"}return n&&(e=ei.hexToRgb(e)),e.startsWith("rgb")?e.replace("rgb","rgba").replace(")",", "+t+")"):(console.log(e+" is not an rgb style string"),e)},getCompositeColor:function(e,t,n){return"rgb("+Math.floor(n*t[0]+(1-n)*e[0])+","+Math.floor(n*t[1]+(1-n)*e[1])+","+Math.floor(n*t[2]+(1-n)*e[2])+")"},createColorString:function(e){return(e=function(e){return void 0===e?e:((e.startsWith("'")||e.startsWith('"'))&&(e=e.substring(1)),(e.endsWith("'")||e.endsWith('"'))&&(e=e.substring(0,e.length-1)),e)}(e)).includes(",")?e.startsWith("rgb")?e:"rgb("+e+")":e},darkenLighten:function(e,t){let n,r=this.colorNameToHex(e);n=r?ei.hexToRgb(r):e.startsWith("rgb(")?e:ei.hexToRgb(e);const i=n.replace(")","").substring(4).split(","),a=Math.max(0,Math.min(255,Number.parseInt(i[0].trim())+t)),o=Math.max(0,Math.min(255,Number.parseInt(i[1].trim())+t)),s=Math.max(0,Math.min(255,Number.parseInt(i[2].trim())+t));return"rgb("+a.toString()+","+o.toString()+","+s.toString()+")"},colorNameToHex:function(e){return{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",darkgrey:"#a9a9a9",darkslategrey:"#2f4f4f",dimgrey:"#696969",grey:"#808080",lightgray:"#d3d3d3",lightslategrey:"#778899",slategrey:"#708090"}[e]}};let ti;function ni(e,t){t.addEventListener("mousedown",ri.bind(e))}function ri(e){e.stopPropagation(),e.preventDefault(),function(e){if(!e.getClientRects().length)return{top:0,left:0};const t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;t.top,n.pageYOffset,t.left,n.pageXOffset}(this);const t=ii.bind(this),n=ai.bind(this),r=getComputedStyle(this),i=parseInt(r.top.replace("px","")),a=parseInt(r.left.replace("px",""));ti={dragFunction:t,dragEndFunction:n,screenX:e.screenX,screenY:e.screenY,top:i,left:a},document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),document.addEventListener("mouseleave",n),document.addEventListener("mouseexit",n)}function ii(e){if(!ti)return void console.log("No drag data!");e.stopPropagation(),e.preventDefault();const t=e.screenX-ti.screenX,n=e.screenY-ti.screenY;this.style.left=`${ti.left+t}px`,this.style.top=`${ti.top+n}px`}function ai(e){if(!ti)return void console.log("No drag data!");e.stopPropagation(),e.preventDefault();const t=ti.dragFunction,n=ti.dragEndFunction;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n),document.removeEventListener("mouseleave",n),document.removeEventListener("mouseexit",n),ti=void 0}var oi,si=Object.keys||function(e){return be(e,we)},ui=u?Object.defineProperties:function(e,t){T(e);for(var n,r=si(t),i=r.length,a=0;i>a;)L.f(e,n=r[a++],t[n]);return e},ci=se("document","documentElement"),li=$("IE_PROTO"),hi=function(){},fi=function(e){return"<script>"+e+"<\/script>"},pi=function(){try{oi=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;pi=oi?function(e){e.write(fi("")),e.close();var t=e.parentWindow.Object;return e=null,t}(oi):((t=C("iframe")).style.display="none",ci.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(fi("document.F=Object")),e.close(),e.F);for(var n=we.length;n--;)delete pi.prototype[we[n]];return pi()};Y[li]=!0;var di=Object.create||function(e,t){var n;return null!==e?(hi.prototype=T(e),n=new hi,hi.prototype=null,n[li]=e):n=pi(),void 0===t?n:ui(n,t)},gi=ke.f,vi={}.toString,mi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],yi={f:function(e){return mi&&"[object Window]"==vi.call(e)?function(e){try{return gi(e)}catch(e){return mi.slice()}}(e):gi(y(e))}},bi={f:Ve},wi=L.f,xi=function(e){var t=ae.Symbol||(ae.Symbol={});k(t,e)||wi(t,e,{value:bi.f(e)})},ki=L.f,Si=Ve("toStringTag"),_i=function(e,t,n){e&&!k(e=n?e:e.prototype,Si)&&ki(e,Si,{configurable:!0,value:t})},Ci=Xe.forEach,Ri=$("hidden"),Ei=Ve("toPrimitive"),Ai=re.set,Ti=re.getterFor("Symbol"),Mi=Object.prototype,Li=o.Symbol,Ii=se("JSON","stringify"),Pi=A.f,Ni=L.f,Oi=yi.f,Fi=h.f,Di=j("symbols"),Bi=j("op-symbols"),zi=j("string-to-symbol-registry"),Ui=j("symbol-to-string-registry"),Hi=j("wks"),ji=o.QObject,qi=!ji||!ji.prototype||!ji.prototype.findChild,Vi=u&&s((function(){return 7!=di(Ni({},"a",{get:function(){return Ni(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Pi(Mi,t);r&&delete Mi[t],Ni(e,t,n),r&&e!==Mi&&Ni(Mi,t,r)}:Ni,Gi=function(e,t){var n=Di[e]=di(Li.prototype);return Ai(n,{type:"Symbol",tag:e,description:t}),u||(n.description=t),n},Wi=Ue?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Li},$i=function(e,t,n){e===Mi&&$i(Bi,t,n),T(e);var r=w(t,!0);return T(n),k(Di,r)?(n.enumerable?(k(e,Ri)&&e[Ri][r]&&(e[Ri][r]=!1),n=di(n,{enumerable:f(0,!1)})):(k(e,Ri)||Ni(e,Ri,f(1,{})),e[Ri][r]=!0),Vi(e,r,n)):Ni(e,r,n)},Yi=function(e,t){T(e);var n=y(t),r=si(n).concat(Qi(n));return Ci(r,(function(t){u&&!Xi.call(n,t)||$i(e,t,n[t])})),e},Xi=function(e){var t=w(e,!0),n=Fi.call(this,t);return!(this===Mi&&k(Di,t)&&!k(Bi,t))&&(!(n||!k(this,t)||!k(Di,t)||k(this,Ri)&&this[Ri][t])||n)},Zi=function(e,t){var n=y(e),r=w(t,!0);if(n!==Mi||!k(Di,r)||k(Bi,r)){var i=Pi(n,r);return!i||!k(Di,r)||k(n,Ri)&&n[Ri][r]||(i.enumerable=!0),i}},Ki=function(e){var t=Oi(y(e)),n=[];return Ci(t,(function(e){k(Di,e)||k(Y,e)||n.push(e)})),n},Qi=function(e){var t=e===Mi,n=Oi(t?Bi:y(e)),r=[];return Ci(n,(function(e){!k(Di,e)||t&&!k(Mi,e)||r.push(Di[e])})),r};if(ze||(ie((Li=function(){if(this instanceof Li)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=G(e),n=function(e){this===Mi&&n.call(Bi,e),k(this,Ri)&&k(this[Ri],t)&&(this[Ri][t]=!1),Vi(this,t,f(1,e))};return u&&qi&&Vi(Mi,t,{configurable:!0,set:n}),Gi(t,e)}).prototype,"toString",(function(){return Ti(this).tag})),ie(Li,"withoutSetter",(function(e){return Gi(G(e),e)})),h.f=Xi,L.f=$i,A.f=Zi,ke.f=yi.f=Ki,Se.f=Qi,bi.f=function(e){return Gi(Ve(e),e)},u&&(Ni(Li.prototype,"description",{configurable:!0,get:function(){return Ti(this).description}}),ie(Mi,"propertyIsEnumerable",Xi,{unsafe:!0}))),Ne({global:!0,wrap:!0,forced:!ze,sham:!ze},{Symbol:Li}),Ci(si(Hi),(function(e){xi(e)})),Ne({target:"Symbol",stat:!0,forced:!ze},{for:function(e){var t=String(e);if(k(zi,t))return zi[t];var n=Li(t);return zi[t]=n,Ui[n]=t,n},keyFor:function(e){if(!Wi(e))throw TypeError(e+" is not a symbol");if(k(Ui,e))return Ui[e]},useSetter:function(){qi=!0},useSimple:function(){qi=!1}}),Ne({target:"Object",stat:!0,forced:!ze,sham:!u},{create:function(e,t){return void 0===t?di(e):Yi(di(e),t)},defineProperty:$i,defineProperties:Yi,getOwnPropertyDescriptor:Zi}),Ne({target:"Object",stat:!0,forced:!ze},{getOwnPropertyNames:Ki,getOwnPropertySymbols:Qi}),Ne({target:"Object",stat:!0,forced:s((function(){Se.f(1)}))},{getOwnPropertySymbols:function(e){return Se.f(De(e))}}),Ii){var Ji=!ze||s((function(){var e=Li();return"[null]"!=Ii([e])||"{}"!=Ii({a:e})||"{}"!=Ii(Object(e))}));Ne({target:"JSON",stat:!0,forced:Ji},{stringify:function(e,t,n){for(var r,i=[e],a=1;arguments.length>a;)i.push(arguments[a++]);if(r=t,(b(t)||void 0!==e)&&!Wi(e))return Be(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Wi(t))return t}),i[1]=t,Ii.apply(null,i)}})}Li.prototype[Ei]||I(Li.prototype,Ei,Li.prototype.valueOf),_i(Li,"Symbol"),Y[Ri]=!0;var ea=L.f,ta=o.Symbol;if(u&&"function"==typeof ta&&(!("description"in ta.prototype)||void 0!==ta().description)){var na={},ra=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof ra?new ta(e):void 0===e?ta():ta(e);return""===e&&(na[t]=!0),t};Ce(ra,ta);var ia=ra.prototype=ta.prototype;ia.constructor=ra;var aa=ia.toString,oa="Symbol(test)"==String(ta("test")),sa=/^Symbol\((.*)\)[^)]+$/;ea(ia,"description",{configurable:!0,get:function(){var e=b(this)?this.valueOf():this,t=aa.call(e);if(k(na,e))return"";var n=oa?t.slice(7,-1):t.replace(sa,"$1");return""===n?void 0:n}}),Ne({global:!0,forced:!0},{Symbol:ra})}xi("iterator");var ua=function(e,t,n){var r=w(t);r in e?L.f(e,r,f(0,n)):e[r]=n},ca=Ve("isConcatSpreadable"),la=et>=51||!s((function(){var e=[];return e[ca]=!1,e.concat()[0]!==e})),ha=nt("concat"),fa=function(e){if(!b(e))return!1;var t=e[ca];return void 0!==t?!!t:Be(e)};Ne({target:"Array",proto:!0,forced:!la||!ha},{concat:function(e){var t,n,r,i,a,o=De(this),s=We(o,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(a=-1===t?o:arguments[t],fa(a)){if(u+(i=fe(a.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,u++)n in a&&ua(s,u,a[n])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");ua(s,u++,a)}return s.length=u,s}});var pa=Ve("unscopables"),da=Array.prototype;null==da[pa]&&L.f(da,pa,{configurable:!0,value:di(null)});var ga=function(e){da[pa][e]=!0},va=Xe.find,ma=!0,ya=ot("find");"find"in[]&&Array(1).find((function(){ma=!1})),Ne({target:"Array",proto:!0,forced:ma||!ya},{find:function(e){return va(this,e,arguments.length>1?arguments[1]:void 0)}}),ga("find");var ba,wa,xa,ka={},Sa=!s((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),_a=$("IE_PROTO"),Ca=Object.prototype,Ra=Sa?Object.getPrototypeOf:function(e){return e=De(e),k(e,_a)?e[_a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Ca:null},Ea=Ve("iterator"),Aa=!1;[].keys&&("next"in(xa=[].keys())?(wa=Ra(Ra(xa)))!==Object.prototype&&(ba=wa):Aa=!0),null==ba&&(ba={}),k(ba,Ea)||I(ba,Ea,(function(){return this}));var Ta={IteratorPrototype:ba,BUGGY_SAFARI_ITERATORS:Aa},Ma=Ta.IteratorPrototype,La=function(){return this},Ia=function(e,t,n){var r=t+" Iterator";return e.prototype=di(Ma,{next:f(1,n)}),_i(e,r,!1),ka[r]=La,e},Pa=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return T(n),function(e){if(!b(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Na=Ta.IteratorPrototype,Oa=Ta.BUGGY_SAFARI_ITERATORS,Fa=Ve("iterator"),Da=function(){return this},Ba=function(e,t,n,r,i,a,o){Ia(n,t,r);var s,u,c,l=function(e){if(e===i&&g)return g;if(!Oa&&e in p)return p[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",f=!1,p=e.prototype,d=p[Fa]||p["@@iterator"]||i&&p[i],g=!Oa&&d||l(i),v="Array"==t&&p.entries||d;if(v&&(s=Ra(v.call(new e)),Na!==Object.prototype&&s.next&&(Ra(s)!==Na&&(Pa?Pa(s,Na):"function"!=typeof s[Fa]&&I(s,Fa,Da)),_i(s,h,!0))),"values"==i&&d&&"values"!==d.name&&(f=!0,g=function(){return d.call(this)}),p[Fa]!==g&&I(p,Fa,g),ka[t]=g,i)if(u={values:l("values"),keys:a?g:l("keys"),entries:l("entries")},o)for(c in u)!Oa&&!f&&c in p||ie(p,c,u[c]);else Ne({target:t,proto:!0,forced:Oa||f},u);return u},za=re.set,Ua=re.getterFor("Array Iterator"),Ha=Ba(Array,"Array",(function(e,t){za(this,{type:"Array Iterator",target:y(e),index:0,kind:t})}),(function(){var e=Ua(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");ka.Arguments=ka.Array,ga("keys"),ga("values"),ga("entries");var ja=[].join,qa=v!=Object,Va=lt("join",",");Ne({target:"Array",proto:!0,forced:qa||!Va},{join:function(e){return ja.call(y(this),void 0===e?",":e)}});var Ga=Xe.map,Wa=nt("map"),$a=ot("map");Ne({target:"Array",proto:!0,forced:!Wa||!$a},{map:function(e){return Ga(this,e,arguments.length>1?arguments[1]:void 0)}});var Ya=nt("slice"),Xa=ot("slice",{ACCESSORS:!0,0:0,1:2}),Za=Ve("species"),Ka=[].slice,Qa=Math.max;Ne({target:"Array",proto:!0,forced:!Ya||!Xa},{slice:function(e,t){var n,r,i,a=y(this),o=fe(a.length),s=ge(e,o),u=ge(void 0===t?o:t,o);if(Be(a)&&("function"!=typeof(n=a.constructor)||n!==Array&&!Be(n.prototype)?b(n)&&null===(n=n[Za])&&(n=void 0):n=void 0,n===Array||void 0===n))return Ka.call(a,s,u);for(r=new(void 0===n?Array:n)(Qa(u-s,0)),i=0;s<u;s++,i++)s in a&&ua(r,i,a[s]);return r.length=i,r}});var Ja=nt("splice"),eo=ot("splice",{ACCESSORS:!0,0:0,1:2}),to=Math.max,no=Math.min;Ne({target:"Array",proto:!0,forced:!Ja||!eo},{splice:function(e,t){var n,r,i,a,o,s,u=De(this),c=fe(u.length),l=ge(e,c),h=arguments.length;if(0===h?n=r=0:1===h?(n=0,r=c-l):(n=h-2,r=no(to(le(t),0),c-l)),c+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(i=We(u,r),a=0;a<r;a++)(o=l+a)in u&&ua(i,a,u[o]);if(i.length=r,n<r){for(a=l;a<c-r;a++)s=a+n,(o=a+r)in u?u[s]=u[o]:delete u[s];for(a=c;a>c-r+n;a--)delete u[a-1]}else if(n>r)for(a=c-r;a>l;a--)s=a+n-1,(o=a+r-1)in u?u[s]=u[o]:delete u[s];for(a=0;a<n;a++)u[a+l]=arguments[a+2];return u.length=c-r+n,i}});var ro=L.f,io=Function.prototype,ao=io.toString,oo=/^\s*function ([^ (]*)/;!u||"name"in io||ro(io,"name",{configurable:!0,get:function(){try{return ao.call(this).match(oo)[1]}catch(e){return""}}});var so=s((function(){Ra(1)}));Ne({target:"Object",stat:!0,forced:so,sham:!Sa},{getPrototypeOf:function(e){return Ra(De(e))}});var uo={};uo[Ve("toStringTag")]="z";var co="[object z]"===String(uo),lo=Ve("toStringTag"),ho="Arguments"==d(function(){return arguments}()),fo=co?d:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),lo))?n:ho?d(t):"Object"==(r=d(t))&&"function"==typeof t.callee?"Arguments":r},po=co?{}.toString:function(){return"[object "+fo(this)+"]"};co||ie(Object.prototype,"toString",po,{unsafe:!0});var go=function(e,t,n){var r,i;return Pa&&"function"==typeof(r=t.constructor)&&r!==n&&b(i=r.prototype)&&i!==n.prototype&&Pa(e,i),e},vo=Ve("species"),mo=function(e){var t=se(e),n=L.f;u&&t&&!t[vo]&&n(t,vo,{configurable:!0,get:function(){return this}})},yo=L.f,bo=ke.f,wo=re.set,xo=Ve("match"),ko=o.RegExp,So=ko.prototype,_o=/a/g,Co=/a/g,Ro=new ko(_o)!==_o,Eo=At.UNSUPPORTED_Y;if(u&&Ie("RegExp",!Ro||Eo||s((function(){return Co[xo]=!1,ko(_o)!=_o||ko(Co)==Co||"/a/i"!=ko(_o,"i")})))){for(var Ao=function(e,t){var n,r=this instanceof Ao,i=Bt(e),a=void 0===t;if(!r&&i&&e.constructor===Ao&&a)return e;Ro?i&&!a&&(e=e.source):e instanceof Ao&&(a&&(t=Rt.call(e)),e=e.source),Eo&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var o=go(Ro?new ko(e,t):ko(e,t),r?this:So,Ao);return Eo&&n&&wo(o,{sticky:n}),o},To=function(e){e in Ao||yo(Ao,e,{configurable:!0,get:function(){return ko[e]},set:function(t){ko[e]=t}})},Mo=bo(ko),Lo=0;Mo.length>Lo;)To(Mo[Lo++]);So.constructor=Ao,Ao.prototype=So,ie(o,"RegExp",Ao)}mo("RegExp");var Io=RegExp.prototype,Po=Io.toString,No=s((function(){return"/a/b"!=Po.call({source:"a",flags:"b"})})),Oo="toString"!=Po.name;(No||Oo)&&ie(RegExp.prototype,"toString",(function(){var e=T(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in Io)?Rt.call(e):n)}),{unsafe:!0});var Fo=on.charAt,Do=re.set,Bo=re.getterFor("String Iterator");Ba(String,"String",(function(e){Do(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=Bo(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Fo(n,r),t.index+=e.length,{value:e,done:!1})})),Jt("match",1,(function(e,t,n){return[function(t){var n=m(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=T(e),a=String(this);if(!i.global)return tn(i,a);var o=i.unicode;i.lastIndex=0;for(var s,u=[],c=0;null!==(s=tn(i,a));){var l=String(s[0]);u[c]=l,""===l&&(i.lastIndex=un(a,fe(i.lastIndex),o)),c++}return 0===c?null:u}]}));var zo=Math.max,Uo=Math.min,Ho=Math.floor,jo=/\$([$&'`]|\d\d?|<[^>]*>)/g,qo=/\$([$&'`]|\d\d?)/g;Jt("replace",2,(function(e,t,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,a=r.REPLACE_KEEPS_$0,o=i?"$":"$0";return[function(n,r){var i=m(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!i&&a||"string"==typeof r&&-1===r.indexOf(o)){var u=n(t,e,this,r);if(u.done)return u.value}var c=T(e),l=String(this),h="function"==typeof r;h||(r=String(r));var f=c.global;if(f){var p=c.unicode;c.lastIndex=0}for(var d=[];;){var g=tn(c,l);if(null===g)break;if(d.push(g),!f)break;""===String(g[0])&&(c.lastIndex=un(l,fe(c.lastIndex),p))}for(var v,m="",y=0,b=0;b<d.length;b++){g=d[b];for(var w=String(g[0]),x=zo(Uo(le(g.index),l.length),0),k=[],S=1;S<g.length;S++)k.push(void 0===(v=g[S])?v:String(v));var _=g.groups;if(h){var C=[w].concat(k,x,l);void 0!==_&&C.push(_);var R=String(r.apply(void 0,C))}else R=s(w,l,x,k,_,r);x>=y&&(m+=l.slice(y,x)+R,y=x+w.length)}return m+l.slice(y)}];function s(e,n,r,i,a,o){var s=r+e.length,u=i.length,c=qo;return void 0!==a&&(a=De(a),c=jo),t.call(o,c,(function(t,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":c=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return t;if(l>u){var h=Ho(l/10);return 0===h?t:h<=u?void 0===i[h-1]?o.charAt(1):i[h-1]+o.charAt(1):t}c=i[l-1]}return void 0===c?"":c}))}}));var Vo=Ve("iterator"),Go=Ve("toStringTag"),Wo=Ha.values;for(var $o in fn){var Yo=o[$o],Xo=Yo&&Yo.prototype;if(Xo){if(Xo[Vo]!==Wo)try{I(Xo,Vo,Wo)}catch(e){Xo[Vo]=Wo}if(Xo[Go]||I(Xo,Go,$o),fn[$o])for(var Zo in Ha)if(Xo[Zo]!==Ha[Zo])try{I(Xo,Zo,Ha[Zo])}catch(e){Xo[Zo]=Ha[Zo]}}}
/*!
	 * jQuery JavaScript Library v3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector
	 * https://jquery.com/
	 *
	 * Includes Sizzle.js
	 * https://sizzlejs.com/
	 *
	 * Copyright JS Foundation and other contributors
	 * Released under the MIT license
	 * https://jquery.org/license
	 *
	 * Date: 2018-01-20T17:24Z
	 */var Ko=[],Qo=window.document,Jo=Object.getPrototypeOf,es=Ko.slice,ts=Ko.concat,ns=Ko.push,rs=Ko.indexOf,is={},as=is.toString,os=is.hasOwnProperty,ss=os.toString,us=ss.call(Object),cs={},ls=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},hs=function(e){return null!=e&&e===e.window},fs={type:!0,src:!0,noModule:!0};function ps(e,t,n){var r,i=(t=t||Qo).createElement("script");if(i.text=e,n)for(r in fs)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function ds(e){return null==e?e+"":"object"===vn(e)||"function"==typeof e?is[as.call(e)]||"object":vn(e)}var gs="3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector",vs=function e(t,n){return new e.fn.init(t,n)},ms=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function ys(e){var t=!!e&&"length"in e&&e.length,n=ds(e);return!ls(e)&&!hs(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}vs.fn=vs.prototype={jquery:gs,constructor:vs,length:0,toArray:function(){return es.call(this)},get:function(e){return null==e?es.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=vs.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return vs.each(this,e)},map:function(e){return this.pushStack(vs.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(es.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ns,sort:Ko.sort,splice:Ko.splice},vs.extend=vs.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"===vn(o)||ls(o)||(o={}),s===u&&(o=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=o[t],o!==(r=e[t])&&(c&&r&&(vs.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,a=n&&Array.isArray(n)?n:[]):a=n&&vs.isPlainObject(n)?n:{},o[t]=vs.extend(c,a,r)):void 0!==r&&(o[t]=r));return o},vs.extend({expando:"jQuery"+(gs+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==as.call(e)||(t=Jo(e))&&("function"!=typeof(n=os.call(t,"constructor")&&t.constructor)||ss.call(n)!==us))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){ps(e)},each:function(e,t){var n,r=0;if(ys(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ms,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(ys(Object(e))?vs.merge(n,"string"==typeof e?[e]:e):ns.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:rs.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,o=!n;i<a;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,o=[];if(ys(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&o.push(i);return ts.apply([],o)},guid:1,support:cs}),"function"==typeof Symbol&&(vs.fn[Symbol.iterator]=Ko[Symbol.iterator]),vs.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){is["[object "+t+"]"]=t.toLowerCase()}));var bs=
/*!
	* Sizzle CSS Selector Engine v2.3.3
	* https://sizzlejs.com/
	*
	* Copyright jQuery Foundation and other contributors
	* Released under the MIT license
	* http://jquery.org/license
	*
	* Date: 2016-08-08
	*/
function(e){var t,n,r,i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w="sizzle"+1*new Date,x=e.document,k=0,S=0,_=oe(),C=oe(),R=oe(),E=function(e,t){return e===t&&(h=!0),0},A={}.hasOwnProperty,T=[],M=T.pop,L=T.push,I=T.push,P=T.slice,N=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",D="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+F+"*("+D+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+D+"))|)"+F+"*\\]",z=":("+D+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",U=new RegExp(F+"+","g"),H=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),j=new RegExp("^"+F+"*,"+F+"*"),q=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),G=new RegExp(z),W=new RegExp("^"+D+"$"),$={ID:new RegExp("^#("+D+")"),CLASS:new RegExp("^\\.("+D+")"),TAG:new RegExp("^("+D+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){f()},ie=me((function(e){return!0===e.disabled&&("form"in e||"label"in e)}),{dir:"parentNode",next:"legend"});try{I.apply(T=P.call(x.childNodes),x.childNodes),T[x.childNodes.length].nodeType}catch(e){I={apply:T.length?function(e,t){L.apply(e,P.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ae(e,t,r,i){var a,s,c,l,h,d,m,y=t&&t.ownerDocument,k=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==k&&9!==k&&11!==k)return r;if(!i&&((t?t.ownerDocument||t:x)!==p&&f(t),t=t||p,g)){if(11!==k&&(h=K.exec(e)))if(a=h[1]){if(9===k){if(!(c=t.getElementById(a)))return r;if(c.id===a)return r.push(c),r}else if(y&&(c=y.getElementById(a))&&b(t,c)&&c.id===a)return r.push(c),r}else{if(h[2])return I.apply(r,t.getElementsByTagName(e)),r;if((a=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return I.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&!R[e+" "]&&(!v||!v.test(e))){if(1!==k)y=t,m=e;else if("object"!==t.nodeName.toLowerCase()){for((l=t.getAttribute("id"))?l=l.replace(te,ne):t.setAttribute("id",l=w),s=(d=o(e)).length;s--;)d[s]="#"+l+" "+ve(d[s]);m=d.join(","),y=Q.test(e)&&de(t.parentNode)||t}if(m)try{return I.apply(r,y.querySelectorAll(m)),r}catch(e){}finally{l===w&&t.removeAttribute("id")}}}return u(e.replace(H,"$1"),t,r,i)}function oe(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function se(e){return e[w]=!0,e}function ue(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function le(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pe(e){return se((function(t){return t=+t,se((function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))}))}))}function de(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},a=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},f=ae.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:x;return o!==p&&9===o.nodeType&&o.documentElement?(d=(p=o).documentElement,g=!a(p),x!==p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Z.test(p.getElementsByClassName),n.getById=ue((function(e){return d.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(J,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(i=t.getElementsByName(e),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],v=[],(n.qsa=Z.test(p.querySelectorAll))&&(ue((function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+F+"*(?:value|"+O+")"),e.querySelectorAll("[id~="+w+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||v.push(".#.+[+~]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+F+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),d.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=Z.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),m.push("!=",z)})),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),t=Z.test(d.compareDocumentPosition),b=t||Z.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E=t?function(e,t){if(e===t)return h=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===p||e.ownerDocument===x&&b(x,e)?-1:t===p||t.ownerDocument===x&&b(x,t)?1:l?N(l,e)-N(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,r=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a)return e===p?-1:t===p?1:i?-1:a?1:l?N(l,e)-N(l,t):0;if(i===a)return ce(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?ce(o[r],s[r]):o[r]===x?-1:s[r]===x?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&f(e),t=t.replace(V,"='$1']"),n.matchesSelector&&g&&!R[t+" "]&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==p&&f(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==p&&f(e);var i=r.attrHandle[t.toLowerCase()],a=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==a?a:n.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ae.escape=function(e){return(e+"").replace(te,ne)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,r=[],i=0,a=0;if(h=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(E),h){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)e.splice(r[i],1)}return l=null,e},i=ae.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=ae.selectors={cacheLength:50,createPseudo:se,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&_(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=ae.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,h,f,p,d,g=a!==o?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(v){if(a){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;d=g="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?v.firstChild:v.lastChild],o&&y){for(b=(p=(c=(l=(h=(f=v)[w]||(f[w]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===k&&c[1])&&c[2],f=p&&v.childNodes[p];f=++p&&f&&f[g]||(b=p=0)||d.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[k,p,b];break}}else if(y&&(b=p=(c=(l=(h=(f=t)[w]||(f[w]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===k&&c[1]),!1===b)for(;(f=++p&&f&&f[g]||(b=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++b||(y&&((l=(h=f[w]||(f[w]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]=[k,b]),f!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se((function(e,n){for(var r,a=i(e,t),o=a.length;o--;)e[r=N(e,a[o])]=!(n[r]=a[o])})):function(e){return i(e,0,n)}):i}},pseudos:{not:se((function(e){var t=[],n=[],r=s(e.replace(H,"$1"));return r[w]?se((function(e,t,n,i){for(var a,o=r(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))})):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}})),has:se((function(e){return function(t){return ae(e,t).length>0}})),contains:se((function(e){return e=e.replace(J,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}})),lang:se((function(e){return W.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(J,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe((function(){return[0]})),last:pe((function(e,t){return[t-1]})),eq:pe((function(e,t,n){return[n<0?n+t:n]})),even:pe((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:pe((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:pe((function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e})),gt:pe((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=le(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ge(){}function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function me(e,t,n){var r=t.dir,i=t.next,a=i||r,o=n&&"parentNode"===a,s=S++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,u){var c,l,h,f=[k,s];if(u){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(l=(h=t[w]||(t[w]={}))[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[a])&&c[0]===k&&c[1]===s)return f[2]=c[2];if(l[a]=f,f[2]=e(t,n,u))return!0}return!1}}function ye(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function be(e,t,n,r,i){for(var a,o=[],s=0,u=e.length,c=null!=t;s<u;s++)(a=e[s])&&(n&&!n(a,r,i)||(o.push(a),c&&t.push(s)));return o}function we(e,t,n,r,i,a){return r&&!r[w]&&(r=we(r)),i&&!i[w]&&(i=we(i,a)),se((function(a,o,s,u){var c,l,h,f=[],p=[],d=o.length,g=a||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ae(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!a&&t?g:be(g,f,e,s,u),m=n?i||(a?e:d||r)?[]:o:v;if(n&&n(v,m,s,u),r)for(c=be(m,p),r(c,[],s,u),l=c.length;l--;)(h=c[l])&&(m[p[l]]=!(v[p[l]]=h));if(a){if(i||e){if(i){for(c=[],l=m.length;l--;)(h=m[l])&&c.push(v[l]=h);i(null,m=[],c,u)}for(l=m.length;l--;)(h=m[l])&&(c=i?N(a,h):f[l])>-1&&(a[c]=!(o[c]=h))}}else m=be(m===o?m.splice(d,m.length):m),i?i(null,o,m,u):I.apply(o,m)}))}function xe(e){for(var t,n,i,a=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],u=o?1:0,l=me((function(e){return e===t}),s,!0),h=me((function(e){return N(t,e)>-1}),s,!0),f=[function(e,n,r){var i=!o&&(r||n!==c)||((t=n).nodeType?l(e,n,r):h(e,n,r));return t=null,i}];u<a;u++)if(n=r.relative[e[u].type])f=[me(ye(f),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[w]){for(i=++u;i<a&&!r.relative[e[i].type];i++);return we(u>1&&ye(f),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(H,"$1"),n,u<i&&xe(e.slice(u,i)),i<a&&xe(e=e.slice(i)),i<a&&ve(e))}f.push(n)}return ye(f)}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,o=ae.tokenize=function(e,t){var n,i,a,o,s,u,c,l=C[e+" "];if(l)return t?0:l.slice(0);for(s=e,u=[],c=r.preFilter;s;){for(o in n&&!(i=j.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(a=[])),n=!1,(i=q.exec(s))&&(n=i.shift(),a.push({value:n,type:i[0].replace(H," ")}),s=s.slice(n.length)),r.filter)!(i=$[o].exec(s))||c[o]&&!(i=c[o](i))||(n=i.shift(),a.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ae.error(e):C(e,u).slice(0)},s=ae.compile=function(e,t){var n,i=[],a=[],s=R[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=xe(t[n]))[w]?i.push(s):a.push(s);(s=R(e,function(e,t){var n=t.length>0,i=e.length>0,a=function(a,o,s,u,l){var h,d,v,m=0,y="0",b=a&&[],w=[],x=c,S=a||i&&r.find.TAG("*",l),_=k+=null==x?1:Math.random()||.1,C=S.length;for(l&&(c=o===p||o||l);y!==C&&null!=(h=S[y]);y++){if(i&&h){for(d=0,o||h.ownerDocument===p||(f(h),s=!g);v=e[d++];)if(v(h,o||p,s)){u.push(h);break}l&&(k=_)}n&&((h=!v&&h)&&m--,a&&b.push(h))}if(m+=y,n&&y!==m){for(d=0;v=t[d++];)v(b,w,o,s);if(a){if(m>0)for(;y--;)b[y]||w[y]||(w[y]=M.call(u));w=be(w)}I.apply(u,w),l&&!a&&w.length>0&&m+t.length>1&&ae.uniqueSort(u)}return l&&(k=_,c=x),b};return n?se(a):a}(a,i))).selector=e}return s},u=ae.select=function(e,t,n,i){var a,u,c,l,h,f="function"==typeof e&&e,p=!i&&o(e=f.selector||e);if(n=n||[],1===p.length){if((u=p[0]=p[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(J,ee),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(a=$.needsContext.test(e)?0:u.length;a--&&(c=u[a],!r.relative[l=c.type]);)if((h=r.find[l])&&(i=h(c.matches[0].replace(J,ee),Q.test(u[0].type)&&de(t.parentNode)||t))){if(u.splice(a,1),!(e=i.length&&ve(u)))return I.apply(n,i),n;break}}return(f||s(e,p))(i,t,!g,n,!t||Q.test(e)&&de(t.parentNode)||t),n},n.sortStable=w.split("").sort(E).join("")===w,n.detectDuplicates=!!h,f(),ae}(window);vs.find=bs,(vs.expr=bs.selectors)[":"]=vs.expr.pseudos,vs.uniqueSort=vs.unique=bs.uniqueSort,vs.text=bs.getText,vs.isXMLDoc=bs.isXML,vs.contains=bs.contains,vs.escapeSelector=bs.escape;var ws=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&vs(e).is(n))break;r.push(e)}return r},xs=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},ks=vs.expr.match.needsContext;function Ss(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var _s=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Cs(e,t,n){return ls(t)?vs.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?vs.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?vs.grep(e,(function(e){return rs.call(t,e)>-1!==n})):vs.filter(t,e,n)}vs.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?vs.find.matchesSelector(r,e)?[r]:[]:vs.find.matches(e,vs.grep(t,(function(e){return 1===e.nodeType})))},vs.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(vs(e).filter((function(){for(t=0;t<r;t++)if(vs.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)vs.find(e,i[t],n);return r>1?vs.uniqueSort(n):n},filter:function(e){return this.pushStack(Cs(this,e||[],!1))},not:function(e){return this.pushStack(Cs(this,e||[],!0))},is:function(e){return!!Cs(this,"string"==typeof e&&ks.test(e)?vs(e):e||[],!1).length}});var Rs,Es=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(vs.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||Rs,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Es.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof vs?t[0]:t,vs.merge(this,vs.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:Qo,!0)),_s.test(r[1])&&vs.isPlainObject(t))for(r in t)ls(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=Qo.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ls(e)?void 0!==n.ready?n.ready(e):e(vs):vs.makeArray(e,this)}).prototype=vs.fn,Rs=vs(Qo);var As=/^(?:parents|prev(?:Until|All))/,Ts={children:!0,contents:!0,next:!0,prev:!0};function Ms(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}vs.fn.extend({has:function(e){var t=vs(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(vs.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,a=[],o="string"!=typeof e&&vs(e);if(!ks.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&vs.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?vs.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?rs.call(vs(e),this[0]):rs.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(vs.uniqueSort(vs.merge(this.get(),vs(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),vs.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ws(e,"parentNode")},parentsUntil:function(e,t,n){return ws(e,"parentNode",n)},next:function(e){return Ms(e,"nextSibling")},prev:function(e){return Ms(e,"previousSibling")},nextAll:function(e){return ws(e,"nextSibling")},prevAll:function(e){return ws(e,"previousSibling")},nextUntil:function(e,t,n){return ws(e,"nextSibling",n)},prevUntil:function(e,t,n){return ws(e,"previousSibling",n)},siblings:function(e){return xs((e.parentNode||{}).firstChild,e)},children:function(e){return xs(e.firstChild)},contents:function(e){return Ss(e,"iframe")?e.contentDocument:(Ss(e,"template")&&(e=e.content||e),vs.merge([],e.childNodes))}},(function(e,t){vs.fn[e]=function(n,r){var i=vs.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=vs.filter(r,i)),this.length>1&&(Ts[e]||vs.uniqueSort(i),As.test(e)&&i.reverse()),this.pushStack(i)}}));var Ls=/[^\x20\t\r\n\f]+/g;function Is(e){return e}function Ps(e){throw e}function Ns(e,t,n,r){var i;try{e&&ls(i=e.promise)?i.call(e).done(t).fail(n):e&&ls(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}vs.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return vs.each(e.match(Ls)||[],(function(e,n){t[n]=!0})),t}(e):vs.extend({},e);var t,n,r,i,a=[],o=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=a.length,n=!1);e.memory||(n=!1),t=!1,i&&(a=n?[]:"")},c={add:function(){return a&&(n&&!t&&(s=a.length-1,o.push(n)),function t(n){vs.each(n,(function(n,r){ls(r)?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==ds(r)&&t(r)}))}(arguments),n&&!t&&u()),this},remove:function(){return vs.each(arguments,(function(e,t){for(var n;(n=vs.inArray(t,a,n))>-1;)a.splice(n,1),n<=s&&s--})),this},has:function(e){return e?vs.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=o=[],n||t||(a=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},vs.extend({Deferred:function(e){var t=[["notify","progress",vs.Callbacks("memory"),vs.Callbacks("memory"),2],["resolve","done",vs.Callbacks("once memory"),vs.Callbacks("once memory"),0,"resolved"],["reject","fail",vs.Callbacks("once memory"),vs.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return vs.Deferred((function(n){vs.each(t,(function(t,r){var a=ls(e[r[4]])&&e[r[4]];i[r[1]]((function(){var e=a&&a.apply(this,arguments);e&&ls(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,a?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,r){var i=0;function a(e,t,n,r){return function(){var o=this,s=arguments,u=function(){var u,c;if(!(e<i)){if((u=n.apply(o,s))===t.promise())throw new TypeError("Thenable self-resolution");c=u&&("object"===vn(u)||"function"==typeof u)&&u.then,ls(c)?r?c.call(u,a(i,t,Is,r),a(i,t,Ps,r)):(i++,c.call(u,a(i,t,Is,r),a(i,t,Ps,r),a(i,t,Is,t.notifyWith))):(n!==Is&&(o=void 0,s=[u]),(r||t.resolveWith)(o,s))}},c=r?u:function(){try{u()}catch(r){vs.Deferred.exceptionHook&&vs.Deferred.exceptionHook(r,c.stackTrace),e+1>=i&&(n!==Ps&&(o=void 0,s=[r]),t.rejectWith(o,s))}};e?c():(vs.Deferred.getStackHook&&(c.stackTrace=vs.Deferred.getStackHook()),window.setTimeout(c))}}return vs.Deferred((function(i){t[0][3].add(a(0,i,ls(r)?r:Is,i.notifyWith)),t[1][3].add(a(0,i,ls(e)?e:Is)),t[2][3].add(a(0,i,ls(n)?n:Ps))})).promise()},promise:function(e){return null!=e?vs.extend(e,r):r}},i={};return vs.each(t,(function(e,a){var o=a[2],s=a[5];r[a[1]]=o.add,s&&o.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(a[3].fire),i[a[0]]=function(){return i[a[0]+"With"](this===i?void 0:this,arguments),this},i[a[0]+"With"]=o.fireWith})),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),i=es.call(arguments),a=vs.Deferred(),o=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?es.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(Ns(e,a.done(o(n)).resolve,a.reject,!t),"pending"===a.state()||ls(i[n]&&i[n].then)))return a.then();for(;n--;)Ns(i[n],o(n),a.reject);return a.promise()}});var Os=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;vs.Deferred.exceptionHook=function(e,t){window.console&&window.console.warn&&e&&Os.test(e.name)&&window.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},vs.readyException=function(e){window.setTimeout((function(){throw e}))};var Fs=vs.Deferred();function Ds(){Qo.removeEventListener("DOMContentLoaded",Ds),window.removeEventListener("load",Ds),vs.ready()}vs.fn.ready=function(e){return Fs.then(e).catch((function(e){vs.readyException(e)})),this},vs.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--vs.readyWait:vs.isReady)||(vs.isReady=!0,!0!==e&&--vs.readyWait>0||Fs.resolveWith(Qo,[vs]))}}),vs.ready.then=Fs.then,"complete"===Qo.readyState||"loading"!==Qo.readyState&&!Qo.documentElement.doScroll?window.setTimeout(vs.ready):(Qo.addEventListener("DOMContentLoaded",Ds),window.addEventListener("load",Ds));var Bs=function e(t,n,r,i,a,o,s){var u=0,c=t.length,l=null==r;if("object"===ds(r))for(u in a=!0,r)e(t,n,u,r[u],!0,o,s);else if(void 0!==i&&(a=!0,ls(i)||(s=!0),l&&(s?(n.call(t,i),n=null):(l=n,n=function(e,t,n){return l.call(vs(e),n)})),n))for(;u<c;u++)n(t[u],r,s?i:i.call(t[u],u,n(t[u],r)));return a?t:l?n.call(t):c?n(t[0],r):o},zs=/^-ms-/,Us=/-([a-z])/g;function Hs(e,t){return t.toUpperCase()}function js(e){return e.replace(zs,"ms-").replace(Us,Hs)}var qs=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Vs(){this.expando=vs.expando+Vs.uid++}Vs.uid=1,Vs.prototype={cache:function(e){var t=e[this.expando];return t||(t={},qs(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[js(t)]=n;else for(r in t)i[js(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][js(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(js):(t=js(t))in r?[t]:t.match(Ls)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||vs.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!vs.isEmptyObject(t)}};var Gs=new Vs,Ws=new Vs,$s=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ys=/[A-Z]/g;function Xs(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Ys,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:$s.test(e)?JSON.parse(e):e)}(n)}catch(e){}Ws.set(e,t,n)}else n=void 0;return n}vs.extend({hasData:function(e){return Ws.hasData(e)||Gs.hasData(e)},data:function(e,t,n){return Ws.access(e,t,n)},removeData:function(e,t){Ws.remove(e,t)},_data:function(e,t,n){return Gs.access(e,t,n)},_removeData:function(e,t){Gs.remove(e,t)}}),vs.fn.extend({data:function(e,t){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=Ws.get(a),1===a.nodeType&&!Gs.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=js(r.slice(5)),Xs(a,r,i[r]));Gs.set(a,"hasDataAttrs",!0)}return i}return"object"===vn(e)?this.each((function(){Ws.set(this,e)})):Bs(this,(function(t){var n;if(a&&void 0===t)return void 0!==(n=Ws.get(a,e))?n:void 0!==(n=Xs(a,e))?n:void 0;this.each((function(){Ws.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Ws.remove(this,e)}))}}),vs.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Gs.get(e,t),n&&(!r||Array.isArray(n)?r=Gs.access(e,t,vs.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=vs.queue(e,t=t||"fx"),r=n.length,i=n.shift(),a=vs._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,(function(){vs.dequeue(e,t)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Gs.get(e,n)||Gs.access(e,n,{empty:vs.Callbacks("once memory").add((function(){Gs.remove(e,[t+"queue",n])}))})}}),vs.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?vs.queue(this[0],e):void 0===t?this:this.each((function(){var n=vs.queue(this,e,t);vs._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&vs.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){vs.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=vs.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=Gs.get(a[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Zs=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ks=new RegExp("^(?:([+-])=|)("+Zs+")([a-z%]*)$","i"),Qs=["Top","Right","Bottom","Left"],Js=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&vs.contains(e.ownerDocument,e)&&"none"===vs.css(e,"display")},eu=function(e,t,n,r){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in i=n.apply(e,r||[]),t)e.style[a]=o[a];return i},tu={};function nu(e){var t,n=e.ownerDocument,r=e.nodeName,i=tu[r];return i||(t=n.body.appendChild(n.createElement(r)),i=vs.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),tu[r]=i,i)}function ru(e,t){for(var n,r,i=[],a=0,o=e.length;a<o;a++)(r=e[a]).style&&(n=r.style.display,t?("none"===n&&(i[a]=Gs.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&Js(r)&&(i[a]=nu(r))):"none"!==n&&(i[a]="none",Gs.set(r,"display",n)));for(a=0;a<o;a++)null!=i[a]&&(e[a].style.display=i[a]);return e}vs.fn.extend({show:function(){return ru(this,!0)},hide:function(){return ru(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){Js(this)?vs(this).show():vs(this).hide()}))}});var iu=/^(?:checkbox|radio)$/i,au=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ou=/^$|^module$|\/(?:java|ecma)script/i,su={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function uu(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&Ss(e,t)?vs.merge([e],n):n}function cu(e,t){for(var n=0,r=e.length;n<r;n++)Gs.set(e[n],"globalEval",!t||Gs.get(t[n],"globalEval"))}su.optgroup=su.option,su.tbody=su.tfoot=su.colgroup=su.caption=su.thead,su.th=su.td;var lu=/<|&#?\w+;/;function hu(e,t,n,r,i){for(var a,o,s,u,c,l,h=t.createDocumentFragment(),f=[],p=0,d=e.length;p<d;p++)if((a=e[p])||0===a)if("object"===ds(a))vs.merge(f,a.nodeType?[a]:a);else if(lu.test(a)){for(o=o||h.appendChild(t.createElement("div")),s=(au.exec(a)||["",""])[1].toLowerCase(),u=su[s]||su._default,o.innerHTML=u[1]+vs.htmlPrefilter(a)+u[2],l=u[0];l--;)o=o.lastChild;vs.merge(f,o.childNodes),(o=h.firstChild).textContent=""}else f.push(t.createTextNode(a));for(h.textContent="",p=0;a=f[p++];)if(r&&vs.inArray(a,r)>-1)i&&i.push(a);else if(c=vs.contains(a.ownerDocument,a),o=uu(h.appendChild(a),"script"),c&&cu(o),n)for(l=0;a=o[l++];)ou.test(a.type||"")&&n.push(a);return h}!function(){var e=Qo.createDocumentFragment().appendChild(Qo.createElement("div")),t=Qo.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),cs.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",cs.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var fu=Qo.documentElement,pu=/^key/,du=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,gu=/^([^.]*)(?:\.(.+)|)/;function vu(){return!0}function mu(){return!1}function yu(){try{return Qo.activeElement}catch(e){}}function bu(e,t,n,r,i,a){var o,s;if("object"===vn(t)){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)bu(e,s,n,r,t[s],a);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=mu;else if(!i)return e;return 1===a&&(o=i,(i=function(e){return vs().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=vs.guid++)),e.each((function(){vs.event.add(this,t,i,r,n)}))}vs.event={global:{},add:function(e,t,n,r,i){var a,o,s,u,c,l,h,f,p,d,g,v=Gs.get(e);if(v)for(n.handler&&(n=(a=n).handler,i=a.selector),i&&vs.find.matchesSelector(fu,i),n.guid||(n.guid=vs.guid++),(u=v.events)||(u=v.events={}),(o=v.handle)||(o=v.handle=function(t){return vs.event.triggered!==t.type?vs.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(Ls)||[""]).length;c--;)p=g=(s=gu.exec(t[c])||[])[1],d=(s[2]||"").split(".").sort(),p&&(h=vs.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=vs.event.special[p]||{},l=vs.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&vs.expr.match.needsContext.test(i),namespace:d.join(".")},a),(f=u[p])||((f=u[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,d,o)||e.addEventListener&&e.addEventListener(p,o)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),vs.event.global[p]=!0)},remove:function(e,t,n,r,i){var a,o,s,u,c,l,h,f,p,d,g,v=Gs.hasData(e)&&Gs.get(e);if(v&&(u=v.events)){for(c=(t=(t||"").match(Ls)||[""]).length;c--;)if(p=g=(s=gu.exec(t[c])||[])[1],d=(s[2]||"").split(".").sort(),p){for(h=vs.event.special[p]||{},f=u[p=(r?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=f.length;a--;)l=f[a],!i&&g!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(a,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(e,l));o&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,d,v.handle)||vs.removeEvent(e,p,v.handle),delete u[p])}else for(p in u)vs.event.remove(e,p+t[c],n,r,!0);vs.isEmptyObject(u)&&Gs.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,a,o,s=vs.event.fix(e),u=new Array(arguments.length),c=(Gs.get(this,"events")||{})[s.type]||[],l=vs.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(o=vs.event.handlers.call(this,s,c),t=0;(i=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(r=((vs.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,a,o,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(a=[],o={},n=0;n<u;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?vs(i,this).index(c)>-1:vs.find(i,this,null,[c]).length),o[i]&&a.push(r);a.length&&s.push({elem:c,handlers:a})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(vs.Event.prototype,e,{enumerable:!0,configurable:!0,get:ls(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[vs.expando]?e:new vs.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==yu()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===yu()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&Ss(this,"input"))return this.click(),!1},_default:function(e){return Ss(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},vs.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},(vs.Event=function(e,t){if(!(this instanceof vs.Event))return new vs.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?vu:mu,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&vs.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[vs.expando]=!0}).prototype={constructor:vs.Event,isDefaultPrevented:mu,isPropagationStopped:mu,isImmediatePropagationStopped:mu,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=vu,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=vu,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=vu,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},vs.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&pu.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&du.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},vs.event.addProp),vs.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){vs.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,a=e.handleObj;return i&&(i===r||vs.contains(r,i))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),vs.fn.extend({on:function(e,t,n,r){return bu(this,e,t,n,r)},one:function(e,t,n,r){return bu(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,vs(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===vn(e)){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=mu),this.each((function(){vs.event.remove(this,e,n,t)}))}});var wu=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,xu=/<script|<style|<link/i,ku=/checked\s*(?:[^=]|=\s*.checked.)/i,Su=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function _u(e,t){return Ss(e,"table")&&Ss(11!==t.nodeType?t:t.firstChild,"tr")&&vs(e).children("tbody")[0]||e}function Cu(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ru(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Eu(e,t){var n,r,i,a,o,s,u,c;if(1===t.nodeType){if(Gs.hasData(e)&&(a=Gs.access(e),o=Gs.set(t,a),c=a.events))for(i in delete o.handle,o.events={},c)for(n=0,r=c[i].length;n<r;n++)vs.event.add(t,i,c[i][n]);Ws.hasData(e)&&(s=Ws.access(e),u=vs.extend({},s),Ws.set(t,u))}}function Au(e,t){var n=t.nodeName.toLowerCase();"input"===n&&iu.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Tu(e,t,n,r){t=ts.apply([],t);var i,a,o,s,u,c,l=0,h=e.length,f=h-1,p=t[0],d=ls(p);if(d||h>1&&"string"==typeof p&&!cs.checkClone&&ku.test(p))return e.each((function(i){var a=e.eq(i);d&&(t[0]=p.call(this,i,a.html())),Tu(a,t,n,r)}));if(h&&(a=(i=hu(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(s=(o=vs.map(uu(i,"script"),Cu)).length;l<h;l++)u=i,l!==f&&(u=vs.clone(u,!0,!0),s&&vs.merge(o,uu(u,"script"))),n.call(e[l],u,l);if(s)for(c=o[o.length-1].ownerDocument,vs.map(o,Ru),l=0;l<s;l++)u=o[l],ou.test(u.type||"")&&!Gs.access(u,"globalEval")&&vs.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?vs._evalUrl&&vs._evalUrl(u.src):ps(u.textContent.replace(Su,""),c,u))}return e}function Mu(e,t,n){for(var r,i=t?vs.filter(t,e):e,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||vs.cleanData(uu(r)),r.parentNode&&(n&&vs.contains(r.ownerDocument,r)&&cu(uu(r,"script")),r.parentNode.removeChild(r));return e}vs.extend({htmlPrefilter:function(e){return e.replace(wu,"<$1></$2>")},clone:function(e,t,n){var r,i,a,o,s=e.cloneNode(!0),u=vs.contains(e.ownerDocument,e);if(!(cs.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||vs.isXMLDoc(e)))for(o=uu(s),r=0,i=(a=uu(e)).length;r<i;r++)Au(a[r],o[r]);if(t)if(n)for(a=a||uu(e),o=o||uu(s),r=0,i=a.length;r<i;r++)Eu(a[r],o[r]);else Eu(e,s);return(o=uu(s,"script")).length>0&&cu(o,!u&&uu(e,"script")),s},cleanData:function(e){for(var t,n,r,i=vs.event.special,a=0;void 0!==(n=e[a]);a++)if(qs(n)){if(t=n[Gs.expando]){if(t.events)for(r in t.events)i[r]?vs.event.remove(n,r):vs.removeEvent(n,r,t.handle);n[Gs.expando]=void 0}n[Ws.expando]&&(n[Ws.expando]=void 0)}}}),vs.fn.extend({detach:function(e){return Mu(this,e,!0)},remove:function(e){return Mu(this,e)},text:function(e){return Bs(this,(function(e){return void 0===e?vs.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Tu(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||_u(this,e).appendChild(e)}))},prepend:function(){return Tu(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=_u(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Tu(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Tu(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(vs.cleanData(uu(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return vs.clone(this,e,t)}))},html:function(e){return Bs(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!xu.test(e)&&!su[(au.exec(e)||["",""])[1].toLowerCase()]){e=vs.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(vs.cleanData(uu(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Tu(this,arguments,(function(t){var n=this.parentNode;vs.inArray(this,e)<0&&(vs.cleanData(uu(this)),n&&n.replaceChild(t,this))}),e)}}),vs.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){vs.fn[e]=function(e){for(var n,r=[],i=vs(e),a=i.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),vs(i[o])[t](n),ns.apply(r,n.get());return this.pushStack(r)}}));var Lu=new RegExp("^("+Zs+")(?!px)[a-z%]+$","i"),Iu=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=window),t.getComputedStyle(e)},Pu=new RegExp(Qs.join("|"),"i");function Nu(e,t,n){var r,i,a,o,s=e.style;return(n=n||Iu(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||vs.contains(e.ownerDocument,e)||(o=vs.style(e,t)),!cs.pixelBoxStyles()&&Lu.test(o)&&Pu.test(t)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a)),void 0!==o?o+"":o}function Ou(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",fu.appendChild(s).appendChild(u);var e=window.getComputedStyle(u);n="1%"!==e.top,o=12===t(e.marginLeft),u.style.right="60%",a=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=36===u.offsetWidth||"absolute",fu.removeChild(s),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,a,o,s=Qo.createElement("div"),u=Qo.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",cs.clearCloneStyle="content-box"===u.style.backgroundClip,vs.extend(cs,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),o},scrollboxSize:function(){return e(),i}}))}();var Fu,Du,Bu=/^(none|table(?!-c[ea]).+)/,zu=/^--/,Uu={position:"absolute",visibility:"hidden",display:"block"},Hu={letterSpacing:"0",fontWeight:"400"},ju=["Webkit","Moz","ms"],qu=Qo.createElement("div").style;function Vu(e){var t=vs.cssProps[e];return t||(t=vs.cssProps[e]=function(e){if(e in qu)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=ju.length;n--;)if((e=ju[n]+t)in qu)return e}(e)||e),t}function Gu(e,t,n){var r=Ks.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Wu(e,t,n,r,i,a){var o="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(u+=vs.css(e,n+Qs[o],!0,i)),r?("content"===n&&(u-=vs.css(e,"padding"+Qs[o],!0,i)),"margin"!==n&&(u-=vs.css(e,"border"+Qs[o]+"Width",!0,i))):(u+=vs.css(e,"padding"+Qs[o],!0,i),"padding"!==n?u+=vs.css(e,"border"+Qs[o]+"Width",!0,i):s+=vs.css(e,"border"+Qs[o]+"Width",!0,i));return!r&&a>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-u-s-.5))),u}function $u(e,t,n){var r=Iu(e),i=Nu(e,t,r),a="border-box"===vs.css(e,"boxSizing",!1,r),o=a;if(Lu.test(i)){if(!n)return i;i="auto"}return o=o&&(cs.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===vs.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),(i=parseFloat(i)||0)+Wu(e,t,n||(a?"border":"content"),o,r,i)+"px"}vs.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Nu(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=js(t),u=zu.test(t),c=e.style;if(u||(t=Vu(s)),o=vs.cssHooks[t]||vs.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:c[t];"string"===(a=vn(n))&&(i=Ks.exec(n))&&i[1]&&(n=function(e,t,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return vs.css(e,t,"")},u=s(),c=n&&n[3]||(vs.cssNumber[t]?"":"px"),l=(vs.cssNumber[t]||"px"!==c&&+u)&&Ks.exec(vs.css(e,t));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;o--;)vs.style(e,t,l+c),(1-a)*(1-(a=s()/u||.5))<=0&&(o=0),l/=a;vs.style(e,t,(l*=2)+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}(e,t,i),a="number"),null!=n&&n==n&&("number"===a&&(n+=i&&i[3]||(vs.cssNumber[s]?"":"px")),cs.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,a,o,s=js(t);return zu.test(t)||(t=Vu(s)),(o=vs.cssHooks[t]||vs.cssHooks[s])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=Nu(e,t,r)),"normal"===i&&t in Hu&&(i=Hu[t]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),vs.each(["height","width"],(function(e,t){vs.cssHooks[t]={get:function(e,n,r){if(n)return!Bu.test(vs.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?$u(e,t,r):eu(e,Uu,(function(){return $u(e,t,r)}))},set:function(e,n,r){var i,a=Iu(e),o="border-box"===vs.css(e,"boxSizing",!1,a),s=r&&Wu(e,t,r,o,a);return o&&cs.scrollboxSize()===a.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-Wu(e,t,"border",!1,a)-.5)),s&&(i=Ks.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=vs.css(e,t)),Gu(0,n,s)}}})),vs.cssHooks.marginLeft=Ou(cs.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Nu(e,"marginLeft"))||e.getBoundingClientRect().left-eu(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),vs.each({margin:"",padding:"",border:"Width"},(function(e,t){vs.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Qs[r]+t]=a[r]||a[r-2]||a[0];return i}},"margin"!==e&&(vs.cssHooks[e+t].set=Gu)})),vs.fn.extend({css:function(e,t){return Bs(this,(function(e,t,n){var r,i,a={},o=0;if(Array.isArray(t)){for(r=Iu(e),i=t.length;o<i;o++)a[t[o]]=vs.css(e,t[o],!1,r);return a}return void 0!==n?vs.style(e,t,n):vs.css(e,t)}),e,t,arguments.length>1)}}),vs.fn.delay=function(e,t){return e=vs.fx&&vs.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var r=window.setTimeout(t,e);n.stop=function(){window.clearTimeout(r)}}))},Fu=Qo.createElement("input"),Du=Qo.createElement("select").appendChild(Qo.createElement("option")),Fu.type="checkbox",cs.checkOn=""!==Fu.value,cs.optSelected=Du.selected,(Fu=Qo.createElement("input")).value="t",Fu.type="radio",cs.radioValue="t"===Fu.value;var Yu,Xu=vs.expr.attrHandle;vs.fn.extend({attr:function(e,t){return Bs(this,vs.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){vs.removeAttr(this,e)}))}}),vs.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?vs.prop(e,t,n):(1===a&&vs.isXMLDoc(e)||(i=vs.attrHooks[t.toLowerCase()]||(vs.expr.match.bool.test(t)?Yu:void 0)),void 0!==n?null===n?void vs.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=vs.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!cs.radioValue&&"radio"===t&&Ss(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Ls);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),Yu={set:function(e,t,n){return!1===t?vs.removeAttr(e,n):e.setAttribute(n,n),n}},vs.each(vs.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=Xu[t]||vs.find.attr;Xu[t]=function(e,t,r){var i,a,o=t.toLowerCase();return r||(a=Xu[o],Xu[o]=i,i=null!=n(e,t,r)?o:null,Xu[o]=a),i}}));var Zu=/^(?:input|select|textarea|button)$/i,Ku=/^(?:a|area)$/i;function Qu(e){return(e.match(Ls)||[]).join(" ")}function Ju(e){return e.getAttribute&&e.getAttribute("class")||""}function ec(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(Ls)||[]}vs.fn.extend({prop:function(e,t){return Bs(this,vs.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[vs.propFix[e]||e]}))}}),vs.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&vs.isXMLDoc(e)||(t=vs.propFix[t]||t,i=vs.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=vs.find.attr(e,"tabindex");return t?parseInt(t,10):Zu.test(e.nodeName)||Ku.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),cs.optSelected||(vs.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),vs.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){vs.propFix[this.toLowerCase()]=this})),vs.fn.extend({addClass:function(e){var t,n,r,i,a,o,s,u=0;if(ls(e))return this.each((function(t){vs(this).addClass(e.call(this,t,Ju(this)))}));if((t=ec(e)).length)for(;n=this[u++];)if(i=Ju(n),r=1===n.nodeType&&" "+Qu(i)+" "){for(o=0;a=t[o++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i!==(s=Qu(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,a,o,s,u=0;if(ls(e))return this.each((function(t){vs(this).removeClass(e.call(this,t,Ju(this)))}));if(!arguments.length)return this.attr("class","");if((t=ec(e)).length)for(;n=this[u++];)if(i=Ju(n),r=1===n.nodeType&&" "+Qu(i)+" "){for(o=0;a=t[o++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");i!==(s=Qu(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=vn(e),r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):ls(e)?this.each((function(n){vs(this).toggleClass(e.call(this,n,Ju(this),t),t)})):this.each((function(){var t,i,a,o;if(r)for(i=0,a=vs(this),o=ec(e);t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=Ju(this))&&Gs.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Gs.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+Qu(Ju(n))+" ").indexOf(t)>-1)return!0;return!1}});var tc=/\r/g;vs.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=ls(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,vs(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=vs.map(i,(function(e){return null==e?"":e+""}))),(t=vs.valHooks[this.type]||vs.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=vs.valHooks[i.type]||vs.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(tc,""):null==n?"":n:void 0}}),vs.extend({valHooks:{option:{get:function(e){var t=vs.find.attr(e,"value");return null!=t?t:Qu(vs.text(e))}},select:{get:function(e){var t,n,r,i=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],u=o?a+1:i.length;for(r=a<0?u:o?a:0;r<u;r++)if(((n=i[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!Ss(n.parentNode,"optgroup"))){if(t=vs(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,a=vs.makeArray(t),o=i.length;o--;)((r=i[o]).selected=vs.inArray(vs.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),vs.each(["radio","checkbox"],(function(){vs.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=vs.inArray(vs(e).val(),t)>-1}},cs.checkOn||(vs.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),cs.focusin="onfocusin"in window;var nc=/^(?:focusinfocus|focusoutblur)$/,rc=function(e){e.stopPropagation()};vs.extend(vs.event,{trigger:function(e,t,n,r){var i,a,o,s,u,c,l,h,f=[n||Qo],p=os.call(e,"type")?e.type:e,d=os.call(e,"namespace")?e.namespace.split("."):[];if(a=h=o=n=n||Qo,3!==n.nodeType&&8!==n.nodeType&&!nc.test(p+vs.event.triggered)&&(p.indexOf(".")>-1&&(d=p.split("."),p=d.shift(),d.sort()),u=p.indexOf(":")<0&&"on"+p,(e=e[vs.expando]?e:new vs.Event(p,"object"===vn(e)&&e)).isTrigger=r?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:vs.makeArray(t,[e]),l=vs.event.special[p]||{},r||!l.trigger||!1!==l.trigger.apply(n,t))){if(!r&&!l.noBubble&&!hs(n)){for(s=l.delegateType||p,nc.test(s+p)||(a=a.parentNode);a;a=a.parentNode)f.push(a),o=a;o===(n.ownerDocument||Qo)&&f.push(o.defaultView||o.parentWindow||window)}for(i=0;(a=f[i++])&&!e.isPropagationStopped();)h=a,e.type=i>1?s:l.bindType||p,(c=(Gs.get(a,"events")||{})[e.type]&&Gs.get(a,"handle"))&&c.apply(a,t),(c=u&&a[u])&&c.apply&&qs(a)&&(e.result=c.apply(a,t),!1===e.result&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||l._default&&!1!==l._default.apply(f.pop(),t)||!qs(n)||u&&ls(n[p])&&!hs(n)&&((o=n[u])&&(n[u]=null),vs.event.triggered=p,e.isPropagationStopped()&&h.addEventListener(p,rc),n[p](),e.isPropagationStopped()&&h.removeEventListener(p,rc),vs.event.triggered=void 0,o&&(n[u]=o)),e.result}},simulate:function(e,t,n){var r=vs.extend(new vs.Event,n,{type:e,isSimulated:!0});vs.event.trigger(r,null,t)}}),vs.fn.extend({trigger:function(e,t){return this.each((function(){vs.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return vs.event.trigger(e,t,n,!0)}}),cs.focusin||vs.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){vs.event.simulate(t,e.target,vs.event.fix(e))};vs.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Gs.access(r,t);i||r.addEventListener(e,n,!0),Gs.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Gs.access(r,t)-1;i?Gs.access(r,t,i):(r.removeEventListener(e,n,!0),Gs.remove(r,t))}}}));var ic,ac=/\[\]$/,oc=/\r?\n/g,sc=/^(?:submit|button|image|reset|file)$/i,uc=/^(?:input|select|textarea|keygen)/i;function cc(e,t,n,r){var i;if(Array.isArray(t))vs.each(t,(function(t,i){n||ac.test(e)?r(e,i):cc(e+"["+("object"===vn(i)&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==ds(t))r(e,t);else for(i in t)cc(e+"["+i+"]",t[i],n,r)}vs.param=function(e,t){var n,r=[],i=function(e,t){var n=ls(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!vs.isPlainObject(e))vs.each(e,(function(){i(this.name,this.value)}));else for(n in e)cc(n,e[n],t,i);return r.join("&")},vs.fn.extend({serialize:function(){return vs.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=vs.prop(this,"elements");return e?vs.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!vs(this).is(":disabled")&&uc.test(this.nodeName)&&!sc.test(e)&&(this.checked||!iu.test(e))})).map((function(e,t){var n=vs(this).val();return null==n?null:Array.isArray(n)?vs.map(n,(function(e){return{name:t.name,value:e.replace(oc,"\r\n")}})):{name:t.name,value:n.replace(oc,"\r\n")}})).get()}}),vs.fn.extend({wrapAll:function(e){var t;return this[0]&&(ls(e)&&(e=e.call(this[0])),t=vs(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return ls(e)?this.each((function(t){vs(this).wrapInner(e.call(this,t))})):this.each((function(){var t=vs(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=ls(e);return this.each((function(n){vs(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){vs(this).replaceWith(this.childNodes)})),this}}),vs.expr.pseudos.hidden=function(e){return!vs.expr.pseudos.visible(e)},vs.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},cs.createHTMLDocument=((ic=Qo.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===ic.childNodes.length),vs.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(cs.createHTMLDocument?((r=(t=Qo.implementation.createHTMLDocument("")).createElement("base")).href=Qo.location.href,t.head.appendChild(r)):t=Qo),a=!n&&[],(i=_s.exec(e))?[t.createElement(i[1])]:(i=hu([e],t,a),a&&a.length&&vs(a).remove(),vs.merge([],i.childNodes)));var r,i,a},vs.offset={setOffset:function(e,t,n){var r,i,a,o,s,u,c=vs.css(e,"position"),l=vs(e),h={};"static"===c&&(e.style.position="relative"),s=l.offset(),a=vs.css(e,"top"),u=vs.css(e,"left"),("absolute"===c||"fixed"===c)&&(a+u).indexOf("auto")>-1?(o=(r=l.position()).top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(u)||0),ls(t)&&(t=t.call(e,n,vs.extend({},s))),null!=t.top&&(h.top=t.top-s.top+o),null!=t.left&&(h.left=t.left-s.left+i),"using"in t?t.using.call(e,h):l.css(h)}},vs.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){vs.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===vs.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===vs.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=vs(e).offset()).top+=vs.css(e,"borderTopWidth",!0),i.left+=vs.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-vs.css(r,"marginTop",!0),left:t.left-i.left-vs.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===vs.css(e,"position");)e=e.offsetParent;return e||fu}))}}),vs.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;vs.fn[e]=function(r){return Bs(this,(function(e,r,i){var a;if(hs(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):e[r]=i}),e,r,arguments.length)}})),vs.each(["top","left"],(function(e,t){vs.cssHooks[t]=Ou(cs.pixelPosition,(function(e,n){if(n)return n=Nu(e,t),Lu.test(n)?vs(e).position()[t]+"px":n}))})),vs.each({Height:"height",Width:"width"},(function(e,t){vs.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){vs.fn[r]=function(i,a){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===a?"margin":"border");return Bs(this,(function(t,n,i){var a;return hs(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?vs.css(t,n,s):vs.style(t,n,i,s)}),t,o?i:void 0,o)}}))})),vs.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){vs.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),vs.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),vs.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),vs.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),ls(e))return r=es.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(es.call(arguments)))}).guid=e.guid=e.guid||vs.guid++,i},vs.holdReady=function(e){e?vs.readyWait++:vs.ready(!0)},vs.isArray=Array.isArray,vs.parseJSON=JSON.parse,vs.nodeName=Ss,vs.isFunction=ls,vs.isWindow=hs,vs.camelCase=js,vs.type=ds,vs.now=Date.now,vs.isNumeric=function(e){var t=vs.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))};var lc=vs,hc="\t\n\v\f\r \u2028\u2029\ufeff",fc="["+hc+"]",pc=RegExp("^"+fc+fc+"*"),dc=RegExp(fc+fc+"*$"),gc=function(e){return function(t){var n=String(m(t));return 1&e&&(n=n.replace(pc,"")),2&e&&(n=n.replace(dc,"")),n}},vc={start:gc(1),end:gc(2),trim:gc(3)},mc=ke.f,yc=A.f,bc=L.f,wc=vc.trim,xc=o.Number,kc=xc.prototype,Sc="Number"==d(di(kc)),_c=function(e){var t,n,r,i,a,o,s,u,c=w(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=wc(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(o=(a=c.slice(2)).length,s=0;s<o;s++)if((u=a.charCodeAt(s))<48||u>i)return NaN;return parseInt(a,r)}return+c};if(Ie("Number",!xc(" 0o1")||!xc("0b1")||xc("+0x1"))){for(var Cc,Rc=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof Rc&&(Sc?s((function(){kc.valueOf.call(n)})):"Number"!=d(n))?go(new xc(_c(t)),n,Rc):_c(t)},Ec=u?mc(xc):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Ac=0;Ec.length>Ac;Ac++)k(xc,Cc=Ec[Ac])&&!k(Rc,Cc)&&bc(Rc,Cc,yc(xc,Cc));Rc.prototype=kc,kc.constructor=Rc,ie(o,"Number",Rc)}Ne({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991});var Tc=yi.f,Mc=s((function(){return!Object.getOwnPropertyNames(1)}));Ne({target:"Object",stat:!0,forced:Mc},{getOwnPropertyNames:Tc});var Lc=s((function(){si(1)}));Ne({target:"Object",stat:!0,forced:Lc},{keys:function(e){return si(De(e))}});var Ic=o.Promise,Pc=function(e,t,n){for(var r in t)ie(e,r,t[r],n);return e},Nc=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Oc=Ve("iterator"),Fc=Array.prototype,Dc=function(e){return void 0!==e&&(ka.Array===e||Fc[Oc]===e)},Bc=Ve("iterator"),zc=function(e){if(null!=e)return e[Bc]||e["@@iterator"]||ka[fo(e)]},Uc=function(e){var t=e.return;if(void 0!==t)return T(t.call(e)).value},Hc=function(e,t){this.stopped=e,this.result=t},jc=function(e,t,n){var r,i,a,o,s,u,c,l=n&&n.that,h=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),d=Fe(t,l,1+h+p),g=function(e){return r&&Uc(r),new Hc(!0,e)},v=function(e){return h?(T(e),p?d(e[0],e[1],g):d(e[0],e[1])):p?d(e,g):d(e)};if(f)r=e;else{if("function"!=typeof(i=zc(e)))throw TypeError("Target is not iterable");if(Dc(i)){for(a=0,o=fe(e.length);o>a;a++)if((s=v(e[a]))&&s instanceof Hc)return s;return new Hc(!1)}r=i.call(e)}for(u=r.next;!(c=u.call(r)).done;){try{s=v(c.value)}catch(e){throw Uc(r),e}if("object"==typeof s&&s&&s instanceof Hc)return s}return new Hc(!1)},qc=Ve("iterator"),Vc=!1;try{var Gc=0,Wc={next:function(){return{done:!!Gc++}},return:function(){Vc=!0}};Wc[qc]=function(){return this},Array.from(Wc,(function(){throw 2}))}catch(e){}var $c,Yc,Xc,Zc=function(e,t){if(!t&&!Vc)return!1;var n=!1;try{var r={};r[qc]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Kc=/(iphone|ipod|ipad).*applewebkit/i.test(Ze),Qc="process"==d(o.process),Jc=o.location,el=o.setImmediate,tl=o.clearImmediate,nl=o.process,rl=o.MessageChannel,il=o.Dispatch,al=0,ol={},sl=function(e){if(ol.hasOwnProperty(e)){var t=ol[e];delete ol[e],t()}},ul=function(e){return function(){sl(e)}},cl=function(e){sl(e.data)},ll=function(e){o.postMessage(e+"",Jc.protocol+"//"+Jc.host)};el&&tl||(el=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return ol[++al]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},$c(al),al},tl=function(e){delete ol[e]},Qc?$c=function(e){nl.nextTick(ul(e))}:il&&il.now?$c=function(e){il.now(ul(e))}:rl&&!Kc?(Xc=(Yc=new rl).port2,Yc.port1.onmessage=cl,$c=Fe(Xc.postMessage,Xc,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&Jc&&"file:"!==Jc.protocol&&!s(ll)?($c=ll,o.addEventListener("message",cl,!1)):$c="onreadystatechange"in C("script")?function(e){ci.appendChild(C("script")).onreadystatechange=function(){ci.removeChild(this),sl(e)}}:function(e){setTimeout(ul(e),0)});var hl,fl,pl,dl,gl,vl,ml,yl,bl={set:el,clear:tl},wl=A.f,xl=bl.set,kl=o.MutationObserver||o.WebKitMutationObserver,Sl=o.document,_l=o.process,Cl=o.Promise,Rl=wl(o,"queueMicrotask"),El=Rl&&Rl.value;El||(hl=function(){var e,t;for(Qc&&(e=_l.domain)&&e.exit();fl;){t=fl.fn,fl=fl.next;try{t()}catch(e){throw fl?dl():pl=void 0,e}}pl=void 0,e&&e.enter()},!Kc&&!Qc&&kl&&Sl?(gl=!0,vl=Sl.createTextNode(""),new kl(hl).observe(vl,{characterData:!0}),dl=function(){vl.data=gl=!gl}):Cl&&Cl.resolve?(ml=Cl.resolve(void 0),yl=ml.then,dl=function(){yl.call(ml,hl)}):dl=Qc?function(){_l.nextTick(hl)}:function(){xl.call(o,hl)});var Al,Tl,Ml,Ll,Il=El||function(e){var t={fn:e,next:void 0};pl&&(pl.next=t),fl||(fl=t,dl()),pl=t},Pl=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Oe(t),this.reject=Oe(n)},Nl={f:function(e){return new Pl(e)}},Ol=function(e,t){if(T(e),b(t)&&t.constructor===e)return t;var n=Nl.f(e);return(0,n.resolve)(t),n.promise},Fl=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Dl=bl.set,Bl=Ve("species"),zl="Promise",Ul=re.get,Hl=re.set,jl=re.getterFor(zl),ql=Ic,Vl=o.TypeError,Gl=o.document,Wl=o.process,$l=se("fetch"),Yl=Nl.f,Xl=Yl,Zl=!!(Gl&&Gl.createEvent&&o.dispatchEvent),Kl="function"==typeof PromiseRejectionEvent,Ql=Ie(zl,(function(){if(z(ql)===String(ql)){if(66===et)return!0;if(!Qc&&!Kl)return!0}if(et>=51&&/native code/.test(ql))return!1;var e=ql.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Bl]=t,!(e.then((function(){}))instanceof t)})),Jl=Ql||!Zc((function(e){ql.all(e).catch((function(){}))})),eh=function(e){var t;return!(!b(e)||"function"!=typeof(t=e.then))&&t},th=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;Il((function(){for(var r=e.value,i=1==e.state,a=0;n.length>a;){var o,s,u,c=n[a++],l=i?c.ok:c.fail,h=c.resolve,f=c.reject,p=c.domain;try{l?(i||(2===e.rejection&&ah(e),e.rejection=1),!0===l?o=r:(p&&p.enter(),o=l(r),p&&(p.exit(),u=!0)),o===c.promise?f(Vl("Promise-chain cycle")):(s=eh(o))?s.call(o,h,f):h(o)):f(r)}catch(e){p&&!u&&p.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&rh(e)}))}},nh=function(e,t,n){var r,i;Zl?((r=Gl.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),o.dispatchEvent(r)):r={promise:t,reason:n},!Kl&&(i=o["on"+e])?i(r):"unhandledrejection"===e&&function(e,t){var n=o.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},rh=function(e){Dl.call(o,(function(){var t,n=e.facade,r=e.value;if(ih(e)&&(t=Fl((function(){Qc?Wl.emit("unhandledRejection",r,n):nh("unhandledrejection",n,r)})),e.rejection=Qc||ih(e)?2:1,t.error))throw t.value}))},ih=function(e){return 1!==e.rejection&&!e.parent},ah=function(e){Dl.call(o,(function(){var t=e.facade;Qc?Wl.emit("rejectionHandled",t):nh("rejectionhandled",t,e.value)}))},oh=function(e,t,n){return function(r){e(t,r,n)}},sh=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,th(e,!0))},uh=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Vl("Promise can't be resolved itself");var r=eh(t);r?Il((function(){var n={done:!1};try{r.call(t,oh(uh,n,e),oh(sh,n,e))}catch(t){sh(n,t,e)}})):(e.value=t,e.state=1,th(e,!1))}catch(t){sh({done:!1},t,e)}}};Ql&&(ql=function(e){Nc(this,ql,zl),Oe(e),Al.call(this);var t=Ul(this);try{e(oh(uh,t),oh(sh,t))}catch(e){sh(t,e)}},(Al=function(e){Hl(this,{type:zl,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Pc(ql.prototype,{then:function(e,t){var n=jl(this),r=Yl(rn(this,ql));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Qc?Wl.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&th(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Tl=function(){var e=new Al,t=Ul(e);this.promise=e,this.resolve=oh(uh,t),this.reject=oh(sh,t)},Nl.f=Yl=function(e){return e===ql||e===Ml?new Tl(e):Xl(e)},"function"==typeof Ic&&(Ll=Ic.prototype.then,ie(Ic.prototype,"then",(function(e,t){var n=this;return new ql((function(e,t){Ll.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof $l&&Ne({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Ol(ql,$l.apply(o,arguments))}}))),Ne({global:!0,wrap:!0,forced:Ql},{Promise:ql}),_i(ql,zl,!1),mo(zl),Ml=se(zl),Ne({target:zl,stat:!0,forced:Ql},{reject:function(e){var t=Yl(this);return t.reject.call(void 0,e),t.promise}}),Ne({target:zl,stat:!0,forced:Ql},{resolve:function(e){return Ol(this,e)}}),Ne({target:zl,stat:!0,forced:Jl},{all:function(e){var t=this,n=Yl(t),r=n.resolve,i=n.reject,a=Fl((function(){var n=Oe(t.resolve),a=[],o=0,s=1;jc(e,(function(e){var u=o++,c=!1;a.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,a[u]=e,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise},race:function(e){var t=this,n=Yl(t),r=n.reject,i=Fl((function(){var i=Oe(t.resolve);jc(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var ch=A.f,lh="".startsWith,hh=Math.min,fh=Ht("startsWith"),ph=!fh&&!!function(){var e=ch(String.prototype,"startsWith");return e&&!e.writable}();Ne({target:"String",proto:!0,forced:!ph&&!fh},{startsWith:function(e){var t=String(m(this));zt(e);var n=fe(hh(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return lh?lh.call(t,r,n):t.slice(n,n+r.length)===r}});var dh=vc.trim;Ne({target:"String",proto:!0,forced:function(e){return s((function(){return!!hc[e]()||""!=""[e]()||hc[e].name!==e}))}("trim")},{trim:function(){return dh(this)}});var gh=Ve("iterator"),vh=!s((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[gh]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),mh=Object.assign,yh=Object.defineProperty,bh=!mh||s((function(){if(u&&1!==mh({b:1},mh(yh({},"a",{enumerable:!0,get:function(){yh(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=mh({},e)[n]||"abcdefghijklmnopqrst"!=si(mh({},t)).join("")}))?function(e,t){for(var n=De(e),r=arguments.length,i=1,a=Se.f,o=h.f;r>i;)for(var s,c=v(arguments[i++]),l=a?si(c).concat(a(c)):si(c),f=l.length,p=0;f>p;)s=l[p++],u&&!o.call(c,s)||(n[s]=c[s]);return n}:mh,wh=function(e,t,n,r){try{return r?t(T(n)[0],n[1]):t(n)}catch(t){throw Uc(e),t}},xh=function(e){var t,n,r,i,a,o,s=De(e),u="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,h=void 0!==l,f=zc(s),p=0;if(h&&(l=Fe(l,c>2?arguments[2]:void 0,2)),null==f||u==Array&&Dc(f))for(n=new u(t=fe(s.length));t>p;p++)o=h?l(s[p],p):s[p],ua(n,p,o);else for(a=(i=f.call(s)).next,n=new u;!(r=a.call(i)).done;p++)o=h?wh(i,l,[r.value,p],!0):r.value,ua(n,p,o);return n.length=p,n},kh=/[^\0-\u007E]/,Sh=/[.\u3002\uFF0E\uFF61]/g,_h="Overflow: input needs wider integers to process",Ch=Math.floor,Rh=String.fromCharCode,Eh=function(e){return e+22+75*(e<26)},Ah=function(e,t,n){var r=0;for(e=n?Ch(e/700):e>>1,e+=Ch(e/t);e>455;r+=36)e=Ch(e/35);return Ch(r+36*e/(e+38))},Th=function(e){var t,n,r=[],i=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e)).length,a=128,o=0,s=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(Rh(n));var u=r.length,c=u;for(u&&r.push("-");c<i;){var l=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=a&&n<l&&(l=n);var h=c+1;if(l-a>Ch((2147483647-o)/h))throw RangeError(_h);for(o+=(l-a)*h,a=l,t=0;t<e.length;t++){if((n=e[t])<a&&++o>2147483647)throw RangeError(_h);if(n==a){for(var f=o,p=36;;p+=36){var d=p<=s?1:p>=s+26?26:p-s;if(f<d)break;var g=f-d,v=36-d;r.push(Rh(Eh(d+g%v))),f=Ch(g/v)}r.push(Rh(Eh(f))),s=Ah(o,h,c==u),o=0,++c}}++o,++a}return r.join("")},Mh=function(e){var t=zc(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return T(t.call(e))},Lh=se("fetch"),Ih=se("Headers"),Ph=Ve("iterator"),Nh=re.set,Oh=re.getterFor("URLSearchParams"),Fh=re.getterFor("URLSearchParamsIterator"),Dh=/\+/g,Bh=Array(4),zh=function(e){return Bh[e-1]||(Bh[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},Uh=function(e){try{return decodeURIComponent(e)}catch(t){return e}},Hh=function(e){var t=e.replace(Dh," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(zh(n--),Uh);return t}},jh=/[!'()~]|%20/g,qh={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Vh=function(e){return qh[e]},Gh=function(e){return encodeURIComponent(e).replace(jh,Vh)},Wh=function(e,t){if(t)for(var n,r,i=t.split("&"),a=0;a<i.length;)(n=i[a++]).length&&(r=n.split("="),e.push({key:Hh(r.shift()),value:Hh(r.join("="))}))},$h=function(e){this.entries.length=0,Wh(this.entries,e)},Yh=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Xh=Ia((function(e,t){Nh(this,{type:"URLSearchParamsIterator",iterator:Mh(Oh(e).entries),kind:t})}),"Iterator",(function(){var e=Fh(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),Zh=function(){Nc(this,Zh,"URLSearchParams");var e,t,n,r,i,a,o,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,h=[];if(Nh(l,{type:"URLSearchParams",entries:h,updateURL:function(){},updateSearchParams:$h}),void 0!==c)if(b(c))if("function"==typeof(e=zc(c)))for(n=(t=e.call(c)).next;!(r=n.call(t)).done;){if((o=(a=(i=Mh(T(r.value))).next).call(i)).done||(s=a.call(i)).done||!a.call(i).done)throw TypeError("Expected sequence with length 2");h.push({key:o.value+"",value:s.value+""})}else for(u in c)k(c,u)&&h.push({key:u,value:c[u]+""});else Wh(h,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},Kh=Zh.prototype;Pc(Kh,{append:function(e,t){Yh(arguments.length,2);var n=Oh(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Yh(arguments.length,1);for(var t=Oh(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){Yh(arguments.length,1);for(var t=Oh(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Yh(arguments.length,1);for(var t=Oh(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){Yh(arguments.length,1);for(var t=Oh(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Yh(arguments.length,1);for(var n,r=Oh(this),i=r.entries,a=!1,o=e+"",s=t+"",u=0;u<i.length;u++)(n=i[u]).key===o&&(a?i.splice(u--,1):(a=!0,n.value=s));a||i.push({key:o,value:s}),r.updateURL()},sort:function(){var e,t,n,r=Oh(this),i=r.entries,a=i.slice();for(i.length=0,n=0;n<a.length;n++){for(e=a[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=Oh(this).entries,r=Fe(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new Xh(this,"keys")},values:function(){return new Xh(this,"values")},entries:function(){return new Xh(this,"entries")}},{enumerable:!0}),ie(Kh,Ph,Kh.entries),ie(Kh,"toString",(function(){for(var e,t=Oh(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(Gh(e.key)+"="+Gh(e.value));return n.join("&")}),{enumerable:!0}),_i(Zh,"URLSearchParams"),Ne({global:!0,forced:!vh},{URLSearchParams:Zh}),vh||"function"!=typeof Lh||"function"!=typeof Ih||Ne({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,i=[e];return arguments.length>1&&(t=arguments[1],b(t)&&(n=t.body,"URLSearchParams"===fo(n)&&((r=t.headers?new Ih(t.headers):new Ih).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=di(t,{body:f(0,String(n)),headers:f(0,r)}))),i.push(t)),Lh.apply(this,i)}});var Qh,Jh={URLSearchParams:Zh,getState:Oh},ef=on.codeAt,tf=o.URL,nf=Jh.URLSearchParams,rf=Jh.getState,af=re.set,of=re.getterFor("URL"),sf=Math.floor,uf=Math.pow,cf=/[A-Za-z]/,lf=/[\d+-.A-Za-z]/,hf=/\d/,ff=/^(0x|0X)/,pf=/^[0-7]+$/,df=/^\d+$/,gf=/^[\dA-Fa-f]+$/,vf=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,mf=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,yf=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,bf=/[\u0009\u000A\u000D]/g,wf=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=kf(t.slice(1,-1))))return"Invalid host";e.host=n}else if(Mf(e)){if(t=function(e){var t,n,r=[],i=e.toLowerCase().replace(Sh,".").split(".");for(t=0;t<i.length;t++)n=i[t],r.push(kh.test(n)?"xn--"+Th(n):n);return r.join(".")}(t),vf.test(t))return"Invalid host";if(null===(n=xf(t)))return"Invalid host";e.host=n}else{if(mf.test(t))return"Invalid host";for(n="",r=xh(t),i=0;i<r.length;i++)n+=Af(r[i],_f);e.host=n}},xf=function(e){var t,n,r,i,a,o,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=u[r]))return e;if(a=10,i.length>1&&"0"==i.charAt(0)&&(a=ff.test(i)?16:8,i=i.slice(8==a?1:2)),""===i)o=0;else{if(!(10==a?df:8==a?pf:gf).test(i))return e;o=parseInt(i,a)}n.push(o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=uf(256,5-t))return null}else if(o>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*uf(256,3-r);return s},kf=function(e){var t,n,r,i,a,o,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,f=function(){return e.charAt(h)};if(":"==f()){if(":"!=e.charAt(1))return;h+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&gf.test(f());)t=16*t+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,c>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;h++}if(!hf.test(f()))return;for(;hf.test(f());){if(a=parseInt(f(),10),null===i)i=a;else{if(0==i)return;i=10*i+a}if(i>255)return;h++}u[c]=256*u[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(o=c-l,c=7;0!=c&&o>0;)s=u[c],u[c--]=u[l+o-1],u[l+--o]=s;else if(8!=c)return;return u},Sf=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=sf(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,a=0;a<8;a++)0!==e[a]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=a),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},_f={},Cf=bh({},_f,{" ":1,'"':1,"<":1,">":1,"`":1}),Rf=bh({},Cf,{"#":1,"?":1,"{":1,"}":1}),Ef=bh({},Rf,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Af=function(e,t){var n=ef(e,0);return n>32&&n<127&&!k(t,e)?e:encodeURIComponent(e)},Tf={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Mf=function(e){return k(Tf,e.scheme)},Lf=function(e){return""!=e.username||""!=e.password},If=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Pf=function(e,t){var n;return 2==e.length&&cf.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},Nf=function(e){var t;return e.length>1&&Pf(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Of=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Pf(t[0],!0)||t.pop()},Ff=function(e){return"."===e||"%2e"===e.toLowerCase()},Df={},Bf={},zf={},Uf={},Hf={},jf={},qf={},Vf={},Gf={},Wf={},$f={},Yf={},Xf={},Zf={},Kf={},Qf={},Jf={},ep={},tp={},np={},rp={},ip=function(e,t,n,r){var i,a,o,s,u,c=n||Df,l=0,h="",f=!1,p=!1,d=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(yf,"")),t=t.replace(bf,""),i=xh(t);l<=i.length;){switch(a=i[l],c){case Df:if(!a||!cf.test(a)){if(n)return"Invalid scheme";c=zf;continue}h+=a.toLowerCase(),c=Bf;break;case Bf:if(a&&(lf.test(a)||"+"==a||"-"==a||"."==a))h+=a.toLowerCase();else{if(":"!=a){if(n)return"Invalid scheme";h="",c=zf,l=0;continue}if(n&&(Mf(e)!=k(Tf,h)||"file"==h&&(Lf(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=h,n)return void(Mf(e)&&Tf[e.scheme]==e.port&&(e.port=null));h="","file"==e.scheme?c=Zf:Mf(e)&&r&&r.scheme==e.scheme?c=Uf:Mf(e)?c=Vf:"/"==i[l+1]?(c=Hf,l++):(e.cannotBeABaseURL=!0,e.path.push(""),c=tp)}break;case zf:if(!r||r.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==a){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,c=rp;break}c="file"==r.scheme?Zf:jf;continue;case Uf:if("/"!=a||"/"!=i[l+1]){c=jf;continue}c=Gf,l++;break;case Hf:if("/"==a){c=Wf;break}c=ep;continue;case jf:if(e.scheme=r.scheme,a==Qh)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==a||"\\"==a&&Mf(e))c=qf;else if("?"==a)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",c=np;else{if("#"!=a){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),c=ep;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",c=rp}break;case qf:if(!Mf(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,c=ep;continue}c=Wf}else c=Gf;break;case Vf:if(c=Gf,"/"!=a||"/"!=h.charAt(l+1))continue;l++;break;case Gf:if("/"!=a&&"\\"!=a){c=Wf;continue}break;case Wf:if("@"==a){f&&(h="%40"+h),f=!0,o=xh(h);for(var g=0;g<o.length;g++){var v=o[g];if(":"!=v||d){var m=Af(v,Ef);d?e.password+=m:e.username+=m}else d=!0}h=""}else if(a==Qh||"/"==a||"?"==a||"#"==a||"\\"==a&&Mf(e)){if(f&&""==h)return"Invalid authority";l-=xh(h).length+1,h="",c=$f}else h+=a;break;case $f:case Yf:if(n&&"file"==e.scheme){c=Qf;continue}if(":"!=a||p){if(a==Qh||"/"==a||"?"==a||"#"==a||"\\"==a&&Mf(e)){if(Mf(e)&&""==h)return"Invalid host";if(n&&""==h&&(Lf(e)||null!==e.port))return;if(s=wf(e,h))return s;if(h="",c=Jf,n)return;continue}"["==a?p=!0:"]"==a&&(p=!1),h+=a}else{if(""==h)return"Invalid host";if(s=wf(e,h))return s;if(h="",c=Xf,n==Yf)return}break;case Xf:if(!hf.test(a)){if(a==Qh||"/"==a||"?"==a||"#"==a||"\\"==a&&Mf(e)||n){if(""!=h){var y=parseInt(h,10);if(y>65535)return"Invalid port";e.port=Mf(e)&&y===Tf[e.scheme]?null:y,h=""}if(n)return;c=Jf;continue}return"Invalid port"}h+=a;break;case Zf:if(e.scheme="file","/"==a||"\\"==a)c=Kf;else{if(!r||"file"!=r.scheme){c=ep;continue}if(a==Qh)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==a)e.host=r.host,e.path=r.path.slice(),e.query="",c=np;else{if("#"!=a){Nf(i.slice(l).join(""))||(e.host=r.host,e.path=r.path.slice(),Of(e)),c=ep;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",c=rp}}break;case Kf:if("/"==a||"\\"==a){c=Qf;break}r&&"file"==r.scheme&&!Nf(i.slice(l).join(""))&&(Pf(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),c=ep;continue;case Qf:if(a==Qh||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&Pf(h))c=ep;else if(""==h){if(e.host="",n)return;c=Jf}else{if(s=wf(e,h))return s;if("localhost"==e.host&&(e.host=""),n)return;h="",c=Jf}continue}h+=a;break;case Jf:if(Mf(e)){if(c=ep,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=Qh&&(c=ep,"/"!=a))continue}else e.fragment="",c=rp;else e.query="",c=np;break;case ep:if(a==Qh||"/"==a||"\\"==a&&Mf(e)||!n&&("?"==a||"#"==a)){if(".."===(u=(u=h).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(Of(e),"/"==a||"\\"==a&&Mf(e)||e.path.push("")):Ff(h)?"/"==a||"\\"==a&&Mf(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Pf(h)&&(e.host&&(e.host=""),h=h.charAt(0)+":"),e.path.push(h)),h="","file"==e.scheme&&(a==Qh||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",c=np):"#"==a&&(e.fragment="",c=rp)}else h+=Af(a,Rf);break;case tp:"?"==a?(e.query="",c=np):"#"==a?(e.fragment="",c=rp):a!=Qh&&(e.path[0]+=Af(a,_f));break;case np:n||"#"!=a?a!=Qh&&("'"==a&&Mf(e)?e.query+="%27":e.query+="#"==a?"%23":Af(a,_f)):(e.fragment="",c=rp);break;case rp:a!=Qh&&(e.fragment+=Af(a,Cf))}l++}},ap=function(e){var t,n,r=Nc(this,ap,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(e),o=af(r,{type:"URL"});if(void 0!==i)if(i instanceof ap)t=of(i);else if(n=ip(t={},String(i)))throw TypeError(n);if(n=ip(o,a,null,t))throw TypeError(n);var s=o.searchParams=new nf,c=rf(s);c.updateSearchParams(o.query),c.updateURL=function(){o.query=String(s)||null},u||(r.href=sp.call(r),r.origin=up.call(r),r.protocol=cp.call(r),r.username=lp.call(r),r.password=hp.call(r),r.host=fp.call(r),r.hostname=pp.call(r),r.port=dp.call(r),r.pathname=gp.call(r),r.search=vp.call(r),r.searchParams=mp.call(r),r.hash=yp.call(r))},op=ap.prototype,sp=function(){var e=of(this),t=e.scheme,n=e.username,r=e.password,i=e.host,a=e.port,o=e.path,s=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",Lf(e)&&(c+=n+(r?":"+r:"")+"@"),c+=Sf(i),null!==a&&(c+=":"+a)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},up=function(){var e=of(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Mf(e)?t+"://"+Sf(e.host)+(null!==n?":"+n:""):"null"},cp=function(){return of(this).scheme+":"},lp=function(){return of(this).username},hp=function(){return of(this).password},fp=function(){var e=of(this),t=e.host,n=e.port;return null===t?"":null===n?Sf(t):Sf(t)+":"+n},pp=function(){var e=of(this).host;return null===e?"":Sf(e)},dp=function(){var e=of(this).port;return null===e?"":String(e)},gp=function(){var e=of(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},vp=function(){var e=of(this).query;return e?"?"+e:""},mp=function(){return of(this).searchParams},yp=function(){var e=of(this).fragment;return e?"#"+e:""},bp=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(u&&ui(op,{href:bp(sp,(function(e){var t=of(this),n=String(e),r=ip(t,n);if(r)throw TypeError(r);rf(t.searchParams).updateSearchParams(t.query)})),origin:bp(up),protocol:bp(cp,(function(e){var t=of(this);ip(t,String(e)+":",Df)})),username:bp(lp,(function(e){var t=of(this),n=xh(String(e));if(!If(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=Af(n[r],Ef)}})),password:bp(hp,(function(e){var t=of(this),n=xh(String(e));if(!If(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=Af(n[r],Ef)}})),host:bp(fp,(function(e){var t=of(this);t.cannotBeABaseURL||ip(t,String(e),$f)})),hostname:bp(pp,(function(e){var t=of(this);t.cannotBeABaseURL||ip(t,String(e),Yf)})),port:bp(dp,(function(e){var t=of(this);If(t)||(""==(e=String(e))?t.port=null:ip(t,e,Xf))})),pathname:bp(gp,(function(e){var t=of(this);t.cannotBeABaseURL||(t.path=[],ip(t,e+"",Jf))})),search:bp(vp,(function(e){var t=of(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",ip(t,e,np)),rf(t.searchParams).updateSearchParams(t.query)})),searchParams:bp(mp),hash:bp(yp,(function(e){var t=of(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",ip(t,e,rp)):t.fragment=null}))}),ie(op,"toJSON",(function(){return sp.call(this)}),{enumerable:!0}),ie(op,"toString",(function(){return sp.call(this)}),{enumerable:!0}),tf){var wp=tf.createObjectURL,xp=tf.revokeObjectURL;wp&&ie(ap,"createObjectURL",(function(e){return wp.apply(tf,arguments)})),xp&&ie(ap,"revokeObjectURL",(function(e){return xp.apply(tf,arguments)}))}_i(ap,"URL"),Ne({global:!0,forced:!vh,sham:!u},{URL:ap}),Ne({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var kp=!s((function(){return Object.isExtensible(Object.preventExtensions({}))})),Sp=i((function(e){var t=L.f,n=G("meta"),r=0,i=Object.isExtensible||function(){return!0},a=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},o=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!b(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!k(e,n)){if(!i(e))return"F";if(!t)return"E";a(e)}return e[n].objectID},getWeakData:function(e,t){if(!k(e,n)){if(!i(e))return!0;if(!t)return!1;a(e)}return e[n].weakData},onFreeze:function(e){return kp&&o.REQUIRED&&i(e)&&!k(e,n)&&a(e),e}};Y[n]=!0})),_p=(Sp.REQUIRED,Sp.fastKey,Sp.getWeakData,Sp.onFreeze,function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),a=r?"set":"add",u=o[e],c=u&&u.prototype,l=u,h={},f=function(e){var t=c[e];ie(c,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!b(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!b(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!b(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Ie(e,"function"!=typeof u||!(i||c.forEach&&!s((function(){(new u).entries().next()})))))l=n.getConstructor(t,e,r,a),Sp.REQUIRED=!0;else if(Ie(e,!0)){var p=new l,d=p[a](i?{}:-0,1)!=p,g=s((function(){p.has(1)})),v=Zc((function(e){new u(e)})),m=!i&&s((function(){for(var e=new u,t=5;t--;)e[a](t,t);return!e.has(-0)}));v||((l=t((function(t,n){Nc(t,l,e);var i=go(new u,t,l);return null!=n&&jc(n,i[a],{that:i,AS_ENTRIES:r}),i}))).prototype=c,c.constructor=l),(g||m)&&(f("delete"),f("has"),r&&f("get")),(m||d)&&f(a),i&&c.clear&&delete c.clear}return h[e]=l,Ne({global:!0,forced:l!=u},h),_i(l,e),i||n.setStrong(l,e,r),l}),Cp=L.f,Rp=Sp.fastKey,Ep=re.set,Ap=re.getterFor,Tp={getConstructor:function(e,t,n,r){var i=e((function(e,a){Nc(e,i,t),Ep(e,{type:t,index:di(null),first:void 0,last:void 0,size:0}),u||(e.size=0),null!=a&&jc(a,e[r],{that:e,AS_ENTRIES:n})})),a=Ap(t),o=function(e,t,n){var r,i,o=a(e),c=s(e,t);return c?c.value=n:(o.last=c={index:i=Rp(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=c),r&&(r.next=c),u?o.size++:e.size++,"F"!==i&&(o.index[i]=c)),e},s=function(e,t){var n,r=a(e),i=Rp(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Pc(i.prototype,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,u?e.size=0:this.size=0},delete:function(e){var t=a(this),n=s(this,e);if(n){var r=n.next,i=n.previous;delete t.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),t.first==n&&(t.first=r),t.last==n&&(t.last=i),u?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=a(this),r=Fe(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),Pc(i.prototype,n?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return o(this,0===e?0:e,t)}}:{add:function(e){return o(this,e=0===e?0:e,e)}}),u&&Cp(i.prototype,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=Ap(t),a=Ap(r);Ba(e,t,(function(e,t){Ep(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),mo(t)}},Mp=(_p("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Tp),function(e){for(var t=De(this),n=fe(t.length),r=arguments.length,i=ge(r>1?arguments[1]:void 0,n),a=r>2?arguments[2]:void 0,o=void 0===a?n:ge(a,n);o>i;)t[i++]=e;return t});Ne({target:"Array",proto:!0},{fill:Mp}),ga("fill");var Lp={setProperties:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e[n]=r}},strokeLine:function(e,t,n,r,i,a){t=Math.floor(t)+.5,n=Math.floor(n)+.5,r=Math.floor(r)+.5,i=Math.floor(i)+.5,a&&(e.save(),Lp.setProperties(e,a)),e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.stroke(),a&&e.restore()},fillRect:function(e,t,n,r,i,a){t=Math.round(t),n=Math.round(n),a&&(e.save(),Lp.setProperties(e,a)),e.fillRect(t,n,r,i),a&&e.restore()},fillPolygon:function(e,t,n,r){r&&(e.save(),Lp.setProperties(e,r)),Ip(e,t,n),e.fill(),r&&e.restore()},strokePolygon:function(e,t,n,r){r&&(e.save(),Lp.setProperties(e,r)),Ip(e,t,n),e.stroke(),r&&e.restore()},fillText:function(e,t,n,r,i,a){if((i||a)&&e.save(),i&&Lp.setProperties(e,i),a){for(var o in e.translate(n,r),a){var s=a[o];"translate"===o&&e.translate(s.x,s.y),"rotate"===o&&e.rotate(s.angle*Math.PI/180)}e.fillText(t,0,0)}else e.fillText(t,n,r);(i||a)&&e.restore()},strokeText:function(e,t,n,r,i,a){if((i||a)&&e.save(),i&&Lp.setProperties(e,i),a){for(var o in e.translate(n,r),a){var s=a[o];"translate"===o&&e.translate(s.x,s.y),"rotate"===o&&e.rotate(s.angle*Math.PI/180)}e.strokeText(t,0,0)}else e.strokeText(t,n,r);(i||a)&&e.restore()},strokeCircle:function(e,t,n,r,i){i&&(e.save(),Lp.setProperties(e,i)),e.beginPath(),e.arc(t,n,r,0,2*Math.PI),e.stroke(),i&&e.restore()},fillCircle:function(e,t,n,r,i){i&&(e.save(),Lp.setProperties(e,i)),e.beginPath(),e.arc(t,n,r,0,2*Math.PI),e.fill(),i&&e.restore()},drawArrowhead:function(e,t,n,r,i){e.save(),r||(r=5),i&&(e.lineWidth=i),e.beginPath(),e.moveTo(t,n-r/2),e.lineTo(t,n+r/2),e.lineTo(t+r,n),e.lineTo(t,n-r/2),e.closePath(),e.fill(),e.restore()},dashedLine:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};void 0===a&&(a=2),e.setLineDash([a,a]),Lp.strokeLine(e,t,n,r,i,o),e.setLineDash([])},roundRect:function(e,t,n,r,i,a,o,s){void 0===s&&(s=!0),void 0===a&&(a=5),e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+r-a,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+i-a),e.quadraticCurveTo(t+r,n+i,t+r-a,n+i),e.lineTo(t+a,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+a,n),e.closePath(),s&&e.stroke(),o&&e.fill()},polygon:function(e,t,n,r,i){void 0===i&&(i=!0),e.beginPath();var a=t.length;e.moveTo(t[0],n[0]);for(var o=1;o<a;o++)e.lineTo(t[o],n[o]);e.closePath(),i&&e.stroke(),r&&e.fill()}};function Ip(e,t,n){var r,i=t.length;for(r=0;r<i;r++)t[r]=Math.round(t[r]),n[r]=Math.round(n[r]);for(e.beginPath(),e.moveTo(t[0],n[0]),r=1;r<i;r++)e.lineTo(t[r],n[r]);e.closePath()}var Pp,Np,Op,Fp,Dp,Bp=function(){function e(t,n,r,i){bn(this,e),this.guid=gr(),this.trackView=t,this.referenceFrame=r,this.browser=t.browser,this.$viewport=lc('<div class="igv-viewport">'),n.append(this.$viewport),this.$viewport.data("viewportGUID",this.guid),this.$content=lc("<div>",{class:"igv-viewport-content"}),this.$viewport.append(this.$content),this.$content.height(this.$viewport.height()),this.contentDiv=this.$content.get(0),this.$canvas=lc('<canvas class ="igv-canvas">'),this.$content.append(this.$canvas),this.canvas=this.$canvas.get(0),this.ctx=this.canvas.getContext("2d"),this.setWidth(i),this.initializationHelper()}var t,n;return xn(e,[{key:"initializationHelper",value:function(){}},{key:"setTrackLabel",value:function(e){}},{key:"startSpinner",value:function(){}},{key:"stopSpinner",value:function(){}},{key:"checkZoomIn",value:function(){return!0}},{key:"showMessage",value:function(e){this.messageDiv||(this.messageDiv=document.createElement("div"),this.messageDiv.className="igv-viewport-message",this.contentDiv.append(this.messageDiv)),this.messageDiv.textContent=e,this.messageDiv.style.display="inline-block"}},{key:"hideMessage",value:function(e){this.messageDiv&&(this.messageDiv.style.display="none")}},{key:"renderSVGContext",value:(n=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$zoomInNotice||!this.$zoomInNotice.is(":visible")){e.next=2;break}return e.abrupt("return");case 2:r=(r=this.trackView.track.name||this.trackView.track.id).replace(/\W/g,""),i=this.browser.referenceFrameList.indexOf(this.referenceFrame),a=r.toLowerCase()+"_genomic_state_index_"+i,0===i&&"function"==typeof this.trackView.track.paintAxis&&(o=this.trackView.controlCanvas.getBoundingClientRect(),t.addTrackGroupWithTranslationAndClipRect(a+"_axis",n.deltaX-o.width,n.deltaY,o.width,o.height,0),t.save(),this.trackView.track.paintAxis(t,o.width,o.height),t.restore()),s=lc(this.contentDiv).position().top,u=n.deltaX+i*t.multiLocusGap,c=n.deltaY+s,l=this.$viewport.get(0).getBoundingClientRect(),h=l.width,f=l.height,t.addTrackGroupWithTranslationAndClipRect(a,u,c,h,f,-s),this.drawSVGWithContect(t,h,f);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"drawSVGWithContect",value:function(e){}},{key:"saveSVG",value:function(){}},{key:"isVisible",value:function(){return this.$viewport.width()}},{key:"setWidth",value:function(e){this.$viewport.width(e),this.canvas.style.width="".concat(e,"px"),this.canvas.setAttribute("width",e)}},{key:"getWidth",value:function(){return this.$viewport.width()}},{key:"shift",value:function(){}},{key:"setTop",value:function(e){}},{key:"loadFeatures",value:(t=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"setContentHeight",value:function(e){}},{key:"isLoading",value:function(){return!1}},{key:"getContentHeight",value:function(){return this.$content.height()}},{key:"getContentTop",value:function(){return this.contentDiv.offsetTop}},{key:"containsPosition",value:function(e,t){return this.referenceFrame.chr===e&&t>=this.referenceFrame.start&&t<=this.referenceFrame.calculateEnd(this.getWidth())}},{key:"dispose",value:function(){this.popover&&this.popover.dispose(),this.$canvas.off(),this.$canvas.empty(),this.$content.off(),this.$content.empty(),this.$viewport.off(),this.$viewport.empty();for(var e=0,t=Object.keys(this);e<t.length;e++)this[t[e]]=void 0}}]),e}();
/*!!
	 *  Canvas 2 Svg v1.0.19
	 *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
	 *
	 *  Licensed under the MIT license:
	 *  http://www.opensource.org/licenses/mit-license.php
	 *
	 *  Author:
	 *  Kerry Liu
	 *
	 *  Copyright (c) 2014 Gliffy Inc.
	 */function zp(e,t){var n,r=Object.keys(t);for(n=0;n<r.length;n++)e=e.replace(new RegExp("\\{"+r[n]+"\\}","gi"),t[r[n]]);return e}function Up(e){var t,n,r;if(!e)throw new Error("cannot create a random attribute name for an undefined object");t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="";do{for(n="",r=0;r<12;r++)n+=t[Math.floor(Math.random()*t.length)]}while(e[n]);return n}function Hp(e){var t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[e]||t.alphabetic}Dp=function(e,t){var n,r,i,a={};for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r="&"+e[n+1]+";",i=parseInt(e[n],t),a[r]="&#"+i+";";return a["\\xa0"]="&#160;",a}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Pp={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(Op=function(e,t){this.__root=e,this.__ctx=t}).prototype.addColorStop=function(e,t){var n,r=this.__ctx.__createElement("stop");r.setAttribute("offset",e),t&&-1!==t.indexOf("rgba")?(n=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(t),r.setAttribute("stop-color",zp("rgb({r},{g},{b})",{r:n[1],g:n[2],b:n[3]})),r.setAttribute("stop-opacity",n[4])):r.setAttribute("stop-color",t),this.__root.appendChild(r)},Fp=function(e,t){this.__root=e,this.__ctx=t},(Np=function(e){if(!(this instanceof Np))return new Np(e);if(this.config=e,this.width=e.width,this.height=e.height,this.enableMirroring=e.enableMirroring||!1,this.canvas=this,this.__document=document,e.ctx?this.__ctx=e.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.isSVG=!0,this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__createElement("svg"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__root.setAttribute("overflow","visible"),e.viewbox){var t=e.viewbox.x+" "+e.viewbox.y+" "+e.viewbox.width+" "+e.viewbox.height;this.__root.setAttribute("viewBox",t),this.viewbox=e.viewbox}this.__ids={},this.__defs=this.__createElement("defs"),this.__root.appendChild(this.__defs),this.multiLocusGap=e.multiLocusGap;var n={id:"svg_output_backdrop",width:"100%",height:"100%",fill:e.backdropColor||"white"},r=this.__createElement("rect",n);this.__root.appendChild(r),this.__rootGroup=this.__createElement("g",{id:"root-group"}),this.__root.appendChild(this.__rootGroup),this.__currentElement=this.__rootGroup}).prototype.setWidth=function(e){this.width=e,this.__root.setAttribute("width",this.width);var t=this.config.viewbox.x+" "+this.config.viewbox.y+" "+e+" "+this.config.viewbox.height;this.__root.setAttribute("viewBox",t)},Np.prototype.setHeight=function(e){this.height=e,this.__root.setAttribute("height",this.height);var t=this.config.viewbox.x+" "+this.config.viewbox.y+" "+this.config.viewbox.width+" "+e;this.__root.setAttribute("viewBox",t)},Np.prototype.__createElement=function(e,t,n){void 0===t&&(t={});var r=this.__document.createElementNS("http://www.w3.org/2000/svg",e);n&&(r.setAttribute("fill","none"),r.setAttribute("stroke","none"));for(var i=0,a=Object.keys(t);i<a.length;i++){var o=a[i];r.setAttribute(o,t[o])}return r},Np.prototype.__setDefaultStyles=function(){var e,t,n=Object.keys(Pp);for(e=0;e<n.length;e++)this[t=n[e]]=Pp[t].canvas},Np.prototype.__applyStyleState=function(e){var t,n,r=Object.keys(e);for(t=0;t<r.length;t++)this[n=r[t]]=e[n]},Np.prototype.__getStyleState=function(){var e,t,n={},r=Object.keys(Pp);for(e=0;e<r.length;e++)n[t=r[e]]=this[t];return n},Np.prototype.__applyStyleToCurrentElement=function(e){var t=this.__currentElement,n=this.__currentElementsToStyle;n&&(t.setAttribute(e,""),t=n.element,n.children.forEach((function(t){t.setAttribute(e,"")})));var r,i,a,o,s,u=Object.keys(Pp);for(r=0;r<u.length;r++)if(i=Pp[u[r]],a=this[u[r]],i.apply)if(a instanceof Fp){if(a.__ctx)for(;a.__ctx.__defs.childNodes.length;)o=a.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[o]=o,this.__defs.appendChild(a.__ctx.__defs.childNodes[0]);t.setAttribute(i.apply,zp("url(#{id})",{id:a.__root.getAttribute("id")}))}else if(a instanceof Op)t.setAttribute(i.apply,zp("url(#{id})",{id:a.__root.getAttribute("id")}));else if(i&&-1!==i.apply.indexOf(e)&&i.svg!==a)if("stroke"!==i.svgAttr&&"fill"!==i.svgAttr||!a||-1===a.indexOf("rgba")){var c=i.svgAttr;if("globalAlpha"===u[r]&&(c=e+"-"+i.svgAttr,t.getAttribute(c)))continue;t.setAttribute(c,a)}else{s=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(a),t.setAttribute(i.svgAttr,zp("rgb({r},{g},{b})",{r:s[1],g:s[2],b:s[3]}));var l=s[4],h=this.globalAlpha;null!=h&&(l*=h),t.setAttribute(i.svgAttr+"-opacity",l)}},Np.prototype.__closestGroupOrSvg=function(e){return"g"===(e=e||this.__currentElement).nodeName||"svg"===e.nodeName?e:this.__closestGroupOrSvg(e.parentNode)},Np.prototype.getSerializedSvg=function(e){var t,n,r,i,a,o=(new XMLSerializer).serializeToString(this.__root);if(e)for(t=Object.keys(Dp),n=0;n<t.length;n++)r=t[n],i=Dp[r],(a=new RegExp(r,"gi")).test(o)&&(o=o.replace(a,i));return o},Np.prototype.getSvg=function(){return this.__root},Np.prototype.save=function(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())},Np.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var e=this.__stack.pop();this.__applyStyleState(e)},Np.prototype.__addTransform=function(e){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:t,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var n=this.__createElement("g");t.appendChild(n),this.__currentElement=n}var r=this.__currentElement.getAttribute("transform");r?r+=" ":r="",r+=e,this.__currentElement.setAttribute("transform",r)},Np.prototype.addTrackGroupWithTranslationAndClipRect=function(e,t,n,r,i,a){var o=e+"_clip_rect",s=this.__createElement("clipPath",{id:o});this.__defs.appendChild(s),s.appendChild(this.__createElement("rect",{x:"0",y:a.toString(),width:r.toString(),height:i.toString()}));var u=this.__createElement("g");this.__rootGroup.appendChild(u),u.setAttribute("transform",zp("translate({x},{y})",{x:t,y:n})),u.setAttribute("id",e+"_group"),u.setAttribute("clip-path",zp("url(#{id})",{id:o})),this.__currentElement=u},Np.prototype.scale=function(e,t){void 0===t&&(t=e),this.__addTransform(zp("scale({x},{y})",{x:e,y:t}))},Np.prototype.rotate=function(e){var t=180*e/Math.PI;this.__addTransform(zp("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))},Np.prototype.translate=function(e,t){this.__addTransform(zp("translate({x},{y})",{x:e,y:t}))},Np.prototype.transform=function(e,t,n,r,i,a){this.__addTransform(zp("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:t,c:n,d:r,e:i,f:a}))},Np.prototype.beginPath=function(){var e;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(e),this.__currentElement=e},Np.prototype.__applyCurrentDefaultPath=function(){var e=this.__currentElement;"path"===e.nodeName?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)},Np.prototype.__addPathCommand=function(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e},Np.prototype.moveTo=function(e,t){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:t},this.__addPathCommand(zp("M {x} {y}",{x:e,y:t}))},Np.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},Np.prototype.lineTo=function(e,t){this.__currentPosition={x:e,y:t},this.__currentDefaultPath&&this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(zp("L {x} {y}",{x:e,y:t})):this.__addPathCommand(zp("M {x} {y}",{x:e,y:t}))},Np.prototype.bezierCurveTo=function(e,t,n,r,i,a){this.__currentPosition={x:i,y:a},this.__addPathCommand(zp("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:t,cp2x:n,cp2y:r,x:i,y:a}))},Np.prototype.quadraticCurveTo=function(e,t,n,r){this.__currentPosition={x:n,y:r},this.__addPathCommand(zp("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:t,x:n,y:r}))};var jp=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]};Np.prototype.arcTo=function(e,t,n,r,i){var a=this.__currentPosition&&this.__currentPosition.x,o=this.__currentPosition&&this.__currentPosition.y;if(void 0!==a&&void 0!==o){if(i<0)throw new Error("IndexSizeError: The radius provided ("+i+") is negative.");if(a===e&&o===t||e===n&&t===r||0===i)this.lineTo(e,t);else{var s=jp([a-e,o-t]),u=jp([n-e,r-t]);if(s[0]*u[1]!=s[1]*u[0]){var c=s[0]*u[0]+s[1]*u[1],l=Math.acos(Math.abs(c)),h=jp([s[0]+u[0],s[1]+u[1]]),f=i/Math.sin(l/2),p=e+f*h[0],d=t+f*h[1],g=[-s[1],s[0]],v=[u[1],-u[0]],m=function(e){var t=e[0];return e[1]>=0?Math.acos(t):-Math.acos(t)},y=m(g),b=m(v);this.lineTo(p+g[0]*i,d+g[1]*i),this.arc(p,d,i,y,b)}else this.lineTo(e,t)}}},Np.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},Np.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},Np.prototype.rect=function(e,t,n,r){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.closePath()},Np.prototype.fillRect=function(e,t,n,r){r<0&&(t+=r,r=-r),n<0&&(e+=n,n=-n);var i,a,o,s={x:e,y:t,width:n,height:r};(!this.viewbox||(i=this.viewbox,a=s,i.x<a.x+a.width&&i.x+i.width>a.x&&i.y<a.y+a.height&&i.y+i.height>a.y))&&(o=this.__createElement("rect",s,!0),this.__closestGroupOrSvg().appendChild(o),this.__currentElement=o,this.__applyStyleToCurrentElement("fill"))},Np.prototype.strokeRect=function(e,t,n,r){var i;i=this.__createElement("rect",{x:e,y:t,width:n,height:r},!0),this.__closestGroupOrSvg().appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("stroke")},Np.prototype.__clearCanvas=function(){for(var e=this.__closestGroupOrSvg().getAttribute("transform"),t=this.__root.childNodes[1],n=t.childNodes,r=n.length-1;r>=0;r--)n[r]&&t.removeChild(n[r]);this.__currentElement=t,this.__groupStack=[],e&&this.__addTransform(e)},Np.prototype.clearRect=function(e,t,n,r){if(0!==e||0!==t||n!==this.width||r!==this.height){var i,a=this.__closestGroupOrSvg();i=this.__createElement("rect",{x:e,y:t,width:n,height:r,fill:"#FFFFFF"},!0),a.appendChild(i)}else this.__clearCanvas()},Np.prototype.createLinearGradient=function(e,t,n,r){var i=this.__createElement("linearGradient",{id:Up(this.__ids),x1:e+"px",x2:n+"px",y1:t+"px",y2:r+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(i),new Op(i,this)},Np.prototype.createRadialGradient=function(e,t,n,r,i,a){var o=this.__createElement("radialGradient",{id:Up(this.__ids),cx:r+"px",cy:i+"px",r:a+"px",fx:e+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(o),new Op(o,this)},Np.prototype.__parseFont=function(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),t={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(t.decoration="underline"),this.__fontHref&&(t.href=this.__fontHref),t},Np.prototype.__wrapTextLink=function(e,t){if(e.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),n.appendChild(t),n}return t},Np.prototype.__applyText=function(e,t,n,r){var i,a,o=this.__parseFont(),s=this.__closestGroupOrSvg(),u=this.__createElement("text",{"font-family":o.family,"font-size":o.size,"font-style":o.style,"font-weight":o.weight,"text-decoration":o.decoration,x:t,y:n,"text-anchor":(i=this.textAlign,a={left:"start",right:"end",center:"middle",start:"start",end:"end"},a[i]||a.start),"dominant-baseline":Hp(this.textBaseline)},!0);u.appendChild(this.__document.createTextNode(e)),this.__currentElement=u,this.__applyStyleToCurrentElement(r),s.appendChild(this.__wrapTextLink(o,u))},Np.prototype.fillText=function(e,t,n){this.__applyText(e,t,n,"fill")},Np.prototype.strokeText=function(e,t,n){this.__applyText(e,t,n,"stroke")},Np.prototype.measureText=function(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)},Np.prototype.arc=function(e,t,n,r,i,a){if(r!==i){(r%=2*Math.PI)==(i%=2*Math.PI)&&(i=(i+2*Math.PI-.001*(a?-1:1))%(2*Math.PI));var o=e+n*Math.cos(i),s=t+n*Math.sin(i),u=e+n*Math.cos(r),c=t+n*Math.sin(r),l=a?0:1,h=0,f=i-r;f<0&&(f+=2*Math.PI),h=a?f>Math.PI?0:1:f>Math.PI?1:0,this.lineTo(u,c),this.__addPathCommand(zp("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n,ry:n,xAxisRotation:0,largeArcFlag:h,sweepFlag:l,endX:o,endY:s})),this.__currentPosition={x:o,y:s}}},Np.prototype.clip=function(){var e=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),n=Up(this.__ids),r=this.__createElement("g");this.__applyCurrentDefaultPath(),e.removeChild(this.__currentElement),t.setAttribute("id",n),t.appendChild(this.__currentElement),this.__defs.appendChild(t),e.setAttribute("clip-path",zp("url(#{id})",{id:n})),e.appendChild(r),this.__currentElement=r},Np.prototype.drawImage=function(){var e,t,n,r,i,a,o,s,u,c,l,h,f,p=Array.prototype.slice.call(arguments),d=p[0],g=0,v=0;if(3===p.length)e=p[1],t=p[2],n=i=d.width,r=a=d.height;else if(5===p.length)e=p[1],t=p[2],n=p[3],r=p[4],i=d.width,a=d.height;else{if(9!==p.length)throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);g=p[1],v=p[2],i=p[3],a=p[4],e=p[5],t=p[6],n=p[7],r=p[8]}o=this.__closestGroupOrSvg(),this.__currentElement;var m="translate("+e+", "+t+")";if(d instanceof Np){if((s=d.getSvg().cloneNode(!0)).childNodes&&s.childNodes.length>1){for(u=s.childNodes[0];u.childNodes.length;)f=u.childNodes[0].getAttribute("id"),this.__ids[f]=f,this.__defs.appendChild(u.childNodes[0]);if(c=s.childNodes[1]){var y,b=c.getAttribute("transform");y=b?b+" "+m:m,c.setAttribute("transform",y),o.appendChild(c)}}}else"CANVAS"!==d.nodeName&&"IMG"!==d.nodeName||((l=this.__createElement("image")).setAttribute("width",n),l.setAttribute("height",r),l.setAttribute("preserveAspectRatio","none"),(g||v||i!==d.width||a!==d.height)&&((h=this.__document.createElement("canvas")).width=n,h.height=r,h.getContext("2d").drawImage(d,g,v,i,a,0,0,n,r),d=h),l.setAttribute("transform",m),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===d.nodeName?d.toDataURL():d.getAttribute("src")),o.appendChild(l))},Np.prototype.createPattern=function(e,t){var n,r=this.__document.__createElement("pattern"),i=Up(this.__ids);return r.setAttribute("id",i),r.setAttribute("width",e.width),r.setAttribute("height",e.height),"CANVAS"===e.nodeName||"IMG"===e.nodeName?((n=this.__createElement("image")).setAttribute("width",e.width),n.setAttribute("height",e.height),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===e.nodeName?e.toDataURL():e.getAttribute("src")),r.appendChild(n),this.__defs.appendChild(r)):e instanceof Np&&(r.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(r)),new Fp(r,this)},Np.prototype.setLineDash=function(e){e&&e.length>0?this.lineDash=e.join(","):this.lineDash=null},Np.prototype.drawFocusRing=function(){},Np.prototype.createImageData=function(){},Np.prototype.getImageData=function(){},Np.prototype.putImageData=function(){},Np.prototype.globalCompositeOperation=function(){},Np.prototype.setTransform=function(){};var qp=Np,Vp=function(e){kn(n,e);var t=Mn(n);function n(e,r,i,a){var o;return bn(this,n),(o=t.call(this,e,r,i,a)).$canvas.on("click",(function(e){return o.handleClick(e,o.canvas)})),o}return xn(n,[{key:"setWidth",value:function(e){this.$viewport.width(e),this.ctx.canvas.style.width="".concat(e,"px"),this.ctx.canvas.width=window.devicePixelRatio*e,this.ctx.canvas.style.height="".concat(this.$viewport.height(),"px"),this.ctx.canvas.height=window.devicePixelRatio*this.$viewport.height(),this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}},{key:"handleClick",value:function(e,t){var n=vr(e,t),r=n.xNormalized,i=n.width,a=this.browser.genome.getChromosome(this.referenceFrame.chr).bpLength,o=this.referenceFrame.bpPerPixel*i/a,s=r;s-o/2<0&&(s=o/2),s+o/2>1&&(s=1-o/2);var u=Math.round((s-o/2)*a),c=Math.round((s+o/2)*a);this.referenceFrame.start=u,this.referenceFrame.initialEnd=c,this.referenceFrame.bpPerPixel=(c-u)/i,this.browser.referenceFrameList>1?this.browser.updateLocusSearchWidget(this.browser.referenceFrameList):this.browser.updateLocusSearchWidget([this.referenceFrame]),this.browser.updateViews()}},{key:"checkZoomIn",value:function(){return!0}},{key:"setTop",value:function(e){}},{key:"saveSVG",value:function(){var e=this.$viewport.get(0).getBoundingClientRect(),t=e.width,n=e.height,r=new qp({width:t,height:n,viewbox:{x:0,y:-lc(this.contentDiv).position().top,width:t,height:n}});this.drawSVGWithContect(r,t,n);var i=r.getSerializedSvg(!0),a=URL.createObjectURL(new Blob([i],{type:"application/octet-stream"}));Wr("".concat(this.trackView.track.id,".svg"),a)}},{key:"drawSVGWithContect",value:function(e,t,n){var r={ctx:e,width:t,height:n,genome:this.browser.genome,referenceFrame:this.referenceFrame,ideogramWidth:this.$content.width()};e.save(),Gp(r),e.restore()}},{key:"repaint",value:function(){Gp({ctx:this.ctx,width:this.$canvas.width(),height:this.$canvas.height(),genome:this.browser.genome,referenceFrame:this.referenceFrame,ideogramWidth:this.$content.width()})}}]),n}(Bp);function Gp(e){var t=e.ctx,n=e.width,r=e.height,i=e.genome,a=e.referenceFrame,o=e.ideogramWidth,s=a.chr,u=i.getChromosome(s);if(!(!u||n<=0||r<=0||"all"===s.toLowerCase())){Lp.fillRect(t,0,0,n,r,{fillStyle:ei.greyScale(255)}),function(e){var t,n,r,i,a,o,s,u,c,l,h=e.ctx,f=e.chr,p=e.referenceFrame,d=e.genome,g=e.width,v=e.height,m=e.stainColors;if(void 0!==d){if(Lp.fillRect(h,0,0,g,v,{fillStyle:ei.greyScale(255)}),t=d.getCytobands(f)){if(r=0+v/2,i=[],a=[],0===t.length)return;for(o=p.genome.getChromosome(f).bpLength,s=g/o,h.beginPath(),Lp.roundRect(h,.5,.5,g-1,v-1,(v-1)/2,0,1),h.clip(),l=0;l<t.length;l++)n=t[l],u=s*n.start,c=s*n.end,"c"===n.type?("p"===n.name.charAt(0)?(i[0]=u,a[0]=v+0,i[1]=u,a[1]=0,i[2]=c,a[2]=r):(i[0]=c,a[0]=v+0,i[1]=c,a[1]=0,i[2]=u,a[2]=r),h.fillStyle="rgb(150, 0, 0)",h.strokeStyle="rgb(150, 0, 0)",Lp.polygon(h,i,a,1,0)):(h.fillStyle=Wp(m,n),Lp.fillRect(h,u,1,c-u,v-2))}h.strokeStyle=ei.greyScale(41),Lp.roundRect(h,.5,.5,g-1,v-1,(v-1)/2,0,1)}}({ctx:t,chr:s,referenceFrame:a,genome:i,width:n,height:r,stainColors:[]});var c=Math.round(a.bpPerPixel*o),l=a.start,h=u.bpLength,f=i.getCytobands(s);if(f&&f.length>0&&(h=Math.max(h,f[f.length-1].end)),c<h){var p=c/h,d=l/h,g=Math.floor(d*n),v=Math.floor(p*n);g=Math.max(0,g),g=Math.min(n-v,g),t.save(),t.strokeStyle="red",t.lineWidth=v<2?1:2;var m=g+t.lineWidth/2;v=v<2?1:v-t.lineWidth;var y=t.lineWidth/2,b=r-t.lineWidth;t.strokeRect(m,y,v,b),t.restore()}}}function Wp(e,t){if("c"===t.type)return"rgb(150, 10, 10)";var n=t.stain,r=230;"p"===t.type&&(r=Math.floor(230-n/100*230));var i=e[r];return i||(i="rgb("+r+","+r+","+r+")",e[r]=i),i}var $p=function(e){return function(t,n,r,i){Oe(n);var a=De(t),o=v(a),s=fe(a.length),u=e?s-1:0,c=e?-1:1;if(r<2)for(;;){if(u in o){i=o[u],u+=c;break}if(u+=c,e?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;e?u>=0:s>u;u+=c)u in o&&(i=n(i,o[u],u,a));return i}},Yp={left:$p(!1),right:$p(!0)},Xp=Yp.left,Zp=lt("reduce"),Kp=ot("reduce",{1:0});Ne({target:"Array",proto:!0,forced:!Zp||!Kp||!Qc&&et>79&&et<83},{reduce:function(e){return Xp(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Qp=vc.trim,Jp=o.parseInt,ed=/^[+-]?0[Xx]/,td=8!==Jp(hc+"08")||22!==Jp(hc+"0x16")?function(e,t){var n=Qp(String(e));return Jp(n,t>>>0||(ed.test(n)?16:10))}:Jp;Ne({target:"Number",stat:!0,forced:Number.parseInt!=td},{parseInt:td}),Ne({target:"Object",stat:!0,forced:Object.assign!==bh},{assign:bh});var nd=h.f,rd=function(e){return function(t){for(var n,r=y(t),i=si(r),a=i.length,o=0,s=[];a>o;)n=i[o++],u&&!nd.call(r,n)||s.push(e?[n,r[n]]:r[n]);return s}},id={entries:rd(!0),values:rd(!1)},ad=id.values;Ne({target:"Object",stat:!0},{values:function(e){return ad(e)}});var od,sd="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,ud=L.f,cd=o.Int8Array,ld=cd&&cd.prototype,hd=o.Uint8ClampedArray,fd=hd&&hd.prototype,pd=cd&&Ra(cd),dd=ld&&Ra(ld),gd=Object.prototype,vd=gd.isPrototypeOf,md=Ve("toStringTag"),yd=G("TYPED_ARRAY_TAG"),bd=sd&&!!Pa&&"Opera"!==fo(o.opera),wd=!1,xd={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},kd={BigInt64Array:8,BigUint64Array:8},Sd=function(e){if(!b(e))return!1;var t=fo(e);return k(xd,t)||k(kd,t)};for(od in xd)o[od]||(bd=!1);if((!bd||"function"!=typeof pd||pd===Function.prototype)&&(pd=function(){throw TypeError("Incorrect invocation")},bd))for(od in xd)o[od]&&Pa(o[od],pd);if((!bd||!dd||dd===gd)&&(dd=pd.prototype,bd))for(od in xd)o[od]&&Pa(o[od].prototype,dd);if(bd&&Ra(fd)!==dd&&Pa(fd,dd),u&&!k(dd,md))for(od in wd=!0,ud(dd,md,{get:function(){return b(this)?this[yd]:void 0}}),xd)o[od]&&I(o[od],yd,od);var _d={NATIVE_ARRAY_BUFFER_VIEWS:bd,TYPED_ARRAY_TAG:wd&&yd,aTypedArray:function(e){if(Sd(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(Pa){if(vd.call(pd,e))return e}else for(var t in xd)if(k(xd,od)){var n=o[t];if(n&&(e===n||vd.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(u){if(n)for(var r in xd){var i=o[r];i&&k(i.prototype,e)&&delete i.prototype[e]}dd[e]&&!n||ie(dd,e,n?t:bd&&ld[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(u){if(Pa){if(n)for(r in xd)(i=o[r])&&k(i,e)&&delete i[e];if(pd[e]&&!n)return;try{return ie(pd,e,n?t:bd&&cd[e]||t)}catch(e){}}for(r in xd)!(i=o[r])||i[e]&&!n||ie(i,e,t)}},isView:function(e){if(!b(e))return!1;var t=fo(e);return"DataView"===t||k(xd,t)||k(kd,t)},isTypedArray:Sd,TypedArray:pd,TypedArrayPrototype:dd},Cd=_d.NATIVE_ARRAY_BUFFER_VIEWS,Rd=o.ArrayBuffer,Ed=o.Int8Array,Ad=!Cd||!s((function(){Ed(1)}))||!s((function(){new Ed(-1)}))||!Zc((function(e){new Ed,new Ed(null),new Ed(1.5),new Ed(e)}),!0)||s((function(){return 1!==new Ed(new Rd(2),1,void 0).length})),Td=function(e){if(void 0===e)return 0;var t=le(e),n=fe(t);if(t!==n)throw RangeError("Wrong length or index");return n},Md=Math.abs,Ld=Math.pow,Id=Math.floor,Pd=Math.log,Nd=Math.LN2,Od=function(e,t,n){var r,i,a,o=new Array(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?Ld(2,-24)-Ld(2,-77):0,h=e<0||0===e&&1/e<0?1:0,f=0;for((e=Md(e))!=e||e===1/0?(i=e!=e?1:0,r=u):(r=Id(Pd(e)/Nd),e*(a=Ld(2,-r))<1&&(r--,a*=2),(e+=r+c>=1?l/a:l*Ld(2,1-c))*a>=2&&(r++,a/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(e*a-1)*Ld(2,t),r+=c):(i=e*Ld(2,c-1)*Ld(2,t),r=0));t>=8;o[f++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;o[f++]=255&r,r/=256,s-=8);return o[--f]|=128*h,o},Fd=function(e,t){var n,r=e.length,i=8*r-t-1,a=(1<<i)-1,o=a>>1,s=i-7,u=r-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;n=256*n+e[u],u--,s-=8);if(0===l)l=1-o;else{if(l===a)return n?NaN:c?-1/0:1/0;n+=Ld(2,t),l-=o}return(c?-1:1)*n*Ld(2,l-t)},Dd=ke.f,Bd=L.f,zd=re.get,Ud=re.set,Hd=o.ArrayBuffer,jd=Hd,qd=o.DataView,Vd=qd&&qd.prototype,Gd=Object.prototype,Wd=o.RangeError,$d=Od,Yd=Fd,Xd=function(e){return[255&e]},Zd=function(e){return[255&e,e>>8&255]},Kd=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Qd=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Jd=function(e){return $d(e,23,4)},eg=function(e){return $d(e,52,8)},tg=function(e,t){Bd(e.prototype,t,{get:function(){return zd(this)[t]}})},ng=function(e,t,n,r){var i=Td(n),a=zd(e);if(i+t>a.byteLength)throw Wd("Wrong index");var o=zd(a.buffer).bytes,s=i+a.byteOffset,u=o.slice(s,s+t);return r?u:u.reverse()},rg=function(e,t,n,r,i,a){var o=Td(n),s=zd(e);if(o+t>s.byteLength)throw Wd("Wrong index");for(var u=zd(s.buffer).bytes,c=o+s.byteOffset,l=r(+i),h=0;h<t;h++)u[c+h]=l[a?h:t-h-1]};if(sd){if(!s((function(){Hd(1)}))||!s((function(){new Hd(-1)}))||s((function(){return new Hd,new Hd(1.5),new Hd(NaN),"ArrayBuffer"!=Hd.name}))){for(var ig,ag=(jd=function(e){return Nc(this,jd),new Hd(Td(e))}).prototype=Hd.prototype,og=Dd(Hd),sg=0;og.length>sg;)(ig=og[sg++])in jd||I(jd,ig,Hd[ig]);ag.constructor=jd}Pa&&Ra(Vd)!==Gd&&Pa(Vd,Gd);var ug=new qd(new jd(2)),cg=Vd.setInt8;ug.setInt8(0,2147483648),ug.setInt8(1,2147483649),!ug.getInt8(0)&&ug.getInt8(1)||Pc(Vd,{setInt8:function(e,t){cg.call(this,e,t<<24>>24)},setUint8:function(e,t){cg.call(this,e,t<<24>>24)}},{unsafe:!0})}else jd=function(e){Nc(this,jd,"ArrayBuffer");var t=Td(e);Ud(this,{bytes:Mp.call(new Array(t),0),byteLength:t}),u||(this.byteLength=t)},qd=function(e,t,n){Nc(this,qd,"DataView"),Nc(e,jd,"DataView");var r=zd(e).byteLength,i=le(t);if(i<0||i>r)throw Wd("Wrong offset");if(i+(n=void 0===n?r-i:fe(n))>r)throw Wd("Wrong length");Ud(this,{buffer:e,byteLength:n,byteOffset:i}),u||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},u&&(tg(jd,"byteLength"),tg(qd,"buffer"),tg(qd,"byteLength"),tg(qd,"byteOffset")),Pc(qd.prototype,{getInt8:function(e){return ng(this,1,e)[0]<<24>>24},getUint8:function(e){return ng(this,1,e)[0]},getInt16:function(e){var t=ng(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=ng(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Qd(ng(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return Qd(ng(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return Yd(ng(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return Yd(ng(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){rg(this,1,e,Xd,t)},setUint8:function(e,t){rg(this,1,e,Xd,t)},setInt16:function(e,t){rg(this,2,e,Zd,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){rg(this,2,e,Zd,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){rg(this,4,e,Kd,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){rg(this,4,e,Kd,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){rg(this,4,e,Jd,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){rg(this,8,e,eg,t,arguments.length>2?arguments[2]:void 0)}});_i(jd,"ArrayBuffer"),_i(qd,"DataView");var lg={ArrayBuffer:jd,DataView:qd},hg=function(e,t){var n=function(e){var t=le(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}(e);if(n%t)throw RangeError("Wrong offset");return n},fg=_d.aTypedArrayConstructor,pg=function(e){var t,n,r,i,a,o,s=De(e),u=arguments.length,c=u>1?arguments[1]:void 0,l=void 0!==c,h=zc(s);if(null!=h&&!Dc(h))for(o=(a=h.call(s)).next,s=[];!(i=o.call(a)).done;)s.push(i.value);for(l&&u>2&&(c=Fe(c,arguments[2],2)),n=fe(s.length),r=new(fg(this))(n),t=0;n>t;t++)r[t]=l?c(s[t],t):s[t];return r},dg=i((function(e){var t=ke.f,n=Xe.forEach,r=re.get,i=re.set,a=L.f,s=A.f,c=Math.round,l=o.RangeError,h=lg.ArrayBuffer,p=lg.DataView,d=_d.NATIVE_ARRAY_BUFFER_VIEWS,g=_d.TYPED_ARRAY_TAG,v=_d.TypedArray,m=_d.TypedArrayPrototype,y=_d.aTypedArrayConstructor,x=_d.isTypedArray,S=function(e,t){for(var n=0,r=t.length,i=new(y(e))(r);r>n;)i[n]=t[n++];return i},_=function(e,t){a(e,t,{get:function(){return r(this)[t]}})},C=function(e){var t;return e instanceof h||"ArrayBuffer"==(t=fo(e))||"SharedArrayBuffer"==t},R=function(e,t){return x(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},E=function(e,t){return R(e,t=w(t,!0))?f(2,e[t]):s(e,t)},T=function(e,t,n){return!(R(e,t=w(t,!0))&&b(n)&&k(n,"value"))||k(n,"get")||k(n,"set")||n.configurable||k(n,"writable")&&!n.writable||k(n,"enumerable")&&!n.enumerable?a(e,t,n):(e[t]=n.value,e)};u?(d||(A.f=E,L.f=T,_(m,"buffer"),_(m,"byteOffset"),_(m,"byteLength"),_(m,"length")),Ne({target:"Object",stat:!0,forced:!d},{getOwnPropertyDescriptor:E,defineProperty:T}),e.exports=function(e,s,u){var f=e.match(/\d+$/)[0]/8,y=e+(u?"Clamped":"")+"Array",w="get"+e,k="set"+e,_=o[y],R=_,E=R&&R.prototype,A={},T=function(e,t){a(e,t,{get:function(){return function(e,t){var n=r(e);return n.view[w](t*f+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var i=r(e);u&&(n=(n=c(n))<0?0:n>255?255:255&n),i.view[k](t*f+i.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};d?Ad&&(R=s((function(e,t,n,r){return Nc(e,R,y),go(b(t)?C(t)?void 0!==r?new _(t,hg(n,f),r):void 0!==n?new _(t,hg(n,f)):new _(t):x(t)?S(R,t):pg.call(R,t):new _(Td(t)),e,R)})),Pa&&Pa(R,v),n(t(_),(function(e){e in R||I(R,e,_[e])})),R.prototype=E):(R=s((function(e,t,n,r){Nc(e,R,y);var a,o,s,u=0,c=0;if(b(t)){if(!C(t))return x(t)?S(R,t):pg.call(R,t);a=t,c=hg(n,f);var d=t.byteLength;if(void 0===r){if(d%f)throw l("Wrong length");if((o=d-c)<0)throw l("Wrong length")}else if((o=fe(r)*f)+c>d)throw l("Wrong length");s=o/f}else s=Td(t),a=new h(o=s*f);for(i(e,{buffer:a,byteOffset:c,byteLength:o,length:s,view:new p(a)});u<s;)T(e,u++)})),Pa&&Pa(R,v),E=R.prototype=di(m)),E.constructor!==R&&I(E,"constructor",R),g&&I(E,g,y),A[y]=R,Ne({global:!0,forced:R!=_,sham:!d},A),"BYTES_PER_ELEMENT"in R||I(R,"BYTES_PER_ELEMENT",f),"BYTES_PER_ELEMENT"in E||I(E,"BYTES_PER_ELEMENT",f),mo(y)}):e.exports=function(){}}));dg("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var gg=Math.min,vg=[].copyWithin||function(e,t){var n=De(this),r=fe(n.length),i=ge(e,r),a=ge(t,r),o=arguments.length>2?arguments[2]:void 0,s=gg((void 0===o?r:ge(o,r))-a,r-i),u=1;for(a<i&&i<a+s&&(u=-1,a+=s-1,i+=s-1);s-- >0;)a in n?n[i]=n[a]:delete n[i],i+=u,a+=u;return n},mg=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("copyWithin",(function(e,t){return vg.call(mg(this),e,t,arguments.length>2?arguments[2]:void 0)}));var yg=Xe.every,bg=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("every",(function(e){return yg(bg(this),e,arguments.length>1?arguments[1]:void 0)}));var wg=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("fill",(function(e){return Mp.apply(wg(this),arguments)}));var xg=Xe.filter,kg=_d.aTypedArray,Sg=_d.aTypedArrayConstructor;(0,_d.exportTypedArrayMethod)("filter",(function(e){for(var t=xg(kg(this),e,arguments.length>1?arguments[1]:void 0),n=rn(this,this.constructor),r=0,i=t.length,a=new(Sg(n))(i);i>r;)a[r]=t[r++];return a}));var _g=Xe.find,Cg=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("find",(function(e){return _g(Cg(this),e,arguments.length>1?arguments[1]:void 0)}));var Rg=Xe.findIndex,Eg=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("findIndex",(function(e){return Rg(Eg(this),e,arguments.length>1?arguments[1]:void 0)}));var Ag=Xe.forEach,Tg=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("forEach",(function(e){Ag(Tg(this),e,arguments.length>1?arguments[1]:void 0)}));var Mg=me.includes,Lg=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("includes",(function(e){return Mg(Lg(this),e,arguments.length>1?arguments[1]:void 0)}));var Ig=me.indexOf,Pg=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("indexOf",(function(e){return Ig(Pg(this),e,arguments.length>1?arguments[1]:void 0)}));var Ng=Ve("iterator"),Og=o.Uint8Array,Fg=Ha.values,Dg=Ha.keys,Bg=Ha.entries,zg=_d.aTypedArray,Ug=_d.exportTypedArrayMethod,Hg=Og&&Og.prototype[Ng],jg=!!Hg&&("values"==Hg.name||null==Hg.name),qg=function(){return Fg.call(zg(this))};Ug("entries",(function(){return Bg.call(zg(this))})),Ug("keys",(function(){return Dg.call(zg(this))})),Ug("values",qg,!jg),Ug(Ng,qg,!jg);var Vg=_d.aTypedArray,Gg=[].join;(0,_d.exportTypedArrayMethod)("join",(function(e){return Gg.apply(Vg(this),arguments)}));var Wg=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("lastIndexOf",(function(e){return Ct.apply(Wg(this),arguments)}));var $g=Xe.map,Yg=_d.aTypedArray,Xg=_d.aTypedArrayConstructor;(0,_d.exportTypedArrayMethod)("map",(function(e){return $g(Yg(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(Xg(rn(e,e.constructor)))(t)}))}));var Zg=Yp.left,Kg=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("reduce",(function(e){return Zg(Kg(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Qg=Yp.right,Jg=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("reduceRight",(function(e){return Qg(Jg(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var ev=_d.aTypedArray,tv=_d.exportTypedArrayMethod,nv=Math.floor;tv("reverse",(function(){for(var e,t=ev(this).length,n=nv(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}));var rv=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("set",(function(e){rv(this);var t=hg(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=De(e),i=fe(r.length),a=0;if(i+t>n)throw RangeError("Wrong length");for(;a<i;)this[t+a]=r[a++]}),s((function(){new Int8Array(1).set({})})));var iv=_d.aTypedArray,av=_d.aTypedArrayConstructor,ov=[].slice;(0,_d.exportTypedArrayMethod)("slice",(function(e,t){for(var n=ov.call(iv(this),e,t),r=rn(this,this.constructor),i=0,a=n.length,o=new(av(r))(a);a>i;)o[i]=n[i++];return o}),s((function(){new Int8Array(1).slice()})));var sv=Xe.some,uv=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("some",(function(e){return sv(uv(this),e,arguments.length>1?arguments[1]:void 0)}));var cv=_d.aTypedArray,lv=[].sort;(0,_d.exportTypedArrayMethod)("sort",(function(e){return lv.call(cv(this),e)}));var hv=_d.aTypedArray;(0,_d.exportTypedArrayMethod)("subarray",(function(e,t){var n=hv(this),r=n.length,i=ge(e,r);return new(rn(n,n.constructor))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,fe((void 0===t?r:ge(t,r))-i))}));var fv=o.Int8Array,pv=_d.aTypedArray,dv=_d.exportTypedArrayMethod,gv=[].toLocaleString,vv=[].slice,mv=!!fv&&s((function(){gv.call(new fv(1))}));dv("toLocaleString",(function(){return gv.apply(mv?vv.call(pv(this)):pv(this),arguments)}),s((function(){return[1,2].toLocaleString()!=new fv([1,2]).toLocaleString()}))||!s((function(){fv.prototype.toLocaleString.call([1,2])})));var yv=_d.exportTypedArrayMethod,bv=o.Uint8Array,wv=bv&&bv.prototype||{},xv=[].toString,kv=[].join;s((function(){xv.call({})}))&&(xv=function(){return kv.call(this)});var Sv=wv.toString!=xv;yv("toString",xv,Sv);var _v=function(e,t,n,r){this.start=e,this.end=t,this.name=n,this.stain=0,"acen"===r?this.type="c":(this.type=r.charAt(1),"p"===this.type&&(this.stain=parseInt(r.substring(4))))},Cv=function(e,t,n,r){this.chr=e,this.start=t,this.end=n,this.features=r};Cv.prototype.contains=function(e,t,n){return this.chr===e&&this.start<=t&&this.end>=n},Cv.prototype.containsRange=function(e){return this.chr===e.chr&&this.start<=e.start&&this.end>=e.end};var Rv=function(e,t,n,r,i){this.name=e,this.order=t,this.bpStart=n,this.bpLength=r,this.rangeLocus=i},Ev=me.includes,Av=ot("indexOf",{ACCESSORS:!0,1:0});Ne({target:"Array",proto:!0,forced:!Av},{includes:function(e){return Ev(this,e,arguments.length>1?arguments[1]:void 0)}}),ga("includes");var Tv=String.fromCharCode,Mv=String.fromCodePoint,Lv=!!Mv&&1!=Mv.length;Ne({target:"String",stat:!0,forced:Lv},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,i=0;r>i;){if(t=+arguments[i++],ge(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?Tv(t):Tv(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}}),Ne({target:"String",proto:!0,forced:!Ht("includes")},{includes:function(e){return!!~String(m(this)).indexOf(zt(e),arguments.length>1?arguments[1]:void 0)}});var Iv={oauthTokens:{},setToken:function(e,t){t=t||"googleapis",this.oauthTokens[t]=e,"googleapis"===t&&(this.google.access_token=e)},getToken:function(e){var t;e=e||"googleapis";for(var n=0,r=Object.keys(this.oauthTokens);n<r.length;n++){var i=r[n];if(Pv(i).test(e)){t=this.oauthTokens[i];break}}return t},removeToken:function(e){e=e||"googleapis";for(var t=0,n=Object.keys(this.oauthTokens);t<n.length;t++){var r=n[t];Pv(r).test(e)&&(this.oauthTokens[r]=void 0)}"googleapis"===e&&(this.google.access_token=void 0)},google:{setToken:function(e){Iv.setToken(e)}}};function Pv(e){return new RegExp("^"+e.split(/\*+/).map(Nv).join(".*")+"$")}function Nv(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function Ov(e,t){var n=[],r=0,i=0;for(t=t||e.byteLength-18;r<t;)try{var a=new Uint8Array(e,r,18),o=a[11]<<8|a[10],s=(a[12],a[13],a[15],a[14],1+(a[17]<<8|a[16])),u=12+o+r,c=e.byteLength-u,l=s-o-19;if(c<l||l<=0)break;var h=new Uint8Array(e,u,l),f=new wr.RawInflate(h),p=f.decompress();r+=f.ip+26,i+=p.byteLength,n.push(p)}catch(e){console.error(e);break}if(1===n.length)return n[0];for(var d=new Uint8Array(i),g=0,v=0;v<n.length;++v){var m=new Uint8Array(n[v]);Bv(m,0,d,g,m.length),g+=m.length}return d}function Fv(e){var t=new Uint8Array(e);return t[17]<<8|t[16]+1}var Dv="function"==typeof new Uint8Array(1).subarray;function Bv(e,t,n,r,i){if(0!==i){if(!e)throw"Undef src";if(!n)throw"Undef dest";0===t&&i===e.length?zv(e,n,r):Dv?zv(e.subarray(t,t+i),n,r):1===e.BYTES_PER_ELEMENT&&i>100?zv(new Uint8Array(e.buffer,e.byteOffset+t,i),n,r):function(e,t,n,r,i){for(var a=0;a<i;++a)n[r+a]=e[t+a]}(e,t,n,r,i)}}function zv(e,t,n){t.set(e,n)}var Uv=o.isFinite,Hv=Number.isFinite||function(e){return"number"==typeof e&&Uv(e)};Ne({target:"Number",stat:!0},{isFinite:Hv}),Ne({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var jv="".repeat||function(e){var t=String(m(this)),n="",r=le(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},qv=1..toFixed,Vv=Math.floor,Gv=function(e,t,n){return 0===t?n:t%2==1?Gv(e,t-1,n*e):Gv(e*e,t/2,n)},Wv=qv&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){qv.call({})}));function $v(e){var t=new Set(["boolean","number","string","symbol"]),n=vn(e);return void 0!==e&&(t.has(n)||e.substring||e.toFixed)}function Yv(e,t){var n={oauthToken:e.oauthToken,headers:e.headers,withCredentials:e.withCredentials,filename:e.filename};return Object.assign(n,t)}Ne({target:"Number",proto:!0,forced:Wv},{toFixed:function(e){var t,n,r,i,a=function(e){if("number"!=typeof e&&"Number"!=d(e))throw TypeError("Incorrect invocation");return+e}(this),o=le(e),s=[0,0,0,0,0,0],u="",c="0",l=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*s[n],s[n]=r%1e7,r=Vv(r/1e7)},h=function(e){for(var t=6,n=0;--t>=0;)n+=s[t],s[t]=Vv(n/e),n=n%e*1e7},f=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==s[e]){var n=String(s[e]);t=""===t?n:t+jv.call("0",7-n.length)+n}return t};if(o<0||o>20)throw RangeError("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return String(a);if(a<0&&(u="-",a=-a),a>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(a*Gv(2,69,1))-69)<0?a*Gv(2,-t,1):a/Gv(2,t,1),n*=4503599627370496,(t=52-t)>0){for(l(0,n),r=o;r>=7;)l(1e7,0),r-=7;for(l(Gv(10,r,1),0),r=t-1;r>=23;)h(1<<23),r-=23;h(1<<r),l(1,1),h(2),c=f()}else l(0,n),l(1<<-t,0),c=f()+jv.call("0",o);return c=o>0?u+((i=c.length)<=o?"0."+jv.call("0",o-i)+c:c.slice(0,i-o)+"."+c.slice(i-o)):u+c}});var Xv=function(e){var t,n;return e.length>0?(t=Number.MAX_VALUE,n=-Number.MAX_VALUE,e.forEach((function(e){Number.isNaN(e.value)||(t=Math.min(t,e.value),n=Math.max(n,e.value))})),n>0&&(t=Math.min(0,t)),n<0&&(n=0)):(t=0,n=100),{min:t,max:n}},Zv=function(e,t,n){var r=t.start,i=t.end;if(void 0===i)(i=(r-=n/2)+n)>e?r=(i=e)-n:r<0&&(r=0,i=n);else if(i-r<n){var a=(i+r)/2;a-n/2<0?i=(r=0)+n:a+n/2>e?r=(i=e)-n:i=(r=a-n/2)+n}t.start=Math.ceil(r),t.end=Math.floor(i)};function Kv(e){if(function(e){e.featureType&&(e.type=e.type||e.featureType,e.featureType=void 0),"junctions"===e.type?e.type="spliceJunctions":"bed"===e.type?(e.type="annotation",e.format=e.format||"bed"):"annotations"===e.type?e.type="annotation":"alignments"===e.type?e.type="alignment":"bam"===e.type?(e.type="alignment",e.format="bam"):"vcf"===e.type?(e.type="variant",e.format="vcf"):"t2d"===e.type?e.type="gwas":"FusionJuncSpan"!==e.type||e.format?"aed"===e.type&&(e.type="annotation",e.format=e.format||"aed"):e.format="fusionjuncspan"}(e),e.type)return e.type;var t;if(("file"===e.sourceType||void 0===e.sourceType&&e.url)&&(t=void 0===e.format?Xr(Gr(e.url)?e.url.name:e.url):e.format.toLowerCase()),t)switch(t){case"bw":case"bigwig":case"wig":case"bedgraph":case"tdf":return"wig";case"vcf":return"variant";case"seg":return"seg";case"bam":case"cram":return"alignment";case"bedpe":case"bedpe-loop":return"interaction";case"bp":return"arc";case"gwas":return"gwas";case"bed":case"bigbed":case"bb":return"bedtype";default:return"annotation"}}function Qv(e){return Jv.apply(this,arguments)}function Jv(){return(Jv=yn(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Sr(t)||!t.startsWith("https://drive.google.com")){e.next=9;break}if(void 0!==Br()){e.next=3;break}throw Error("Google drive is referenced, but API key is not defined.  An API key is required for Google Drive access");case 3:return e.next=5,zr(t);case 5:return n=e.sent,e.abrupt("return",n.originalFileName||n.name);case 9:return e.abrupt("return",Vr(t));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var em,tm,nm,rm=new(function(){function e(t){bn(this,e),this.requestsPerSecond=t.requestsPerSecond||10,this.lastStartTime=0,this.queued=[]}var t;return xn(e,[{key:"add",value:function(e,t){var n=this;return new Promise((function(t,r){n.queued.push({resolve:t,reject:r,asyncFunction:e}),n.dequeue()}))}},{key:"addAll",value:function(e,t){var n=e.map(function(e){return this.add(e,t)}.bind(this));return Promise.all(n)}},{key:"dequeue",value:function(){if(this.queued.length>0){var e=new Date,t=1e3/this.requestsPerSecond+1,n=e-this.lastStartTime;n>=t?this._execute():setTimeout(function(){this.dequeue()}.bind(this),t-n)}}},{key:"_execute",value:(t=yn(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastStartTime=new Date,t=this.queued.shift(),n=t.asyncFunction,e.prev=3,e.next=6,n();case 6:r=e.sent,t.resolve(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t.reject(e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return t.apply(this,arguments)})}]),e}())({requestsPerSecond:9}),im={apiKey:void 0,setApiKey:function(e){this.apiKey=e},load:am,loadArrayBuffer:(nm=yn(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=n||{}).responseType||(n.responseType="arraybuffer"),!(t instanceof File)){e.next=6;break}return e.abrupt("return",cm(t,n));case 6:return e.abrupt("return",am(t,n));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return nm.apply(this,arguments)}),loadJson:(tm=yn(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"POST"===((n=n||{}).method||(n.sendData?"POST":"GET"))&&(n.contentType="application/json"),e.next=5,this.loadString(t,n);case 5:if(!(r=e.sent)){e.next=10;break}return e.abrupt("return",JSON.parse(r));case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return tm.apply(this,arguments)}),loadString:(em=yn(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=n||{},!(t instanceof File)){e.next=5;break}return e.abrupt("return",hm(t,n));case 5:return e.abrupt("return",mm(t,n));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return em.apply(this,arguments)})};function am(e,t){return om.apply(this,arguments)}function om(){return(om=yn(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||{},r=vn(t),e.next=4,"function"==typeof t?t():t;case 4:if(!((t=e.sent)instanceof File)){e.next=9;break}return e.abrupt("return",cm(t,n));case 9:if("function"!=typeof t.startsWith){e.next=22;break}if(!t.startsWith("data:")){e.next=14;break}return e.abrupt("return",Ur(t));case 14:if(t.startsWith("https://drive.google.com")&&(t=Lr(t)),!Tr(t)){e.next=19;break}return e.abrupt("return",rm.add(yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sm(t,n));case 1:case"end":return e.stop()}}),e)})))));case 19:return e.abrupt("return",sm(t,n));case 20:e.next=23;break;case 22:throw Error("url must be either a 'File', 'string', 'function', or 'Promise'.  Actual type: ".concat(r));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sm(e,t){return um.apply(this,arguments)}function um(){return(um=yn(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Em(t),!(r=(n=n||{}).oauthToken||wm(t))){e.next=7;break}return e.next=6,"function"==typeof r?r():r;case 6:r=e.sent;case 7:return e.abrupt("return",new Promise((function(e,i){Er(t)&&(t.startsWith("gs://")?t=Mr(t):Ar(t)&&(t.includes("altMedia=")||(t+=t.includes("?")?"&altMedia=true":"?altMedia=true")),Tr(t=Cm(t))&&Rm(t),r||(r=Sm()));var a=n.headers||{};r&&_m(a,r);var o=n.range,s=navigator.userAgent.indexOf("Chrome")>-1;0===navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent),o&&s&&!bm(t)&&(t+=t.includes("?")?"&":"?",t+="someRandomSeed="+Math.random().toString(36));var u=new XMLHttpRequest,c=n.sendData||n.body,l=n.method||(c?"POST":"GET"),h=n.responseType,f=n.contentType,p=n.mimeType;if(u.open(l,t),o){var d=o.size?o.start+o.size-1:"";u.setRequestHeader("Range","bytes="+o.start+"-"+d)}if(f&&u.setRequestHeader("Content-Type",f),p&&u.overrideMimeType(p),h&&(u.responseType=h),a)for(var g=0,v=Object.keys(a);g<v.length;g++){var m=v[g],y=a[m];u.setRequestHeader(m,y)}!0===n.withCredentials&&(u.withCredentials=!0),u.onload=function(){var r=yn(regeneratorRuntime.mark((function r(i){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:0===u.status||u.status>=200&&u.status<=300?o&&206!==u.status&&0!==o.start?(u.response.length>1e5&&alert("Warning: Range header ignored for URL: ".concat(t,".  This can have performance impacts.")),e(u.response.slice(o.start,o.start+o.size))):e(u.response):"undefined"==typeof gapi||404!==u.status&&401!==u.status&&403!==u.status||!Er(t)||n.retries?403===u.status?b("Access forbidden: "+t):416===u.status?b("Unsatisfiable range"):b(u.status):w();case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),u.onerror=function(e){Er(t)&&!n.retries&&w(),b("Error accessing resource: "+t+" Status: "+u.status)},u.ontimeout=function(e){b("Timed out")},u.onabort=function(e){i(e)};try{u.send(c)}catch(e){i(e)}function b(e){if(!i)throw e;i(e)}function w(){return x.apply(this,arguments)}function x(){return(x=yn(regeneratorRuntime.mark((function r(){var i,a,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,xm(t);case 3:return i=r.sent,n.retries=1,n.oauthToken=i,r.next=8,am(t,n);case 8:a=r.sent,e(a),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),r.t0.error?(o=r.t0.error.startsWith("popup_blocked")?"Google login popup blocked by browser.":r.t0.error,alert(o)):b(r.t0);case 15:case"end":return r.stop()}}),r,null,[[0,12]])})))).apply(this,arguments)}})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cm(e,t){return lm.apply(this,arguments)}function lm(){return(lm=yn(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n&&n.range?t.slice(n.range.start,n.range.start+n.range.size):t,"arraybuffer"!==n.responseType){e.next=5;break}return e.abrupt("return",pm(r));case 5:return e.abrupt("return",new Promise((function(e,n){var i=new FileReader;i.onload=function(t){e(i.result)},i.onerror=function(e){console.error("reject uploading local file "+t.name),n(null,i)},i.readAsBinaryString(r),console.warn("Deprecated method used: readAsBinaryString")})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hm(e,t){return fm.apply(this,arguments)}function fm(){return(fm=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.range?t.slice(n.range.start,n.range.start+n.range.size):t,i=0,n&&n.bgz||t.name.endsWith(".bgz")?i=2:t.name.endsWith(".gz")&&(i=1),0!==i){e.next=7;break}return e.abrupt("return",gm(r));case 7:return e.next=9,pm(r);case 9:return a=e.sent,e.abrupt("return",Am(a,i));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pm(e){return dm.apply(this,arguments)}function dm(){return(dm=yn(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t.arrayBuffer){e.next=2;break}return e.abrupt("return",t.arrayBuffer());case 2:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(r.result)},r.onerror=function(e){console.error("reject uploading local file "+localfile.name),n(null,r)},r.readAsArrayBuffer(t)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gm(e){return vm.apply(this,arguments)}function vm(){return(vm=yn(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t.text){e.next=2;break}return e.abrupt("return",t.text());case 2:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(r.result)},r.onerror=function(e){console.error("reject uploading local file "+localfile.name),n(null,r)},r.readAsText(t)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mm(e,t){return ym.apply(this,arguments)}function ym(){return(ym=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=n||{},e.t0=n.filename,e.t0){e.next=6;break}return e.next=5,Qv(t);case 5:e.t0=e.sent;case 6:return r=e.t0,i=3,n.bgz?i=2:r.endsWith(".gz")&&(i=1),n.responseType="arraybuffer",e.next=12,im.load(t,n);case 12:return a=e.sent,e.abrupt("return",Am(a,i));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bm(e){return e.indexOf("X-Amz-Signature")>-1}function wm(e){var t=Er(e)?void 0:Hr(e).host,n=Iv.getToken(t);if(n)return n;if(void 0===t){var r=Sm();if(r&&r.expires_at>Date.now())return r.access_token}}function xm(e){return km.apply(this,arguments)}function km(){return(km=yn(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Nr()){e.next=8;break}return n=Dr(t),e.next=4,Fr(n);case 4:return r=e.sent,e.abrupt("return",r?r.access_token:void 0);case 8:throw Error("Authorization is required, but Google oAuth has not been initalized. Contact your site administrator for assistance.");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sm(){if(Nr()){var e=function(){let e=gapi.auth2.getAuthInstance().currentUser.get();if(e&&e.isSignedIn()){const{access_token:t,expires_at:n}=e.getAuthResponse();return{access_token:t,expires_at:n}}}();return e?e.access_token:void 0}}function _m(e,t){return t&&(e["Cache-Control"]="no-cache",e.Authorization="Bearer "+t),e}function Cm(e){var t=im.apiKey;if(t||"undefined"==typeof gapi||(t=gapi.apiKey),void 0!==t&&!e.includes("key=")){var n=e.includes("?")?"&":"?";e=e+n+"key="+t}return e}function Rm(e){if(e.includes("supportsTeamDrive"))return e;var t=e.includes("?")?"&":"?";e=e+t+"supportsTeamDrive=true"}function Em(e){return e.includes("//www.dropbox.com")?e.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):e.includes("//drive.google.com")?Lr(e):e.includes("//www.broadinstitute.org/igvdata")?e.replace("//www.broadinstitute.org/igvdata","//data.broadinstitute.org/igvdata"):e.includes("//igvdata.broadinstitute.org")?e.replace("//igvdata.broadinstitute.org","https://dn7ywbm9isq8j.cloudfront.net"):e.startsWith("ftp://ftp.ncbi.nlm.nih.gov/geo")?e.replace("ftp://","https://"):e}function Am(e,n){if(3===n&&e.byteLength>2){var r=new Uint8Array(e,0,2);31===r[0]&&139===r[1]&&(n=1)}var i;return i=1===n?new wr.Gunzip(new Uint8Array(e)).decompress():2===n?Ov(e):new Uint8Array(e),"TextDecoder"in("undefined"!=typeof self?self:void 0!==t?t:window)?(new TextDecoder).decode(i):function(e){for(var t="",n=0;n<e.length;){var r=e[n],i=0,a=0;if(r<=127?(i=0,a=255&r):r<=223?(i=1,a=31&r):r<=239?(i=2,a=15&r):r<=244&&(i=3,a=7&r),e.length-n-i>0)for(var o=0;o<i;)r=e[n+o+1],a=a<<6|63&r,o+=1;else a=65533,i=e.length-n;t+=String.fromCodePoint(a),n+=i+1}return t}(i)}var Tm=Cr,Mm=new Set(["fastaURL","indexURL","cytobandURL","indexed"]),Lm=function(){function e(t){bn(this,e),"string"==typeof t.fastaURL&&t.fastaURL.startsWith("data:")?(this.file=function(e){var t=e.split(","),n=t[0].split(":")[1],r=t[1];r=n.indexOf("base64")>=0?atob(r):decodeURI(r);for(var i=new Uint8Array(r.length),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);for(var o=new wr.Gunzip(i).decompress(),s="",u=o.length,c=0;c<u;c++)s+=String.fromCharCode(o[c]);return s}(t.fastaURL),this.indexed=!1,this.isDataURI=!0):(this.file=t.fastaURL,this.indexed=!1!==t.indexed,this.indexed&&(this.indexFile=t.indexURL||t.indexFile||this.file+".fai")),this.withCredentials=t.withCredentials,this.chromosomeNames=[],this.chromosomes={},this.sequences={},this.offsets={};var n={};for(var r in t)t.hasOwnProperty(r)&&!Mm.has(r)&&(n[r]=t[r]);this.config=n}var t,n,r,i,a,o,s;return xn(e,[{key:"init",value:(s=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.indexed){e.next=4;break}return e.abrupt("return",this.getIndex());case 4:return e.abrupt("return",this.loadAll());case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getSequence",value:(o=yn(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.indexed){e.next=4;break}return e.abrupt("return",this.getSequenceIndexed(t,n,r));case 4:return e.abrupt("return",this.getSequenceNonIndexed(t,n,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return o.apply(this,arguments)})},{key:"getSequenceIndexed",value:(a=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.interval&&this.interval.contains(t,n,r)){e.next=8;break}return i=n,a=r,r-n<5e4&&(o=r-n,s=Math.round(n+o/2),i=Math.max(0,s-25e3),a=s+25e3),e.next=6,this.readSequence(t,i,a);case 6:u=e.sent,this.interval=new Cv(t,i,a,u);case 8:return c=n-this.interval.start,l=r-n,h=this.interval.features?this.interval.features.substr(c,l):null,e.abrupt("return",h);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"getSequenceNonIndexed",value:(i=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.offsets[t]&&(n-=this.offsets[t],r-=this.offsets[t]),i="",n<0)for(a=n;a<Math.min(r,0);a++)i+="*";if(!(r<=0)){e.next=5;break}return e.abrupt("return",Promise.resolve(i));case 5:return o=this.sequences[t],s=Math.min(r,o.length),e.abrupt("return",i+o.substring(n,s));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"getIndex",value:(r=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.index){e.next=4;break}return e.abrupt("return",this.index);case 4:return e.next=6,im.load(this.indexFile,Yv(this.config));case 6:for(t=e.sent,n=Tm(t),r=n.length,i=0,a=0,this.index={};i<r;)5===(o=n[i++].split("\t")).length&&(s=o[0],u=parseInt(o[1]),c=parseInt(o[2]),l=parseInt(o[3]),h=parseInt(o[4]),f={size:u,position:c,basesPerLine:l,bytesPerLine:h},this.chromosomeNames.push(s),this.index[s]=f,this.chromosomes[s]=new Rv(s,a++,0,u));return e.abrupt("return",this.index);case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadAll",value:(n=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDataURI){e.next=4;break}t=this.file,e.next=7;break;case 4:return e.next=6,im.load(this.file,Yv(this.config));case 6:t=e.sent;case 7:for(n=Tm(t),r=n.length,i=0,s=0,u=0;i<r;)(c=n[i++].trim()).startsWith("#")||0===c.length||(c.startsWith(">")?(a&&(this.chromosomeNames.push(l),this.sequences[l]=a,this.chromosomes[l]=new Rv(l,u++,s,s+a.length,o)),h=c.substr(1).split(/\s+/),f=h[0].split(":"),l=f[0],a="",s=0,o=void 0,f.length>1&&f[1].indexOf("-")>0&&(2===(p=f[1].split("-")).length&&/^[0-9]+$/.test(p[0])&&/^[0-9]+$/.test(p[1]),d=Number.parseInt(p[0]),Number.parseInt(p[1])>d&&(s=d-1,this.offsets[l]=s,o=f[1]))):a+=c);a&&(this.chromosomeNames.push(l),this.sequences[l]=a,this.chromosomes[l]=new Rv(l,u++,s,s+a.length,o));case 14:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"readSequence",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:if(i=this.index[t]){e.next=8;break}return this.interval=new Cv(t,n,r,null),e.abrupt("return",null);case 8:if(a=Math.max(0,n),o=Math.min(i.size,r),s=i.bytesPerLine,u=i.basesPerLine,c=i.position,l=s-u,h=Math.floor(a/u),f=Math.floor(o/u),!((g=c+f*s+(o-f*u)-1-(d=c+h*s+(p=a-h*u))+1)<=0)){e.next=27;break}console.error("No sequence for "+t+":"+n+"-"+r),e.next=30;break;case 27:return e.next=29,im.load(this.file,Yv(this.config,{range:{start:d,size:g}}));case 29:v=e.sent;case 30:if(v){e.next=34;break}return e.abrupt("return",null);case 34:for(y="",b=0,w=v.length,p>0&&(m=Math.min(o-a,u-p),y+=v.substr(b,m),b+=m+l);b<w;)m=Math.min(u,w-b),y+=v.substr(b,m),b+=m+l;return e.abrupt("return",y);case 38:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}();function Im(){return"2.7.4"}var Pm,Nm,Om=Cr,Fm={loadGenome:(Nm=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cytobandURL,r=t.aliasURL,i=new Lm(t),e.next=5,i.init();case 5:if(!n){e.next=9;break}return e.next=8,Bm(n,i.config);case 8:a=e.sent;case 9:if(!r){e.next=13;break}return e.next=12,zm(r,i.config);case 12:o=e.sent;case 13:return e.abrupt("return",new Dm(t,i,a,o));case 14:case"end":return e.stop()}}),e)}))),function(e){return Nm.apply(this,arguments)}),initializeGenomes:(Pm=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fm.KNOWN_GENOMES){e.next=20;break}if(s=function(e){return e.forEach((function(e){n[e.id]=e})),n},n={},!1===t.loadDefaultGenomes){e.next=9;break}return r="https://igv.org/genomes/genomes.json"+"?randomSeed=".concat(Math.random().toString(36),"&version=").concat("2.7.4"),e.next=7,im.loadJson(r,{});case 7:i=e.sent,s(i);case 9:if(!(a=t.genomeList||t.genomes)){e.next=19;break}if("string"!=typeof a){e.next=18;break}return e.next=14,im.loadJson(a,{});case 14:o=e.sent,s(o),e.next=19;break;case 18:s(a);case 19:Fm.KNOWN_GENOMES=n;case 20:case"end":return e.stop()}}),e)}))),function(e){return Pm.apply(this,arguments)}),isWholeGenomeView:function(e){return"all"===e.toLowerCase()}},Dm=function(){function e(t,n,r,i){bn(this,e),this.config=t,this.id=t.id,this.sequence=n,this.chromosomeNames=n.chromosomeNames,this.chromosomes=n.chromosomes,this.ideograms=r,this.featureDB={},this.wholeGenomeView=void 0===t.wholeGenomeView||t.wholeGenomeView,this.wholeGenomeView&&Object.keys(n.chromosomes).length>1?function(e,t){var n;if(t.chromosomeOrder)e.wgChromosomeNames=t.chromosomeOrder.split(",").map((function(e){return e.trim()})),n=e.wgChromosomeNames.map((function(t){return e.chromosomes[t]})).filter((function(e){return void 0!==e}));else{var r=Object.keys(e.chromosomes).map((function(t){return e.chromosomes[t].bpLength})).reduce((function(e,t){return Math.max(e,t)}))/50,i=(n=Object.values(e.chromosomes).filter((function(e){return e.bpLength>r}))).filter((function(e){return h(e.name.replace("chr",""))})),a=n.filter((function(e){return!h(e.name.replace("chr",""))}));i.sort((function(e,t){return Number.parseInt(e.name.replace("chr",""))-Number.parseInt(t.name.replace("chr",""))}));var o,s=i.map((function(e){return e.name})),u=zn(a);try{for(u.s();!(o=u.n()).done;){var c=o.value;s.push(c.name)}}catch(e){u.e(e)}finally{u.f()}e.wgChromosomeNames=s}var l=n.reduce((function(e,t){return e+t.bpLength}),0);function h(e){return/^\d+$/.test(e)}e.chromosomes.all={name:"all",bpLength:l}}(this,t):this.wgChromosomeNames=n.chromosomeNames;var a={},o=this;a.all="all",this.chromosomeNames.forEach((function(e){var t=e.startsWith("chr")?e.substring(3):"chr"+e;a[t.toLowerCase()]=e,"chrM"===e&&(a.mt="chrM"),"MT"===e&&(a.chrm="MT"),a[e.toLowerCase()]=e})),i&&i.forEach((function(e){var t,n;for(n=0;n<e.length;n++)if(o.chromosomes[e[n]]){t=e[n];break}t&&e.forEach((function(e){e!==t&&(a[e.toLowerCase()]=t,a[e]=t)}))})),this.chrAliasTable=a}return xn(e,[{key:"showWholeGenomeView",value:function(){return!1!==this.config.wholeGenomeView}},{key:"toJSON",value:function(){return Object.assign({},this.config,{tracks:void 0})}},{key:"getInitialLocus",value:function(){}},{key:"getHomeChromosomeName",value:function(){if(this.showWholeGenomeView()&&this.chromosomes.hasOwnProperty("all"))return"all";var e=this.chromosomes[this.chromosomeNames[0]];return e.rangeLocus?e.name+":"+e.rangeLocus:this.chromosomeNames[0]}},{key:"getChromosomeName",value:function(e){var t=this.chrAliasTable[e.toLowerCase()];return t||e}},{key:"getChromosome",value:function(e){return e=this.getChromosomeName(e),this.chromosomes[e]}},{key:"getCytobands",value:function(e){return this.ideograms?this.ideograms[e]:null}},{key:"getLongestChromosome",value:function(){var e,t=this.chromosomes;for(var n in t){if(t.hasOwnProperty(n)){var r=t[n];(void 0===e||r.bpLength>e.bpLength)&&(e=r)}return e}}},{key:"getChromosomes",value:function(){return this.chromosomes}},{key:"getGenomeCoordinate",value:function(e,t){var n=this.getCumulativeOffset(e);if(void 0!==n)return n+t}},{key:"getChromosomeCoordinate",value:function(e){void 0===this.cumulativeOffsets&&(this.cumulativeOffsets=computeCumulativeOffsets.call(this));var t,n=void 0,r=0,i=zn(this.wgChromosomeNames);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=this.cumulativeOffsets[a];if(o>e)return{chr:n,position:e-r};n=a,r=o}}catch(e){i.e(e)}finally{i.f()}return{chr:this.chromosomeNames[this.chromosomeNames.length-1],position:0}}},{key:"getCumulativeOffset",value:function(e){void 0===this.cumulativeOffsets&&(this.cumulativeOffsets=function(){var e,t={},n=0,r=zn(this.wgChromosomeNames);try{for(r.s();!(e=r.n()).done;){var i=e.value;t[i]=Math.floor(n);var a=this.getChromosome(i);n+=a.bpLength}}catch(e){r.e(e)}finally{r.f()}return t}.call(this));var t=this.getChromosomeName(e);return this.cumulativeOffsets[t]}},{key:"getGenomeLength",value:function(){var e=this;if(!this.bpLength){var t=0;e.wgChromosomeNames.forEach((function(n){var r=e.chromosomes[n];t+=r.bpLength})),this.bpLength=t}return this.bpLength}}]),e}();function Bm(e,t){if(e.startsWith("data:")){var n=function(e){var t;if(e.startsWith("data:application/gzip;base64"))t=Ur(e);else{var n,r=e.split(","),i=r[0].split(":")[1],a=r[1];a=i.indexOf("base64")>=0?atob(a):decodeURI(a),n=new Uint8Array(a.length);for(var o=0;o<a.length;o++)n[o]=a.charCodeAt(o);var s=new wr.Gunzip(n);t=s.decompress()}for(var u="",c=t.length,l=0;l<c;l++)u+=String.fromCharCode(t[l]);return u}(e);return Promise.resolve(r(n))}return im.loadString(e,Yv(t)).then((function(e){return r(e)}));function r(e){for(var t,n=[],r=0,i=Om(e),a=i.length,o={},s=0;s<a;s++){var u=i[s].split("\t"),c=u[0];if(t||(t=c),c!==t&&(o[t]=n,n=[],t=c,r=0),5===u.length){var l=parseInt(u[1]),h=parseInt(u[2]),f=u[3],p=u[4];n[r++]=new _v(l,h,f,p)}}return o}}function zm(e,t){return im.loadString(e,Yv(t)).then((function(e){var t=Om(e),n=[];return t.forEach((function(e){!e.startsWith("#")&&e.length>0&&n.push(e.split("\t"))})),n}))}function Um(e,t){var n=lc("<div>",{class:"igv-menu-popup-check-container"}),r=lc("<div>");n.append(r);var i=jm("check",!0===t?"#444":"transparent");r.append(i);var a=lc("<div>");return a.text(e),n.append(a),n}function Hm(e,t){return lc(jm(e,t))}function jm(e,t){t=t||"currentColor";var n=qm[e];n||(console.error("No icon named: ".concat(e)),n=qm.question);var r='<svg viewBox="0 0 '+n[0]+" "+n[1]+'">';return r+='<path fill="'+t+'" d="'+n[4]+'"></path>',r+="</svg>"}var qm={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]},Vm={trackMenuItemList:function(e){var t=new Set(["alignment","annotation","variant","eqtl","snp"]),n=e.track.config&&void 0!==e.track.config.visibilityWindow,r=[];return"sequence"!==e.track.config.type&&(r.push(function(e){var t=lc("<div>");return t.text("Set track name"),{object:t,click:function(t){var n={label:"Track Name",value:Wm(e.track)||"unnamed",callback:function(){var t=e.browser.inputDialog.input.value;t=""===t||void 0===t?"untitled":t.trim(),e.browser.setTrackLabelName(e,t)}};e.browser.inputDialog.present(n,t)}}}(e)),r.push(function(e){var t=lc("<div>");return t.text("Set track height"),{object:t,click:function(t){var n={label:"Track Height",value:e.trackDiv.clientHeight,callback:function(){var t=parseFloat(e.browser.inputDialog.input.value,10);void 0!==t&&(void 0!==e.track.minHeight&&e.track.minHeight>t&&(e.track.minHeight=t),void 0!==e.track.maxHeight&&e.track.maxHeight<t&&(e.track.minHeight=t),e.setTrackHeight(t,!0),e.track.autoHeight=!1)}};e.browser.inputDialog.present(n,t)}}}(e))),this.showColorPicker(e.track)&&(r.push(Gm({trackView:e,label:"Set track color",option:"color"})),r.push(Gm({trackView:e,label:"Set alt color",option:"altColor"}))),e.track.menuItemList&&(r=r.concat(e.track.menuItemList())),(n||t.has(e.track.config.type))&&(r.push("<hr/>"),r.push(function(e){var t=lc("<div>");return t.text("Set visibility window"),{object:t,click:function(t){var n={label:"Visibility Window",value:e.track.visibilityWindow,callback:function(){var t=e.browser.inputDialog.input.value;t=""===t||void 0===t?-1:t.trim(),e.track.visibilityWindow=Number.parseInt(t),e.track.config.visibilityWindow=Number.parseInt(t),e.updateViews()}};e.browser.inputDialog.present(n,t)}}}(e))),!1!==e.track.removable&&(r.push("<hr/>"),r.push(function(e){var t;return(t=lc("<div>")).text("Remove track"),{object:t,click:function(){e.browser.removeTrack(e.track)}}}(e))),r},numericDataMenuItems:function(e){var t=[],n=lc("<div>");return n.text("Set data range"),t.push({object:n,click:function(){e.browser.dataRangeDialog.configure({trackView:e}),e.browser.dataRangeDialog.present(lc(e.trackDiv))}}),void 0!==e.track.logScale&&t.push({object:Um("Log scale",e.track.logScale),click:function(){e.track.logScale=!e.track.logScale,e.repaintViews()}}),t.push({object:Um("Autoscale",e.track.autoscale),click:function(){e.track.autoscale=!e.track.autoscale,e.updateViews()}}),t},trackMenuItemListHelper:function(e,t){var n=[];return e.length>0&&(n=e.map((function(e,n){var r;if(e.name?(r=lc("<div>")).text(e.name):e.object?r=e.object:"string"==typeof e.label?(r=lc("<div>")).html(e.label):"string"==typeof e&&(r=e.startsWith("<")?lc(e):lc("<div>"+e+"</div>")),0===n&&r.addClass("igv-track-menu-border-top"),e.click){function i(n){e.click(n),t.hide(),n.preventDefault(),n.stopPropagation()}r.on("click",i),r.on("touchend",(function(e){i(e)})),r.on("mouseup",(function(e){e.preventDefault(),e.stopPropagation()}))}return{object:r,init:e.init||void 0}}))),n},showColorPicker:function(e){return void 0===e.type||"bedtype"===e.type||"alignment"===e.type||"annotation"===e.type||"variant"===e.type||"wig"===e.type}};function Gm(e){var t=e.trackView,n=e.label,r=e.option,i=lc("<div>");return i.text(n),{object:i,click:function(){return t.presentColorPicker(r)}}}function Wm(e){return e.trackView.viewports[0].$trackLabel.text()}var $m=Vm.trackMenuItemListHelper,Ym=function(e){var t=this;this.$popover=lc("<div>",{class:"igv-menu-popup"}),e.append(this.$popover);var n=lc("<div>",{class:"igv-menu-popup-header"});this.$popover.append(n),br(n.get(0),(function(){return t.$popover.hide()})),this.$popoverContent=lc("<div>"),this.$popover.append(this.$popoverContent),ni(this.$popover.get(0),n.get(0)),n.on("click.menu-popup-dismiss",(function(e){e.stopPropagation(),e.preventDefault()}))};Ym.prototype.presentMenuList=function(e,t,n){if(Xm(),n.length>0){this.$popoverContent.empty();var r,i=zn(n=$m(n,this.$popover));try{for(i.s();!(r=i.n()).done;){var a=r.value;a.init&&a.init();var o=a.object;0===n.indexOf(a)&&o.removeClass("igv-track-menu-border-top"),o.hasClass("igv-track-menu-border-top")||o.hasClass("igv-menu-popup-check-container")||o.is("div")&&o.addClass("igv-menu-popup-shim"),this.$popoverContent.append(o)}}catch(e){i.e(e)}finally{i.f()}this.$popover.css({left:e+"px",top:t+"px"}),this.$popover.show()}},Ym.prototype.presentTrackContextMenu=function(e,t){this.$popoverContent.empty();var n,r,i,a=zn((n=t,r=this.$popover.get(0),n.map((function(e){var t;if("string"==typeof e&&"<hr/>"===e)t=document.createElement("hr");else if("string"==typeof e)(t=fr({class:"context-menu"})).innerHTML=e;else if("Node"==typeof e)t=e;else{if("function"==typeof e.init&&e.init(),"checkbox"===e.type)t=Icon.createCheckbox("Show all bases",e.value);else if("color"===e.type){var n=new or({parent:r.parentElement,width:364,colorHandler:function(t){return e.click(t)}});t=fr({class:"context-menu"}),"string"==typeof e.label&&(t.innerHTML=e.label);var i=function(e){n.show(),pr(r),e.preventDefault(),e.stopPropagation()};t.addEventListener("click",i),t.addEventListener("touchend",i),t.addEventListener("mouseup",(function(e){e.preventDefault(),e.stopPropagation()}))}else t=fr({class:"context-menu"}),"string"==typeof e.label&&(t.innerHTML=e.label);if(e.click&&"color"!==e.type){function a(t){e.click(),pr(r),t.preventDefault(),t.stopPropagation()}t.addEventListener("click",a),t.addEventListener("touchend",a),t.addEventListener("mouseup",(function(e){e.preventDefault(),e.stopPropagation()}))}}return{object:t,init:e.init}}))));try{for(a.s();!(i=a.n()).done;){var o=i.value;this.$popoverContent.get(0).appendChild(o.object)}}catch(e){a.e(e)}finally{a.f()}!function(e,t){var n=vr(e,t.parentNode),r=n.x,i=n.y,a=t.parentNode.getBoundingClientRect().width,o=t.getBoundingClientRect().width,s=r+o;t.style.left="".concat(s>a?r-(s-a):r,"px"),t.style.top="".concat(i,"px")}(e,this.$popover.get(0)),this.$popover.show()},Ym.prototype.dispose=function(){this.$popover.empty(),this.$popoverContent.empty(),Object.keys(this).forEach((function(e){this[e]=void 0}))};var Xm=function(){return lc(".igv-menu-popup").hide()},Zm=function(e){kn(o,e);var t,n,r,i,a=Mn(o);function o(e,t,n,r){return bn(this,o),a.call(this,e,t,n,r)}return xn(o,[{key:"initializationHelper",value:function(){var e=this;this.menuPopup=new Ym(this.trackView.$viewportContainer),this.menuPopup.$popover.hide(),this.addMouseHandlers(),this.$spinner=lc('<div class="igv-viewport-spinner">'),this.$spinner.append(Hm("spinner")),this.$viewport.append(this.$spinner),this.stopSpinner();var t=this.trackView.track;"sequence"!==t.type&&(this.$zoomInNotice=this.createZoomInNotice(this.$content)),t.name&&(this.$trackLabel=lc('<div class="igv-track-label">'),this.$viewport.append(this.$trackLabel),this.setTrackLabel(t.name),!1===this.browser.trackLabelsVisible&&this.$trackLabel.hide(),this.$trackLabel.click((function(n){var r;n.stopPropagation(),r="function"==typeof t.description?t.description():t.description?'<div title="'.concat(t.description,'"><div>').concat(t.description,"</div></div>"):'<div title="'.concat(t.name,'"><div>').concat(t.name,"</div></div>"),e.popover&&e.popover.dispose(),e.popover=new cr(e.trackView.$viewportContainer.get(0)),e.popover.presentContentWithEvent(n,r)})),this.$trackLabel.mousedown((function(e){e.stopPropagation()})),this.$trackLabel.mouseup((function(e){e.stopPropagation()})),this.$trackLabel.mousemove((function(e){e.stopPropagation()})))}},{key:"setTrackLabel",value:function(e){this.trackView.track.name=this.trackView.track.config.name=e,this.$trackLabel.empty(),this.$trackLabel.html(e);var t=this.$trackLabel.text();this.$trackLabel.attr("title",t)}},{key:"startSpinner",value:function(){var e=this.$spinner;e&&(e.addClass("igv-fa5-spin"),e.show())}},{key:"stopSpinner",value:function(){var e=this.$spinner;e&&(e.hide(),e.removeClass("igv-fa5-spin"))}},{key:"checkZoomIn",value:function(){var e=this;if(!this.viewIsReady())return!1;if(this.$zoomInNotice){if(function(){var t=e.referenceFrame;if("all"!==e.referenceFrame.chr.toLowerCase()||e.trackView.track.supportsWholeGenome()){var n="function"==typeof e.trackView.track.getVisibilityWindow?e.trackView.track.getVisibilityWindow():e.trackView.track.visibilityWindow;return void 0!==n&&n>0&&t.bpPerPixel*e.$viewport.width()>n}return!0}()){if(this.canvas&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.tile=void 0),this.$zoomInNotice.show(),this.trackView.track.autoHeight){var t=this.trackView.minHeight||0;this.setContentHeight(t)}return!1}return this.$zoomInNotice.hide(),!0}return!0}},{key:"shift",value:function(){var e=this.referenceFrame;if(this.canvas&&this.tile&&this.tile.chr===this.referenceFrame.chr&&this.tile.bpPerPixel===e.bpPerPixel){var t=Math.round((this.tile.startBP-e.start)/e.bpPerPixel);this.canvas.style.left=t+"px"}}},{key:"setTop",value:function(e){var t=-e,n=t+this.$viewport.height();lc(this.contentDiv).css("top",e+"px"),(!this.canvasVerticalRange||this.canvasVerticalRange.bottom<n||this.canvasVerticalRange.top>t)&&this.repaint()}},{key:"loadFeatures",value:(i=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.referenceFrame,n=t.chr,r=this.browser.genome.getChromosome(n).bpLength,i=3*lc(this.contentDiv).width(),a=i*t.bpPerPixel,o=Math.floor(Math.max(0,t.start-a/3)),s=Math.ceil(Math.min(r,o+a)),!this.loading||this.loading.start!==o||this.loading.end!==s){e.next=9;break}return e.abrupt("return",void 0);case 9:return this.loading={start:o,end:s},this.startSpinner(),e.prev=11,e.next=14,this.getFeatures(this.trackView.track,n,o,s,t.bpPerPixel);case 14:if(u=e.sent,c=[],!(l=Qm(this.browser.roi,this.trackView.track.roi))){e.next=37;break}h=zn(l),e.prev=19,h.s();case 21:if((f=h.n()).done){e.next=29;break}return p=f.value,e.next=25,p.getFeatures(n,o,s,t.bpPerPixel);case 25:d=e.sent,c.push({track:p,features:d});case 27:e.next=21;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(19),h.e(e.t0);case 34:return e.prev=34,h.f(),e.finish(34);case 37:return this.tile=new Km(n,o,s,t.bpPerPixel,u,c),this.loading=!1,this.hideMessage(),this.stopSpinner(),e.abrupt("return",this.tile);case 44:e.prev=44,e.t1=e.catch(11),this.trackView&&!0!==this.trackView.disposed&&(this.showMessage("Error loading track data"),ir.presentAlert(e.t1),console.error(e.t1));case 47:return e.prev=47,this.loading=!1,this.stopSpinner(),e.finish(47);case 51:case"end":return e.stop()}}),e,this,[[11,44,47,51],[19,31,34,37]])}))),function(){return i.apply(this,arguments)})},{key:"repaint",value:(r=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f,p,d,g,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.tile){e.next=2;break}return e.abrupt("return");case 2:if(t=this.tile,n=t.features,r=t.roiFeatures,i=t.bpPerPixel,a=t.startBP,o=t.endBP,Fm.isWholeGenomeView(this.browser.referenceFrameList[0].chr)?(i=this.referenceFrame.initialEnd/this.$viewport.width(),a=0,o=this.referenceFrame.initialEnd,s=this.$viewport.width()):s=Math.ceil((o-a)/i),u=this.$viewport.height(),c=r?Math.max(this.getContentHeight(),u):this.getContentHeight(),l=Math.min(c,3*u),0!==s&&0!==l){e.next=11;break}return this.canvas&&lc(this.canvas).remove(),e.abrupt("return");case 11:h=Math.max(0,-lc(this.contentDiv).position().top-u),f="FILL"===this.trackView.track.displayMode?window.devicePixelRatio:!1===this.trackView.track.supportHiDPI?1:window.devicePixelRatio,p=Math.round((a-this.referenceFrame.start)/this.referenceFrame.bpPerPixel),d=lc('<canvas class="igv-canvas">').get(0),g=d.getContext("2d"),d.style.width=s+"px",d.style.height=l+"px",d.width=f*s,d.height=f*l,g.scale(f,f),d.style.left=p+"px",d.style.top=h+"px",g.translate(0,-h),v={context:g,features:n,pixelWidth:s,pixelHeight:l,pixelTop:h,bpStart:a,bpEnd:o,bpPerPixel:i,referenceFrame:this.referenceFrame,selection:this.selection,viewport:this,viewportWidth:this.$viewport.width(),viewportContainerX:this.referenceFrame.toPixels(this.referenceFrame.start-a),viewportContainerWidth:this.browser.viewportContainerWidth()},this.draw(v,n,r),this.canvasVerticalRange={top:h,bottom:h+l},this.canvas&&lc(this.canvas).remove(),lc(this.contentDiv).append(d),this.canvas=d,this.ctx=g;case 31:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"draw",value:function(e,t,n){if(t&&(e.features=t,this.trackView.track.draw(e)),n){var r,i=zn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.features=a.features,a.track.draw(e)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"toSVG",value:(n=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$zoomInNotice||!this.$zoomInNotice.is(":visible")){e.next=2;break}return e.abrupt("return");case 2:return n=this.referenceFrame,r=t.bpPerPixel,i=t.features,a=t.roiFeatures,o=this.$viewport.width(),s=this.$viewport.height(),u=n.start,c=n.start+o*n.bpPerPixel,l=new qp({width:o,height:s,viewbox:{x:0,y:-lc(this.contentDiv).position().top,width:o,height:s}}),h={viewport:this,context:l,top:-lc(this.contentDiv).position().top,pixelTop:0,pixelWidth:o,pixelHeight:s,bpStart:u,bpEnd:c,bpPerPixel:r,referenceFrame:this.referenceFrame,selection:this.selection,viewportWidth:o,viewportContainerX:0,viewportContainerWidth:this.browser.viewportContainerWidth()},this.draw(h,i,a),e.abrupt("return",l.getSerializedSvg(!0));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setContentHeight",value:function(e){e=Math.min(e,32e3),lc(this.contentDiv).height(e),this.tile&&(this.tile.invalidate=!0)}},{key:"isLoading",value:function(){return this.loading}},{key:"saveImage",value:function(){if(this.ctx){var e=this.canvasVerticalRange?this.canvasVerticalRange.top:0,t=window.devicePixelRatio,n=this.$viewport.width()*t,r=this.$viewport.height()*t,i=-lc(this.canvas).position().left*t,a=(-lc(this.contentDiv).position().top-e)*t,o=this.ctx.getImageData(i,a,n,r),s=document.createElement("canvas"),u=s.getContext("2d");s.width=o.width,s.height=o.height,u.putImageData(o,0,0),Wr((this.$trackLabel.text()?this.$trackLabel.text():"image")+".png",s.toDataURL("image/png"))}}},{key:"saveSVG",value:function(){var e=this.$viewport.get(0).getBoundingClientRect(),t=e.width,n=e.height,r={width:t,height:n,viewbox:{x:0,y:-lc(this.contentDiv).position().top,width:t,height:n}},i=new qp(r);this.drawSVGWithContect(i,t,n);var a=i.getSerializedSvg(!0),o=URL.createObjectURL(new Blob([a],{type:"application/octet-stream"})),s=this.$trackLabel?this.$trackLabel.text():this.trackView.track.id;Wr("".concat(s,".svg"),o)}},{key:"drawSVGWithContect",value:function(e,t,n){var r=this.referenceFrame,i=r.start,a=r.bpPerPixel;e.save();var o={context:e,viewport:this,referenceFrame:this.referenceFrame,top:-lc(this.contentDiv).position().top,pixelTop:0,pixelWidth:t,pixelHeight:n,bpStart:i,bpEnd:i+t*a,bpPerPixel:a,viewportWidth:t,viewportContainerX:0,viewportContainerWidth:this.browser.viewportContainerWidth(),selection:this.selection},s=this.tile?this.tile.features:[],u=this.tile?this.tile.roiFeatures:void 0;this.draw(o,s,u),this.$trackLabel&&!0===this.browser.trackLabelsVisible&&this.renderTrackLabelSVG(e),e.restore()}},{key:"getCachedFeatures",value:function(){return this.tile?this.tile.features:[]}},{key:"checkContentHeight",value:function(){var e=this.trackView.track;if("FILL"===e.displayMode)this.setContentHeight(this.$viewport.height());else if("function"==typeof e.computePixelHeight){var t=this.cachedFeatures;if(t){var n=e.computePixelHeight(t);n!==lc(this.contentDiv).height()&&this.setContentHeight(n)}}}},{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r,i,a){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tile||!this.tile.containsRange(n,r,i,a)){e.next=4;break}return e.abrupt("return",this.tile.features);case 4:if("function"!=typeof t.getFeatures){e.next=13;break}return e.next=7,t.getFeatures(n,r,i,a,this);case 7:return o=e.sent,this.cachedFeatures=o,this.checkContentHeight(),e.abrupt("return",o);case 13:return e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i,a){return t.apply(this,arguments)})},{key:"renderTrackLabelSVG",value:function(e){var t=((e,t)=>{const{x:n,y:r,width:i,height:a}=e.getBoundingClientRect(),{x:o,y:s,width:u,height:c}=t.getBoundingClientRect();return{x:o-n,y:s-r,width:u,height:c}})(this.$viewport.get(0),this.$trackLabel.get(0)),n=t.x,r=t.y,i=t.width,a=t.height,o=e.measureText(this.$trackLabel.text()).width;e.fillStyle="white",e.fillRect(n,r,i,a),e.font="12px Arial",e.fillStyle="rgb(68, 68, 68)";var s=.25*(i-o),u=.7*(a-12);e.fillText(this.$trackLabel.text(),n+s,r+a-u),e.strokeStyle="rgb(68, 68, 68)",e.strokeRect(n,r,i,a)}},{key:"createZoomInNotice",value:function(e){var t=lc('<div class="zoom-in-notice-container">');e.append(t);var n=lc("<div>");return t.append(n),n.text("Zoom in to see features"),t.hide(),t}},{key:"viewIsReady",value:function(){return this.browser&&this.browser.referenceFrameList&&this.referenceFrame}},{key:"addMouseHandlers",value:function(){var e,t=this,n=this.browser,r=0;function i(e){if(t.browser.dragObject||t.browser.isScrolling)return t.browser.cancelTrackPan(),e.preventDefault(),e.stopPropagation(),void(t.enableClick=!1);t.browser.cancelTrackPan(),t.browser.endTrackDrag()}function a(e,t){var n=t.referenceFrame,r=vr(e,t.contentDiv),i=vr(e,t.canvas),a=n.start+n.toBP(r.x);if(void 0!==a&&null!==t.tile)return{event:e,viewport:t,referenceFrame:n,genomicLocation:a,x:r.x,y:r.y,canvasX:i.x,canvasY:i.y}}this.$viewport.on("contextmenu",(function(e){if(t.browser.dragObject)return!1;var n=a(e,t);if(void 0===n)return!1;e.preventDefault();var r=[];"function"==typeof t.trackView.track.contextMenuItemList&&(r=t.trackView.track.contextMenuItemList(n)),r.length>0&&r.push({label:lc("<HR>")}),r.push({label:"Save Image (PNG)",click:function(){return t.saveImage()}}),r.push({label:"Save Image (SVG)",click:function(){return t.saveSVG()}}),t.menuPopup.presentTrackContextMenu(e,r)})),this.$viewport.on("mousedown",(function(e){t.enableClick=!0,n.mouseDownOnViewport(e,t),dr(e)})),this.$viewport.on("touchstart",(function(e){t.enableClick=!0,n.mouseDownOnViewport(e,t),dr(e)})),this.$viewport.on("mouseup",i),this.$viewport.on("touchend",i),this.$viewport.on("click",(function(i){t.enableClick&&function(i){if(3!==i.which&&!i.ctrlKey&&(lc(".igv-popover").hide(),!n.dragObject&&!n.isScrolling)){i.preventDefault(),i.stopPropagation();var o=vr(i,t.$viewport.get(0)).x,s=vr(i,t.canvas).x,u=t.referenceFrame,c=Math.floor(u.start+u.toBP(s)),l=Date.now();if(l-r<n.constants.doubleClickDelay){e&&(window.clearTimeout(e),e=void 0);var h,f=Math.round(u.start+u.toBP(o));if("all"===t.referenceFrame.chr.toLowerCase()){var p=n.genome.getChromosomeCoordinate(f).chr;if(1===n.referenceFrameList.length)h=p;else{var d=n.referenceFrameList.map((function(e){return e.locusSearchString}));d[n.referenceFrameList.indexOf(t.referenceFrame)]=p,h=d.join(" ")}n.search(h)}else n.zoomWithScaleFactor(.5,f,t)}else i.shiftKey&&"function"==typeof t.trackView.track.shiftClick?t.trackView.track.shiftClick(c,i):"function"==typeof t.trackView.track.popupData&&(e=setTimeout((function(){var r=function(e,t){var r=a(e,t);if(void 0!==r){var i,o=t.trackView.track,s=o.popupData(r),u=n.fireEvent("trackclick",[o,s]);return void 0===u||!0===u?s&&s.length>0&&(i=s.map((function(e){if(e.name){var t="<span>".concat(e.name,"</span>&nbsp&nbsp&nbsp").concat(e.value);return'<div title="'.concat(e.value,'">').concat(t,"</div>")}return"<hr>"===e?e:'<div title="'.concat(e,'">').concat(e,"</div>")})).join("")):"string"==typeof u&&(i=u),i}}(i,t);r&&(t.popover&&t.popover.dispose(),t.popover=new cr(t.trackView.$viewportContainer.get(0)),t.popover.presentContentWithEvent(i,r)),clearTimeout(e),e=void 0}),n.constants.doubleClickDelay));r=l}}(i)}))}}]),o}(Bp),Km=function(e,t,n,r,i,a){this.chr=e,this.startBP=t,this.endBP=n,this.bpPerPixel=r,this.features=i,this.roiFeatures=a};function Qm(e,t){return e&&t?e.concat(t):e||t}Km.prototype.containsRange=function(e,t,n,r){return this.bpPerPixel===r&&t>=this.startBP&&n<=this.endBP&&e===this.chr},Km.prototype.overlapsRange=function(e,t,n){return this.chr===e&&n>=this.startBP&&t<=this.endBP};var Jm=function(){function e(t){bn(this,e),this.viewport=t,this.browser=t.browser,this.$rulerSweeper=lc('<div class="igv-ruler-sweeper-div">'),lc(t.contentDiv).append(this.$rulerSweeper),this.namespace=".sweeper_"+gr(),this.addMouseHandlers()}return xn(e,[{key:"disableMouseHandlers",value:function(){lc(document).off(this.namespace),this.viewport.$viewport.off(this.namespace)}},{key:"addMouseHandlers",value:function(){var e,t,n,r,i,a,o=this.browser,s=this;this.disableMouseHandlers(),e=t=n=void 0,lc(this.browser.$root).on("mousedown"+this.namespace,(function(a){t=!0,n=vr(a,s.viewport.$viewport.get(0)).x,!0===e&&(s.$rulerSweeper.show(),i=1,r=n,s.$rulerSweeper.css({left:r+"px"}),s.$rulerSweeper.width(i))})),lc(this.browser.$root).on("mousemove"+this.namespace,(function(o){var u;e&&t&&(u=vr(o,s.viewport.$viewport.get(0)).x,u=Math.min(u,s.viewport.$viewport.width()),u=Math.max(u,0),a=u-n,i=Math.abs(a),s.$rulerSweeper.width(i),a<0&&(r=n+a,s.$rulerSweeper.css({left:r+"px"})))})),lc(this.browser.$root).on("mouseup"+this.namespace,(function(n){var a;!0===e&&!0===t&&(e=t=void 0,s.$rulerSweeper.hide(),(a={}).start=s.bp(r),a.end=s.bp(r+i),i>1&&(Zv(o.genome.getChromosome(s.viewport.referenceFrame.chr).bpLength,a,o.minimumBases()),s.viewport.referenceFrame.bpPerPixel=(Math.round(a.end)-Math.round(a.start))/s.viewport.$viewport.width(),s.viewport.referenceFrame.start=Math.round(a.start),s.viewport.referenceFrame.initialEnd=Math.round(a.end),o.updateViews(s.viewport.referenceFrame)))})),this.viewport.$viewport.on("mousedown"+this.namespace,(function(t){e=!0}))}},{key:"dispose",value:function(){this.disableMouseHandlers()}},{key:"bp",value:function(e){return this.viewport.referenceFrame.start+e*this.viewport.referenceFrame.bpPerPixel}}]),e}(),ey=function(e){kn(n,e);var t=Mn(n);function n(e,r,i,a){return bn(this,n),t.call(this,e,r,i,a)}return xn(n,[{key:"initializationHelper",value:function(){var e=this;this.rulerSweeper=new Jm(this),function(e,t,n){t.addClass("igv-viewport-ruler");var r=lc('<div class="igv-multi-locus-panel-close-container">');t.append(r),r.append(Hm("times-circle")),r.click((function(){return e.removeMultiLocusPanelWithReferenceFrame(n,!0)}))}(this.browser,this.$viewport,this.referenceFrame),this.$rulerLabel=lc('<div class = "igv-multi-locus-panel-label-div">'),this.$content.append(this.$rulerLabel),this.$rulerLabel.click((function(){return e.browser.selectMultiLocusPanelWithReferenceFrame(e.referenceFrame)})),this.namespace=".ruler_track_viewport_".concat(this.browser.referenceFrameList.indexOf(this.referenceFrame)),!0===Fm.isWholeGenomeView(this.browser.referenceFrameList[0].chr)?ty.call(this):this.$viewport.off(this.namespace)}},{key:"updateLocusLabel",value:function(){var e=this.referenceFrame.presentLocus(this.$viewport.width());this.$rulerLabel.text(e)}}]),n}(Zm);function ty(){var e=this,t=this.browser.referenceFrameList.indexOf(this.referenceFrame),n="click".concat(this.namespace);this.$viewport.on(n,(function(n){var r,i=vr(n,e.$viewport.get(0)).x,a=Math.round(e.referenceFrame.start+e.referenceFrame.toBP(i)),o=e.browser.genome.getChromosomeCoordinate(a).chr;if(1===e.browser.referenceFrameList.length)r=o;else{var s=e.browser.referenceFrameList.map((function(e){return e.locusSearchString}));s[t]=o,r=s.join(" ")}e.browser.search(r)}))}var ny=function(e,t,n,r){return"ruler"===e.track.type?new ey(e,e.$viewportContainer,t[n],r):"ideogram"===e.track.type?new Vp(e,e.$viewportContainer,t[n],r):new Zm(e,e.$viewportContainer,t[n],r)},ry={color:1};ry.parent=ry,ry.left=ry,ry.right=ry;var iy=function(){function e(){bn(this,e),this.root=ry}return xn(e,[{key:"insert",value:function(e,t,n){var r=new ly(new cy(e,t,n));for(this.treeInsert(r),r.color=2;r!==this.root&&2===r.parent.color;)if(r.parent===r.parent.parent.left){var i=r.parent.parent.right;2===i.color?(r.parent.color=1,i.color=1,r.parent.parent.color=2,r=r.parent.parent):(r===r.parent.right&&(r=r.parent,oy.call(this,r)),r.parent.color=1,r.parent.parent.color=2,sy.call(this,r.parent.parent))}else{var a=r.parent.parent.left;2===a.color?(r.parent.color=1,a.color=1,r.parent.parent.color=2,r=r.parent.parent):(r===r.parent.left&&(r=r.parent,sy.call(this,r)),r.parent.color=1,r.parent.parent.color=2,oy.call(this,r.parent.parent))}this.root.color=1}},{key:"findOverlapping",value:function(e,t){var n=new cy(e,t,0);if(this.root===ry)return[];var r=ay.call(this,n,this.root,[]);return r.length>1&&r.sort((function(e,t){return e.low-t.low})),r}},{key:"logIntervals",value:function(){!function e(t,n){t.left!==ry&&e(t.left),t.right!==ry&&e(t.right)}(this.root)}},{key:"mapIntervals",value:function(e){!function t(n){e(n.interval),n.left!==ry&&t(n.left),n.right!==ry&&t(n.right)}(this.root)}},{key:"treeInsert",value:function(e){for(var t=this.root,n=ry;t!==ry;)n=t,t=e.interval.low<=t.interval.low?t.left:t.right;e.parent=n,n===ry?(this.root=e,e.left=e.right=ry):e.interval.low<=n.interval.low?n.left=e:n.right=e,uy.call(this,e)}}]),e}();function ay(e,t,n){return t.interval.overlaps(e)&&n.push(t.interval),t.left!==ry&&t.left.max>=e.low&&ay.call(this,e,t.left,n),t.right!==ry&&t.right.min<=e.high&&ay.call(this,e,t.right,n),n}function oy(e){var t=e.right;e.right=t.left,t.left!==ry&&(t.left.parent=e),t.parent=e.parent,e.parent===ry?this.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,uy.call(this,e)}function sy(e){var t=e.left;e.left=t.right,t.right!==ry&&(t.right.parent=e),t.parent=e.parent,e.parent===ry?this.root=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,uy.call(this,e)}function uy(e){for(;e!==ry;){var t=e.left.max>e.right.max?e.left.max:e.right.max,n=e.interval.high;e.max=t>n?t:n;var r=e.left.min<e.right.min?e.left.min:e.right.min,i=e.interval.low;e.min=r<i?r:i,e=e.parent}}var cy=function(){function e(t,n,r){bn(this,e),this.low=t,this.high=n,this.value=r}return xn(e,[{key:"equals",value:function(e){return!!e&&(this===e||this.low===e.low&&this.high===e.high)}},{key:"compareTo",value:function(e){return this.low<e.low?-1:this.low>e.low?1:this.high<e.high?-1:this.high>e.high?1:0}},{key:"overlaps",value:function(e){try{return this.low<=e.high&&e.low<=this.high}catch(e){ir.presentAlert(e,void 0)}}}]),e}();function ly(e){this.parent=ry,this.left=ry,this.right=ry,this.interval=e,this.color=2}var hy=function(e,t,n){if(e&&0!==e.length){var r=function(e){var t=new iy,n=e.length,r=Math.max(10,Math.round(n/100));e.sort((function(e,t){return e.start===t.start?0:e.start>t.start?1:-1}));for(var i=function(i){var a=Math.min(n,i+r),o=e.slice(i,a),s=o[0].start,u=s;o.forEach((function(e){u=Math.max(u,e.end)})),t.insert(s,u,o)},a=0;a<n;a+=r)i(a);return t}(e).findOverlapping(t,n);return 0===r.length?[]:(e=[],r.forEach((function(r){for(var i=r.value,a=i.length,o=0;o<a;o++){var s=i[o];if(s.start>n)break;s.end>t&&e.push(s)}})),e.sort((function(e,t){return e.start-t.start})),e)}return[]},fy=Math.log,py=Math.LOG10E;Ne({target:"Math",stat:!0},{log10:function(e){return fy(e)*py}}),Ne({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});var dy=_r,gy=function(){function e(t){bn(this,e),this.browser=t,this.height=40,this.name="",this.id="ruler",this.disableButtons=!0,this.ignoreTrackMenu=!0,this.order=.01*Number.MIN_SAFE_INTEGER,this.removable=!1,this.type="ruler"}var t;return xn(e,[{key:"updateLocusLabel",value:function(){var e,t=zn(this.trackView.viewports);try{for(t.s();!(e=t.n()).done;)e.value.updateLocusLabel()}catch(e){t.e(e)}finally{t.f()}}},{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"computePixelHeight",value:function(e){return this.height}},{key:"draw",value:function(e){if(Fm.isWholeGenomeView(e.referenceFrame.chr))e.viewport.rulerSweeper.disableMouseHandlers(),this.drawWholeGenome(e);else{e.viewport.rulerSweeper.addMouseHandlers();var t=1+Math.floor(e.referenceFrame.toBP(e.pixelWidth));new vy(t,e).drawTicks(e,6,2,this.height),Lp.strokeLine(e.context,0,this.height-2,e.pixelWidth,this.height-2)}}},{key:"drawWholeGenome",value:function(e){e.context.save(),Lp.fillRect(e.context,0,0,e.pixelWidth,e.pixelHeight,{fillStyle:"white"});var t,n=e.pixelHeight,r=zn(this.browser.genome.wgChromosomeNames);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=this.browser.genome.getCumulativeOffset(i),o=this.browser.genome.getChromosome(i).bpLength,s=Math.round(a/e.bpPerPixel),u=Math.round(o/e.bpPerPixel);this.renderChromosomeRect(e.context,s,0,u,n,i)}}catch(e){r.e(e)}finally{r.f()}e.context.restore()}},{key:"renderChromosomeRect",value:function(e,t,n,r,i,a){e.textAlign="center",e.textBaseline="middle",e.font="12px sans-serif",Lp.strokeLine(e,t+r,n,t+r,n+i,{strokeStyle:ei.greyScale(191)});var o=a.startsWith("chr")?a.substring(3):a;r>e.measureText(o).width&&Lp.fillText(e,o,t+r/2,n+i/2,{fillStyle:ei.greyScale(68)})}},{key:"supportsWholeGenome",value:function(){return!0}},{key:"dispose",value:function(){}}]),e}(),vy=function(){function e(t,n){function r(e,t,n,r){this.majorTick=!0===r?2*e:e,this.majorUnit=t,this.halfTick=e/2,this.unitMultiplier=n}bn(this,e),function(e,t){var n,i,a,o,s=t.context.isSVG||!1;e<10&&r.call(this,1,"bp",1,s),(n=Math.floor(Math.log10(e)))>9?(i="gb",a=1e9):n>6?(i="mb",a=1e6):n>3?(i="kb",a=1e3):(i="bp",a=1),o=dy(Math.floor(e/a))+" "+i,this.labelWidthBP=Math.round(t.referenceFrame.toBP(t.context.measureText(o).width)),e/Math.pow(10,n-1)<25?r.call(this,Math.pow(10,n-1),i,a,s):r.call(this,Math.pow(10,n)/2,i,a,s)}.call(this,t,n)}return xn(e,[{key:"drawTicks",value:function(e,t,n,r){var i,a,o,s,u,c,l;for(i=Math.floor(e.bpStart/this.majorTick)-1,u=0,c=0,o=0;o<e.pixelWidth;)a=Math.floor(i*this.majorTick),o=Math.round(e.referenceFrame.toPixels(a-1-e.bpStart+.5)),s=dy(Math.floor(a/this.unitMultiplier))+" "+this.majorUnit,u=e.context.measureText(s).width,c=Math.round(o-u/2),Lp.fillText(e.context,s,c,r-t/.75),Lp.strokeLine(e.context,o,r-t,o,r-n),++i;for(i=Math.floor(e.bpStart/this.halfTick)-1,o=0;o<e.pixelWidth;)a=Math.floor(i*this.halfTick),o=Math.round(e.referenceFrame.toPixels(a-1-e.bpStart+.5)),(l=a/this.unitMultiplier)===Math.floor(l)&&this.majorTick/this.labelWidthBP>8&&(s=dy(Math.floor(l))+" "+this.majorUnit,c=o-(u=e.context.measureText(s).width)/2,Lp.fillText(e.context,s,c,r-t/.75)),Lp.strokeLine(e.context,o,r-t,o,r-n),++i}},{key:"description",value:function(e){}}]),e}(),my=new Set(["ruler","sequence","ideogram"]),yy=function(){function e(t,n,r){var i=this;bn(this,e),this.browser=t,this.track=r,r.trackView=this;var a=lc('<div class="igv-track">');this.trackDiv=a.get(0),n.append(a),this.namespace=".trackview_"+gr(),r instanceof gy&&(this.trackDiv.dataset.rulerTrack="rulerTrack"),r.height&&(this.trackDiv.style.height=r.height+"px"),this.appendLeftHandGutter(a),this.$viewportContainer=lc('<div class="igv-viewport-container">'),a.append(this.$viewportContainer),wy(t,t.referenceFrameList,this),"ideogram"===r.type||"ruler"===r.type||this.attachDragWidget(a,this.$viewportContainer),!0===r.ignoreTrackMenu||this.appendRightHandGutter(a);var o=[],s=r.color||r.defaultColor;Sr(s)&&o.push(s),r.altColor&&Sr(r.altColor)&&o.push(r.altColor);var u=o.map((function(e){return e.startsWith("#")?e:e.startsWith("rgb(")?ei.rgbToHex(e):ei.colorNameToHex(e)})),c={parent:this.trackDiv,top:void 0,left:void 0,width:432,height:void 0,defaultColors:u,colorHandler:function(e){i.track.color=e,i.repaintViews()}};this.colorPicker=new or(c),c.colorHandler=function(e){i.track.altColor=e,i.repaintViews()},this.altColorPicker=new or(c)}var t,n;return xn(e,[{key:"renderSVGContext",value:function(e,t){var n,r=zn(this.viewports);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=i.browser.referenceFrameList.indexOf(i.referenceFrame),o=i.$viewport.get(0).getBoundingClientRect(),s=o.y,u=o.width,c={deltaX:t.deltaX+a*u,deltaY:t.deltaY+s};i.renderSVGContext(e,c)}}catch(e){r.e(e)}finally{r.f()}}},{key:"attachScrollbar",value:function(e,t,n){"hidden"===t.find(".igv-viewport").css("overflow-y")&&(this.scrollbar=new _y(t,n),this.scrollbar.$outerScroll.insertAfter(t))}},{key:"removeViewportForReferenceFrame",value:function(e){for(var t=-1,n=0;n<this.viewports.length;n++)if(this.viewports[n].referenceFrame===e){t=n;break}t>=0&&(this.viewports[t].$viewport.remove(),this.viewports.splice(t,1),this.updateViewportForMultiLocus())}},{key:"updateViewportForMultiLocus",value:function(){"ruler"===this.track.type&&(this.viewports.length>1?(this.$viewportContainer.find(".igv-multi-locus-panel-close-container").show(),this.$viewportContainer.find(".igv-multi-locus-panel-label-div").show(),this.track.updateLocusLabel()):(this.$viewportContainer.find(".igv-multi-locus-panel-close-container").hide(),this.$viewportContainer.find(".igv-multi-locus-panel-label-div").hide()))}},{key:"appendLeftHandGutter",value:function(e){var t=this,n=lc('<div class="igv-left-hand-gutter">');if(this.leftHandGutter=n[0],e.append(n),"function"==typeof this.track.paintAxis){this.track.dataRange&&(n.click((function(e){t.browser.dataRangeDialog.configure({trackView:self}),t.browser.dataRangeDialog.present(lc(self.trackDiv))})),n.addClass("igv-clickable"));var r=lc('<canvas class ="igv-canvas">');n.append(r),this.controlCanvas=r.get(0),this.resizeControlCanvas(n.outerWidth(),n.outerHeight())}}},{key:"appendRightHandGutter",value:function(e){var t=lc('<div class="igv-right-hand-gutter">');e.append(t),this.createTrackGearPopup(t)}},{key:"dataRange",value:function(){return this.track.dataRange?this.track.dataRange:void 0}},{key:"setDataRange",value:function(e,t){void 0!==e&&(this.track.dataRange.min=e),void 0!==t&&(this.track.dataRange.max=t),this.track.autoscale=!1,this.repaintViews()}},{key:"presentColorPicker",value:function(e){"altColor"===e?this.altColorPicker.show():this.colorPicker.show()}},{key:"setTrackHeight",value:function(e,t){t||(this.track.minHeight&&(e=Math.max(this.track.minHeight,e)),this.track.maxHeight&&(e=Math.min(this.track.maxHeight,e))),this.track.height=e,this.track.config.height=e,lc(this.trackDiv).height(e),"function"!=typeof this.track.computePixelHeight&&(this.viewports.forEach((function(t){t.setContentHeight(e),t.tile&&(t.tile.invalidate=!0)})),this.repaintViews()),this.resizeControlCanvas(lc(this.leftHandGutter).outerWidth(),e),this.track.paintAxis&&this.track.paintAxis(this.controlCtx,lc(this.controlCanvas).width(),lc(this.controlCanvas).height()),this.scrollbar&&this.scrollbar.update()}},{key:"isLoading",value:function(){for(var e=0;e<this.viewports.length;e++)if(this.viewports[e].isLoading())return!0}},{key:"resize",value:function(e){var t,n=zn(this.viewports);try{for(n.s();!(t=n.n()).done;)t.value.setWidth(e)}catch(e){n.e(e)}finally{n.f()}var r=lc(this.leftHandGutter);this.resizeControlCanvas(r.outerWidth(),r.outerHeight()),this.updateViews(!0)}},{key:"repaintViews",value:function(){var e,t=zn(this.viewports);try{for(t.s();!(e=t.n()).done;)e.value.repaint()}catch(e){t.e(e)}finally{t.f()}this.track.paintAxis&&this.track.paintAxis(this.controlCtx,lc(this.controlCanvas).width(),lc(this.controlCanvas).height())}},{key:"updateViews",value:(n=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.browser&&this.browser.referenceFrameList){e.next=2;break}return e.abrupt("return");case 2:(n=this.viewports.filter((function(e){return e.isVisible()}))).forEach((function(e){e.shift()})),r=this.viewportsToReload(t),i=zn(r),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=12,o.loadFeatures();case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:if(!this.disposed){e.next=24;break}return e.abrupt("return");case 24:if(!(s=this.browser.dragObject)&&this.track.autoscale){u=[],c=zn(n);try{for(c.s();!(l=c.n()).done;)h=l.value,f=h.referenceFrame,p=f.start,d=p+f.toBP(lc(h.contentDiv).width()),h.tile&&h.tile.features&&("function"==typeof h.tile.features.getMax?(g=h.tile.features.getMax(p,d),u.push({value:g})):u=u.concat(hy(h.tile.features,p,d)))}catch(e){c.e(e)}finally{c.f()}"function"==typeof this.track.doAutoscale?this.track.dataRange=this.track.doAutoscale(u):this.track.dataRange=Xv(u)}if(s||!this.track.autoscale&&!this.track.autoscaleGroup){y=zn(r);try{for(y.s();!(b=y.n()).done;)b.value.repaint()}catch(e){y.e(e)}finally{y.f()}}else{v=zn(n);try{for(v.s();!(m=v.n()).done;)m.value.repaint()}catch(e){v.e(e)}finally{v.f()}}this.adjustTrackHeight();case 28:case"end":return e.stop()}}),e,this,[[6,16,19,22]])}))),function(e){return n.apply(this,arguments)})},{key:"getInViewFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.browser&&this.browser.referenceFrameList){e.next=2;break}return e.abrupt("return",[]);case 2:return n=this.viewportsToReload(t),r=n.map((function(e){return e.loadFeatures()})),e.next=6,Promise.all(r);case 6:i=[],a=zn(this.viewports);try{for(a.s();!(o=a.n()).done;)(s=o.value).tile&&s.tile.features&&(u=s.referenceFrame,c=u.start,l=c+u.toBP(lc(s.contentDiv).width()),"function"==typeof s.tile.features.getMax?(h=s.tile.features.getMax(c,l),i.push({value:h})):i=i.concat(hy(s.tile.features,c,l)))}catch(e){a.e(e)}finally{a.f()}return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"checkContentHeight",value:function(){this.viewports.forEach((function(e){e.checkContentHeight()})),this.adjustTrackHeight()}},{key:"adjustTrackHeight",value:function(){var e=Sy(this.viewports);if(this.track.autoHeight?this.setTrackHeight(e,!1):this.track.paintAxis&&this.track.paintAxis(this.controlCtx,lc(this.controlCanvas).width(),lc(this.controlCanvas).height()),this.scrollbar){var t=this.viewports[0].getContentTop(),n=this.viewports.map((function(e){return e.getContentHeight()})),r=Math.min.apply(Math,Pn(n)),i=Math.min(0,this.$viewportContainer.height()-r);t<i&&this.viewports.forEach((function(e){lc(e.contentDiv).css("top",i+"px")})),this.scrollbar.update()}}},{key:"resizeControlCanvas",value:function(e,t){var n=window.devicePixelRatio;if(this.leftHandGutter){this.controlCanvas&&lc(this.controlCanvas).remove();var r=lc('<canvas class ="igv-canvas">');this.controlCanvas=r[0],lc(this.leftHandGutter).append(r),this.controlCanvas.height=n*t,this.controlCanvas.width=n*e,this.controlCanvas.style.height=t+"px",this.controlCanvas.style.width=e+"px",this.controlCtx=this.controlCanvas.getContext("2d"),this.controlCtx.scale(n,n)}}},{key:"attachDragWidget",value:function(e,t){var n=this,r=this.browser;this.$trackDragScrim=lc('<div class="igv-track-drag-scrim">'),t.append(this.$trackDragScrim),this.$trackDragScrim.hide(),n.$trackManipulationHandle=lc('<div class="igv-track-manipulation-handle">'),e.append(n.$trackManipulationHandle),n.$trackManipulationHandle.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation(),n.$trackDragScrim.show(),r.startTrackDrag(n)})),n.$trackManipulationHandle.on("mouseup",(function(e){e.preventDefault(),e.stopPropagation(),r.endTrackDrag(),n.$trackDragScrim.hide()})),e.on("mouseenter",(function(e){r.dragTrack&&(e.preventDefault(),e.stopPropagation(),r.updateTrackDrag(n))})),n.$trackManipulationHandle.on("mouseleave",(function(e){r.dragTrack||(e.preventDefault(),e.stopPropagation(),n.$trackDragScrim.hide())}))}},{key:"viewportsToReload",value:function(e){return this.viewports.filter((function(t){if(!t.isVisible())return!1;if(t.checkZoomIn()){var n=t.referenceFrame,r=t.referenceFrame.chr,i=n.start,a=i+n.toBP(lc(t.contentDiv).width()),o=n.bpPerPixel;return e||!t.tile||t.tile.invalidate||!t.tile.containsRange(r,i,a,o)}return!1}))}},{key:"createTrackGearPopup",value:function(e){var t=this,n=lc("<div>",{class:"igv-trackgear-container"});e.append(n),n.append(Hm("cog")),this.trackGearPopup=new Ym(e),this.trackGearPopup.$popover.hide(),n.click((function(e){e.preventDefault(),e.stopPropagation(),t.trackGearPopup.presentMenuList(-t.trackGearPopup.$popover.width(),0,Vm.trackMenuItemList(t))}))}},{key:"dispose",value:function(){var e=this;this.$trackManipulationHandle&&this.$trackManipulationHandle.off(),this.scrollbar&&this.scrollbar.dispose(),lc(document).off(this.namespace),"function"==typeof this.track.dispose&&this.track.dispose();var t=this.track;"function"==typeof t.dispose&&t.dispose(),Object.keys(t).forEach((function(e){t[e]=void 0})),this.viewports.forEach((function(e){e.dispose()})),Object.keys(this).forEach((function(t){e[t]=void 0})),this.disposed=!0}},{key:"scrollBy",value:function(e){this.scrollbar.moveScrollerBy(e)}}]),e}();function by(e){var t,n=zn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.scrollbar?(r.scrollbar.$outerScroll.remove(),r.scrollbar=null,r.scrollbar=void 0):lc(r.trackDiv).find(".igv-scrollbar-shim").remove();var i,a=zn(r.viewports);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.rulerSweeper&&o.rulerSweeper.$rulerSweeper.remove(),o.popover&&o.popover.dispose(),o.$viewport.remove()}}catch(e){a.e(e)}finally{a.f()}delete r.viewports,delete r.scrollbar}}catch(e){n.e(e)}finally{n.f()}}function wy(e,t,n){var r=e.calculateViewportWidth(t.length);n.viewports=[];var i,a=zn(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=ny(n,t,t.indexOf(o),r);n.viewports.push(s)}}catch(e){a.e(e)}finally{a.f()}xy(n.viewports,n.$viewportContainer),n.updateViewportForMultiLocus(),!1===my.has(n.track.type)?n.attachScrollbar(lc(n.trackDiv),n.$viewportContainer,n.viewports):lc("<div>",{class:"igv-scrollbar-shim"}).insertAfter(n.$viewportContainer)}function xy(e,t){var n=lc(".igv-track-container");n.find(".igv-multi-locus-separator").remove();var r=ky(n.get(0)).x;if(t.find(".igv-viewport-multi-locus-gap-shim").remove(),e.length>1){var i,a=zn(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(e.indexOf(o)<=e.length-2){var s=o.$viewport,u=lc('<div class="igv-viewport-multi-locus-gap-shim">');u.insertAfter(s);var c=ky(u.get(0)).x,l=lc('<div class="igv-multi-locus-separator">');n.append(l),l.get(0).style.left="".concat(c-r,"px")}}}catch(e){a.e(e)}finally{a.f()}}}function ky(e){var t=e.getBoundingClientRect(),n=t.x,r=t.y;return{x:n+(window.pageXOffset||document.documentElement.scrollLeft),y:r+(window.pageYOffset||document.documentElement.scrollTop)}}function Sy(e){var t=e.map((function(e){return e.getContentHeight()}));return Math.max.apply(Math,Pn(t))}var _y=function(){function e(t,n){var r,i=this;bn(this,e);var a=function(e){e.preventDefault(),e.stopPropagation();var t=dr(e);i.moveScrollerBy(t.y-r),r=t.y},o=function(e){lc(document).off(i.namespace)},s=".trackscrollbar"+gr();this.namespace=s,this.$outerScroll=lc('<div class="igv-scrollbar-outer-div">'),this.$innerScroll=lc("<div>"),this.$outerScroll.append(this.$innerScroll),this.$viewportContainer=t,this.viewports=n,this.$innerScroll.on("mousedown",(function(e){e.preventDefault();var t=dr(e);r=t.y,lc(document).on("mousemove"+s,a),lc(document).on("mouseup"+s,o),lc(document).on("mouseleave"+s,o),e.stopPropagation()})),this.$innerScroll.on("click",(function(e){e.stopPropagation()})),this.$outerScroll.on("click",(function(e){i.moveScrollerBy(e.offsetY-i.$innerScroll.height()/2),e.stopPropagation()}))}return xn(e,[{key:"moveScrollerBy",value:function(e){var t=this.$innerScroll.position().top+e;this.moveScrollerTo(t)}},{key:"moveScrollerTo",value:function(e){var t=this.$outerScroll.height(),n=this.$innerScroll.height(),r=Math.min(Math.max(0,e),t-n),i=Sy(this.viewports),a=-Math.round(r*(i/this.$viewportContainer.height()));this.$innerScroll.css("top",r+"px");var o,s=zn(this.viewports);try{for(s.s();!(o=s.n()).done;)o.value.setTop(a)}catch(e){s.e(e)}finally{s.f()}}},{key:"dispose",value:function(){lc(window).off(this.namespace),this.$innerScroll.off()}},{key:"update",value:function(){var e=this.$viewportContainer.height(),t=Sy(this.viewports),n=Math.round(e/t*e);t>e?(this.$innerScroll.show(),this.$innerScroll.height(n)):this.$innerScroll.hide()}}]),e}(),Cy=function(e,t,n,r,i,a,o,s){for(var u,c=i,l=0,h=!!o&&Fe(o,s,3);l<r;){if(l in n){if(u=h?h(n[l],l,t):n[l],a>0&&Be(u))c=Cy(e,t,u,fe(u.length),c,a-1)-1;else{if(c>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[c]=u}c++}l++}return c},Ry=Cy;Ne({target:"Array",proto:!0},{flatMap:function(e){var t,n=De(this),r=fe(n.length);return Oe(e),(t=We(n,0)).length=Ry(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}}),ga("flatMap");var Ey=vc.trim,Ay=o.parseFloat,Ty=1/Ay(hc+"-0")!=-1/0?function(e){var t=Ey(String(e)),n=Ay(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Ay;function My(e,t){if(!(e.length<6)){var n={chr1:e[0],start1:Number.parseInt(e[1]),end1:Number.parseInt(e[2]),chr2:e[3],start2:Number.parseInt(e[4]),end2:Number.parseInt(e[5])};if(!(isNaN(n.start1)||isNaN(n.end1)||isNaN(n.start2)||isNaN(n.end2))){if(e.length>6&&"."!==e[6]&&(n.name=e[6]),e.length>7&&"."!==e[7]&&(n.score=parseFloat(e[7])),e.length>8&&"."!==e[8]&&(n.strand1=e[8]),e.length>9&&"."!==e[9]&&(n.strand2=e[9]),t){var r=t.colorColumn;r&&r<e.length&&(n.color=ei.createColorString(e[r]));var i=t.thicknessColumn;i&&i<e.length&&(n.thickness=e[i]),e.length>10&&t.columnNames&&t.columnNames.length===e.length&&(n.extras=e.slice(10))}return n.chr1===n.chr2&&(n.chr=n.chr1,n.start=Math.min(n.start1,n.start2),n.end=Math.max(n.end1,n.end2)),n}}}function Ly(e){if(0!=e.length){var t,n=e[0];if(void 0===n.score&&void 0!==n.name){var r,i=zn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(("number"==typeof(t=a.name)?t-t!=0:"string"!=typeof t||""===t.trim()||(Number.isFinite?!Number.isFinite(+t):!isFinite(+t)))&&"."!==a.name)return}}catch(e){i.e(e)}finally{i.f()}var o,s=zn(e);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.score=parseFloat(u.name),delete u.name}}catch(e){s.e(e)}finally{s.f()}}var c,l=zn(e.filter((function(e){return e.chr1!==e.chr2})));try{for(l.s();!(c=l.n()).done;){var h=c.value,f=Object.assign({},h);f.dup=!0,e.push(f),h.chr=h.chr1,h.start=h.start1,h.end=h.end1,f.chr=f.chr2,f.start=f.start2,f.end=f.end2}}catch(e){l.e(e)}finally{l.f()}}}function Iy(e,t){if(!(e.length<8))return{chr:e[0],start:Number.parseInt(e[1]),end:Number.parseInt(e[2]),color:ei.createColorString(e[6]),value:Number.parseFloat(e[7])}}function Py(e,t){if(!(e.length<6))return{chr:e[0],start:e[1],end:e[2],chr1:e[8],start1:Number.parseInt(e[9]),end1:Number.parseInt(e[10]),chr2:e[13],start2:Number.parseInt(e[14]),end2:Number.parseInt(e[15]),name:e[3],score:Number.parseFloat(e[4]),value:Number.parseFloat(e[5]),color:"."===e[7]?void 0:"0"===e[7]?"rgb(0,0,0)":e[7]}}Ne({target:"Number",stat:!0,forced:Number.parseFloat!=Ty},{parseFloat:Ty});var Ny=id.entries;Ne({target:"Object",stat:!0},{entries:function(e){return Ny(e)}});var Oy=["Name","gene_name","gene","gene_id","alias","locus","name"];function Fy(e,t){var n,r,i,a,o,s,u,c,l,h,f=t.format;if(e.length<9)return null;n=e[0],o=e[2],r=parseInt(e[3])-1,i=parseInt(e[4]),s="."===e[5]?0:parseFloat(e[5]),a=e[6],"."===e[7]||parseInt(e[7]);for(var p="gff3"===f?"=":/\s+/,d=Dy(u=e[8],p),g=0,v=Object.entries(d);g<v.length;g++){var m=In(v[g],2),y=m[0],b=m[1],w=y.toLowerCase();if("color"===w||"colour"===w)c=ei.createColorString(b);else if("gff3"===f)try{d[y]=unescape(b)}catch(e){d[y]=b,console.error("Malformed gff3 attibute value: ".concat(b))}}if(t.nameField)l=d[t.nameField];else for(h=0;h<Oy.length;h++)if(d.hasOwnProperty(Oy[h])){t.nameField=Oy[h],l=d[t.nameField];break}return{id:d.ID||d.transcript_id,parent:d.Parent,name:l,type:o,chr:n,start:r,end:i,score:s,strand:a,color:c,attributeString:u,delim:p,popupData:By}}function Dy(e,t){var n,r={},i=zn(e.split(";"));try{for(i.s();!(n=i.n()).done;){var a=n.value.trim().split(t,2);if(2===a.length){var o=a[0].trim(),s=a[1].trim();s.startsWith('"')&&s.endsWith('"')&&(s=s.substr(1,s.length-2)),r[o]=s}}}catch(e){i.e(e)}finally{i.f()}return r}function By(e){var t=this.attributeString.split(";"),n=[];this.name&&n.push({name:"name:",value:this.name}),n.push({name:"type:",value:this.type});var r,i=zn(t);try{for(i.s();!(r=i.n()).done;){var a=r.value.trim().split(this.delim,2);if(2===a.length&&void 0!==a[1]){var o=a[0].trim();if("name"===o.toLowerCase())continue;var s=a[1].trim();s.startsWith('"')&&s.endsWith('"')&&(s=s.substr(1,s.length-2)),n.push({name:o+":",value:s})}}}catch(e){i.e(e)}finally{i.f()}return n.push({name:"position:",value:"".concat(this.chr,":").concat(_r(this.start+1),"-").concat(_r(this.end))}),n}function zy(e,t){if(!(e.length<3)){t&&t.gffTags;var n=e[0],r=parseInt(e[1]),i=e.length>2?parseInt(e[2]):r+1;if(isNaN(r)||isNaN(i))throw Error("Unparsable bed record: ".concat(e.join("\t")));var a={chr:n,start:r,end:i,score:1e3};try{if(e.length>3){if(e[3].indexOf(";")>0&&e[3].indexOf("=")>0){var o,s=Dy(e[3],"="),u=zn(Oy);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(s.hasOwnProperty(c)){a.name=s[c],delete s[c];break}}}catch(e){u.e(e)}finally{u.f()}a.attributes=s}a.name||(a.name="."===e[3]?"":e[3])}if(e.length>4&&(a.score="."===e[4]?0:parseFloat(e[4]),isNaN(a.score)))return a;if(e.length>5&&(a.strand=e[5],"."!==a.strand&&"+"!==a.strand&&"-"!==a.strand))return a;if(e.length>6&&(a.cdStart=parseInt(e[6]),isNaN(a.cdStart)))return a;if(e.length>7&&(a.cdEnd=parseInt(e[7]),isNaN(a.cdEnd)))return a;if(e.length>8&&"."!==e[8]&&"0"!==e[8]&&(a.color=ei.createColorString(e[8])),e.length>11){var l=parseInt(e[9]);if(l>1e3)return a;var h=e[10].replace(/,$/,"").split(","),f=e[11].replace(/,$/,"").split(",");if(h.length!==f.length||l!==h.length)return a;for(var p=[],d=0;d<l;d++){var g=r+parseInt(f[d]),v=g+parseInt(h[d]);p.push({start:g,end:v})}Vy(p,a.cdStart,a.cdEnd),a.exons=p}if(t){var m=t.thicknessColumn,y=t.colorColumn;y&&y<e.length&&(a.color=ei.createColorString(e[y])),m&&m<e.length&&(a.thickness=e[m])}}catch(e){}return a}}function Uy(e,t){if(!(e.length<=15))return{swScore:Number.parseInt(e[1]),milliDiv:Number.parseInt(e[2]),milliDel:Number.parseInt(e[3]),milliIns:Number.parseInt(e[4]),chr:e[5],start:Number.parseInt(e[6]),end:Number.parseInt(e[7]),strand:e[9],repName:e[10],repClass:e[11],repFamily:e[12],repStart:Number.parseInt(e[13]),repEnd:Number.parseInt(e[14]),repLeft:Number.parseInt(e[15])}}function Hy(e,t){var n=void 0===t.shift?0:1;if(!(e.length<=9+n)){for(var r=parseInt(e[5+n]),i=parseInt(e[6+n]),a={name:e[0+n],chr:e[1+n],strand:e[2+n],start:parseInt(e[3+n]),end:parseInt(e[4+n]),cdStart:r,cdEnd:i,id:e[0+n]},o=parseInt(e[7+n]),s=e[8+n].split(","),u=e[9+n].split(","),c=[],l=0;l<o;l++){var h=parseInt(s[l]),f=parseInt(u[l]);c.push({start:h,end:f})}return Vy(c,r,i),a.exons=c,a}}function jy(e,t){var n=void 0===t.shift?0:1;if(!(e.length<=11+n)){for(var r=parseInt(e[5+n]),i=parseInt(e[6+n]),a={name:e[11+n],chr:e[1+n],strand:e[2+n],start:parseInt(e[3+n]),end:parseInt(e[4+n]),cdStart:r,cdEnd:i,id:e[0+n]},o=parseInt(e[7+n]),s=e[8+n].split(","),u=e[9+n].split(","),c=[],l=0;l<o;l++){var h=parseInt(s[l]),f=parseInt(u[l]);c.push({start:h,end:f})}return Vy(c,r,i),a.exons=c,a}}function qy(e,t){var n=void 0===t.shift?0:1;if(!(e.length<=10+n)){for(var r=parseInt(e[6+n]),i=parseInt(e[7+n]),a={name:e[0+n],id:e[1+n],chr:e[2+n],strand:e[3+n],start:parseInt(e[4+n]),end:parseInt(e[5+n]),cdStart:r,cdEnd:i},o=parseInt(e[8+n]),s=e[9+n].split(","),u=e[10+n].split(","),c=[],l=0;l<o;l++){var h=parseInt(s[l]),f=parseInt(u[l]);c.push({start:h,end:f})}return Vy(c,r,i),a.exons=c,a}}function Vy(e,t,n){var r,i=zn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.end,s=a.start;o<t||s>n?a.utr=!0:(t>=s&&t<=o&&(a.cdStart=t),n>=s&&n<=o&&(a.cdEnd=n))}}catch(e){i.e(e)}finally{i.f()}}function Gy(e,t){var n,r,i,a,o,s,u;if(!(e.length<9))return n=e[0],r=parseInt(e[1]),i=parseInt(e[2]),o=e[3],s=parseFloat(e[4]),a=e[5].trim(),u=parseFloat(e[6]),0===s&&(s=u),{chr:n,start:r,end:i,name:o,score:s,strand:a,signal:u,pValue:parseFloat(e[7]),qValue:parseFloat(e[8])}}function Wy(e,t){if(!(e.length<=3)){var n={chr:e[0],start:parseInt(e[1]),end:parseInt(e[2]),value:parseFloat(e[3])};if(t){var r=t.colorColumn;r&&r<e.length&&(n.color=ei.createColorString(e[r]))}return n}}function $y(e,t){var n=t.wig;if(n&&"fixedStep"===n.format){var r=n.index*n.step+n.start,i=r+n.span,a=parseFloat(e[0]);return++n.index,isNaN(a)?null:{chr:n.chrom,start:r,end:i,value:a}}if(n&&"variableStep"===n.format){if(e.length<2)return null;var o=parseInt(e[0],10)-1,s=o+n.span,u=parseFloat(e[1]);return isNaN(u)?null:{chr:n.chrom,start:o,end:s,value:u}}return Wy(e)}function Yy(e,t){if(!(e.length<6)){for(var n=["bin","chr","start","end","name","score","strand","refNCBI","refUCSC","observed","molType","class","valid","avHet","avHetSE","func","locType","weight","exceptions","submitterCount","submitters","alleleFreqCount","alleles","alleleNs","alleleFreqs","bitfields"],r={chr:e[1],start:Number.parseInt(e[2]),end:Number.parseInt(e[3]),name:e[4],score:Number.parseInt(e[5])},i=Math.min(e.length,n.length),a=6;a<i;a++)r[n[a]]=e[a];return r}}function Xy(e,t){if(!(e.length<7)){var n=e[0],r=e[1],i=parseInt(e[2]),a=parseInt(e[3]),o=parseInt(e[4]),s=parseInt(e[5]),u=e[6],c={chr:n,name:r,junction_left:i,junction_right:a,num_junction_reads:o,num_spanning_frags:s,spanning_frag_coords:[],start:-1,end:-1},l=i,h=a;if(s>0)for(var f=u.split(","),p=0;p<f.length;p++){var d=f[p].split("-"),g=d[0],v=d[1];g<l&&(l=g),v>h&&(h=v),c.spanning_frag_coords.push({left:g,right:v})}return c.start=l,c.end=h,c}}function Zy(e,t){if(e.length<7)return null;var n={chr:e[0],start:parseInt(e[1])-1,end:parseInt(e[2]),"Strongest SNP-risk allele":e[3],"Disease/Phenotype":e[4],"P-value":e[5],"Odds ratio or beta":e[6]};return e.length>6&&(n.PUBMEDID='<a target = "blank" href = "https://www.ncbi.nlm.nih.gov/pubmed/'.concat(e[7],'">').concat(e[7],"</a>")),n}function Ky(e,t){var n=t.customFormat;if(!(e.length<n.fields.length)){var r=n.coords||0,i=e[n.chr],a=parseInt(e[n.start])-r,o={chr:i,start:a,end:void 0!==n.end?parseInt(e[n.end]):a+1};return n.fields&&n.fields.forEach((function(t,r){r!==n.chr&&r!==n.start&&r!==n.end&&(o[t]=e[r])})),o}}function Qy(e,t){var n=t.columnNames;if(!n)throw Error("Sample names are not defined.   Missing column headers?");var r=n.length-3,i=e[0],a=parseInt(e[1]),o=parseInt(e[2]),s=e.slice(3).map(parseFloat);return s.length==r?{chr:i,start:a,end:o,values:s}:void console.warn("".concat(i,":").concat(a,"-").concat(o," row contains ").concat(s.length," sample columns instead of the expected ").concat(r," columns. Skipping..."))}var Jy=function(){function e(t){bn(this,e),this.config=t,this.header={},t.nameField&&(this.header.nameField=t.nameField),this.skipRows=0,t.decode?(this.decode=t.decode,this.delimiter=t.delimiter||"\t"):t.format&&(this.header.format=t.format.toLowerCase(),this.setDecoder(this.header.format)),this.delimiter||(this.delimiter="\t")}var t,n;return xn(e,[{key:"parseHeader",value:(n=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.header;case 1:return e.next=3,t.nextLine();case 3:if(e.t0=i=e.sent,e.t1=void 0,e.t0===e.t1){e.next=51;break}if(!i.startsWith("track")&&!i.startsWith("#track")){e.next=11;break}a=eb(i),Object.assign(n,a),e.next=49;break;case 11:if(!i.startsWith("browser")){e.next=14;break}e.next=49;break;case 14:if(!i.startsWith("#columns")){e.next=19;break}o=tb(i),Object.assign(n,o),e.next=49;break;case 19:if(!i.startsWith("##gff-version 3")){e.next=23;break}n.format="gff3",e.next=49;break;case 23:if(!i.startsWith("#gffTags")){e.next=27;break}n.gffTags=!0,e.next=49;break;case 27:if(!i.startsWith("fixedStep")&&!i.startsWith("variableStep")){e.next=31;break}return e.abrupt("break",51);case 31:if(!i.startsWith("#")){e.next=36;break}(s=i.split(this.delimiter||"\t")).length>1&&(r=s),e.next=49;break;case 36:if(this.setDecoder(n.format),e.prev=37,u=i.split(this.delimiter||"\t"),c=Object.assign({columnNames:r},n),!this.decode(u,c)){e.next=44;break}return e.abrupt("break",51);case 44:u.length>1&&(r=u);case 45:e.next=49;break;case 47:e.prev=47,e.t2=e.catch(37);case 49:e.next=1;break;case 51:if(r)for(n.columnNames=r,l=0;l<r.length;l++)"color"===r[l]||"colour"===r[l]?n.colorColumn=l:"thickness"===r[l]&&(n.thicknessColumn=l);return this.header=n,e.abrupt("return",n);case 54:case"end":return e.stop()}}),e,this,[[37,47]])}))),function(e){return n.apply(this,arguments)})},{key:"parseFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=this.decode,i=this.header.format,a=this.delimiter||"\t",o=0;case 5:return e.next=7,t.nextLine();case 7:if(e.t0=s=e.sent,e.t1=void 0,e.t0===e.t1){e.next=32;break}if(!(++o<=this.skipRows)){e.next=13;break}return e.abrupt("continue",5);case 13:if(s&&!s.startsWith("track")&&!s.startsWith("#")&&!s.startsWith("browser")){e.next=17;break}return e.abrupt("continue",5);case 17:if("wig"!==i||!s.startsWith("fixedStep")){e.next=22;break}return this.header.wig=nb(s),e.abrupt("continue",5);case 22:if("wig"!==i||!s.startsWith("variableStep")){e.next=25;break}return this.header.wig=rb(s),e.abrupt("continue",5);case 25:if(!((u=s.split(a)).length<1)){e.next=28;break}return e.abrupt("continue",5);case 28:(c=r(u,this.header))&&n.push(c),e.next=5;break;case 32:return r===My&&Ly(n),e.abrupt("return",n);case 34:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setDecoder",value:function(e){switch(e){case"narrowpeak":case"broadpeak":case"regionpeak":case"peaks":this.decode=Gy,this.delimiter=this.config.delimiter||/\s+/;break;case"bedgraph":this.decode=Wy,this.delimiter=/\s+/;break;case"wig":this.decode=$y,this.delimiter=this.config.delimiter||/\s+/;break;case"gff3":case"gff":case"gtf":this.decode=Fy,this.delimiter="\t";break;case"fusionjuncspan":this.decode=Xy,this.delimiter=this.config.delimiter||/\s+/;break;case"gtexgwas":this.skipRows=1,this.decode=Zy,this.delimiter="\t";break;case"refflat":this.decode=qy,this.delimiter=this.config.delimiter||/\s+/;break;case"genepred":this.decode=Hy,this.delimiter=this.config.delimiter||/\s+/;break;case"genepredext":this.decode=jy,this.delimiter=this.config.delimiter||/\s+/;break;case"ensgene":this.decode=Hy,this.header.shift=1,this.delimiter=this.config.delimiter||/\s+/;break;case"refgene":this.decode=jy,this.delimiter=this.config.delimiter||/\s+/,this.header.shift=1;break;case"bed":this.decode=zy,this.delimiter=this.config.delimiter||/\s+/;break;case"bedpe":this.decode=My,this.delimiter=this.config.delimiter||"\t";break;case"bedpe-domain":this.decode=Iy,this.headerLine=!0,this.delimiter=this.config.delimiter||"\t";break;case"bedpe-loop":this.decode=My,this.delimiter=this.config.delimiter||"\t",this.header={colorColumn:7};break;case"interact":this.decode=Py,this.delimiter=this.config.delimiter||/\s+/;break;case"snp":this.decode=Yy,this.delimiter="\t";break;case"rmsk":this.decode=Uy,this.delimiter="\t";break;case"gcnv":this.decode=Qy,this.delimiter="\t";break;default:var t=function(e){return $r&&$r[e]?function(e){const t=e.fields,n=["chr","start","end"];for(let r=0;r<t.length;r++)for(let i of n)i===t[r]&&(e[i]=r);return e}($r[e]):void 0}(e);void 0!==t?(this.decode=Ky,this.header.customFormat=t,this.delimiter=t.delimiter||"\t"):(this.decode=zy,this.delimiter=this.config.delimiter||/\s+/)}}}]),e}();function eb(e){var t,n,r={},i=[],a=zn(e.split(/(?:")([^"]+)(?:")|([^\s"]+)(?=\s+|$)/g));try{for(a.s();!(n=a.n()).done;){var o=n.value;o&&0!==o.trim().length&&(o.endsWith("=")?t=o:t?(i.push(t+o),t=void 0):i.push(o))}}catch(e){a.e(e)}finally{a.f()}for(var s=0,u=i;s<u.length;s++){var c=u[s];if(!c)return;var l=c.split("=",2);if(2===l.length){var h=l[0].trim(),f=l[1].trim();if(r.hasOwnProperty(h)){var p=r[h];Array.isArray(p)?p.push(f):r[h]=[p,f]}else r[h]=f}}return"interact"==r.type?r.format="interact":"gcnv"===r.type&&(r.format="gcnv"),r}function tb(e){var t={},n=e.split(/\s+/);return 2===n.length&&n[1].split(";").forEach((function(e){var n=e.split("=");"color"===n[0]?t.colorColumn=Number.parseInt(n[1])-1:"thickness"===n[0]&&(t.thicknessColumn=Number.parseInt(n[1])-1)})),t}function nb(e){var t=e.split(/\s+/);return{format:"fixedStep",chrom:t[1].split("=")[1],start:parseInt(t[2].split("=")[1],10)-1,step:parseInt(t[3].split("=")[1],10),span:t.length>4?parseInt(t[4].split("=")[1],10):1,index:0}}function rb(e){var t=e.split(/\s+/);return{format:"variableStep",chrom:t[1].split("=")[1],span:t.length>2?parseInt(t[2].split("=")[1],10):1}}function ib(e){return"string"==typeof e||e instanceof String?new ab(e):new ob(e)}var ab=function(){function e(t){bn(this,e),this.data=t,this.ptr=0}return xn(e,[{key:"nextLine",value:function(){var e=this.ptr,t=this.data.indexOf("\n",e),n=this.data;if(t>0)return this.ptr=t+1,t>e&&"\r"===n.charAt(t-1)?n.substring(e,t-1):n.substring(e,t);var r=n.length;return this.ptr=r,e>=r?void 0:n.substring(e)}}]),e}(),ob=function(){function e(t){bn(this,e),this.data=t,this.length=this.data.length,this.ptr=0}return xn(e,[{key:"nextLine",value:function(){var e,t;if(t="",!(this.ptr>=this.length)){for(var n=this.ptr;n<this.length;n++)if("\r"!==(e=String.fromCharCode(this.data[n]))){if("\n"===e)break;t+=e}return this.ptr=n+1,t}}}]),e}(),sb=function(){function e(){bn(this,e)}var t,n;return xn(e,[{key:"parseHeader",value:(n=yn(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.nextLine();case 2:if(e.t0=n=e.sent,e.t1=void 0,e.t0===e.t1){e.next=13;break}if(!n.startsWith("#")){e.next=8;break}e.next=11;break;case 8:return r=n.split("\t"),this.header={headings:r},e.abrupt("break",13);case 11:e.next=0;break;case 13:return e.abrupt("return",this.header);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"parseFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],this.header){e.next=9;break}return e.t0=this,e.next=5,t.nextLine();case 5:return e.t1=e.sent,e.next=8,e.t0.parseHeader.call(e.t0,e.t1);case 8:this.header=e.sent;case 9:r=this.header.headings.length-1;case 10:return e.next=12,t.nextLine();case 12:if(e.t2=i=e.sent,e.t3=void 0,e.t2===e.t3){e.next=19;break}(a=i.split("\t")).length>r&&n.push({sampleKey:a[0],sample:a[0],chr:a[1],start:parseInt(a[2]),end:parseInt(a[3]),value:parseFloat(a[r])}),e.next=10;break;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),ub=function(){function e(t,n){bn(this,e),t.displayMode&&(t.displayMode=t.displayMode.toUpperCase()),this.config=t,this.browser=n,this.url=t.url,this.type=t.type,this.description=t.description,this.supportHiDPI=void 0===t.supportHiDPI||t.supportHiDPI,t.name||t.label?this.name=t.name||t.label:Gr(t.url)?this.name=t.url.name:this.name=t.url,this.id=void 0===this.config.id?this.name:this.config.id,this.order=t.order,this.color=t.color,this.altColor=t.altColor,"civic-ws"===t.sourceType?this.defaultColor="rgb(155,20,20)":this.defaultColor="rgb(0,0,150)",this.autoscaleGroup=t.autoscaleGroup,this.removable=void 0===t.removable||t.removable,this.height=t.height||100,this.autoHeight=t.autoHeight,this.minHeight=t.minHeight||Math.min(25,this.height),this.maxHeight=t.maxHeight||Math.max(1e3,this.height),this.visibilityWindow=t.visibilityWindow}return xn(e,[{key:"getState",value:function(){for(var e={},t=0,n=Object.keys(this.config);t<n.length;t++){var r=n[t];r.startsWith("_")||(e[r]=this.config[r])}for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i];if(!o.startsWith("_")){var s=this[o];s&&($v(s)||"boolean"==typeof s)&&(e[o]=s)}}this.color&&(e.color=this.color),this.altColor&&(e.altColor=this.altColor),!this.autoscale&&this.dataRange&&(e.min=this.dataRange.min,e.max=this.dataRange.max);for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];if("function"==typeof e[l])throw Error("Property '".concat(l,"' of track '").concat(this.name," is a function. Functions cannot be saved in sessions."));if(e[l]instanceof File)throw Error("Property '".concat(l,"' of track '").concat(this.name," is a local File. Local file references cannot be saved in sessions."));if(e[l]instanceof Promise)throw Error("Property '".concat(l,"' of track '").concat(this.name," is a Promise. Promises cannot be saved in sessions."))}return e}},{key:"supportsWholeGenome",value:function(){return!1}},{key:"getGenomeId",value:function(){return this.browser.genome?this.browser.genome.id:void 0}},{key:"setTrackProperties",value:function(e){for(var t,n={},r=0,i=Object.keys(e);r<i.length;r++){var a=i[r];switch(a.toLowerCase()){case"usescore":n.useScore=1===e[a]||"1"===e[a]||"on"===e[a]||!0===e[a];break;case"visibility":switch(e[a]){case"2":case"3":case"pack":case"full":n.displayMode="EXPANDED";break;case"4":case"squish":n.displayMode="SQUISHED";break;case"1":case"dense":n.displayMode="COLLAPSED"}break;case"color":case"altcolor":n[a]=e[a].startsWith("rgb(")?e[a]:"rgb("+e[a]+")";break;case"featurevisiblitywindow":case"visibilitywindow":n.visibilityWindow=Number.parseInt(e[a]);break;case"maxheightpixels":3===(t=e[a].split(":")).length&&(n.minHeight=Number.parseInt(t[2]),n.height=Number.parseInt(t[1]),n.maxHeight=Number.parseInt(t[0]));break;case"viewlimits":if(!this.config.autoscale){var o=0,s=void 0;1==(t=e[a].split(":")).length?s=Number.parseFloat(t[0]):2==t.length&&(o=Number.parseFloat(t[0]),s=Number.parseFloat(t[1])),n.autoscale=!1,n.dataRange={min:o,max:s}}case"name":n[a]=e[a]}}for(var u=0,c=Object.keys(n);u<c.length;u++){var l=c[u];this.config.hasOwnProperty(l)||(this[l]=n[l])}}},{key:"getVisibilityWindow",value:function(){return this.visibilityWindow}},{key:"clickedFeatures",value:function(e){var t=e.viewport.getCachedFeatures();if(!t||0===t.length)return[];var n=e.genomicLocation,r=e.referenceFrame.bpPerPixel>.2?3*e.referenceFrame.bpPerPixel:0,i=Math.floor(n)-r,a=Math.floor(n)+r;return hy(t,i,a)}}],[{key:"extractPopupData",value:function(t,n){var r,i,a,o=new Set(["row","color","chr","start","end","cdStart","cdEnd","strand","alpha"]),s=[];for(var u in t)if(t.hasOwnProperty(u)&&!o.has(u)&&$v(t[u])){var c=t[u];s.push({name:(a=u,a.length>0?a.charAt(0).toUpperCase()+a.slice(1):a),value:c}),"alleles"===u?r=t[u]:"alleleFreqs"===u&&(i=t[u])}if(r&&i){r.endsWith(",")&&(r=r.substr(0,r.length-1)),i.endsWith(",")&&(i=i.substr(0,i.length-1));var l=r.split(","),h=i.split(",");if(h.length>1){for(var f=[],p=0;p<h.length;p++)f.push({a:l[p],af:Number.parseFloat(h[p])});f.sort((function(e,t){return e.af-t.af}));var d=f[f.length-1].a;if(1===d.length)for(var g=f.length-2;g>=0;g--){var v=f[g].a;if(1===v.length){var m=e.getCravatLink(t.chr,t.start+1,d,v,n);m&&(s.push("<hr/>"),s.push(m))}}}}if(t.attributes)for(var y=0,b=Object.keys(t.attributes);y<b.length;y++){var w=b[y];s.push({name:w,value:t.attributes[w]})}var x="".concat(t.chr,":").concat(_r(t.start+1),"-").concat(_r(t.end));return t.strand&&(x+=" (".concat(t.strand,")")),s.push("<hr>"),s.push(x),s}},{key:"getCravatLink",value:function(e,t,n,r,i){if("hg38"===i||"GRCh38"===i){var a=e.startsWith("chr")?e:"chr"+e;return'<a target="_blank" href="https://run.opencravat.org/result/nocache/variant.html'+"?chrom=".concat(a,"&pos=").concat(t,"&ref_base=").concat(n,"&alt_base=").concat(r,'">Cravat ').concat(n,"->").concat(r,"</a>")}}}]),e}(),cb=new Set(["A","C","T","G"].map((function(e){return e.charCodeAt(0)})));function lb(e){return new hb(e)}var hb=function(){function e(t){var n,r;bn(this,e),this.chr=t[0],this.pos=parseInt(t[1]),this.names=t[2],this.referenceBases=t[3],this.alternateBases=t[4],this.quality=t[5],this.filter=t[6],this.info=(n=t[7],r={},n&&n.split(";").forEach((function(e){var t=e.split("=");r[t[0]]=t[1]})),r),this.init()}return xn(e,[{key:"init",value:function(){var e=this.referenceBases,t=this.alternateBases;if(this.info&&(this.info.VT?this.type=this.info.VT:this.info.SVTYPE?this.type="SV":this.info.PERIOD&&(this.type="STR")),void 0===this.type&&(this.type=function(e,t){var n=e.length;if(void 0===t)return"UNKNOWN";if(0===t.trim().length||"<NON_REF>"===t||"<*>"===t||"."===t)return"NONVARIANT";var r,i=t.split(",").map((function(e){return 1===n&&1===e.length?"SNP":"<NON_REF>"===e?"NONVARIANT":"OTHER"})),a=i[0],o=zn(i);try{for(o.s();!(r=o.n()).done;)if(r.value!==a)return"MIXED"}catch(e){o.e(e)}finally{o.f()}return a}(e,t)),"NONVARIANT"===this.type&&(this.heterozygosity=0),this.info.END)this.start=this.pos-1,this.info.CHR2&&this.info.CHR2!==this.chr?this.end=this.start+1:this.end=Number.parseInt(this.info.END);else if("NONVARIANT"===this.type)this.start=this.pos-1,this.end=this.start+e.length;else{var n=t.split(",").filter((function(e){return e.length>0}));this.alleles=[],this.start=void 0,this.end=void 0;var r,i=zn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(this.alleles.push(a),"SV"!==this.type&&fb(a)){var o=a.length,s=e.length,u=0;for(e.charCodeAt(0)===a.charCodeAt(0)&&(u++,o--,s--);o>0&&s>0;){var c=u+o-1,l=u+s-1;if(a.charCodeAt(c)!==e.charCodeAt(l))break;o--,s--}for(;o>0&&s>0;){var h=u,f=u;if(a.charCodeAt(h)!==e.charCodeAt(f))break;u++,o--,s--}var p=this.pos+u-1,d=p+s;this.start=void 0===this.start?p:Math.min(this.start,p),this.end=void 0===this.end?d:Math.max(this.end,d)}}}catch(e){i.e(e)}finally{i.f()}void 0===this.start&&(this.start=this.pos-1,this.end=this.pos)}}},{key:"popupData",value:function(e,t){var n,r,i=this,a=this.end===this.pos?this.pos:"".concat(this.pos,"-").concat(this.end);if(n=[{name:"Chr",value:this.chr},{name:"Pos",value:a},{name:"Names",value:this.names?this.names:""},{name:"Ref",value:this.referenceBases},{name:"Alt",value:this.alternateBases.replace("<","&lt;")},{name:"Qual",value:this.quality},{name:"Filter",value:this.filter}],"SNP"===this.type){var o=this.referenceBases;if(1===o.length){var s,u=zn(this.alternateBases.split(","));try{for(u.s();!(s=u.n()).done;){var c=s.value;if(1===c.length){var l=ub.getCravatLink(this.chr,this.pos,o,c,t);l&&(n.push("<hr/>"),n.push(l))}}}catch(e){u.e(e)}finally{u.f()}}}return this.hasOwnProperty("heterozygosity")&&n.push({name:"Heterozygosity",value:this.heterozygosity}),this.info&&(n.push("<hr>"),Object.keys(this.info).forEach((function(e){n.push({name:e,value:pb(i.info[e])})}))),this.calls&&1===this.calls.length&&(n.push("<hr>"),r=this.alleles[this.calls[0].genotype[0]]+this.alleles[this.calls[0].genotype[1]],n.push({name:"Genotype",value:r})),n}},{key:"isRefBlock",value:function(){return"NONVARIANT"===this.type}}]),e}();function fb(e){for(var t=0;t<e.length;t++)if(!cb.has(e.charCodeAt(t)))return!1;return!0}function pb(e,t){return void 0===t&&(t=","),Array.isArray(e)?e.join(t):e}var db=function(){function e(){bn(this,e)}var t,n;return xn(e,[{key:"construtor",value:function(){}},{key:"parseHeader",value:(n=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f,p,d,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,t.nextLine();case 3:if(!(r=e.sent).startsWith("##fileformat")){e.next=8;break}n.version=r.substr(13),e.next=9;break;case 8:throw new Error("Invalid VCF file: missing fileformat line");case 9:return e.next=11,t.nextLine();case 11:if(e.t0=r=e.sent,e.t1=void 0,e.t0===e.t1){e.next=39;break}if(!r.startsWith("#")){e.next=36;break}if(i=void 0,a={},!r.startsWith("##")){e.next=33;break}if(!(r.startsWith("##INFO")||r.startsWith("##FILTER")||r.startsWith("##FORMAT"))){e.next=31;break}if(o=r.indexOf("<"),s=r.lastIndexOf(">"),o>2&&s>0){e.next=23;break}return e.abrupt("continue",9);case 23:u=r.substring(2,o-1),n[u]||(n[u]={}),c=Rr(r.substring(o+1,s-1),","),l=zn(c);try{for(l.s();!(h=l.n()).done;)f=h.value,(p=f.split("=")).length>1&&("ID"===p[0]?i=p[1]:a[p[0]]=p[1])}catch(e){l.e(e)}finally{l.f()}i&&(n[u][i]=a),e.next=31;break;case 31:e.next=34;break;case 33:if(r.startsWith("#CHROM")&&(d=r.split("\t")).length>8)for(n.callSets=[],g=9;g<d.length;g++)n.callSets.push({id:g,name:d[g]});case 34:e.next=37;break;case 36:return e.abrupt("break",39);case 37:e.next=9;break;case 39:return this.header=n,e.abrupt("return",n);case 41:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"parseFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=this.header.callSets,i=8+(r?r.length+1:0);case 3:return e.next=5,t.nextLine();case 5:if(e.t0=a=e.sent,e.t1=void 0,e.t0===e.t1){e.next=11;break}a&&!a.startsWith("#")&&(o=a.split("\t")).length===i&&((s=lb(o)).header=this.header,n.push(s),o.length>9&&function(){var e=gb(o[8].split(":"));s.calls={};for(var t=9;t<o.length;t++){var n=o[t];u=r[t-9],c={callSetName:u.name,info:{}},s.calls[u.id]=c,n.split(":").forEach((function(t,n){switch(n){case e.genotypeIndex:c.genotype=[],t.split(/[\|\/]/).forEach((function(e){c.genotype.push("."===e?e:parseInt(e))}));break;default:c.info[e.fields[n]]=t}}))}}()),e.next=3;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function gb(e){for(var t={genotypeIndex:-1,fields:e},n=0;n<e.length;n++)"GT"===e[n]&&(t.genotypeIndex=n);return t}var vb=function(){function e(t){if(bn(this,e),this.config=t,t.columns){if(void 0===t.columns.chromosome||void 0===t.columns.position||void 0===t.columns.value)throw Error("columns property must define chrCol, posCol, and valueCol");this.posCol=t.columns.position-1,this.chrCol=t.columns.chromosome-1,this.pvalueCol=t.columns.value-1}else this.posCol=2,this.chrCol=1,this.pvalueCol=3}var t,n;return xn(e,[{key:"parseHeader",value:(n=yn(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.nextLine();case 2:return n=e.sent,e.abrupt("return",this.parseHeaderLine(n));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"parseHeaderLine",value:function(e){if(this.columns=e.split(/\t/),!this.config.columns)for(var t=0;t<this.columns.length;t++)switch(this.columns[t].toLowerCase()){case"chr":case"chromosome":case"chr_id":this.chrCol=t;break;case"bp":case"pos":case"position":case"chr_pos":this.posCol=t;break;case"p":case"pval":case"pvalue":case"p-value":case"p.value":this.pvalueCol=t}return this.columns}},{key:"parseFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=t.nextLine(),this.columns||this.parseHeaderLine(r);void 0!==(i=t.nextLine());)(a=i.split(/\t/)).length===this.columns.length&&(o=a[this.chrCol],s=parseInt(a[this.posCol])-1,u=s+1,c=parseFloat(a[this.pvalueCol]),n.push(new mb({chr:o,start:s,end:u,value:c,line:i,columns:this.columns})));return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),mb=function(){function e(t){var n=t.chr,r=t.start,i=t.end,a=t.value,o=t.line,s=t.columns;bn(this,e),this.chr=n,this.start=r,this.end=i,this.value=a,this.line=o,this.columns=s}return xn(e,[{key:"popupData",value:function(){var e=this.line.split(/\t/);return this.columns.map((function(t,n){return{name:t,value:e[n]}}))}},{key:"getAttribute",value:function(e){for(var t=this.line.split(/\t/),n=0;n<this.columns.length;n++)if(this.columns[n]===e)return t[n]}}]),e}(),yb=new RegExp("([^:]*)\\(([^)]*)\\)"),bb=new RegExp("([^:]*):([^(]*)\\(([^)]*)\\)"),wb=function(){function e(t){bn(this,e);var n=t?t.decode:void 0;this.nameField=t?t.nameField:void 0,this.skipRows=0,this.decode=n||Rb,this.delimiter="\t"}var t,n;return xn(e,[{key:"parseHeader",value:(n=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.nextLine();case 2:if(!(n=e.sent)){e.next=10;break}if(!(n.startsWith("track")||n.startsWith("#")||n.startsWith("browser"))){e.next=7;break}n.startsWith("track")||n.startsWith("#track")?(i=Sb(n),r?Object.assign(r,i):r=i):n.startsWith("#columns")?(a=_b(n),r?Object.assign(r,a):r=a):n.startsWith("##gff-version 3")&&(this.format="gff3",r||(r={}),r.format="gff3"),e.next=8;break;case 7:return e.abrupt("break",10);case 8:e.next=0;break;case 10:return this.header=r,e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"parseFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=function(){for(var e,t,n=[],r="",a=!1;o||""===o;){for(e=0;e<o.length;e++)(t=o.charAt(e))===i?a?r+=t:(n.push(r),r=""):'"'===t?e+1<o.length&&'"'===o.charAt(e+1)?(a&&(r+='"'),e++):a=!a:r+=t;if(!a)break;r+="\n",o=nextLine()}return n.push(r),n},n=[],r=this.decode,i=this.delimiter||"\t",a=0;case 6:if(void 0===(o=t.nextLine())){e.next=20;break}if(!(++a<=this.skipRows||o.startsWith("track")||o.startsWith("#")||o.startsWith("browser"))){e.next=10;break}return e.abrupt("continue",6);case 10:if(!((s=c()).length<1)){e.next=13;break}return e.abrupt("continue",6);case 13:if(this.aed){e.next=16;break}return this.aed=kb(s),e.abrupt("continue",6);case 16:(u=r.call(this,s,void 0))&&n.push(u),e.next=6;break;case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function xb(e){var t=bb.exec(e);if(t)return{namespace:t[1],name:t[2],type:t[3]};if(t=yb.exec(e))return{namespace:"?",name:t[1],type:t[2]};throw new Error("Error parsing the header row of AED file - column not in ns:name(ns:type) format")}function kb(e){var t,n,r;for(t={columns:[],metadata:{}},n=0;n<e.length;n++)r=xb(e[n]),t.columns.push(r);return t}function Sb(e){var t,n,r={},i=[],a=zn(e.split(/(?:")([^"]+)(?:")|([^\s"]+)(?=\s+|$)/g));try{for(a.s();!(n=a.n()).done;){var o=n.value;o&&0!==o.trim().length&&(o.endsWith("=")>0?t=o:t?(i.push(t+o),t=void 0):i.push(o))}}catch(e){a.e(e)}finally{a.f()}for(var s=0,u=i;s<u.length;s++){var c=u[s];if(!c)return;var l=c.split("=",2);if(2===l.length){var h=l[0].trim(),f=l[1].trim();r[h]=f}}return r}function _b(e){var t={},n=e.split(/\s+/);return 2===n.length&&n[1].split(";").forEach((function(e){var n=e.split("=");"color"===n[0]?t.colorColumn=Number.parseInt(n[1])-1:"thickness"===n[0]&&(t.thicknessColumn=Number.parseInt(n[1])-1)})),t}function Cb(e,t){var n,r,i=e.columns;this.aed=e,this.allColumns=t,this.chr=null,this.start=null,this.end=null,this.score=1e3,this.strand=".",this.cdStart=null,this.cdEnd=null,this.name=null,this.color=null;for(var a=0;a<t.length;a++)if(n=t[a]){"aed:Integer"===(r=i[a]).type&&(n=parseInt(n));var o=[];if(r.namespace.length>0)for(var s=0;s<r.namespace.length;s++)o.push(r.namespace.charCodeAt(s));"bio"===r.namespace.trim()?"sequence"===r.name?this.chr=n:"start"===r.name?this.start=n:"end"===r.name?this.end=n:"cdsMin"===r.name?this.cdStart=n:"cdsMax"===r.name?this.cdEnd=n:"strand"===r.name&&(this.strand=n):"aed"===r.namespace?"name"===r.name&&(this.name=n):"style"===r.namespace&&"color"===r.name&&(this.color=ei.createColorString(n))}}function Rb(e,t){var n,r,i,a,o,s,u=0,c=this.aed.columns;if(e.length===c.length){for(s=0;s<e.length;s++)a=c[s],""!==(i=e[s])&&u++,"name"===a.name&&"aed"===a.namespace?n=i:"value"===a.name&&"aed"===a.namespace&&(r=i);if(2===u&&n&&r)return o=xb(n),this.aed.metadata[o.namespace]||(this.aed.metadata[o.namespace]={}),void(this.aed.metadata[o.namespace][o.name]||(this.aed.metadata[o.namespace][o.name]={type:o.type,value:r}));var l=new Cb(this.aed,e);if(l.chr&&(l.start||0===l.start)&&l.end)return l}}Cb.prototype.popupData=function(){for(var e=[],t=this.aed,n=0;n<this.allColumns.length;n++){var r=this.allColumns[n],i=t.columns[n].name;"sequence"!==i&&"color"!==i&&r&&e.push({name:i,value:r})}return e};var Eb=function(){function e(t,n){bn(this,e),this.littleEndian=void 0===n||n,this.position=0,this.view=t,this.length=t.byteLength}return xn(e,[{key:"available",value:function(){return this.length-this.position}},{key:"remLength",value:function(){return this.length-this.position}},{key:"hasNext",value:function(){return this.position<this.length-1}},{key:"getByte",value:function(){var e=this.view.getUint8(this.position,this.littleEndian);return this.position++,e}},{key:"getShort",value:function(){var e=this.view.getInt16(this.position,this.littleEndian);return this.position+=2,e}},{key:"getUShort",value:function(){var e=this.view.getUint16(this.position,this.littleEndian);return this.position+=2,e}},{key:"getInt",value:function(){var e=this.view.getInt32(this.position,this.littleEndian);return this.position+=4,e}},{key:"getUInt",value:function(){var e=this.view.getUint32(this.position,this.littleEndian);return this.position+=4,e}},{key:"getLong",value:function(){var e=[];e[0]=this.view.getUint8(this.position),e[1]=this.view.getUint8(this.position+1),e[2]=this.view.getUint8(this.position+2),e[3]=this.view.getUint8(this.position+3),e[4]=this.view.getUint8(this.position+4),e[5]=this.view.getUint8(this.position+5),e[6]=this.view.getUint8(this.position+6),e[7]=this.view.getUint8(this.position+7);var t=0;if(this.littleEndian)for(var n=e.length-1;n>=0;n--)t=256*t+e[n];else for(var r=0;r<e.length;r++)t=256*t+e[r];return this.position+=8,t}},{key:"getString",value:function(e){for(var t,n="";0!==(t=this.view.getUint8(this.position++))&&(n+=String.fromCharCode(t),!e||n.length!==e););return n}},{key:"getFixedLengthString",value:function(e){var t,n,r="";for(t=0;t<e;t++)(n=this.view.getUint8(this.position++))>0&&(r+=String.fromCharCode(n));return r}},{key:"getFixedLengthTrimmedString",value:function(e){var t,n,r="";for(t=0;t<e;t++)(n=this.view.getUint8(this.position++))>32&&(r+=String.fromCharCode(n));return r}},{key:"getFloat",value:function(){var e=this.view.getFloat32(this.position,this.littleEndian);return this.position+=4,e}},{key:"getDouble",value:function(){var e=this.view.getFloat64(this.position,this.littleEndian);return this.position+=8,e}},{key:"skip",value:function(e){return this.position+=e,this.position}},{key:"getVPointer",value:function(){var e=this.position,t=this.view.getUint8(e+1)<<8|this.view.getUint8(e),n=4294967296*(255&this.view.getUint8(e+6))+16777216*(255&this.view.getUint8(e+5))+65536*(255&this.view.getUint8(e+4))+256*(255&this.view.getUint8(e+3))+(255&this.view.getUint8(e+2));return this.position+=8,new Ab(n,t)}}]),e}(),Ab=function(){function e(t,n){bn(this,e),this.block=t,this.offset=n}return xn(e,[{key:"isLessThan",value:function(e){return this.block<e.block||this.block===e.block&&this.offset<e.offset}},{key:"isGreaterThan",value:function(e){return this.block>e.block||this.block===e.block&&this.offset>e.offset}},{key:"print",value:function(){return this.block+":"+this.offset}}]),e}();function Tb(e,t){return Mb.apply(this,arguments)}function Mb(){return(Mb=yn(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Lb).parse(t,n),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lb=function(){function e(t){bn(this,e),this.tabix=!0}return xn(e,[{key:"parse",value:function(e,t){var n=new Eb(new DataView(e)),r=n.getInt();if(21582659!==r)throw 38359875===r?Error("CSI version 2 is not supported.  Please enter an issue at https://github.com/igvteam/igv.js"):Error("Not a CSI index");if(this.indices=[],this.blockMin=Number.MAX_SAFE_INTEGER,this.blockMax=0,this.sequenceIndexMap={},this.minShift=n.getInt(),this.depth=n.getInt(),n.getInt()>=28){n.getInt(),n.getInt(),n.getInt(),n.getInt(),n.getInt(),n.getInt();for(var i=n.getInt(),a=n.position+i,o=0;n.position<a;){var s=n.getString();t&&(s=t.getChromosomeName(s)),this.sequenceIndexMap[s]=o,o++}}for(var u=this.bin_limit()+1,c=n.getInt(),l=0;l<c;l++){for(var h=[],f=[],p=n.getInt(),d=0;d<p;d++){var g=n.getInt();if(f[g]=n.getVPointer(),g>u)n.getInt(),n.getVPointer(),n.getVPointer(),n.getLong(),n.getLong();else{h[g]=[];for(var v=n.getInt(),m=0;m<v;m++){var y=n.getVPointer(),b=n.getVPointer();y&&b&&(y.block<this.blockMin&&(this.blockMin=y.block),b.block>this.blockMax&&(this.blockMax=b.block),h[g].push([y,b]))}}}p>0&&(this.indices[l]={binIndex:h,loffset:f})}}},{key:"blocksForRange",value:function(e,t,n){var r=this.indices[e];if(r){var i=this.reg2bins(t,n);if(0==i.length)return[];var a,o=[],s=zn(i);try{for(s.s();!(a=s.n()).done;)for(var u=a.value,c=u[0];c<=u[1];c++)if(r.binIndex[c])for(var l=r.binIndex[c],h=l.length,f=0;f<h;++f){var p=l[f][0],d=l[f][1];o.push({minv:p,maxv:d,bin:c})}}catch(e){s.e(e)}finally{s.f()}return function(e,t){var n=[],r=null;return 0===e.length?e:(e.sort((function(e,t){var n=e.minv.block-t.minv.block;return 0!==n?n:e.minv.offset-t.minv.offset})),e.forEach((function(e){var i,a;t&&!e.maxv.isGreaterThan(t)||(null===r?(n.push(e),r=e):(i=r,(a=e).minv.block-i.maxv.block<65e3&&a.maxv.block-i.minv.block<5e6?e.maxv.isGreaterThan(r.maxv)&&(r.maxv=e.maxv):(n.push(e),r=e)))})),n)}(o,r.loffset[i[0]])}return[]}},{key:"reg2bins",value:function(e,t){(e-=1)<1&&(e=1),t>Math.pow(2,50)&&(t=Math.pow(2,34)),t-=1;for(var n=0,r=0,i=this.minShift+3*this.depth,a=[];n<=this.depth;i-=3,r+=1<<3*n,n+=1){var o=r+(e>>i),s=r+(t>>i);if(s-o+a.length>this.maxBinNumber)throw new Error("query ".concat(e,"-").concat(t," is too large for current binning scheme (shift ").concat(this.minShift,", depth ").concat(this.depth,"), try a smaller query or a coarser index binning scheme"));a.push([o,s])}return a}},{key:"bin_limit",value:function(){return((1<<3*(this.depth+1))-1)/7}}]),e}();function Ib(e,t){return Pb.apply(this,arguments)}function Pb(){return(Pb=yn(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,!1,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nb(e,t){return Ob.apply(this,arguments)}function Ob(){return(Ob=yn(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,!0,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fb(e,t,n){return Db.apply(this,arguments)}function Db(){return(Db=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w,x,k,S,_,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],a=Number.MAX_SAFE_INTEGER,o=0,s=new Eb(new DataView(t)),u=s.getInt(),c={},!(21578050===u||n&&21578324===u)){e.next=12;break}if(l=s.getInt(),n)for(s.getInt(),s.getInt(),s.getInt(),s.getInt(),s.getInt(),s.getInt(),s.getInt(),h=0;h<l;h++)f=s.getString(),r&&(f=r.getChromosomeName(f)),c[f]=h;for(p=0;p<l;p++){for(d={},g=[],v=s.getInt(),m=0;m<v;m++)if(37450===(y=s.getInt()))s.getInt(),s.getVPointer(),s.getVPointer(),s.getLong(),s.getLong();else for(d[y]=[],b=s.getInt(),w=0;w<b;w++)x=s.getVPointer(),k=s.getVPointer(),x&&k&&(x.block<a&&(a=x.block),k.block>o&&(o=k.block),d[y].push([x,k]));for(S=s.getInt(),_=0;_<S;_++)C=s.getVPointer(),g.push(C);v>0&&(i[p]={binIndex:d,linearIndex:g})}e.next=13;break;case 12:throw new Error(indexURL+" is not a "+(n?"tabix":"bai")+" file");case 13:return e.abrupt("return",new Bb(i,a,o,c,n));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bb=function(){function e(t,n,r,i,a){bn(this,e),this.firstAlignmentBlock=n,this.lastAlignmentBlock=r,this.indices=t,this.sequenceIndexMap=i,this.tabix=a}return xn(e,[{key:"blocksForRange",value:function(e,t,n){var r,i,a,o=this.indices[e];if(o){var s,u=[],c=zn((r=t,(i=n)>=1<<29&&(i=1<<29),--i,(a=[]).push(0),a.push([1+(r>>26),1+(i>>26)]),a.push([9+(r>>23),9+(i>>23)]),a.push([73+(r>>20),73+(i>>20)]),a.push([585+(r>>17),585+(i>>17)]),a.push([4681+(r>>14),4681+(i>>14)]),a));try{for(c.s();!(s=c.n()).done;)for(var l=s.value,h=l[0];h<=l[1];h++)if(o.binIndex[h])for(var f=o.binIndex[h],p=f.length,d=0;d<p;++d){var g=f[d][0],v=f[d][1];u.push({minv:g,maxv:v,bin:h})}}catch(e){c.e(e)}finally{c.f()}for(var m=o.linearIndex.length,y=null,b=Math.min(t>>14,m-1),w=Math.min(n>>14,m-1),x=b;x<=w;++x){var k=o.linearIndex[x];k&&(y&&!k.isLessThan(y)||(y=k))}return function(e,t){var n=[],r=null;return 0===e.length?e:(e.sort((function(e,t){var n=e.minv.block-t.minv.block;return 0!==n?n:e.minv.offset-t.minv.offset})),e.forEach((function(e){var i,a;t&&!e.maxv.isGreaterThan(t)||(null===r?(n.push(e),r=e):(i=r,(a=e).minv.block-i.maxv.block<65e3&&a.maxv.block-i.minv.block<5e6?e.maxv.isGreaterThan(r.maxv)&&(r.maxv=e.maxv):(n.push(e),r=e)))})),n)}(u,y)}return[]}}]),e}();function zb(e,t){return Ub.apply(this,arguments)}function Ub(){return(Ub=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=function(e){var t=e.getString();n&&(t=n.getChromosomeName(t));for(var r=e.getInt(),i=e.getInt(),a=e.getInt(),o=(e.getInt(),e.getInt(),e.getLong()),s=new Array,u=0;u<i;u++){var c=e.getLong();s.push({min:o,max:c}),o=c}return{chr:t,blocks:s,longestFeature:a,binWidth:r}},s=function(e){e.getInt(),e.getInt();var t=e.getInt();if(e.getString(),e.getLong(),e.getLong(),e.getString(),e.getInt(),t>=3)for(var n=e.getInt();n-- >0;)e.getString(),e.getString()},r={},i=new Eb(new DataView(t)),s(i),a=i.getInt();a-- >0;)o=u(i),r[o.chr]=o;return e.abrupt("return",new Hb(r));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hb=function(){function e(t){bn(this,e),this.chrIndex=t}return xn(e,[{key:"blocksForRange",value:function(e,t,n){var r=this.chrIndex[e];if(r){var i=r.blocks,a=r.longestFeature,o=r.binWidth,s=Math.max(t-a,0),u=Math.floor(s/o);if(u>=i.length)return[];var c=Math.min(Math.floor((n-1)/o),i.length-1),l=i[u].min,h=i[c].max;return 0==h-l?[]:[{minv:{block:l,offset:0},maxv:{block:h,offset:0}}]}}}]),e}();function jb(e,t,n){return qb.apply(this,arguments)}function qb(){return(qb=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,im.loadArrayBuffer(t,Yv(n));case 2:i=e.sent,31===(a=new DataView(i)).getUint8(0)&&139===a.getUint8(1)&&(o=new wr.Gunzip(new Uint8Array(i)),i=o.decompress().buffer,a=new DataView(i)),s=a.getInt32(0,!0),e.t0=s,e.next=21578050===e.t0?9:21578324===e.t0?10:21582659===e.t0?11:1480870228===e.t0?12:38359875===e.t0?13:14;break;case 9:return e.abrupt("return",Ib(i,r));case 10:return e.abrupt("return",Nb(i,r));case 11:return e.abrupt("return",Tb(i,r));case 12:return e.abrupt("return",zb(i,r));case 13:throw Error("CSI version 2 is not supported.");case 14:throw Error("Unrecognized index type: ".concat(t));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vb=function(){function e(t){bn(this,e),this.config=t,this.filePtr=0,this.bufferPtr=0,this.buffer}var t,n;return xn(e,[{key:"nextLine",value:(n=yn(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=void 0,e.prev=1;case 2:n=this.buffer?this.buffer.length:0;case 4:if(!(this.bufferPtr<n)){e.next=13;break}if("\r"!==(r=String.fromCharCode(this.buffer[this.bufferPtr++]))){e.next=8;break}return e.abrupt("continue",4);case 8:if("\n"!==r){e.next=10;break}return e.abrupt("return",t);case 10:t=t?t+r:r,e.next=4;break;case 13:if(!this.eof){e.next=17;break}return e.abrupt("return",t);case 17:return e.next=19,this.readNextBlock();case 19:e.next=2;break;case 21:e.next=28;break;case 23:return e.prev=23,e.t0=e.catch(1),console.warn(e.t0),this.eof=!0,e.abrupt("return",t);case 28:case"end":return e.stop()}}),e,this,[[1,23]])}))),function(){return n.apply(this,arguments)})},{key:"readNextBlock",value:(t=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Yv(this.config,{range:{start:this.filePtr,size:26}}),e.next=3,im.loadArrayBuffer(this.config.url,t);case 3:if(n=e.sent,0!==(r=Fv(n))){e.next=10;break}this.eof=!0,this.buffer=void 0,e.next=18;break;case 10:return i=Yv(this.config,{range:{start:this.filePtr,size:r}}),e.next=13,im.loadArrayBuffer(this.config.url,i);case 13:(a=e.sent).byteLength<r&&(this.eof=!0),this.buffer=Ov(a),this.bufferPtr=0,this.filePtr+=a.byteLength;case 18:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Gb=Sr,Wb=function(){function e(t,n){var r;bn(this,e),this.config=t||{},this.genome=n,this.indexURL=t.indexURL,this.indexed=t.indexed,Gr(this.config.url)?this.filename=this.config.url.name:Gb(this.config.url)&&this.config.url.startsWith("data:")?(this.indexed=!1,this.dataURI=t.url):(r=Hr(this.config.url),this.filename=t.filename||r.file),this.parser=this.getParser(this.config),"vcf"!==this.config.format||this.config.indexURL||console.warn("Warning: index file not specified.  The entire vcf file will be loaded.")}var t,n,r,i,a,o,s;return xn(e,[{key:"readFeatures",value:(s=yn(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:if(!e.sent){e.next=8;break}return this.indexed=!0,e.abrupt("return",this.loadFeaturesWithIndex(t,n,r));case 8:if(!this.dataURI){e.next=13;break}return this.indexed=!1,e.abrupt("return",this.loadFeaturesFromDataURI());case 13:return this.indexed=!1,e.abrupt("return",this.loadFeaturesNoIndex());case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return s.apply(this,arguments)})},{key:"readHeader",value:(o=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dataURI){e.next=5;break}return this.loadFeaturesFromDataURI(this.dataURI),e.abrupt("return",this.header);case 5:if(!this.config.indexURL){e.next=27;break}return e.next=8,this.getIndex();case 8:if(t=e.sent){e.next=11;break}throw new Error("Unable to load index: "+this.config.indexURL);case 11:if(!t.tabix){e.next=15;break}n=new Vb(this.config),e.next=21;break;case 15:return r=Object.values(t.chrIndex).flatMap((function(e){return e.blocks})).map((function(e){return e.max})).reduce((function(e,t){return Math.min(e,t)}),Number.MAX_SAFE_INTEGER),i=Yv(this.config,{bgz:t.tabix,range:{start:0,size:r}}),e.next=19,im.loadString(this.config.url,i);case 19:a=e.sent,n=ib(a);case 21:return e.next=23,this.parser.parseHeader(n);case 23:return this.header=e.sent,e.abrupt("return",this.header);case 27:return o=Yv(this.config),e.next=30,im.loadString(this.config.url,o);case 30:return s=e.sent,u=ib(s),e.next=34,this.parser.parseHeader(u);case 34:return this.header=e.sent,u=ib(s),e.next=38,this.parser.parseFeatures(u);case 38:return this.features=e.sent,e.abrupt("return",this.header);case 40:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getParser",value:function(e){switch(e.format){case"vcf":return new db(e);case"seg":return new sb;case"gwas":return new vb(e);case"aed":return new wb(e);default:return new Jy(e)}}},{key:"loadFeaturesNoIndex",value:(a=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.features){e.next=6;break}return t=this.features,delete this.features,e.abrupt("return",t);case 6:return n=Yv(this.config),e.next=9,im.loadString(this.config.url,n);case 9:if(r=e.sent,this.header){e.next=15;break}return i=ib(r),e.next=14,this.parser.parseHeader(i);case 14:this.header=e.sent;case 15:return a=ib(r),e.next=18,this.parser.parseFeatures(a);case 18:return o=e.sent,e.abrupt("return",o);case 20:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"loadFeaturesWithIndex",value:(i=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w,x,k,S,_,C,R,E,A,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.config,a=this.parser,o=this.index.tabix,void 0!==(s=o?this.index.sequenceIndexMap[t]:t)){e.next=6;break}return e.abrupt("return",[]);case 6:if(u=this.genome,(c=this.index.blocksForRange(s,n,r))&&0!==c.length){e.next=12;break}return e.abrupt("return",[]);case 12:l=[],h=zn(c),e.prev=14,h.s();case 16:if((f=h.n()).done){e.next=71;break}if(p=f.value,d=p.minv.block,g=p.minv.offset,v=p.maxv.offset,m=void 0,!o){e.next=33;break}if(y=0,!(v>0)){e.next=30;break}return b=Yv(i,{range:{start:p.maxv.block,size:26}}),e.next=28,im.loadArrayBuffer(i.url,b);case 28:w=e.sent,y=Fv(w);case 30:m=p.maxv.block+y,e.next=34;break;case 33:m=p.maxv.block;case 34:if(x=Yv(i,{range:{start:d,size:m-d+1}}),k=void 0,!o){e.next=43;break}return e.next=39,im.loadArrayBuffer(i.url,x);case 39:S=e.sent,k=Ov(S),e.next=46;break;case 43:return e.next=45,im.loadString(i.url,x);case 45:k=e.sent;case 46:return _=g?k.slice(g):k,C=ib(_),e.next=50,a.parseFeatures(C);case 50:R=e.sent,E=!1,A=0;case 53:if(!(A<R.length)){e.next=69;break}if(T=R[A],(u?u.getChromosomeName(T.chr):T.chr)===t){e.next=62;break}if(0!==l.length){e.next=61;break}return e.abrupt("continue",66);case 61:return e.abrupt("break",69);case 62:if(!(T.start>r)){e.next=65;break}return l.push(T),e.abrupt("break",69);case 65:T.end>=n&&T.start<=r&&(E||(E=!0,A>0&&l.push(R[A-1])),l.push(T));case 66:A++,e.next=53;break;case 69:e.next=16;break;case 71:e.next=76;break;case 73:e.prev=73,e.t0=e.catch(14),h.e(e.t0);case 76:return e.prev=76,h.f(),e.finish(76);case 79:return l.sort((function(e,t){return e.start-t.start})),e.abrupt("return",l);case 81:case"end":return e.stop()}}),e,this,[[14,73,76,79]])}))),function(e,t,n){return i.apply(this,arguments)})},{key:"getIndex",value:(r=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.index&&this.config.indexURL){e.next=4;break}return e.abrupt("return",this.index);case 4:return e.next=6,this.loadIndex();case 6:return this.index=e.sent,e.abrupt("return",this.index);case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadIndex",value:(n=yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.indexURL,e.abrupt("return",jb(t,this.config,this.genome));case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loadFeaturesFromDataURI",value:(t=yn(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.features){e.next=6;break}return t=this.features,delete this.features,e.abrupt("return",t);case 6:return n=Ur(this.dataURI),r=ib(n),e.next=10,this.parser.parseHeader(r);case 10:return this.header=e.sent,this.header instanceof String&&this.header.startsWith("##gff-version 3")&&(this.format="gff3"),r=ib(n),e.next=15,this.parser.parseFeatures(r);case 15:return this.features=e.sent,e.abrupt("return",this.features);case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),$b=function(){function e(t,n,r){bn(this,e),this.treeMap=this.buildTreeMap(t,n),this.range=r,this.count=t.length}return xn(e,[{key:"containsRange",value:function(e){return void 0===this.range||this.range.contains(e.chr,e.start,e.end)}},{key:"queryFeatures",value:function(e,t,n){var r=this.treeMap[e];if(!r)return[];var i=r.findOverlapping(t,n);if(0===i.length)return[];var a=[],o=this.allFeatures[e];if(o){var s,u=zn(i);try{for(u.s();!(s=u.n()).done;)for(var c=s.value.value,l=c.start;l<c.end;l++){var h=o[l];if(h.start>n)break;h.end>=t&&a.push(h)}}catch(e){u.e(e)}finally{u.f()}a.sort((function(e,t){return e.start-t.start}))}return a}},{key:"getAllFeatures",value:function(){return this.allFeatures}},{key:"buildTreeMap",value:function(e,t){var n={},r=[];if(this.allFeatures={},e){var i,a=zn(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.chr;t&&(s=t.getChromosomeName(s));var u=this.allFeatures[s];u||(r.push(s),u=[],this.allFeatures[s]=u),u.push(o)}}catch(e){a.e(e)}finally{a.f()}var c,l=zn(r);try{for(l.s();!(c=l.n()).done;){var h=c.value,f=this.allFeatures[h];f.sort((function(e,t){return e.start===t.start?0:e.start>t.start?1:-1})),n[h]=Yb(f)}}catch(e){l.e(e)}finally{l.f()}}return n}}]),e}();function Yb(e){for(var t=new iy,n=e.length,r=Math.max(10,Math.round(n/10)),i=0;i<n;i+=r){for(var a=Math.min(n,i+r),o=new Xb(i,a),s=e[i].start,u=s,c=i;c<a;c++)u=Math.max(u,e[c].end);t.insert(s,u,o)}return t}var Xb=function e(t,n){bn(this,e),this.start=t,this.end=n},Zb=Sr,Kb=function(){function e(t){bn(this,e),this.config=t}var t;return xn(e,[{key:"readFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="function"==typeof this.config.url?this.config.url({chr:t,start:n,end:r}):this.config.url.replace("$CHR",t).replace("$START",n).replace("$END",r),a=Object.assign({},this.config),void 0!==this.config.body&&("function"==typeof this.config.body?a.body=this.config.body({chr:t,start:n,end:r}):a.body=this.config.body.replace("$CHR",t).replace("$START",n).replace("$END",r)),e.next=5,im.load(i,a);case 5:if((s=e.sent)&&(o="function"==typeof this.config.parser?this.config.parser(s):Zb(s)?JSON.parse(s):s),this.config.mappings){u=Object.keys(this.config.mappings),c=zn(o);try{for(c.s();!(l=c.n()).done;){h=l.value,f=zn(u);try{for(f.s();!(p=f.n()).done;)d=p.value,h[d]=h[this.config.mappings[d]]}catch(e){f.e(e)}finally{f.f()}}}catch(e){c.e(e)}finally{c.f()}}return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}(),Qb=function(e,t){this.config=e,this.genome=t,this.expandQueryInterval=!1};Qb.prototype.readFeatures=function(e,t,n){var r=Math.max(0,Math.floor(t)),i=Math.ceil(n);if(this.genome){var a=this.genome.getChromosome(e);a&&i>a.bpLength&&(i=a.bpLength)}var o=this.config.url+"?db="+this.config.db+"&table="+this.config.tableName+"&chr="+e+"&start="+r+"&end="+i;return im.loadJson(o,this.config).then((function(e){return e?(e.forEach((function(e){e.hasOwnProperty("exonStarts")&&e.hasOwnProperty("exonEnds")&&e.hasOwnProperty("exonCount")&&e.hasOwnProperty("cdsStart")&&e.hasOwnProperty("cdsEnd")&&function(e){var t,n,r,i,a,o;t=e.exonCount,n=e.exonStarts.split(","),r=e.exonEnds.split(","),i=[];for(var s=0;s<t;s++){a=parseInt(n[s]),o=parseInt(r[s]);var u={start:a,end:o};(e.cdsStart>o||e.cdsEnd<e.cdsStart)&&(u.utr=!0),e.cdsStart>=a&&e.cdsStart<=o&&(u.cdStart=e.cdsStart),e.cdsEnd>=a&&e.cdsEnd<=o&&(u.cdEnd=e.cdsEnd),i.push(u)}e.exons=i}(e)})),e):null}))};for(var Jb=new Set(["transcript","primary_transcript","processed_transcript","mRNA","mrna"]),ew=new Set(["CDS","cds"]),tw=new Set(["start_codon","stop_codon"]),nw=new Set(["5UTR","3UTR","UTR","five_prime_UTR","three_prime_UTR","3'-UTR","5'-UTR"]),rw=new Set(["exon","coding-exon"]),iw=new Set,aw=0,ow=[Jb,ew,tw,nw,rw];aw<ow.length;aw++){var sw,uw=zn(ow[aw]);try{for(uw.s();!(sw=uw.n()).done;){var cw=sw.value;iw.add(cw)}}catch(e){uw.e(e)}finally{uw.f()}}var lw=function(){function e(t){bn(this,e),this.format=t.format,this.filterTypes=void 0===t.filterTypes?new Set(["chromosome"]):new Set(t.filterTypes)}return xn(e,[{key:"combineFeatures",value:function(e){var t;if("gff3"===this.format){var n=this.combineFeaturesById(e);t=this.combineFeaturesGFF(n)}else t=this.combineFeaturesGTF(e);return t.sort((function(e,t){return e.start-t.start})),t}},{key:"combineFeaturesById",value:function(e){var t,n=[],r={},i=zn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(void 0===a.id)n.push(a);else{var o=r[a.chr];if(o||(o={},r[a.chr]=o),o.hasOwnProperty(a.id)){var s=o[a.id];if(s.hasOwnProperty("exons"))s.start=Math.min(s.start,a.start),s.end=Math.max(s.end,a.end),s.exons.push(a);else{var u={id:a.id,type:a.type,chr:a.chr,strand:a.strand,start:Math.min(a.start,s.start),end:Math.max(a.end,s.end),exons:[s,a]};a.parent&&""!==a.parent.trim()&&(u.parent=a.parent),o[a.id]=u}}else o[a.id]=a}}}catch(e){i.e(e)}finally{i.f()}for(var c=0,l=Object.keys(r);c<l.length;c++)for(var h=r[l[c]],f=0,p=Object.keys(h);f<p.length;f++){var d=p[f];n.push(h[d])}return n}},{key:"combineFeaturesGTF",value:function(e){var t,n=Object.create(null),r=[],i=new Set,a=this.filterTypes,o=zn(e=e.filter((function(e){return void 0===a||!a.has(e.type)})));try{for(o.s();!(t=o.n()).done;){var s=t.value;if(Jb.has(s.type)){var u=s.id;if(void 0!==u){var c=new hw(s);n[u]=c,r.push(c),i.add(s)}}}}catch(e){o.e(e)}finally{o.f()}var l,h=zn(e);try{for(h.s();!(l=h.n()).done;){var f=l.value;if(rw.has(f.type)){var p=f.id;if(p){var d=n[p];void 0===d&&(d=new hw(f),n[p]=d,r.push(d)),d.addExon(f),i.add(f)}}}}catch(e){h.e(e)}finally{h.f()}var g,v=zn(e);try{for(v.s();!(g=v.n()).done;){var m=g.value;if(ew.has(m.type)||nw.has(m.type)||tw.has(m.type)){var y=m.id;if(y){var b=n[y];void 0===b&&(b=new hw(m),n[y]=b,r.push(b)),nw.has(m.type)?b.addUTR(m):ew.has(m.type)?b.addCDS(m):tw.has(m.type),i.add(m)}}}}catch(e){v.e(e)}finally{v.f()}for(var w=0,x=r;w<x.length;w++){var k=x[w];"function"==typeof k.finish&&k.finish()}var S,_=zn(e.filter((function(e){return!i.has(e)})));try{for(_.s();!(S=_.n()).done;){var C=S.value;r.push(C)}}catch(e){_.e(e)}finally{_.f()}return r}},{key:"combineFeaturesGFF",value:function(e){var t,n=e.filter((function(e){return"gene"===e.type})),r=Object.create(null),i=zn(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;r[a.id]=a}}catch(e){i.e(e)}finally{i.f()}var o,s=Object.create(null),u=[],c=new Set,l=this.filterTypes,h=zn(e=e.filter((function(e){return void 0===l||!l.has(e.type)})));try{for(h.s();!(o=h.n()).done;){var f=o.value;if(Jb.has(f.type)){var p=f.id;if(void 0!==p){var d=new hw(f);s[p]=d,u.push(d),c.add(f);var g=r[f.parent];g&&(d.gene=r[f.parent],c.add(g))}}}}catch(e){h.e(e)}finally{h.f()}var v,m=zn(e);try{for(m.s();!(v=m.n()).done;){var y=v.value;if(rw.has(y.type)){var b=B(y);if(b){var w,x=zn(b);try{for(x.s();!(w=x.n()).done;){var k=s[w.value];void 0!==k&&(k.addExon(y),c.add(y))}}catch(e){x.e(e)}finally{x.f()}}}}}catch(e){m.e(e)}finally{m.f()}var S,_=zn(e);try{for(_.s();!(S=_.n()).done;){var C=S.value;if(ew.has(C.type)||nw.has(C.type)||tw.has(C.type)){var R=B(C);if(R){var E,A=zn(R);try{for(A.s();!(E=A.n()).done;){var T=s[E.value];void 0!==T&&(nw.has(C.type)?T.addUTR(C):ew.has(C.type)?T.addCDS(C):tw.has(C.type),c.add(C))}}catch(e){A.e(e)}finally{A.f()}}}}}catch(e){_.e(e)}finally{_.f()}var M,L=zn(e.filter((function(e){return"intron"===e.type})));try{for(L.s();!(M=L.n()).done;){var I,P=M.value,N=zn(B(P));try{for(N.s();!(I=N.n()).done;)if(s[I.value]){c.add(P);break}}catch(e){N.e(e)}finally{N.f()}}}catch(e){L.e(e)}finally{L.f()}u.forEach((function(e){"function"==typeof e.finish&&e.finish()}));var O,F=zn(e.filter((function(e){return!c.has(e)})));try{for(F.s();!(O=F.n()).done;){var D=O.value;u.push(D)}}catch(e){F.e(e)}finally{F.f()}return u;function B(e){return e.parent&&""!==e.parent.trim()?e.parent.trim().split(","):null}}}]),e}(),hw=function(e){Object.assign(this,e),this.exons=[]};hw.prototype.addExon=function(e){this.exons.push(e),this.start=Math.min(this.start,e.start),this.end=Math.max(this.end,e.end)},hw.prototype.addCDS=function(e){for(var t,n=this.exons,r=0;r<n.length;r++)if(n[r].start<=e.start&&n[r].end>=e.end){t=n[r];break}t?(t.cdStart=t.cdStart?Math.min(e.start,t.cdStart):e.start,t.cdEnd=t.cdEnd?Math.max(e.end,t.cdEnd):e.end,t.children||(t.children=[]),t.children.push(e)):(e.cdStart=e.start,e.cdEnd=e.end,n.push(e)),this.start=Math.min(this.start,e.start),this.end=Math.max(this.end,e.end),this.cdStart=this.cdStart?Math.min(e.start,this.cdStart):e.start,this.cdEnd=this.cdEnd?Math.max(e.end,this.cdEnd):e.end},hw.prototype.addUTR=function(e){for(var t,n=this.exons,r=0;r<n.length;r++)if(n[r].start<=e.start&&n[r].end>=e.end){t=n[r];break}t?(e.start===t.start&&e.end===t.end?t.utr=!0:(e.end<t.end&&(t.cdStart=e.end),e.start>t.start&&(t.cdEnd=e.start)),t.children||(t.children=[]),t.children.push(e)):(e.utr=!0,n.push(e)),this.start=Math.min(this.start,e.start),this.end=Math.max(this.end,e.end)},hw.prototype.finish=function(){var e=this.cdStart,t=this.cdEnd;this.exons.sort((function(e,t){return e.start-t.start})),e&&this.exons.forEach((function(n){(n.end<e||n.start>t)&&(n.utr=!0)}))},hw.prototype.popupData=function(e){var t=this.attributeString.split(";"),n=[];if(this.gene&&"function"==typeof this.gene.popupData){var r,i=zn(this.gene.popupData(e));try{for(i.s();!(r=i.n()).done;){var a=r.value;n.push(a)}}catch(e){i.e(e)}finally{i.f()}n.push("<hr>")}this.name&&n.push({name:"name",value:this.name}),n.push({name:"type",value:this.type});var o,s=zn(t);try{for(s.s();!(o=s.n()).done;){var u=o.value.trim().split(this.delim,2);if(2===u.length&&void 0!==u[1]){var c=u[0].trim();if("name"===c.toLowerCase())continue;var l=u[1].trim();l.startsWith('"')&&l.endsWith('"')&&(l=l.substr(1,l.length-2)),n.push({name:c,value:l})}}}catch(e){s.e(e)}finally{s.f()}n.push({name:"position",value:"".concat(this.chr,":").concat(_r(this.start+1),"-").concat(_r(this.end))});var h,f=zn(this.exons);try{for(f.s();!(h=f.n()).done;){var p=h.value;if(e>=p.start&&e<p.end&&"function"==typeof p.popupData){n.push("<hr>");var d,g=zn(p.popupData(e));try{for(g.s();!(d=g.n()).done;){var v=d.value;n.push(v)}}catch(e){g.e(e)}finally{g.f()}if(p.children){var m,y=zn(p.children);try{for(y.s();!(m=y.n()).done;){var b=m.value;n.push("<hr>");var w,x=zn(b.popupData(e));try{for(x.s();!(w=x.n()).done;){var k=w.value;n.push(k)}}catch(e){x.e(e)}finally{x.f()}}}catch(e){y.e(e)}finally{y.f()}}}}}catch(e){f.e(e)}finally{f.f()}return n};var fw=function(e){this.config=e,this.url=e.url,this.tissueId=e.tissueSiteDetailId,this.indexed=!0,this.datasetId=e.datasetId||"gtex_v8"};fw.prototype.readFeatures=function(){var e=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this,a=t.startsWith("chr")?t:"chr"+t,o=Math.floor(n),s=Math.ceil(r),u=this.datasetId,c=this.url+"?chromosome="+a+"&start="+o+"&end="+s+"&tissueSiteDetailId="+this.tissueId+"&datasetId="+u,e.next=3,im.loadJson(c,{withCredentials:i.config.withCredentials});case 3:if(!(l=e.sent)||!l.singleTissueEqtl){e.next=9;break}return l.singleTissueEqtl.forEach((function(e){e.chr=e.chromosome,e.position=e.pos,e.start=e.pos-1,e.end=e.start+1,e.snp=e.snpId,e.geneName=e.geneSymbol,e.geneId=e.gencodeId})),e.abrupt("return",l.singleTissueEqtl);case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}();var pw=function(e){this.config=e,this.url=e.url,this.cellConditionId=e.cellConditionId,this.valueThreshold=e.valueThreshold?e.valueThreshold:.05};pw.prototype.readFeatures=function(e,t,n){var r=this,i=this.url+"?chromosome="+e+"&start="+t+"&end="+n+"&cell_condition_id="+this.cellConditionId;return new Promise((function(e,t){im.loadJson(i,{withCredentials:r.config.withCredentials}).then((function(t){t?(t.eqtls.forEach((function(e){e.chr=e.chromosome,e.start=e.position,e.end=e.position+1})),e(t.eqtls)):e(null)})).catch((function(e){t(e)}))}))};var dw=im.apiKey;function gw(e){var t=e.url+"/"+e.entity+"/"+e.entityId;return e.headers={"Cache-Control":"no-cache"},im.loadJson(t,e)}function vw(e){return new Promise((function(t,n){var r=e.results?e.results:[],i=e.url,a=e.body,o=e.decode,s="?",u=e.fields;return dw&&(i=i+s+"key="+dw,s="&"),u&&(i=i+s+"fields="+u),function e(s){s?a.pageToken=s:void 0!==a.pageToken&&delete a.pageToken;var u=JSON.stringify(a);im.loadJson(i,{sendData:u,contentType:"application/json",headers:{"Cache-Control":"no-cache"}}).then((function(n){var i,a;n?((a=o?o(n):n)&&a.forEach((function(e){r.push(e)})),(i=n.nextPageToken)?e(i):t(r)):t(r)})).catch((function(e){n(e)}))}()}))}var mw=function(e,t){this.config=e,this.genome=t,this.url=e.url,this.variantSetId=e.variantSetId,this.callSetIds=e.callSetIds,this.includeCalls=void 0===e.includeCalls||e.includeCalls};mw.prototype.readHeader=function(){var e=this;return e.header?Promise.resolve(e.header):(e.header={},!1===e.includeCalls?Promise.resolve(e.header):vw({url:e.url+"/callsets/search",fields:"nextPageToken,callSets(id,name)",body:{variantSetIds:Array.isArray(e.variantSetId)?e.variantSetId:[e.variantSetId],pageSize:"10000"},decode:function(t){if(e.callSetIds){var n=[],r=new Set;return e.callSetIds.forEach((function(e){r.add(e)})),t.callSets.forEach((function(e){r.has(e.id)&&n.push(e)})),n}return t.callSets}}).then((function(t){return e.header.callSets=t,e.header})))},mw.prototype.readFeatures=function(e,t,n){var r=this,i=this.genome;return r.readHeader().then((function(e){return new Promise((function(e,t){r.chrAliasTable?e(r.chrAliasTable):r.readMetadata().then((function(t){r.metadata=t.metadata,r.chrAliasTable={},t.referenceBounds&&i&&t.referenceBounds.forEach((function(e){var t=e.referenceName,n=i.getChromosomeName(t);r.chrAliasTable[n]=t})),e(r.chrAliasTable)}))}))})).then((function(i){var a=i.hasOwnProperty(e)?i[e]:e;return vw({url:r.url+"/variants/search",fields:r.includeCalls?void 0:"nextPageToken,variants(id,variantSetId,names,referenceName,start,end,referenceBases,alternateBases,quality,filter,info)",body:{variantSetIds:Array.isArray(r.variantSetId)?r.variantSetId:[r.variantSetId],callSetIds:r.callSetIds?r.callSetIds:void 0,referenceName:a,start:t.toString(),end:n.toString(),pageSize:"10000"},decode:function(e){var t,n=[];return e.variants.forEach((function(e){(t=function(e){var t,n=new hb;return n.chr=e.referenceName,n.start=parseInt(e.start),n.end=parseInt(e.end),n.pos=n.start+1,n.names=pb(e.names,"; "),n.referenceBases=e.referenceBases,n.alternateBases=pb(e.alternateBases),n.quality=e.quality,n.filter=pb(e.filter),n.info={},e.info&&Object.keys(e.info).forEach((function(t){var r,i=e.info[t];r=Array.isArray(i)?i.join(","):i,n.info[t]=r})),n.calls={},e.calls&&e.calls.forEach((function(e){t=e.callSetId,n.calls[t]=e})),init(n),n}(e)).isRefBlock()||n.push(t)})),n}})}))},mw.prototype.readMetadata=function(){return gw({url:this.url,entity:"variantsets",entityId:this.variantSetId})};var yw=function(){function e(t){bn(this,e),this.config=t}var t;return xn(e,[{key:"readFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,im.loadJson(this.config.url+"/variants/?count=50000");case 2:i=e.sent,a=i.records,o=[],s=zn(a);try{for(s.s();!(u=s.n()).done;)(c=u.value).coordinates&&(c.id,(l=c.coordinates).chromosome&&o.push(new bw(l.chromosome,l.start-1,l.stop,c)),l.chromosome2&&o.push(new bw(l.chromosome2,l.start2-1,l.stop2,c)))}catch(e){s.e(e)}finally{s.f()}return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}(),bw=function(){function e(t,n,r,i){if(bn(this,e),this.chr=t,this.start=n,this.end=r,this.id=i.id,this.entrezName=i.entrez_name,this.name=i.name,this.actionabilityScore=i.civic_actionability_score,i.coordinates.reference_bases&&(this.refBases=i.coordinates.reference_bases),i.coordinates.variant_bases&&(this.altBases=i.coordinates.variant_bases),i.variant_types&&(this.variant_types=i.variant_types),this.locationString=this.chr+":"+_r(this.start+1)+"-"+_r(this.end),void 0!==this.actionabilityScore){var a;if(this.actionabilityScore<=10)a=.2;else{var o=Math.min(30,this.actionabilityScore);a=.2+.8*Math.log10((o-10)/2)}this.alpha=a}}return xn(e,[{key:"popupData",value:function(){var e=s("CIViC","https://civicdb.org/links/variants/"+this.id),t=(this.refBases!==this.altBases&&this.refBases&&1===this.refBases.length&&this.altBases&&this.altBases.length,[e]);if(t.push({name:"Entrez",value:s(this.entrezName,"https://ghr.nlm.nih.gov/gene/"+this.entrezName)}),t.push({name:"Name",value:this.name}),this.variant_types&&this.variant_types.length>0){var n,r,i=1===this.variant_types.length?"Type":"Types",a=zn(this.variant_types);try{for(a.s();!(r=a.n()).done;){var o=r.value;n?n+=", "+o.display_name:n=o.display_name}}catch(e){a.e(e)}finally{a.f()}t.push({name:i,value:n})}return t.push({name:"Actionability",value:this.actionabilityScore}),t.push({name:"Location",value:this.locationString}),t;function s(e,t){return"<a target='_blank' href='"+t+"'>"+e+"</a>"}}}]),e}();function ww(e,t){t=t||Number.MAX_SAFE_INTEGER;var n=[];e.sort((function(e,t){return e.start-t.start})),n.push(-1e3);var r,i=zn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=0,s=Math.min(n.length,t);for(o=0;o<s;o++)if(a.start>n[o]){a.row=o,n[o]=a.end;break}a.row=o,n[o]=a.end}}catch(e){i.e(e)}finally{i.f()}}var xw=function(){function e(t,n){bn(this,e),this.config=t||{},this.genome=n,this.sourceType=void 0===t.sourceType?"file":t.sourceType,this.visibilityWindow=t.visibilityWindow;var r=new Set(["bigwig","bw","bigbed","bb","tdf"]);if(t.features&&Array.isArray(t.features)){var i=function(e){if(e&&0!==e.length){if(void 0===e[0].chr&&void 0!==e[0].chr1){var t,n=[],r=zn(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.chr1===i.chr2?(i.chr=i.chr1,i.start=Math.min(i.start1,i.start2),i.end=Math.max(i.end1,i.end2)):n.push(i)}}catch(e){r.e(e)}finally{r.f()}for(var a=0,o=n;a<o.length;a++){var s=o[a],u=Object.assign({dup:!0},s);e.push(u),s.chr=s.chr1,s.start=s.start1,s.end=s.end1,u.chr=u.chr2,u.start=u.start2,u.end=u.end2}}return e}}(t.features);kw(i),t.mappings&&function(e,t){var n=Object.keys(t);e.forEach((function(e){n.forEach((function(n){e[n]=e[t[n]]}))}))}(i,t.mappings),this.queryable=!1,this.featureCache=new $b(i,n)}else t.reader?(this.reader=t.reader,this.queryable=void 0===t.queryable||t.queryable,this.expandQuery=!!t.expandQuery):"ga4gh"===t.sourceType?(this.reader=new mw(t,n),this.queryable=!0):"immvar"===t.sourceType?(this.reader=new pw(t),this.queryable=!0):"eqtl"===t.type&&"gtex-ws"===t.sourceType?(this.reader=new fw(t),this.queryable=!0,this.expandQuery=!!t.expandQuery):"ucscservice"===t.sourceType?(this.reader=new Qb(t.source),this.queryable=!0):"custom"===t.sourceType||void 0!==t.source?(this.reader=new Kb(t.source),this.queryable=void 0===t.source.queryable||t.source.queryable,this.expandQuery=!!t.expandQuery):"civic-ws"===t.sourceType?(this.reader=new yw(t),this.queryable=!1,this.expandQuery=!!t.expandQuery):(this.reader=new Wb(t,n),void 0!==t.queryable?this.queryable=t.queryable:r.has(t.format)&&(this.queryable=r.has(t.format)||this.reader.indexed))}var t,n,r,i;return xn(e,[{key:"supportsWholeGenome",value:function(){return!this.queryable&&(void 0===this.visibilityWindow||this.visibilityWindow<=0)}},{key:"trackType",value:(i=yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(!(t=e.sent)){e.next=7;break}return e.abrupt("return",t.type);case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getHeader",value:(r=yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.header){e.next=9;break}if(!this.reader||"function"!=typeof this.reader.readHeader){e.next=8;break}return e.next=4,this.reader.readHeader();case 4:(t=e.sent)?(this.header=t,t.format&&(this.config.format=t.format)):this.header={},e.next=9;break;case 8:this.header={};case 9:return e.abrupt("return",this.header);case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getFeatures",value:(n=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.chr,r=t.start,i=t.end,t.bpPerPixel,a=t.visibilityWindow,o=this.genome,s=o?o.getChromosomeName(n):n,!((u="all"===s.toLowerCase())&&!this.getWGFeatures||this.config.disableCache)&&this.featureCache&&this.featureCache.containsRange(new Cv(s,r,i))){e.next=7;break}return e.next=7,this.loadFeatures(r,i,a,s);case 7:if(!u){e.next=12;break}return this.wgFeatures||(this.queryable?this.wgFeatures=[]:this.wgFeatures=this.getWGFeatures(this.featureCache.getAllFeatures())),e.abrupt("return",this.wgFeatures);case 12:return e.abrupt("return",this.featureCache.queryFeatures(s,r,i));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"loadFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.reader,o=t,s=n,(!r||r<=0)&&!1!==this.expandQuery?(u=this.genome?this.genome.getChromosome(i):void 0,o=0,s=u?u.bpLength:Number.MAX_SAFE_INTEGER):r>n-t&&!1!==this.expandQuery&&(c=Math.min(4.1*(n-t),r),o=Math.max(0,(t+n-c)/2),s=t+c),e.next=6,a.readFeatures(i,o,s);case 6:l=e.sent,void 0===this.queryable&&(this.queryable=a.indexed),h=this.queryable?new Cv(i,o,s):void 0,l?("gtf"!==this.config.format&&"gff3"!==this.config.format&&"gff"!==this.config.format||(l=new lw(this.config).combineFeatures(l)),"wig"!==this.config.format&&"junctions"!==this.config.type&&(f=this.config.maxRows||Number.MAX_SAFE_INTEGER,kw(l,f)),this.featureCache=new $b(l,this.genome,h),this.config.searchable&&this.addFeaturesToDB(l)):this.featureCache=new $b([],h);case 10:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"addFeaturesToDB",value:function(e){var t,n=zn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.name&&(this.genome.featureDB[r.name.toUpperCase()]=r),r.gene&&r.gene.name&&(this.genome.featureDB[r.gene.name.toUpperCase()]=r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"getWGFeatures",value:function(e){var t,n=this.genome,r=new Set(n.wgChromosomeNames),i=[],a=zn(n.wgChromosomeNames);try{for(a.s();!(t=a.n()).done;){var o=e[t.value];if(o){var s,u=zn(o);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=n.getChromosomeName(c.chr);if(r.has(l)){var h=Object.assign({},c);h.chr="all",h.start=n.getGenomeCoordinate(c.chr,c.start),h.end=n.getGenomeCoordinate(c.chr,c.end),h._f=c,h.exons&&delete h.exons,h.popupData=function(e){return"function"==typeof this._f.popupData?this._f.popupData():ub.extractPopupData(this._f,n.id)},i.push(h)}}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){a.e(e)}finally{a.f()}return i.sort((function(e,t){return e.start-t.start})),i}}]),e}();function kw(e,t){if(t=t||1e3,null!=e&&0!==e.length){var n,r={},i=[],a=zn(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.chr,u=r[s];u||(u=[],r[s]=u,i.push(s)),u.push(o)}}catch(e){a.e(e)}finally{a.f()}for(var c=0,l=i;c<l.length;c++)ww(r[l[c]],t)}}var Sw=function(){function e(t,n,r){bn(this,e),this.path=t.url,this.bufferSize=r||512e3,this.range={start:-1,size:-1},this.config=t}var t;return xn(e,[{key:"dataViewForRange",value:(t=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.data&&this.range.start<=t.start&&this.range.start+this.range.size>=t.start+t.size){e.next=9;break}return r=t.size?Math.max(this.bufferSize,t.size):this.bufferSize,i={start:t.start,size:r},e.next=6,im.loadArrayBuffer(this.path,Yv(this.config,{range:i}));case 6:a=e.sent,this.data=a,this.range=i;case 9:return o=this.data.byteLength,s=t.start-this.range.start,e.abrupt("return",n?new Uint8Array(this.data,s,o-s):new DataView(this.data,s,o-s));case 12:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}();function _w(e){var t,n,r=[],i=!1,a=zn(e.trim().split(/\s*[\r\n]+\s*/g));try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.startsWith("table"))t=o.split(/\s+/)[1].trim();else if(o.startsWith("("))i=!0;else if(o.startsWith(")"));else if(i&&o.length>0){var s=o.indexOf(";"),u=o.substr(0,s).split(/\s+/),c=o.substr(s+1).replace(/"/g,"").trim();r.push({type:u[0],name:u[1],description:c})}}}catch(e){a.e(e)}finally{a.f()}return{table:t,fields:r}}var Cw=function(){function e(t,n){bn(this,e),this.path=t.url,this.genome=n,this.rpTreeCache={},this.config=t}var t,n,r,i,a,o,s;return xn(e,[{key:"readWGFeatures",value:(s=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadHeader();case 2:return r=this.chromTree.idToChrom.length-1,i=this.chromTree.idToChrom[0],a=this.chromTree.idToChrom[r],e.abrupt("return",this.readFeatures(i,0,a,Number.MAX_VALUE,t,n));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"readFeatures",value:(o=yn(regeneratorRuntime.mark((function e(t,n,r,i,a,o){var s,u,c,l,h,f,p,d,g,v,m,y,b,w,x,k,S,_,C,R,E,A,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadHeader();case 2:if(s=this.chromTree.chromToID[t],u=this.chromTree.chromToID[r],void 0!==s&&void 0!==u){e.next=6;break}return e.abrupt("return",[]);case 6:if("bigwig"!==this.type){e.next=14;break}return e.next=9,this.getZoomHeaders();case 9:h=e.sent,(f=a?Pw(a,h):void 0)?(c=f.indexOffset,l=Fw):(c=this.header.fullIndexOffset,l=Nw),e.next=16;break;case 14:c=this.header.fullIndexOffset,l=Ow.call(this);case 16:return e.next=18,this.loadRPTree(c);case 18:return p=e.sent,e.next=21,p.findLeafItemsOverlapping(s,n,u,i);case 21:if((d=e.sent)&&0!==d.length){e.next=26;break}return e.abrupt("return",[]);case 26:g=Number.MAX_VALUE,v=0,m=zn(d);try{for(m.s();!(y=m.n()).done;)b=y.value,g=Math.min(g,b.dataOffset),v=Math.max(v,b.dataOffset+b.dataSize)}catch(e){m.e(e)}finally{m.f()}return w=v-g,e.next=33,im.loadArrayBuffer(this.config.url,Yv(this.config,{range:{start:g,size:w}}));case 33:x=e.sent,k=[],S=new Uint8Array(x),_=zn(d);try{for(_.s();!(C=_.n()).done;)R=C.value,E=S.subarray(R.dataOffset-g,R.dataOffset+R.dataSize),A=void 0,this.header.uncompressBuffSize>0?(T=new wr.Inflate(E),A=T.decompress()):A=E,l.call(this,new DataView(A.buffer),s,n,u,i,k,this.chromTree.idToChrom,o)}catch(e){_.e(e)}finally{_.f()}return k.sort((function(e,t){return e.start-t.start})),e.abrupt("return",k);case 40:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,i,a){return o.apply(this,arguments)})},{key:"getZoomHeaders",value:(a=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.zoomLevelHeaders){e.next=4;break}return e.abrupt("return",this.zoomLevelHeaders);case 4:return e.next=6,this.loadHeader();case 6:return e.abrupt("return",this.zoomLevelHeaders);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"loadHeader",value:(i=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.header){e.next=4;break}return e.abrupt("return",this.header);case 4:return e.next=6,im.loadArrayBuffer(this.path,Yv(this.config,{range:{start:0,size:64}}));case 6:return t=e.sent,this.littleEndian=!0,r=new Eb(new DataView(t)),2291137574===(i=r.getUInt())?this.type="bigwig":2273964779===i?this.type="bigbed":(this.littleEndian=!1,r.littleEndian=!1,r.position=0,654085990===(a=r.getUInt())?this.type="bigwig":3958540679===a&&(this.type="bigbed")),n={bwVersion:r.getUShort(),nZoomLevels:r.getUShort(),chromTreeOffset:r.getLong(),fullDataOffset:r.getLong(),fullIndexOffset:r.getLong(),fieldCount:r.getUShort(),definedFieldCount:r.getUShort(),autoSqlOffset:r.getLong(),totalSummaryOffset:r.getLong(),uncompressBuffSize:r.getInt(),extensionOffset:r.getLong()},s={start:o=64,size:n.fullDataOffset-o+5},e.next=16,im.loadArrayBuffer(this.path,Yv(this.config,{range:s}));case 16:for(t=e.sent,u=n.nZoomLevels,r=new Eb(new DataView(t)),this.zoomLevelHeaders=[],this.firstZoomDataOffset=Number.MAX_SAFE_INTEGER,c=1;c<=u;c++)h=new Rw(l=u-c,r),this.firstZoomDataOffset=Math.min(h.dataOffset,this.firstZoomDataOffset),this.zoomLevelHeaders[l]=h;if(n.autoSqlOffset>0&&(r.position=n.autoSqlOffset-o,(f=r.getString())&&(this.autoSql=_w(f))),n.totalSummaryOffset>0&&(r.position=n.totalSummaryOffset-o,this.totalSummary=new Lw(r)),!(n.chromTreeOffset>0)){e.next=29;break}r.position=n.chromTreeOffset-o,this.chromTree=new Tw(r,o,this.genome),e.next=30;break;case 29:throw"BigWig chromosome tree offset <= 0";case 30:return r.position=n.fullDataOffset-o,n.dataCount=r.getInt(),this.setDefaultVisibilityWindow(n),this.header=n,e.abrupt("return",this.header);case 35:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"loadRPTree",value:(r=yn(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.rpTreeCache[t])){e.next=5;break}return e.abrupt("return",n);case 5:return n=new Ew(t,this.config,this.littleEndian),e.next=8,n.load();case 8:return this.rpTreeCache[t]=n,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getType",value:(n=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadHeader();case 2:return e.abrupt("return",this.type);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getTrackType",value:(t=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadHeader();case 2:if("bigwig"!==this.type){e.next=6;break}return e.abrupt("return","wig");case 6:return e.abrupt("return",this.autoSql&&"chromatinInteract"===this.autoSql.table?"interact":"annotation");case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setDefaultVisibilityWindow",value:function(e){if("bigwig"===this.type)this.visibilityWindow=-1;else{var t=this.genome?this.genome.getGenomeLength():3088286401;this.visibilityWindow=e.dataCount<1e3?-1:t/e.dataCount*1e3}}}]),e}(),Rw=function e(t,n){bn(this,e),this.index=t,this.reductionLevel=n.getInt(),this.reserved=n.getInt(),this.dataOffset=n.getLong(),this.indexOffset=n.getLong()},Ew=function(){function e(t,n,r){bn(this,e),this.config=n,this.fileOffset=t,this.path=n.url,this.littleEndian=r}var t,n;return xn(e,[{key:"load",value:function(){var e=yn(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.fileOffset+48,n=new Sw(this.config,512e3),e.next=4,this.readNode(t,n);case 4:return this.rootNode=e.sent,e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readNode",value:(n=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l,h,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.dataViewForRange({start:t,size:4},!1);case 2:return r=e.sent,i=new Eb(r,this.littleEndian),a=i.getByte(),o=1===a,i.getByte(),s=i.getUShort(),u={start:t+=4,size:s*(o?32:24)},e.next=13,n.dataViewForRange(u,!1);case 13:if(r=e.sent,c=new Array(s),i=new Eb(r),!o){e.next=21;break}for(l=0;l<s;l++)h={isLeaf:!0,startChrom:i.getInt(),startBase:i.getInt(),endChrom:i.getInt(),endBase:i.getInt(),dataOffset:i.getLong(),dataSize:i.getLong()},c[l]=h;return e.abrupt("return",new Aw(c));case 21:for(f=0;f<s;f++)p={isLeaf:!1,startChrom:i.getInt(),startBase:i.getInt(),endChrom:i.getInt(),endBase:i.getInt(),childOffset:i.getLong()},c[f]=p;return e.abrupt("return",new Aw(c));case 23:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"findLeafItemsOverlapping",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,e.abrupt("return",new Promise((function(e,o){var s=[],u=new Set,c=new Sw(a.config,512e3);u.add(0),function l(h,f){Mw(h,t,n,r,i)&&h.items.forEach((function(e){Mw(e,t,n,r,i)&&(e.isLeaf?s.push(e):e.childNode?l(e.childNode):(u.add(e.childOffset),a.readNode(e.childOffset,c).then((function(t){e.childNode=t,l(t,e.childOffset)})).catch(o)))})),void 0!==f&&u.delete(f),0===u.size&&e(s)}(a.rootNode,0)})));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})}]),e}(),Aw=function e(t){bn(this,e),this.items=t;var n,r,i=Number.MAX_SAFE_INTEGER,a=0,o=Number.MAX_SAFE_INTEGER,s=0;for(n=0;n<t.length;n++)r=t[n],i=Math.min(i,r.startChrom),a=Math.max(a,r.endChrom),o=Math.min(o,r.startBase),s=Math.max(s,r.endBase);this.startChrom=i,this.endChrom=a,this.startBase=o,this.endBase=s},Tw=function e(t,n,r){bn(this,e);var i=t.getInt(),a=t.getInt(),o=t.getInt(),s=t.getInt(),u=t.getLong(),c=t.getLong(),l={},h=[];this.header={magic:i,blockSize:a,keySize:o,valSize:s,itemCount:u,reserved:c},this.chromToID=l,this.idToChrom=h,function e(t,i){i>=0&&(t.position=i);var a,s,u,c,f,p,d=t.getByte(),g=(t.getByte(),t.getUShort());if(1===d)for(a=0;a<g;a++)s=t.getFixedLengthTrimmedString(o),u=t.getInt(),t.getInt(),r&&(s=r.getChromosomeName(s)),l[s]=u,h[u]=s;else for(a=0;a<g;a++)s=t.getFixedLengthTrimmedString(o),c=t.getLong(),f=c-n,p=t.position,e(t,f),t.position=p}(t,-1)};function Mw(e,t,n,r,i){return!!e&&(r>e.startChrom||r===e.startChrom&&i>=e.startBase)&&(t<e.endChrom||t===e.endChrom&&n<=e.endBase)}var Lw=function e(t){bn(this,e),t?(this.basesCovered=t.getLong(),this.minVal=t.getDouble(),this.maxVal=t.getDouble(),this.sumData=t.getDouble(),this.sumSquares=t.getDouble(),Iw.call(this)):(this.basesCovered=0,this.minVal=0,this.maxVal=0,this.sumData=0,this.sumSquares=0,this.mean=0,this.stddev=0)};function Iw(){var e=this.basesCovered;if(e>0){this.mean=this.sumData/e,this.stddev=Math.sqrt(this.sumSquares/(e-1));var t=this.minVal<0?this.mean-2*this.stddev:0,n=this.maxVal>0?this.mean+2*this.stddev:0;this.defaultRange={min:t,max:n}}}function Pw(e,t){for(var n,r=0;r<t.length;r++){var i=t[r];if(i.reductionLevel<e){n=i;break}}return n}function Nw(e,t,n,r,i,a,o){var s=new Eb(e),u=s.getInt(),c=s.getInt(),l=s.getInt(),h=s.getInt(),f=s.getInt(),p=s.getByte(),d=(s.getByte(),s.getUShort());if(u>=t&&u<=r)for(;d-- >0;){var g=void 0;switch(p){case 1:c=s.getInt(),l=s.getInt(),g=s.getFloat();break;case 2:c=s.getInt(),g=s.getFloat(),l=c+f;break;case 3:g=s.getFloat(),l=c+f,c+=h}if(!(u<t||u===t&&l<n)){if(u>r||u===r&&c>=i)break;if(Number.isFinite(g)){var v=o[u];a.push({chr:v,start:c,end:l,value:g})}}}}function Ow(){var e=function(e,t,n){if(n&&"chromatinInteract"===n.table)return function(e,t){return e.chr1=t[5],e.start1=Number.parseInt(t[6]),e.end1=Number.parseInt(t[7]),e.chr2=t[10],e.start2=Number.parseInt(t[11]),e.end2=Number.parseInt(t[12]),e.name=t[0],e.score=Number.parseFloat(t[1]),e.value=Number.parseFloat(t[2]),e.color="."===t[4]?void 0:"0"===t[4]?"rgb(0,0,0)":t[4],e};var r=e-3;return function(i,a){if(r>0&&(i.name=a[0]),r>1&&(i.score=parseFloat(a[1])),r>2&&(i.strand=a[2]),r>3&&(i.cdStart=parseInt(a[3])),r>4&&(i.cdEnd=parseInt(a[4])),r>5&&"."!==a[5]&&"0"!==a[5]&&"-1"!==a[5]){var o=ei.createColorString(a[5]);i.color=o.startsWith("rgb")?o:void 0}if(r>8){for(var s=parseInt(a[6]),u=a[7].split(","),c=a[8].split(","),l=[],h=0;h<s;h++){var f=i.start+parseInt(c[h]),p=f+parseInt(u[h]);l.push({start:f,end:p})}i.exons=l}if(n)for(var d=e;d<t;d++)if(d<n.fields.length){var g=n.fields[d].name,v=a[d-3];i[g]=v}}}(this.header.definedFieldCount,this.header.fieldCount,this.autoSql);return function(t,n,r,i,a,o,s){for(var u=new Eb(t);u.remLength()>=13;){var c=u.getInt(),l=s[c],h=u.getInt(),f=u.getInt(),p=u.getString();if(!(c<n||c===n&&f<r)){if(c>i||c===i&&h>=a)break;if(f>0){var d={chr:l,start:h,end:f};o.push(d);var g=p.split("\t");e(d,g)}}}}}function Fw(e,t,n,r,i,a,o,s){for(var u=new Eb(e);u.remLength()>=32;){var c=u.getInt(),l=o[c],h=u.getInt(),f=u.getInt(),p=u.getInt(),d=u.getFloat(),g=u.getFloat(),v=u.getFloat(),m=void u.getFloat();switch(s){case"min":m=d;break;case"max":m=g;break;default:m=0===p?0:v/p}if(!(c<t||c===t&&f<n)){if(c>r||c===r&&h>=i)break;Number.isFinite(m)&&a.push({chr:l,start:h,end:f,value:m})}}}var Dw=function(){function e(t,n){bn(this,e),this.reader=new Cw(t,n),this.genome=n,this.format=t.format||"bigwig",this.wgValues={}}var t,n,r,i,a;return xn(e,[{key:"getFeatures",value:(a=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.chr,r=t.start,i=t.end,a=t.bpPerPixel,o=t.windowFunction,"all"!==n.toLowerCase()){e.next=7;break}return e.next=4,this.getWGValues(o);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,this.reader.readFeatures(n,r,n,i,a,o);case 9:e.t0=e.sent;case 10:return s=e.t0,"bigwig"===this.reader.type||ww(s),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getHeader",value:(i=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.reader.loadHeader());case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getDefaultRange",value:function(){return void 0!==this.reader.totalSummary?this.reader.totalSummary.defaultRange:void 0}},{key:"defaultVisibilityWindow",value:(r=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.reader.defaultVisibilityWindow);case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getWGValues",value:(n=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1e3,r=this.genome,!this.wgValues[t]){e.next=6;break}return e.abrupt("return",this.wgValues[t]);case 6:return i=r.getGenomeLength()/n,e.next=9,this.reader.readWGFeatures(i,t);case 9:a=e.sent,o=[],s=zn(a);try{for(s.s();!(u=s.n()).done;)c=u.value,l=c.chr,h=r.getCumulativeOffset(l),(f=Object.assign({},c)).chr="all",f.start=h+c.start,f.end=h+c.end,o.push(f)}catch(e){s.e(e)}finally{s.f()}return this.wgValues[t]=o,e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"supportsWholeGenome",value:function(){return"bigwig"===this.reader.type||this.defaultVisibilityWindow()<=0}},{key:"trackType",value:(t=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.reader.getTrackType());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();u&&("g"!=/./g.flags||At.UNSUPPORTED_Y)&&L.f(RegExp.prototype,"flags",{configurable:!0,get:Rt});var Bw=function(){function e(t,n){bn(this,e),this.config=t,this.genome=n,this.path=t.url,this.groupCache={},this.datasetCache={}}var t,n,r,i,a,o;return xn(e,[{key:"readHeader",value:(o=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.magic){e.next=2;break}return e.abrupt("return",this);case 2:return e.next=4,im.loadArrayBuffer(this.path,Yv(this.config,{range:{start:0,size:64e3}}));case 4:if(t=e.sent,n=new Eb(new DataView(t)),this.magic=n.getInt(),this.version=n.getInt(),this.indexPos=n.getLong(),this.indexSize=n.getInt(),n.getInt(),this.version>=2)for(r=n.getInt(),this.windowFunctions=[];r-- >0;)this.windowFunctions.push(n.getString());for(this.trackType=n.getString(),this.trackLine=n.getString(),i=n.getInt(),this.trackNames=[];i-- >0;)this.trackNames.push(n.getString());return this.genomeID=n.getString(),this.flags=n.getInt(),this.compressed=0!=(1&this.flags),e.next=22,im.loadArrayBuffer(this.path,Yv(this.config,{range:{start:this.indexPos,size:this.indexSize}}));case 22:for(t=e.sent,n=new Eb(new DataView(t)),this.datasetIndex={},a=n.getInt();a-- >0;)o=n.getString(),s=n.getLong(),u=n.getInt(),this.datasetIndex[o]={position:s,size:u};for(this.groupIndex={},a=n.getInt();a-- >0;)c=n.getString(),l=n.getLong(),h=n.getInt(),this.groupIndex[c]={position:l,size:h};return e.abrupt("return",this);case 31:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"readDataset",value:(a=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,d,g,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t+"_"+n+"_"+r,!this.datasetCache[i]){e.next=5;break}return e.abrupt("return",this.datasetCache[i]);case 5:return e.next=7,this.readHeader();case 7:if(a=this.version<2?"":"/"+n,o="all"===t.toLowerCase()||void 0===r?"0":r.toString(),s="raw"===n?"/"+t+"/raw":"/"+t+"/z"+o+a,void 0!==(u=this.datasetIndex[s])){e.next=13;break}return e.abrupt("return",void 0);case 13:return e.next=15,im.loadArrayBuffer(this.path,Yv(this.config,{range:{start:u.position,size:u.size}}));case 15:if(c=e.sent){e.next=18;break}return e.abrupt("return",void 0);case 18:for(l=new Eb(new DataView(c)),h=l.getInt(),f={};h-- >0;)f[l.getString()]=l.getString();for(p=l.getString(),d=l.getFloat(),g=l.getInt(),v=[];g-- >0;)v.push({position:l.getLong(),size:l.getInt()});return m={name:s,attributes:f,dataType:p,tileWidth:d,tiles:v},this.datasetCache[i]=m,e.abrupt("return",m);case 30:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"readRootGroup",value:(i=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.genome,!(n=this.groupCache["/"])){e.next=6;break}return e.abrupt("return",n);case 6:return e.next=8,this.readGroup("/");case 8:return r=e.sent,i=r.chromosomes,(a=r.maxZoom)&&(this.maxZoom=Number(a)),(o=r.totalCount)&&(r.totalCount=Number.parseFloat(o)),s={},i&&i.split(",").forEach((function(e){var n=t.getChromosomeName(e);s[n]=e})),this.chrAliasTable=s,this.groupCache["/"]=r,e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"readGroup",value:(r=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.groupCache[t])){e.next=5;break}return e.abrupt("return",n);case 5:return e.next=7,this.readHeader();case 7:if(void 0!==(r=this.groupIndex[t])){e.next=10;break}return e.abrupt("return",void 0);case 10:return e.next=12,im.loadArrayBuffer(this.path,Yv(this.config,{range:{start:r.position,size:r.size}}));case 12:if(i=e.sent){e.next=15;break}return e.abrupt("return",void 0);case 15:for(a=new Eb(new DataView(i)),o={name:t},s=a.getInt();s-- >0;)u=a.getString(),c=a.getString(),o[u]=c;return this.groupCache[t]=o,e.abrupt("return",o);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"readTiles",value:(n=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.sort((function(e,t){return e.position-t.position})),0!==(t=t.filter((function(e){return e.size>0}))).length){e.next=4;break}return e.abrupt("return",Promise.resolve([]));case 4:return r=t[0],i=t[t.length-1],a=r.position,o=i.position+i.size-a,e.next=10,im.loadArrayBuffer(this.path,Yv(this.config,{range:{start:a,size:o}}));case 10:s=e.sent,u=[],c=zn(t),e.prev=13,c.s();case 15:if((l=c.n()).done){e.next=38;break}if(h=l.value,f=h.position-a,!((p=h.size)>0)){e.next=36;break}d=void 0,this.compressed?(g=new wr.Inflate(new Uint8Array(s,f,p)),v=g.decompress(),d=v.buffer):d=s.slice(f,f+p),m=new Eb(new DataView(d)),y=m.getString(),b=void 0,e.t0=y,e.next="fixedStep"===e.t0?28:"variableStep"===e.t0?30:"bed"===e.t0?32:"bedWithName"===e.t0?32:34;break;case 28:return b=zw(m,n),e.abrupt("break",35);case 30:return b=Uw(m,n),e.abrupt("break",35);case 32:return b=Hw(m,n,y),e.abrupt("break",35);case 34:throw"Unknown tile type: "+y;case 35:u.push(b);case 36:e.next=15;break;case 38:e.next=43;break;case 40:e.prev=40,e.t1=e.catch(13),c.e(e.t1);case 43:return e.prev=43,c.f(),e.finish(43);case 46:return e.abrupt("return",u);case 47:case"end":return e.stop()}}),e,this,[[13,40,43,46]])}))),function(e,t){return n.apply(this,arguments)})},{key:"readTile",value:(t=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,im.loadArrayBuffer(this.path,Yv(this.config,{range:{start:t.position,size:t.size}}));case 2:r=e.sent,this.compressed&&(i=new wr.Inflate(new Uint8Array(r)),a=i.decompress(),r=a.buffer),o=new Eb(new DataView(r)),s=o.getString(),e.t0=s,e.next="fixedStep"===e.t0?9:"variableStep"===e.t0?10:"bed"===e.t0?11:"bedWithName"===e.t0?11:12;break;case 9:return e.abrupt("return",zw(o,n));case 10:return e.abrupt("return",Uw(o,n));case 11:return e.abrupt("return",Hw(o,n,s));case 12:throw"Unknown tile type: "+s;case 13:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}();function zw(e,t){for(var n=e.getInt(),r=e.getInt(),i=e.getFloat(),a=[],o=t;o-- >0;){for(var s=n,u=[];s-- >0;)u.push(e.getFloat());a.push(u)}return{type:"fixedStep",start:r,span:i,data:a,nTracks:t,nPositions:n}}function Uw(e,t){for(var n=e.getInt(),r=e.getFloat(),i=e.getInt(),a=[],o=i;o-- >0;)a.push(e.getInt());e.getInt();for(var s=[],u=t;u-- >0;){o=i;for(var c=[];o-- >0;)c.push(e.getFloat());s.push(c)}return{type:"variableStep",tileStart:n,span:r,start:a,data:s,nTracks:t,nPositions:i}}function Hw(e,t,n){for(var r=e.getInt(),i=r,a=[];i-- >0;)a.push(e.getInt());i=r;for(var o=[];i-- >0;)o.push(e.getInt());e.getInt();for(var s=[],u=t;u-- >0;){for(var c=r,l=[];c-- >0;)l.push(e.getFloat());s.push(l)}if("bedWithName"===n){i=r;for(var h=[];i-- >0;)h.push(e.getString())}return{type:n,start:a,end:o,data:s,nTracks:t,nPositions:r}}var jw=function(){function e(t,n){bn(this,e),this.genome=n,this.windowFunction=t.windowFunction||"mean",this.reader=new Bw(t,n)}var t;return xn(e,[{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.chr,r=t.start,i=t.end,a=t.bpPerPixel,o=new Cv(n,r,i),s=this.genome,this.rootGroup){e.next=8;break}return e.next=6,this.reader.readRootGroup();case 6:this.rootGroup=e.sent,this.normalizationFactor||(u=this.rootGroup.totalCount)&&(this.normalizationFactor=1e6/u);case 8:if("all"!==n.toLowerCase()){e.next=10;break}return e.abrupt("return",[]);case 10:return o.bpPerPixel=a,c=$w(n,a,s),l=this.reader.chrAliasTable[n],h=this.reader.maxZoom,void 0===l&&(l=n),void 0===h&&(h=-1),f=c>h?"raw":this.windowFunction,e.next=19,this.reader.readDataset(l,f,c);case 19:if(null!=(p=e.sent)){e.next=22;break}return e.abrupt("return",[]);case 22:return d=p.tileWidth,g=Math.floor(r/d),v=Math.floor(i/d),e.next=28,this.reader.readTiles(p.tiles.slice(g,v+1),1);case 28:m=e.sent,y=[],b=zn(m),e.prev=31,b.s();case 33:if((w=b.n()).done){e.next=47;break}x=w.value,e.t0=x.type,e.next="bed"===e.t0?38:"variableStep"===e.t0?40:"fixedStep"===e.t0?42:44;break;case 38:return qw(x,n,r,i,0,y),e.abrupt("break",45);case 40:return Vw(x,n,r,i,0,y),e.abrupt("break",45);case 42:return Gw(x,n,r,i,0,y),e.abrupt("break",45);case 44:throw"Unknown tile type: "+x.type;case 45:e.next=33;break;case 47:e.next=52;break;case 49:e.prev=49,e.t1=e.catch(31),b.e(e.t1);case 52:return e.prev=52,b.f(),e.finish(52);case 55:return y.sort((function(e,t){return e.start-t.start})),e.abrupt("return",y);case 57:case"end":return e.stop()}}),e,this,[[31,49,52,55]])}))),function(e){return t.apply(this,arguments)})},{key:"supportsWholeGenome",value:function(){return!1}}]),e}();function qw(e,t,n,r,i,a){for(var o=e.nPositions,s=e.start,u=e.end,c=e.data[0],l=0;l<o;l++){var h=s[l],f=u[l];if(!(f<n)){if(h>r)break;a.push({chr:t,start:h,end:f,value:c[l]})}}}function Vw(e,t,n,r,i,a){for(var o=e.nPositions,s=e.start,u=e.span,c=e.data[0],l=0;l<o;l++){var h=s[l],f=h+u;if(!(f<n)){if(h>r)break;a.push({chr:t,start:h,end:f,value:c[l]})}}}function Gw(e,t,n,r,i,a){for(var o=e.nPositions,s=e.start,u=e.span,c=e.data[0],l=0;l<o;l++){var h=s+u;if(s>r)break;h>=n&&(Number.isNaN(c[l])||a.push({chr:t,start:s,end:h,value:c[l]})),s=h}}var Ww=Math.log(2);function $w(e,t,n){var r=n.getChromosome(e).bpLength;return Math.ceil(Math.log(Math.max(0,r/(700*t)))/Ww)}function Yw(e,t){var n=e.format?e.format.toLowerCase():void 0;return"bigwig"===n||"bigbed"===n||"bb"===n?new Dw(e,t):"tdf"===n?new jw(e,t):new xw(e,t)}var Xw={Set1:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(166,86,40)","rgb(152,78,163)","rgb(255,127,0)","rgb(247,129,191)","rgb(153,153,153)","rgb(255,255,51)"],Dark2:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)","rgb(102,102,102)"],Set2:["rgb(102, 194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)","rgb(179,179,179)"],Set3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)","rgb(255,237,111)"],Pastel1:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)"],Pastel2:["rgb(173,226,207)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(243,225,206)"],Accent:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)"]};function Zw(e){this.colors=Xw[e],Array.isArray(this.colors)||(this.colors=[]),this.colorTable={},this.nextIdx=0,this.colorGenerator=new Kw}function Kw(){this.hue=Math.random(),this.goldenRatio=.618033988749895,this.hexwidth=2}Zw.prototype.getColor=function(e){return this.colorTable.hasOwnProperty(e)||(this.nextIdx<this.colors.length?this.colorTable[e]=this.colors[this.nextIdx]:this.colorTable[e]=this.colorGenerator.get(),this.nextIdx++),this.colorTable[e]},Kw.prototype.hsvToRgb=function(e,t,n){var r=Math.floor(6*e),i=6*e-r,a=n*(1-t),o=n*(1-i*t),s=n*(1-(1-i)*t),u=255,c=255,l=255;switch(r){case 0:u=n,c=s,l=a;break;case 1:u=o,c=n,l=a;break;case 2:u=a,c=n,l=s;break;case 3:u=a,c=o,l=n;break;case 4:u=s,c=a,l=n;break;case 5:u=n,c=a,l=o}return[Math.floor(256*u),Math.floor(256*c),Math.floor(256*l)]},Kw.prototype.padHex=function(e){return e.length>this.hexwidth?e:new Array(this.hexwidth-e.length+1).join("0")+e},Kw.prototype.get=function(e,t){this.hue+=this.goldenRatio,this.hue%=1,"number"!=typeof e&&(e=.5),"number"!=typeof t&&(t=.95);var n=this.hsvToRgb(this.hue,e,t);return"#"+this.padHex(n[0].toString(16))+this.padHex(n[1].toString(16))+this.padHex(n[2].toString(16))};var Qw=new Kw,Jw={getTissueInfo:function(e,t){var n=(t=t||"https://gtexportal.org/rest/v1")+"/dataset/tissueInfo?datasetId="+(e=e||"gtex_v8");return im.loadJson(n,{})},trackConfiguration:function(e,t){return{type:"eqtl",sourceType:"gtex-ws",url:(t=t||"https://gtexportal.org/rest/v1")+"/association/singleTissueEqtlByLocation",tissueSiteDetailId:e.tissueSiteDetailId,name:e.tissueSiteDetailId.split("_").join(" "),visibilityWindow:25e4}}},ex=new Zw("Dark2");["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"].forEach((function(e){ex.getColor(e)}));var tx={},nx=function(e){kn(i,e);var t,n,r=Mn(i);function i(e,t){var n;return bn(this,i),(n=r.call(this,e,t)).maxRows=void 0===e.maxRows?1e3:e.maxRows,n.displayMode=e.displayMode||"EXPANDED",n.labelDisplayMode=e.labelDisplayMode,e._featureSource?(n.featureSource=e._featureSource,delete e._featureSource):n.featureSource=e.featureSource?e.featureSource:Yw(e,t.genome),n.autoHeight=e.autoHeight,n.margin=void 0===e.margin?10:e.margin,n.featureHeight=e.featureHeight||14,"FusionJuncSpan"===e.type?(n.squishedRowHeight=e.squishedRowHeight||50,n.expandedRowHeight=e.expandedRowHeight||50,n.height=e.height||n.margin+2*n.expandedRowHeight):"snp"===e.type?(n.expandedRowHeight=e.expandedRowHeight||10,n.squishedRowHeight=e.squishedRowHeight||5,n.height=e.height||30):(n.squishedRowHeight=e.squishedRowHeight||15,n.expandedRowHeight=e.expandedRowHeight||30,n.height=e.height||n.margin+2*n.expandedRowHeight),void 0!==n.height&&n.height||(n.height=100),"spliceJunctions"===e.type&&void 0===e.colorByNumReadsThreshold&&(e.colorByNumReadsThreshold=5),e.render?n.render=e.render:"FusionJuncSpan"===e.type?n.render=sx:"spliceJunctions"===e.type?(n.render=ux,n.displayMode="COLLAPSED"):"snp"===e.type?(n.render=px,n.snpColors=["rgb(0,0,0)","rgb(0,0,255)","rgb(0,255,0)","rgb(255,0,0)"],n.colorBy="function"):(n.render=ax,n.arrowSpacing=30,function(e){function t(){e.trackView&&e.trackView.tile&&"SQUISHED"!==e.displayMode&&e.trackView.repaintViews()}e.browser.on&&(e.browser.on("trackdragend",t),e.browser.on("trackremoved",(function n(r){e.browser.un&&e===r&&(e.browser.un("trackdrag",t),e.browser.un("trackremoved",n))})))}(An(n))),n.useScore=e.useScore,n}return xn(i,[{key:"postInit",value:(n=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.featureSource.getHeader){e.next=4;break}return e.next=3,this.featureSource.getHeader();case 3:this.header=e.sent;case 4:if(this.header&&this.setTrackProperties(this.header),void 0!==this.visibilityWindow||"function"!=typeof this.featureSource.defaultVisibilityWindow){e.next=10;break}return e.next=8,this.featureSource.defaultVisibilityWindow();case 8:this.visibilityWindow=e.sent,this.featureSource.visibilityWindow=this.visibilityWindow;case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"supportsWholeGenome",value:function(){return(!1===this.config.indexed||!this.config.indexURL)&&!1!==this.config.supportsWholeGenome}},{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.visibilityWindow,e.abrupt("return",this.featureSource.getFeatures({chr:t,start:n,end:r,bpPerPixel:i,visibilityWindow:a}));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"computePixelHeight",value:function(e){if("spliceJunctions"===this.type)return this.height;if("COLLAPSED"===this.displayMode)return this.margin+this.expandedRowHeight;var t=0;if(e&&"function"==typeof e.forEach){var n,r=zn(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.row&&i.row>t&&(t=i.row)}}catch(e){r.e(e)}finally{r.f()}}return this.margin+(t+1)*("SQUISHED"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight)}},{key:"draw",value:function(e){var t=e.features,n=e.context,r=e.bpPerPixel,i=e.bpStart,a=e.pixelWidth,o=e.pixelHeight,s=i+a*r+1;if(this.config.isMergedTrack||Lp.fillRect(n,0,e.pixelTop,a,o,{fillStyle:"rgb(255, 255, 255)"}),t){var u=[];e.rowLastX=[];var c,l=zn(t);try{for(l.s();!(c=l.n()).done;){var h=c.value.row||0;void 0===u[h]?u[h]=1:u[h]++,e.rowLastX[h]=-Number.MAX_SAFE_INTEGER}}catch(e){l.e(e)}finally{l.f()}"spliceJunctions"==this.config.type&&(tx.referenceFrame=e.viewport.referenceFrame,tx.referenceFrameStart=tx.referenceFrame.start,tx.referenceFrameEnd=tx.referenceFrameStart+tx.referenceFrame.toBP(lc(e.viewport.contentDiv).width()),tx.featureZoomOutTracker={});var f,p=[],d=zn(t);try{for(d.s();!(f=d.n()).done;){var g=f.value;if(!(g.end<i)){if(g.start>s)break;var v="COLLAPSED"===this.displayMode?0:g.row,m=a/u[v];e.drawLabel=e.labelAllFeatures||m>10;var y=Math.ceil((g.end-i)/r),b=p[v];if((!b||y>b||"spliceJunctions"===this.config.type)&&(this.render.call(this,g,i,r,o,n,e),"spliceJunctions"!==this.config.type)){var w=Math.floor((g.start-i)/r);b&&w-b<=0&&(n.globalAlpha=.5,Lp.strokeLine(n,w,0,w,o,{strokeStyle:"rgb(255, 255, 255)"}),n.globalAlpha=1),p[v]=y}}}}catch(e){d.e(e)}finally{d.f()}}}},{key:"clickedFeatures",value:function(e){var t,n=e.y-this.margin,r=Ln(Sn(i.prototype),"clickedFeatures",this).call(this,e);switch(this.displayMode){case"SQUISHED":t=Math.floor(n/this.squishedRowHeight);break;case"EXPANDED":t=Math.floor(n/this.expandedRowHeight);break;default:t=void 0}return r.filter((function(e){return void 0===t||void 0===e.row||t===e.row}))}},{key:"popupData",value:function(e,t){t||(t=this.clickedFeatures(e));var n,r=e.genomicLocation,i=[],a=zn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if("spliceJunctions"!==this.config.type||o.isVisible&&o.attributes){var s="function"==typeof o.popupData?o.popupData(r):ub.extractPopupData(o,this.getGenomeId());s&&(i.length>0&&i.push("<HR>"),Array.prototype.push.apply(i,s))}}}catch(e){a.e(e)}finally{a.f()}return i}},{key:"menuItemList",value:function(){var e=this,t=[];return this.render===px&&(["function","class"].forEach((function(n){t.push({object:Um("Color by "+n,n===e.colorBy),click:function(){e.colorBy=n,e.trackView.repaintViews()}})})),t.push({object:lc('<div class="igv-track-menu-border-top">')})),t.push({object:lc('<div class="igv-track-menu-border-top">')}),["COLLAPSED","SQUISHED","EXPANDED"].forEach((function(n){t.push({object:Um({COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"}[n],n===e.displayMode),click:function(){e.displayMode=n,e.config.displayMode=n,e.trackView.checkContentHeight(),e.trackView.repaintViews()}})})),t}},{key:"description",value:function(){if(px===this.render){var e="<html>"+this.name+"<hr>";return e+="<em>Color By Function:</em><br>",e+='<span style="color:red">Red</span>: Coding-Non-Synonymous, Splice Site<br>',e+='<span style="color:green">Green</span>: Coding-Synonymous<br>',e+='<span style="color:blue">Blue</span>: Untranslated<br>',e+='<span style="color:black">Black</span>: Intron, Locus, Unknown<br><br>',e+="<em>Color By Class:</em><br>",e+='<span style="color:red">Red</span>: Deletion<br>',e+='<span style="color:green">Green</span>: MNP<br>',e+='<span style="color:blue">Blue</span>: Microsatellite, Named<br>',e+='<span style="color:black">Black</span>: Indel, Insertion, SNP',e+="</html>"}return this.name}},{key:"dispose",value:function(){this.trackView=void 0}}]),i}(ub);function rx(e,t,n){var r=(e.start-t)/n,i=(e.end-t)/n,a=i-r;return a<3&&(a=3,r-=1.5),{px:r,px1:i,pw:a}}function ix(e){var t;if(this.altColor&&"-"===e.strand)t=this.altColor;else if(this.color)t=this.color;else if(this.config.colorBy){var n=e[this.config.colorBy.field];n&&(t=this.config.colorBy.pallete[n])}else t=e.color?e.color:this.defaultColor;if(e.alpha&&1!==e.alpha)t=ei.addAlpha(t,e.alpha);else if(this.useScore&&e.score&&!Number.isNaN(e.score)){var r=function(e,t,n){var r=(t-e)/9,i=Math.floor((n-e)/r);return Math.min(1,.2+.8*i/9)}(this.config.min?this.config.min:0,this.config.max?this.config.max:1e3,e.score);e.alpha=r,t=ei.addAlpha(t,r)}return t}function ax(e,t,n,r,i,a){this.browser;var o,s,u=ix.call(this,e);i.fillStyle=u,i.strokeStyle=u,"SQUISHED"===this.displayMode&&void 0!==e.row?(o=this.featureHeight/2,s=this.margin+this.squishedRowHeight*e.row):"EXPANDED"===this.displayMode&&void 0!==e.row?(o=this.featureHeight,s=this.margin+this.expandedRowHeight*e.row):(o=this.featureHeight,s=this.margin);var c=s+o/2,l=o/2,h=c-l/2,f=e.exons?e.exons.length:0,p=rx(e,t,n),d=this.arrowSpacing,g="+"===e.strand?1:"-"===e.strand?-1:0;if(0===f){if(i.fillRect(p.px,s,p.pw,o),0!==g){i.fillStyle="white",i.strokeStyle="white";for(var v=p.px+d/2;v<p.px1;v+=d)Lp.strokeLine(i,v-2*g,c-2,v,c),Lp.strokeLine(i,v-2*g,c+2,v,c);i.fillStyle=u,i.strokeStyle=u}}else{Lp.strokeLine(i,p.px+1,c,p.px1-1,c);for(var m=a.pixelWidth,y=Math.max(0,p.px)+d/2,b=Math.min(m,p.px1),w=y;w<b;w+=d)Lp.strokeLine(i,w-2*g,c-2,w,c),Lp.strokeLine(i,w-2*g,c+2,w,c);for(var x=0;x<f;x++){var k=e.exons[x],S=Math.round((k.start-t)/n),_=Math.round((k.end-t)/n),C=Math.max(1,_-S),R=void 0;if(!(S+C<0)){if(S>m)break;if(k.utr)i.fillRect(S,h,C,l);else if(k.cdStart&&(R=Math.round((k.cdStart-t)/n),i.fillRect(S,h,R-S,l),C-=R-S,S=R),k.cdEnd&&(R=Math.round((k.cdEnd-t)/n),i.fillRect(R,h,_-R,l),C-=_-R,_=R),i.fillRect(S,s,C,o),C>d+5&&0!==g){i.fillStyle="white",i.strokeStyle="white";for(var E=S+d/2;E<_;E+=d)Lp.strokeLine(i,E-2*g,c-2,E,c),Lp.strokeLine(i,E-2*g,c+2,E,c);i.fillStyle=u,i.strokeStyle=u}}}}var A=Math.round(a.viewportContainerX),T=A+a.viewportWidth;a.drawLabel&&ox.call(this,i,e,p.px,p.px1,s,A,T,a.referenceFrame,a)}function ox(e,t,n,r,i,a,o,s,u){var c=t.name;if(void 0===c&&t.gene&&(c=t.gene.name),void 0===c&&(c=t.id||t.ID),c&&"."!==c){var l,h;r<a||n>o?(l=n,h=r):(l=Math.max(n,a),h=Math.min(r,o));var f,p=ix.call(this,t),d=!1;if(s.selection&&Jw.gtexLoaded&&(d=!0,f=s.selection.colorForGene(c)),"SQUISHED"!==this.displayMode){var g,v={textAlign:"SLANT"===this.labelDisplayMode?void 0:"center",fillStyle:f||p,strokeStyle:f||p};"COLLAPSED"===this.displayMode&&"SLANT"===this.labelDisplayMode&&(g={rotate:{angle:45}});var m=l+(h-l)/2,y=function(e,t){return t?e+20:e+25}(i,g),b=e.measureText(c),w=m-b.width/2,x=m+b.width/2;(u.labelAllFeatures||w>u.rowLastX[t.row]||d)&&(u.rowLastX[t.row]=x,u.labelTransform?(e.save(),u.labelTransform(e,m),Lp.fillText(e,c,m,y,v,void 0),e.restore()):Lp.fillText(e,c,m,y,v,g))}}}function sx(e,t,n,r,i){var a,o="EXPANDED"===this.displayMode?this.expandedRowHeight:this.squishedRowHeight;"COLLAPSED"===this.display&&(a=this.margin),"SQUISHED"===this.displayMode&&void 0!==e.row?a=this.margin+o*e.row:"EXPANDED"===this.displayMode&&void 0!==e.row&&(a=this.margin+o*e.row);var s=a+.5*o,u=s-.5*o,c=s+.5*o,l=Math.round((e.junction_left-t)/n),h=Math.round((e.junction_right-t)/n);i.beginPath(),i.moveTo(l,s),i.bezierCurveTo(l,u,h,u,h,s),i.lineWidth=1+Math.log(e.num_junction_reads)/Math.log(2),i.strokeStyle="blue",i.stroke();for(var f=e.spanning_frag_coords,p=0;p<f.length;p++){var d=f[p],g=Math.round((d.left-t)/n),v=Math.round((d.right-t)/n);i.beginPath(),i.moveTo(g,s),i.bezierCurveTo(g,c,v,c,v,s),i.lineWidth=1,i.strokeStyle="purple",i.stroke()}}function ux(e,t,n,r,i){e.isVisible=!1;var a=Math.round((e.start-t)/n),o=Math.round((e.end-t)/n),s=(a+o)/2;if(o-a<=3){if(s in tx.featureZoomOutTracker)return;tx.featureZoomOutTracker[s]=!0}if(!(this.config.hideAnnotatedJunctions&&"true"===e.attributes.annotated_junction||this.config.hideUnannotatedJunctions&&"false"===e.attributes.annotated_junction||this.config.hideMotifs&&this.config.hideMotifs.includes(e.attributes.motif)||this.config.hideStrand===e.strand)){if(this.config.minJunctionEndsVisible){var u=0;if(e.start>=tx.referenceFrameStart&&e.start<=tx.referenceFrameEnd&&(u+=1),e.end>=tx.referenceFrameStart&&e.end<=tx.referenceFrameEnd&&(u+=1),u<this.config.minJunctionEndsVisible)return}var c,l,h,f;if(e.attributes.uniquely_mapped){if((c=parseInt(e.attributes.uniquely_mapped))<this.config.minUniquelyMappedReads)return;if((h=c+(l=parseInt(e.attributes.multi_mapped)))<this.config.minTotalReads)return;if(h>0&&l/h>this.config.maxFractionMultiMappedReads)return;if(e.attributes.maximum_spliced_alignment_overhang&&parseInt(e.attributes.maximum_spliced_alignment_overhang)<this.config.minSplicedAlignmentOverhang)return}if(e.attributes.num_samples_with_this_junction){if(f=parseInt(e.attributes.num_samples_with_this_junction),this.config.minSamplesWithThisJunction&&f<this.config.minSamplesWithThisJunction)return;if(this.config.maxSamplesWithThisJunction&&f>this.config.maxSamplesWithThisJunction)return;if(e.attributes.num_samples_total&&(e.attributes.percent_samples_with_this_junction=100*f/parseFloat(e.attributes.num_samples_total),this.config.minPercentSamplesWithThisJunction&&(e.attributes.percent_samples_with_this_junction<this.config.minPercentSamplesWithThisJunction||e.attributes.percent_samples_with_this_junction>this.config.maxPercentSamplesWithThisJunction)))return}var p,d,g=this.margin,v=this.height,m=g+.5*v,y=g,b=g+v-10,w=(a+s)/2,x=(s+o)/2,k=1;e.attributes.line_width?k=parseFloat(e.attributes.line_width):(void 0===this.config.thicknessBasedOn||"numUniqueReads"===this.config.thicknessBasedOn?k=c:"numReads"===this.config.thicknessBasedOn?k=h:"numSamplesWithThisJunction"===this.config.thicknessBasedOn&&void 0!==f&&(k=f),k=1+Math.log(k+1)/Math.log(12)),void 0===this.config.bounceHeightBasedOn||"random"===this.config.bounceHeightBasedOn?p=(e.start+e.end)%7:"distance"===this.config.bounceHeightBasedOn?p=6*(e.end-e.start)/(tx.referenceFrameEnd-tx.referenceFrameStart):"thickness"===this.config.bounceHeightBasedOn&&(p=2*k),y+=v*Math.max(7-p,0)/10,d=e.attributes.color?e.attributes.color:void 0===this.config.colorBy||"numUniqueReads"===this.config.colorBy?c>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":"numReads"===this.config.colorBy?h>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":"isAnnotatedJunction"===this.config.colorBy?"true"===e.attributes.annotated_junction?"#b0b0ec":"orange":"strand"===this.config.colorBy?"+"===e.strand?"#b0b0ec":"#ecb0b0":"motif"===this.config.colorBy?ex.getColor(e.attributes.motif):"#AAAAAA";var S="";e.attributes.label?S=e.attributes.label.replace(/_/g," "):void 0===this.config.labelWith||"uniqueReadCount"===this.config.labelWith?S=c:"totalReadCount"===this.config.labelWith?S=h:"numSamplesWithThisJunction"===this.config.labelWith?void 0!==f&&(S=f):"percentSamplesWithThisJunction"===this.config.labelWith?void 0!==e.attributes.percent_samples_with_this_junction&&(S=e.attributes.percent_samples_with_this_junction.toFixed(0)+"%"):"motif"===this.config.labelWith&&void 0!==e.attributes.motif&&(S+=e.attributes.motif),"uniqueReadCount"===this.config.labelWithInParen?S+=" ("+c+")":"totalReadCount"===this.config.labelWithInParen?S+=" ("+h+")":"multiMappedReadCount"===this.config.labelWithInParen?l>0&&(S+=" (+"+l+")"):"numSamplesWithThisJunction"===this.config.labelWithInParen?void 0!==f&&(S+=" ("+f+")"):"percentSamplesWithThisJunction"===this.config.labelWithInParen?void 0!==e.attributes.percent_samples_with_this_junction&&(S+=" ("+e.attributes.percent_samples_with_this_junction.toFixed(0)+"%)"):"motif"===this.config.labelWithInParen&&void 0!==e.attributes.motif&&(S+=" ".concat(e.attributes.motif)),e.isVisible=!0,i.beginPath(),i.moveTo(a,b),i.bezierCurveTo(w,y,x,y,o,b),i.lineWidth=k,i.strokeStyle=d,i.stroke();var _=function(e,t,n,r){e.beginPath(),e.moveTo(t,n),e.lineTo(t-r/2,n-r),e.lineTo(t+r/2,n-r),e.lineTo(t,n),e.closePath(),e.fill()};if(e.attributes.left_shape||e.attributes.right_shape){i.fillStyle=d;var C=i.lineWidth>2?10:7;e.attributes.left_shape&&_(i,a,b,C),e.attributes.right_shape&&_(i,o,b,C)}i.fillText(S,s-i.measureText(S).width/2,(7*y+m)/8)}}var cx=new Set(["nonsense","missense","stop-loss","frameshift","cds-indel"]),lx=new Set(["coding-synon"]),hx=new Set(["splice-3","splice-5"]),fx=new Set(["untranslated-5","untranslated-3"]);function px(e,t,n,r,i){var a,o,s,u,c=rx(e,t,n),l=this.margin,h=this.snpColors.length;switch(a="squished"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight,this.colorBy){case"function":u=e.func,o=u.split(",").map((function(e){return cx.has(e)||hx.has(e)?h-1:lx.has(e)?h-2:fx.has(e)?h-3:0})).reduce((function(e,t){return Math.max(e,t)}));break;case"class":o="deletion"===(s=e.class)?h-1:"mnp"===s?h-2:"microsatellite"===s||"named"===s?h-3:0}i.fillStyle=this.snpColors[o],i.fillRect(c.px,l,c.pw,a)}var dx=1e-4*Number.MIN_SAFE_INTEGER,gx={A:"T",C:"G",G:"C",T:"A"},vx={TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"STOP",TAG:"STOP",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"STOP",TGG:"W",CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G"},mx=function(){function e(t,n){bn(this,e),this.type="sequence",this.browser=n,this.removable=!1,this.config=t,this.name="",this.id="sequence",this.sequenceType=t.sequenceType||"dna",this.height=25,this.disableButtons=!1,this.order=t.order||dx,this.ignoreTrackMenu=!1,this.reversed=!1,this.frameTranslate=!1}var t;return xn(e,[{key:"menuItemList",value:function(){var e=this;return[{name:this.reversed?"Forward":"Reverse",click:function(){e.reversed=!e.reversed,e.trackView.repaintViews()}},{name:this.frameTranslate?"Close Translation":"Three-frame Translate",click:function(){if(e.frameTranslate=!e.frameTranslate,e.frameTranslate){var t,n=zn(e.trackView.viewports);try{for(n.s();!(t=n.n()).done;)t.value.setContentHeight(115)}catch(e){n.e(e)}finally{n.f()}e.trackView.setTrackHeight(115)}else{var r,i=zn(e.trackView.viewports);try{for(i.s();!(r=i.n()).done;)r.value.setContentHeight(25)}catch(e){i.e(e)}finally{i.f()}e.trackView.setTrackHeight(25)}e.trackView.repaintViews()}}]}},{key:"translateSequence",value:function(e){for(var t=[[],[],[]],n=0,r=[0,1,2];n<r.length;n++)for(var i,a,o=r[n],s=o;e.length-s>=3;)i={},a=e.slice(s,s+3),this.reversed&&(a=a.split("").reverse().join("")),i.codons=a,i.aminoA=vx[a.toUpperCase()],t[o].push(i),i=null,s+=3;return t}},{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i&&i>1)){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,this.browser.genome.sequence.getSequence(t,n,r);case 6:return a=e.sent,e.abrupt("return",{bpStart:n,sequence:a});case 8:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t=e.context;if(e.features){for(var n=e.features.sequence,r=e.features.bpStart,i=1+e.bpStart+e.pixelWidth*e.bpPerPixel,a=r;a<=i;a++){var o=Math.floor(a-r);if(o<n.length){var s=n[o];this.reversed&&(s=gx[s.toUpperCase()]);var u=a-e.bpStart,c=u/e.bpPerPixel,l=(u+1)/e.bpPerPixel,h=this.fillColor(s);if(e.bpPerPixel>.1)Lp.fillRect(t,c,5,l-c,10,{fillStyle:h});else{var f=.5*(c+l-t.measureText(s).width);Lp.strokeText(t,s,f,15,{strokeStyle:h})}}}if(this.frameTranslate){var p;p=this.reversed?(p=n.split("").map((function(e){return gx[e]}))).join(""):n;var d,g=15,v=this.translateSequence(p),m=zn(v);try{for(m.s();!(d=m.n()).done;){var y=d.value,b=v.indexOf(y),w=b;g=0===b?g+10:g+30;var x,k=zn(y);try{for(k.s();!(x=k.n()).done;){var S=x.value,_=void 0,C=y.indexOf(S),R=C+w+2*C,E=0==C%2?"rgb(160,160,160)":"rgb(224,224,224)",A=Math.floor(R/e.bpPerPixel),T=Math.floor((R+3)/e.bpPerPixel),M=Math.round((A+T)/2);S.aminoA.indexOf("STOP")>-1?(E="rgb(255, 0, 0)",_="STOP"):_=S.aminoA,"M"===S.aminoA&&(E="rgb(0, 153, 0)",_="START"),Lp.fillRect(t,A,g,T-A,25,{fillStyle:E}),e.bpPerPixel<=.1&&Lp.strokeText(t,_,M-t.measureText(_).width/2,g+15)}}catch(e){k.e(e)}finally{k.f()}}}catch(e){m.e(e)}finally{m.f()}}}}},{key:"supportsWholeGenome",value:function(){return!1}},{key:"computePixelHeight",value:function(e){return this.height}},{key:"fillColor",value:function(e){return this.color?this.color:"dna"===this.sequenceType?this.browser.nucleotideColors[e]||"gray":"rgb(0, 0, 150)"}}]),e}();function yx(e,t,n){var r,i,a,o,s,u,c,l={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};function h(e){return 0===e?"0":Math.abs(e)>=10?e.toFixed():Math.abs(e)>=1?e.toFixed(1):e.toFixed(2)}void 0!==this.dataRange&&void 0!==this.dataRange.max&&void 0!==this.dataRange.min&&(Lp.fillRect(e,0,0,t,n,{fillStyle:"rgb(255, 255, 255)"}),r=(c=.95*t)-8,s={x:i=c,y:a=o=.01*n},Lp.strokeLine(e,r,a,i,o,l),Lp.fillText(e,h(this.dataRange.max),r+4,a+12,l),u={x:i,y:a=o=.99*n},Lp.strokeLine(e,r,a,i,o,l),Lp.fillText(e,h(this.dataRange.min),r+4,a-4,l),Lp.strokeLine(e,s.x,s.y,u.x,u.y,l))}var bx=function(e){kn(a,e);var t,n,r,i=Mn(a);function a(e,t){var n;bn(this,a),(n=i.call(this,e,t)).type="wig",n.height=e.height||50,n.featureType="numeric";var r=e.format?e.format.toLowerCase():e.format;return n.featureSource="bigwig"===r?new Dw(e,t.genome):"tdf"===r?new jw(e,t.genome):Yw(e,t.genome),n.autoscale=e.autoscale||void 0===e.max,n.autoscale||(n.dataRange={min:e.min||0,max:e.max}),n.windowFunction=e.windowFunction||"mean",n.paintAxis=yx,n.graphType=e.graphType||"bar",n.normalize=e.normalize,n.scaleFactor=e.scaleFactor,n}return xn(a,[{key:"postInit",value:(r=yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:(t=e.sent)&&this.setTrackProperties(t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getFeatures",value:(n=yn(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureSource.getFeatures({chr:t,start:n,end:r,bpPerPixel:i,windowFunction:this.windowFunction});case 2:if(a=e.sent,this.normalize&&this.featureSource.normalizationFactor){o=this.featureSource.normalizationFactor,s=zn(a);try{for(s.s();!(u=s.n()).done;)u.value.value*=o}catch(e){s.e(e)}finally{s.f()}}if(this.scaleFactor){c=this.scaleFactor,l=zn(a);try{for(l.s();!(h=l.n()).done;)h.value.value*=c}catch(e){l.e(e)}finally{l.f()}}return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"menuItemList",value:function(){return Vm.numericDataMenuItems(this.trackView)}},{key:"getHeader",value:(t=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.featureSource.getHeader){e.next=4;break}return e.next=3,this.featureSource.getHeader();case 3:this.header=e.sent;case 4:return e.abrupt("return",this.header);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t,n=this,r=e.features,i=e.context,a=e.bpPerPixel,o=e.bpStart,s=e.pixelWidth,u=e.pixelHeight,c=o+s*a+1,l=-1,h=-1,f=this.color||"rgb(150,150,150)";"string"==typeof f&&f.startsWith("rgb(")&&(t=ei.addAlpha(f,.1));var p=function(e){return(n.dataRange.max-e)/(n.dataRange.max-n.dataRange.min)*u};if(r&&r.length>0&&(void 0===this.dataRange.min&&(this.dataRange.min=0),this.dataRange.max>this.dataRange.min)){var d,g=0==this.dataRange.min?u:p(0),v=zn(r);try{for(v.s();!(d=v.n()).done;){var m=d.value;if(!(m.end<o)){if(m.start>c)break;var y=Math.floor((m.start-o)/a);if(!isNaN(y)){var b=p(m.value),w=Math.ceil((m.end-o)/a),x=Math.max(1,w-y),k=m.value<0&&this.altColor?this.altColor:f,S="function"==typeof k?k(m.value):k;if("points"===this.graphType){var _=this.config.pointSize||3,C=y+x/2;Lp.fillCircle(i,C,b,_/2,{fillStyle:S,strokeStyle:S})}else{var R=b-g;Math.abs(R)<1&&(R=R<0?-1:1);var E=y+x;(E>l||m.value>=0&&m.value>h||m.value<0&&m.value<1)&&Lp.fillRect(i,y,g,x,R,{fillStyle:S}),h=m.value,l=E}}}}}catch(e){v.e(e)}finally{v.f()}if(this.dataRange.min<0){var A=this.dataRange.max/(this.dataRange.max-this.dataRange.min)*e.pixelHeight;Lp.strokeLine(i,0,A,e.pixelWidth,A,{strokeStyle:t})}}if(this.config.hasOwnProperty("guideLines")){var T,M=zn(this.config.guideLines);try{for(M.s();!(T=M.n()).done;){var L=T.value;if(L.hasOwnProperty("color")&&L.hasOwnProperty("y")&&L.hasOwnProperty("dotted")){var I=p(L.y),P={strokeStyle:L.color,strokeWidth:2};L.dotted?Lp.dashedLine(e.context,0,I,e.pixelWidth,I,5,P):Lp.strokeLine(e.context,0,I,e.pixelWidth,I,P)}}}catch(e){M.e(e)}finally{M.f()}}}},{key:"popupData",value:function(e,t){if(t||(t=this.clickedFeatures(e)),t&&t.length>0){var n=[],r=function(e,t,n){for(var r,i,a=0,o=e.length-1,s=a+o>>1;!u(e[s],t,n)&&a<o;)t<e[s].start?o=s-1:t>e[s].end&&(a=s+1),s=a+o>>1;if(u(e[s],t,n)){if(u(r=e[s],t,0))return r;for(i=s;i-- >=0&&(u(e[i]),!n);){if(u(e[i],t,0))return e[i];for(c(e[i],t)<c(r,t)&&(r=e[i]),i=s;i++<e.length&&(u(e[i]),!n);){if(u(e[i],t,0))return e[i];c(e[i],t)<c(r,t)&&(r=e[i])}}return r}return;function u(e,t,n){return t>=e.start-n&&t<=e.end+n}function c(e,t){return Math.min(Math.abs(e.start-t),Math.abs(e.end-t))}}(t,e.genomicLocation,2*e.viewport.referenceFrame.bpPerPixel);if(r){var i=r.end-r.start==1?_r(r.start+1):_r(r.start+1)+"-"+_r(r.end);n.push({name:"Position:",value:i}),n.push({name:"Value:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",value:_r(r.value)})}return n}return[]}},{key:"supportsWholeGenome",value:function(){return"function"==typeof this.featureSource.supportsWholeGenome&&this.featureSource.supportsWholeGenome()}},{key:"dispose",value:function(){this.trackView=void 0}}]),a}(ub);function wx(e){this.thresholds=e.thresholds,this.colors=e.colors}function xx(e){this.scale=e,this.lowColor="rgb("+e.lowR+","+e.lowG+","+e.lowB+")",this.highColor="rgb("+e.highR+","+e.highG+","+e.highB+")",this.diff=e.high-e.low}wx.prototype.getColor=function(e){var t,n=zn(this.thresholds);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e<r)return this.colors[this.thresholds.indexOf(r)]}}catch(e){n.e(e)}finally{n.f()}return this.colors[this.colors.length-1]},xx.prototype.getColor=function(e){var t,n=this.scale;return e<=n.low?this.lowColor:e>=n.high?this.highColor:(t=(e-n.low)/this.diff,"rgb("+Math.floor(n.lowR+t*(n.highR-n.lowR))+","+Math.floor(n.lowG+t*(n.highG-n.lowG))+","+Math.floor(n.lowB+t*(n.highB-n.lowB))+")")};var kx=function(){function e(t){bn(this,e),this.color=t}return xn(e,[{key:"getColor",value:function(){return this.color}}]),e}(),Sx=function(e){kn(a,e);var t,n,r,i=Mn(a);function a(e,t){var n;return bn(this,a),(n=i.call(this,e,t)).isLog=e.isLog,n.displayMode=e.displayMode||"SQUISHED",n.maxHeight=e.maxHeight||500,n.squishedRowHeight=e.sampleSquishHeight||e.squishedRowHeight||2,n.expandedRowHeight=e.sampleExpandHeight||e.expandedRowHeight||12,n.posColorScale=e.posColorScale||new xx({low:.1,lowR:255,lowG:255,lowB:255,high:1.5,highR:255,highG:0,highB:0}),n.negColorScale=e.negColorScale||new xx({low:-1.5,lowR:0,lowG:0,lowB:255,high:-.1,highR:255,highG:255,highB:255}),e.samples?(n.sampleKeys=e.samples,n.explicitSamples=!0):n.sampleKeys=[],n.featureSource=Yw(n.config,t.genome),n.initialSort=e.sort,n}return xn(a,[{key:"postInit",value:(r=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.featureSource.getHeader){e.next=4;break}return e.next=3,this.featureSource.getHeader();case 3:this.header=e.sent;case 4:this.header&&this.setTrackProperties(this.header);case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"menuItemList",value:function(){var e=this,t=[],n={SQUISHED:"Squish",EXPANDED:"Expand",FILL:"Fill"};return t.push("<hr/>"),t.push("Sample Height"),["SQUISHED","EXPANDED","FILL"].forEach((function(r){t.push({object:Um(n[r],r===e.displayMode),click:function(){e.displayMode=r,e.config.displayMode=r,e.trackView.checkContentHeight(),e.trackView.repaintViews()}})})),t}},{key:"getFeatures",value:(n=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureSource.getFeatures({chr:t,start:n,end:r});case 2:return i=e.sent,this.initialSort&&(a=this.initialSort,this.sortSamples(a.chr,a.start,a.end,a.direction,i),this.initialSort=void 0),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"draw",value:function(e){var t=this,n=(Qr(2),e.context),r=e.pixelTop,i=e.pixelWidth,a=e.pixelHeight;Lp.fillRect(n,0,e.pixelTop,i,a,{fillStyle:"rgb(255, 255, 255)"});var o=e.features;if(o&&o.length>0){void 0===t.isLog&&function(e){if(void 0===t.isLog){t.isLog=!1;var n,r=zn(e);try{for(r.s();!(n=r.n()).done;)if(n.value.value<0)return void(t.isLog=!0)}catch(e){r.e(e)}finally{r.f()}}}(o);var s=e.bpPerPixel,u=e.bpStart,c=u+i*s+1,l=s;this.updateSampleKeys(o);var h,f,p={};switch(this.sampleKeys.forEach((function(e,t){p[e]=t})),this.displayMode){case"FILL":h=e.pixelHeight/this.sampleKeys.length,f=0;break;case"SQUISHED":h=this.squishedRowHeight,f=0;break;default:h=this.expandedRowHeight,f=1}var d,g=e.pixelTop+e.pixelHeight,v=zn(o);try{for(v.s();!(d=v.n()).done;){var m=d.value;if(!(m.end<u)){if(m.start>c)break;var y=m.sampleKey||m.sample;m.row=p[y];var b=r+m.row*h+f;if(!(b+h<r||b>g)){var w=m.value;t.isLog||(w=Qr(w/2));var x=Math.max(m.start,u),k=Math.round((x-u)/l),S=Math.min(m.end,c),_=Math.round((S-u)/l),C=Math.max(1,_-k),R=void 0;R=w<-.1?t.negColorScale.getColor(w):w>.1?t.posColorScale.getColor(w):"white",n.fillStyle=R;var E=h;if(h<.25){var A=.1+2*Math.abs(w);E=Math.min(1,A*h)}m.pixelRect={x:k,y:b,w:C,h:E-2*f},n.fillRect(k,b,C,E-2*f)}}}}catch(e){v.e(e)}finally{v.f()}}}},{key:"computePixelHeight",value:function(e){if(!e)return 0;var t="SQUISHED"===this.displayMode?this.squishedRowHeight:this.expandedRowHeight;return this.updateSampleKeys(e),this.sampleKeys.length*t}},{key:"sortSamples",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r,i,a){var o,s,u,c,l,h,f,p,d,g,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=4;break}return e.next=3,this.featureSource.getFeatures({chr:t,start:n,end:r});case 3:a=e.sent;case 4:if(a){e.next=6;break}return e.abrupt("return");case 6:this.updateSampleKeys(a),o={},s=r-n+1,u=zn(a),e.prev=10,u.s();case 12:if((c=u.n()).done){e.next=26;break}if(!((l=c.value).end<n)){e.next=16;break}return e.abrupt("continue",24);case 16:if(!(l.start>r)){e.next=18;break}return e.abrupt("break",26);case 18:h=Math.max(n,l.start),f=Math.min(r,l.end),p=(f-h)/s,d=l.sampleKey||l.sample,g=o[d]||0,o[d]=g+p*l.value;case 24:e.next=12;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(10),u.e(e.t0);case 31:return e.prev=31,u.f(),e.finish(31);case 34:v="ASC"===i?1:-1,this.sampleKeys.sort((function(e,t){var n=o[e],r=o[t];return n||(n=v*Number.MAX_VALUE),r||(r=v*Number.MAX_VALUE),n===r?0:n>r?v:-1*v})),this.trackView.repaintViews();case 37:case"end":return e.stop()}}),e,this,[[10,28,31,34]])}))),function(e,n,r,i,a){return t.apply(this,arguments)})},{key:"clickedFeatures",value:function(e){var t,n,r=Ln(Sn(a.prototype),"clickedFeatures",this).call(this,e);return t=r,n=e.y,t.filter((function(e){var t=e.pixelRect;return t&&n>=t.y&&n<=t.y+t.h}))}},{key:"popupData",value:function(e,t){t||(t=this.clickedFeatures(e));var n,r=[],i=zn(t);try{for(i.s();!(n=i.n()).done;)n.value}catch(e){i.e(e)}finally{i.f()}return t.forEach((function(e){!function(e,t){var n,r=new Set(["row","color","sampleKey","uniqueSampleKey","uniquePatientKey"]);e.hasOwnProperty("realChr")?((n=Object.assign({},e)).chr=e.realChr,n.start=e.realStart,n.end=e.realEnd,delete n.realChr,delete n.realStart,delete n.realEnd):n=e;for(var i=0,a=Object.keys(n);i<a.length;i++){var o=a[i];!r.has(o)&&$v(n[o])&&t.push({name:o,value:n[o]})}}(e,r)})),r}},{key:"contextMenuItemList",value:function(e){var t=this,n=e.viewport.referenceFrame,r=e.genomicLocation,i=this.config.sort?"ASC"===this.config.sort.direction?"DESC":"ASC":"DESC",a=n.toBP(2.5);return[{label:"Sort by value",click:function(n){var o={direction:i,chr:e.viewport.referenceFrame.chr,start:r-a,end:r+a};!function(n){var r=e.viewport.getCachedFeatures();t.sortSamples(n.chr,n.start,n.end,n.direction,r)}(o),t.config.sort=o}}]}},{key:"supportsWholeGenome",value:function(){return(!1===this.config.indexed||!this.config.indexURL)&&!1!==this.config.supportsWholeGenome}},{key:"updateSampleKeys",value:function(e){if(!this.explicitSamples){var t,n=new Set(this.sampleKeys),r=zn(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.sampleKey||i.sample;n.has(a)||(n.add(a),this.sampleKeys.push(a))}}catch(e){r.e(e)}finally{r.f()}}}}]),a}(ub),_x=function(e){kn(i,e);var t,n,r=Mn(i);function i(e,t){if(bn(this,i),!e.tracks)throw Error("Error: no tracks defined for merged track"+e);return r.call(this,e,t)}return xn(i,[{key:"postInit",value:(n=yn(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.tracks=[],t=zn(this.config.tracks),e.prev=2,t.s();case 4:if((n=t.n()).done){e.next=14;break}return(r=n.value).type||Kv(r),r.isMergedTrack=!0,e.next=10,this.browser.createTrack(r);case 10:(i=e.sent)?(i.autoscale=!1,this.tracks.push(i)):console.warn("Could not create track "+r);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),t.e(e.t0);case 19:return e.prev=19,t.f(),e.finish(19);case 22:Object.defineProperty(this,"height",{get:function(){return this._height},set:function(e){this._height=e;var t,n=zn(this.tracks);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.height=e,r.config.height=e}}catch(e){n.e(e)}finally{n.f()}}}),this.height=this.config.height||100;case 24:case"end":return e.stop()}}),e,this,[[2,16,19,22]])}))),function(){return n.apply(this,arguments)})},{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.tracks.map((function(e){return e.getFeatures(t,n,r,i)})),e.abrupt("return",Promise.all(a));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t,n,r,i,a;for(r=e.features,a=function(e,t){var n=0,r=-Number.MAX_VALUE;return t.forEach((function(e,t){e.forEach((function(e){void 0===e.value||Number.isNaN(e.value)||(n=Math.min(n,e.value),r=Math.max(r,e.value))}))})),{min:n,max:r}}(e.referenceFrame.chr,r),t=0,n=this.tracks.length;t<n;t++)(i=Object.assign({},e)).features=r[t],this.tracks[t].dataRange=a,this.tracks[t].draw(i)}},{key:"paintAxis",value:function(e,t,n){var r,i,a;for(r=0,i=this.tracks.length;r<i;r++)if("function"==typeof(a=this.tracks[r]).paintAxis){a.paintAxis(e,t,n);break}}},{key:"popupData",value:function(e,t){var n=t||e.viewport.getCachedFeatures();if(n&&n.length===this.tracks.length){for(var r=[],i=0;i<this.tracks.length;i++){i>0&&r.push("<hr/>"),r.push("<b>".concat(this.tracks[i].name,"</b>"));var a=this.tracks[i].popupData(e,n[i]);r.push.apply(r,Pn(a))}return r}}}]),i}(ub),Cx=function(){function e(t){bn(this,e),this.paired=!0,this.firstAlignment=t,this.chr=t.chr,this.readName=t.readName,t.start<t.mate.position?(this.start=t.start,this.scStart=t.scStart,this.connectingStart=t.start+t.lengthOnRef,this.connectingEnd=t.mate.position):(this.start=t.mate.position,this.scStart=this.start,this.connectingStart=t.mate.position,this.connectingEnd=t.start),this.end=Math.max(t.mate.position,t.start+t.lengthOnRef),this.lengthOnRef=this.end-this.start;var n=Math.max(this.end,t.scStart+t.scLengthOnRef);this.scLengthOnRef=n-this.scStart}return xn(e,[{key:"setSecondAlignment",value:function(e){this.secondAlignment=e;var t=this.firstAlignment;e.start>t.start?this.connectingEnd=e.start:this.connectingStart=e.start+e.lengthOnRef,this.start=Math.min(t.start,e.start),this.end=Math.max(t.start+t.lengthOnRef,e.start+e.lengthOnRef),this.lengthOnRef=this.end-this.start,this.scStart=Math.min(t.scStart,e.scStart);var n=Math.max(t.scStart+t.scLengthOnRef,e.scStart+e.scLengthOnRef);this.scLengthOnRef=n-this.scStart}},{key:"containsLocation",value:function(e,t){var n=t?this.scStart:this.start,r=t?this.scLengthOnRef:this.lengthOnRef;return e>=n&&e<=n+r}},{key:"alignmentContaining",value:function(e,t){return this.firstAlignment.containsLocation(e,t)?this.firstAlignment:this.secondAlignment&&this.secondAlignment.containsLocation(e,t)?this.secondAlignment:void 0}},{key:"popupData",value:function(e){var t=this.firstAlignment.popupData(e);return this.secondAlignment&&(t.push("-------------------------------"),t=t.concat(this.secondAlignment.popupData(e))),t}},{key:"isPaired",value:function(){return!0}},{key:"firstOfPairStrand",value:function(){return this.firstAlignment.isFirstOfPair()?this.firstAlignment.strand:this.secondAlignment&&this.secondAlignment.isFirstOfPair()?this.secondAlignment.strand:this.firstAlignment.mate.strand}}]),e}(),Rx=Sr,Ex=function(e){return e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0)},Ax=function(){function e(){bn(this,e),this.alignments=[],this.score=void 0}return xn(e,[{key:"findAlignment",value:function(e){for(var t,n=function(e,t){return t>=e.start&&t<e.start+e.lengthOnRef},r=0;r<this.alignments.length;r++){var i=this.alignments[r];if(e>=i.start&&e<i.start+i.lengthOnRef){i.paired?i.firstAlignment&&n(i.firstAlignment,e)?t=i.firstAlignment:i.secondAlignment&&n(i.secondAlignment,e)&&(t=i.secondAlignment):t=i;break}}return t}},{key:"updateScore",value:function(e,t){this.score=this.calculateScore(e,t)}},{key:"calculateScore",value:function(e,t){var n=e.position,r=e.sortOption,i=e.direction,a=e.tag;r||(r="BASE");var o,s=this.findAlignment(n);if(void 0===s)return i?Number.MAX_VALUE:-Number.MAX_VALUE;switch(r){case"NUCLEOTIDE":case"BASE":var u=s.readBaseAt(n),c=s.readBaseQualityAt(n);return u?function(e,t,n,r){var i,a=Math.floor(r)-n.start;if(a<n.sequence.length&&(i=n.sequence.charAt(a)),i){if(void 0===e)return Number.MAX_VALUE;if("N"===e)return 2;if(i===e||"="===e)return 4-t/1e3;if("X"===e||i!==e){var o=Math.floor(r)-n.coverageMap.bpStart;if(o>0&&o<n.coverageMap.coverage.length){var s=n.coverageMap.coverage[o];return-(s["pos"+e]+s["neg"+e]+t/1e3)}return-(1+t/1e3)}return 0}}(u,c,t,n):i?Number.MAX_VALUE:-Number.MAX_VALUE;case"STRAND":return s.strand?1:-1;case"START":return s.start;case"TAG":var l=s.tags()[a];return void 0!==l?Rx(l)?Ex(l):l:Number.MAX_VALUE;case"INSERT_SIZE":return-Math.abs(s.fragmentLength);case"GAP_SIZE":return-s.gapSizeAt(n);case"MATE_CHR":return(o=s.mate)?o.chr===s.chr?Number.MAX_VALUE-1:Ex(o.chr):Number.MAX_VALUE;case"MQ":return void 0===s.mq?Number.MAX_VALUE:-s.mq;default:return Number.MAX_VALUE}}}]),e}();function Tx(e){return e.isPaired()&&e.mate&&e.isMateMapped()&&e.chr===e.mate.chr&&(e.isFirstOfPair()||e.isSecondOfPair())&&!(e.isSecondary()||e.isSupplementary())}function Mx(e){var t,n=[],r=zn(e);try{for(r.s();!(t=r.n()).done;){var i,a=zn(t.value.alignments);try{for(a.s();!(i=a.n()).done;){var o=i.value;o instanceof Cx?(o.firstAlignment&&n.push(o.firstAlignment),o.secondAlignment&&n.push(o.secondAlignment)):n.push(o)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}return n}function Lx(e,t,n,r){if(e){if(0===e.length)return[];e.sort((function(e,t){return r?e.scStart-t.scStart:e.start-t.start}));var i,a=e[0],o=Math.max(t,r?a.scStart:a.start),s=o,u=[],c=zn(e);try{for(c.s();!(i=c.n()).done;){var l=i.value,h=r?l.scStart:l.start,f=Math.max(0,h-o);void 0===u[f]&&(u[f]=[]),u[f].push(l)}}catch(e){c.e(e)}finally{c.f()}var p=0,d=0,g=[];try{for(;p<e.length;){for(var v=new Ax;s<=n;){for(var m=void 0,y=void 0;!m&&s<=n;)void 0===u[y=s-o]?++s:m=u[y];if(!m)break;var b=m.pop();0===m.length&&(u[y]=void 0),v.alignments.push(b),s=r?b.scStart+b.scLengthOnRef+2:b.start+b.lengthOnRef+2,++p}if(v.alignments.length>0&&g.push(v),s=o,p===d)break;d=p}}catch(e){throw console.error(e),e}return g}}var Ix=function(){function e(t,n,r,i,a,o,s){bn(this,e),this.chr=t,this.start=Math.floor(n),this.end=Math.ceil(r),this.length=r-n,this.alleleFreqThreshold=void 0===s?.2:s,this.coverageMap=new Nx(t,n,r,this.alleleFreqThreshold),this.alignments=[],this.downsampledIntervals=[],this.samplingWindowSize=void 0===i?100:i,this.samplingDepth=void 0===a?1e3:a,this.pairsSupported=void 0===o||o,this.paired=!1,this.pairsCache={},this.downsampledReads=new Set,this.currentBucket=new Px(this.start,this.start+this.samplingWindowSize,this),this.filter=function(e){return e.isMapped()&&!e.isFailsVendorQualityCheck()},this.pairedEndStats=new Dx}return xn(e,[{key:"push",value:function(e){!1!==this.filter(e)&&(e.isPaired()&&this.pairedEndStats.push(e),this.coverageMap.incCounts(e),this.pairsSupported&&this.downsampledReads.has(e.readName)||(e.start>=this.currentBucket.end&&(this.finishBucket(),this.currentBucket=new Px(e.start,e.start+this.samplingWindowSize,this)),this.currentBucket.addAlignment(e)))}},{key:"forEach",value:function(e){this.alignments.forEach(e)}},{key:"finish",value:function(){void 0!==this.currentBucket&&this.finishBucket(),this.alignments.sort((function(e,t){return e.start-t.start})),this.pairsCache=void 0,this.downsampledReads=void 0,this.pairedEndStats.compute()}},{key:"contains",value:function(e,t,n){return this.chr===e&&this.start<=t&&this.end>=n}},{key:"hasDownsampledIntervals",value:function(){return this.downsampledIntervals&&this.downsampledIntervals.length>0}},{key:"finishBucket",value:function(){this.alignments=this.alignments.concat(this.currentBucket.alignments),this.currentBucket.downsampledCount>0&&this.downsampledIntervals.push(new Fx(this.currentBucket.start,this.currentBucket.end,this.currentBucket.downsampledCount)),this.paired=this.paired||this.currentBucket.paired}},{key:"setViewAsPairs",value:function(e){var t;t=e?function(e){var t,n={},r=[],i=zn(e);try{for(i.s();!(t=i.n()).done;){var a,o=zn(t.value.alignments);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(Tx(s)){var u=n[s.readName];u?(u.setSecondAlignment(s),n[s.readName]=void 0):(u=new Cx(s),n[s.readName]=u,r.push(u))}else r.push(s)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){i.e(e)}finally{i.f()}return r}(this.packedAlignmentRows):Mx(this.packedAlignmentRows),this.packedAlignmentRows=Lx(t,this.start,this.end)}},{key:"setShowSoftClips",value:function(e){var t=this.allAlignments();this.packedAlignmentRows=Lx(t,this.start,this.end,e)}},{key:"allAlignments",value:function(){var e,t=[],n=zn(this.packedAlignmentRows);try{for(n.s();!(e=n.n()).done;){var r,i=zn(e.value.alignments);try{for(i.s();!(r=i.n()).done;){var a=r.value;t.push(a)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"getMax",value:function(e,t){return this.coverageMap.getMax(e,t)}}]),e}(),Px=function(){function e(t,n,r){bn(this,e),this.start=t,this.end=n,this.alignments=[],this.downsampledCount=0,this.samplingDepth=r.samplingDepth,this.pairsSupported=r.pairsSupported,this.downsampledReads=r.downsampledReads,this.pairsCache=r.pairsCache}return xn(e,[{key:"addAlignment",value:function(e){var t,n,r;if(this.pairsSupported&&Tx(e)&&(r=this.pairsCache[e.readName]))return r.setSecondAlignment(e),void(this.pairsCache[e.readName]=void 0);this.alignments.length<this.samplingDepth?this.pairsSupported&&Tx(e)?(r=new Cx(e),this.paired=!0,this.pairsCache[e.readName]=r,this.alignments.push(r)):this.alignments.push(e):((t=Math.floor(Math.random()*(this.samplingDepth+this.downsampledCount-1)))<this.samplingDepth?(n=this.alignments[t],this.pairsSupported&&Tx(e)?(void 0!==this.pairsCache[n.readName]&&(this.pairsCache[n.readName]=void 0),r=new Cx(e),this.paired=!0,this.pairsCache[e.readName]=r,this.alignments[t]=r):this.alignments[t]=e,this.downsampledReads.add(n.readName)):this.downsampledReads.add(e.readName),this.downsampledCount++)}}]),e}(),Nx=function(){function e(t,n,r,i){bn(this,e),this.chr=t,this.bpStart=n,this.length=r-n,this.coverage=new Array(this.length),this.maximum=0,this.threshold=i,this.qualityWeight=!0}return xn(e,[{key:"getMax",value:function(e,t){for(var n=0,r=this.coverage.length,i=0;i<r;i++){var a=this.bpStart+i;if(a>t)break;var o=this.coverage[i];a>=e&&o&&(n=Math.max(n,o.total))}return n}},{key:"incCounts",value:function(e){var t=this;if(void 0===e.blocks?l(e):e.blocks.forEach((function(e){l(e)})),e.gaps){var n,r=zn(e.gaps);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("D"===i.type)for(var a=i.start-t.bpStart,o=a;o<a+i.len;o++)o<0||(this.coverage[o]||(this.coverage[o]=new Ox(t.threshold)),this.coverage[o].del++)}}catch(e){r.e(e)}finally{r.f()}}if(e.insertions){var s,u=zn(e.insertions);try{for(u.s();!(s=u.n()).done;){var c=s.value.start-this.bpStart;c<0||(this.coverage[c]||(this.coverage[c]=new Ox(t.threshold)),this.coverage[c].ins++)}}catch(e){u.e(e)}finally{u.f()}}function l(n){if("S"!==n.type)for(var r=e.seq,i=e.qual,a=n.seqOffset,o=n.start-t.bpStart,s=0;s<n.len;o++,s++){t.coverage[o]||(t.coverage[o]=new Ox(t.threshold));var u=r.charAt(a+s),c=e.strand?"pos"+u:"neg"+u,l=i&&a+s<i.length?i[a+s]:30;t.coverage[o][c]+=1,t.coverage[o]["qual"+u]+=l,t.coverage[o].total+=1,t.coverage[o].qual+=l,t.maximum=Math.max(t.coverage[o].total,t.maximum)}}}}]),e}(),Ox=function(){function e(t){bn(this,e),this.qualityWeight=!0,this.posA=0,this.negA=0,this.posT=0,this.negT=0,this.posC=0,this.negC=0,this.posG=0,this.negG=0,this.posN=0,this.negN=0,this.pos=0,this.neg=0,this.qualA=0,this.qualT=0,this.qualC=0,this.qualG=0,this.qualN=0,this.qual=0,this.total=0,this.del=0,this.ins=0,this.threshold=t}return xn(e,[{key:"isMismatch",value:function(e){for(var t=this.threshold*(this.qualityWeight&&this.qual?this.qual:this.total),n=0,r=0,i=["A","T","C","G"];r<i.length;r++){var a=i[r];a!==e&&(n+=this.qualityWeight&&this.qual?this["qual"+a]:this["pos"+a]+this["neg"+a])}return n>=t}}]),e}(),Fx=function(){function e(t,n,r){bn(this,e),this.start=t,this.end=n,this.counts=r}return xn(e,[{key:"popupData",value:function(e){return[{name:"start",value:this.start+1},{name:"end",value:this.end},{name:"# downsampled:",value:this.counts}]}}]),e}(),Dx=function(){function e(t,n){bn(this,e),this.totalCount=0,this.frCount=0,this.rfCount=0,this.ffCount=0,this.sumF=0,this.sumF2=0}return xn(e,[{key:"push",value:function(e){if(e.isProperPair()){var t=Math.abs(e.fragmentLength);this.sumF+=t,this.sumF2+=t*t;var n=e.pairOrientation;if("string"==typeof n&&4===n.length)switch(""+n.charAt(0)+n.charAt(2)){case"FF":case"RR":this.ffCount++;break;case"FR":this.frCount++;break;case"RF":this.rfCount++}this.totalCount++}}},{key:"compute",value:function(){if(this.totalCount>100){this.ffCount/this.totalCount>.9?this.orienation="ff":this.frCount/this.totalCount>.9?this.orienation="fr":this.rfCount/this.totalCount>.9&&(this.orienation="rf");var e=this.sumF/this.totalCount,t=Math.sqrt((this.totalCount*this.sumF2-this.sumF*this.sumF)/(this.totalCount*this.totalCount));this.lowerFragmentLength=e-3*t,this.upperFragmentLength=e+3*t}}}]),e}(),Bx={c:1,C:1,s:2,S:2,i:4,I:4,f:4},zx=function(){function e(){bn(this,e),this.hidden=!1}return xn(e,[{key:"isMapped",value:function(){return 0==(4&this.flags)}},{key:"isPaired",value:function(){return 0!=(1&this.flags)}},{key:"isProperPair",value:function(){return 0!=(2&this.flags)}},{key:"isFirstOfPair",value:function(){return 0!=(64&this.flags)}},{key:"isSecondOfPair",value:function(){return 0!=(128&this.flags)}},{key:"isSecondary",value:function(){return 0!=(256&this.flags)}},{key:"isSupplementary",value:function(){return 0!=(2048&this.flags)}},{key:"isFailsVendorQualityCheck",value:function(){return 0!=(512&this.flags)}},{key:"isDuplicate",value:function(){return 0!=(1024&this.flags)}},{key:"isMateMapped",value:function(){return 0==(8&this.flags)}},{key:"isNegativeStrand",value:function(){return 0!=(16&this.flags)}},{key:"isMateNegativeStrand",value:function(){return 0!=(32&this.flags)}},{key:"tags",value:function(){return this.tagDict||(this.tagBA?(this.tagDict=function(e){for(var t=0,n=e.length,r={};t<n;){var i=String.fromCharCode(e[t])+String.fromCharCode(e[t+1]);t+=2;var a=String.fromCharCode(e[t++]),o=void 0;if("A"===a)o=String.fromCharCode(e[t]),t++;else if("i"===a||"I"===a)o=Hx(e,t),t+=4;else if("c"===a||"C"===a)o=e[t],t++;else if("s"===a||"S"===a)o=jx(e,t),t+=2;else if("f"===a)o=qx(e,t),t+=4;else if("Z"===a)for(o="";;){var s=e[t++];if(0===s)break;o+=String.fromCharCode(s)}else{if("B"!==a){o="Error unknown type: "+a,r[i]=o;break}var u=String.fromCharCode(e[t++]),c=Bx[u];if(void 0===c){r[i]="Error: unknown element type '".concat(u,"'");break}var l=Hx(e,t);t+=4+l*c,o="[not shown]"}r[i]=o}return r}(this.tagBA),this.tagBA=void 0):this.tagDict={}),this.tagDict}},{key:"containsLocation",value:function(e,t){var n=t?this.scStart:this.start,r=t?this.scLengthOnRef:this.lengthOnRef;return e>=n&&e<=n+r}},{key:"popupData",value:function(e){var t=[];if(e=Math.floor(e),this.insertions){var n,r=this.seq,i=zn(this.insertions);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.start;if(e===o||e===o-1)return t.push({name:"Insertion",value:r.substr(a.seqOffset,a.len)}),t.push({name:"Location",value:o}),t}}catch(e){i.e(e)}finally{i.f()}}t.push({name:"Read Name",value:this.readName}),t.push("<hr>"),t.push({name:"Alignment Start",value:_r(1+this.start),borderTop:!0}),t.push({name:"Read Strand",value:!0===this.strand?"(+)":"(-)",borderTop:!0}),t.push({name:"Cigar",value:this.cigar}),t.push({name:"Mapped",value:l(this.isMapped())}),t.push({name:"Mapping Quality",value:this.mq}),t.push({name:"Secondary",value:l(this.isSecondary())}),t.push({name:"Supplementary",value:l(this.isSupplementary())}),t.push({name:"Duplicate",value:l(this.isDuplicate())}),t.push({name:"Failed QC",value:l(this.isFailsVendorQualityCheck())}),this.isPaired()&&(t.push("<hr>"),t.push({name:"First in Pair",value:!this.isSecondOfPair(),borderTop:!0}),t.push({name:"Mate is Mapped",value:l(this.isMateMapped())}),this.pairOrientation&&t.push({name:"Pair Orientation",value:this.pairOrientation}),this.isMateMapped()&&(t.push({name:"Mate Chromosome",value:this.mate.chr}),t.push({name:"Mate Start",value:this.mate.position+1}),t.push({name:"Mate Strand",value:!0===this.mate.strand?"(+)":"(-)"}),t.push({name:"Insert Size",value:this.fragmentLength}))),t.push("<hr>");var s=this.tags(),u=!0;for(var c in s)s.hasOwnProperty(c)&&(u?(t.push({name:c,value:s[c],borderTop:!0}),u=!1):t.push({name:c,value:s[c]}));return t.push("<hr>"),t.push({name:"Genomic Location: ",value:_r(1+e)}),t.push({name:"Read Base:",value:this.readBaseAt(e)}),t.push({name:"Base Quality:",value:this.readBaseQualityAt(e)}),t;function l(e){return e?"Yes":"No"}}},{key:"readBaseAt",value:function(e){var t=Ux(this.blocks,e);if(t){if("*"===this.seq)return"*";var n=t.seqIndexAt(e);return this.seq[n]}}},{key:"readBaseQualityAt",value:function(e){var t=Ux(this.blocks,e);if(t){if("*"===this.qual)return 30;var n=t.seqIndexAt(e);return n>=0&&this.qual&&n<this.qual.length?this.qual[n]:30}}},{key:"gapSizeAt",value:function(e){if(this.gaps){var t,n=zn(this.gaps);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e>=r.start&&e<r.start+r.len)return r.len}}catch(e){n.e(e)}finally{n.f()}}return 0}}]),e}();function Ux(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t>=r.start&&t<r.start+r.len)return r}}function Hx(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function jx(e,t){return e[t+1]<<8|e[t]}function qx(e,t){return new DataView(e.buffer).getFloat32(t,!0)}var Vx=function(){function e(t){bn(this,e),t&&Object.assign(this,t)}return xn(e,[{key:"seqIndexAt",value:function(e){return Math.floor(e)-this.start+this.seqOffset}}]),e}(),Gx=function(){function e(t){bn(this,e),t||(t={}),this.vendorFailed=void 0===t.vendorFailed||t.vendorFailed,this.duplicates=void 0===t.duplicates||t.duplicates,this.secondary=t.secondary||!1,this.supplementary=t.supplementary||!1,this.mqThreshold=void 0===t.mqThreshold?0:t.mqThreshold,t.readgroups&&(this.readgroups=new Set(t.readgroups))}return xn(e,[{key:"pass",value:function(e){if(this.vendorFailed&&e.isFailsVendorQualityCheck())return!1;if(this.duplicates&&e.isDuplicate())return!1;if(this.secondary&&e.isSecondary())return!1;if(this.supplementary&&e.isSupplementary())return!1;if(e.mq<this.mqThreshold)return!1;if(this.readgroups){var t=e.tags().RG;return this.readgroups.has(t)}return!0}}]),e}(),Wx=["=","A","C","x","G","x","x","x","T","x","x","x","x","x","x","N"],$x=["M","I","D","N","S","H","P","=","X","?","?","?","?","?","?","?"],Yx=Kx(new Uint8Array([66,65,77,1]),0),Xx={readHeader:function(e,t,n){return im.loadArrayBuffer(e,t).then((function(e){var t;return t=Ov(e),Xx.decodeBamHeader(t,n)}))},decodeBamHeader:function(e,t){var n,r,i,a,o;if((n=Kx(e,0))!==Yx)throw new Error("BAM header errror: bad magic number.  This could be caused by either a corrupt or missing file.");r=Kx(e,4);for(var s=0;s<r;++s)String.fromCharCode(e[s+8]);var u=Kx(e,r+8),c=r+12;for(i={},a=[],o={},s=0;s<u;++s){for(var l=Kx(e,c),h="",f=0;f<l-1;++f)h+=String.fromCharCode(e[c+4+f]);Kx(e,c+l+4),i[h]=s,a[s]=h,t&&(o[t.getChromosomeName(h)]=h),c=c+8+l}return{magicNumber:n,size:c,chrNames:a,chrToIndex:i,chrAliasTable:o}},bam_tag2cigar:function(e,t,n,r,i,a){function o(e){return"C"===e||"c"===e||"A"===e?1:"S"===e||"s"===e?2:"I"===e||"i"===e||"f"===e?4:0}if(1!==a.length||i.start<0)return!1;for(var s=n+(r+1>>1)+r;s+4<t&&"CG"!==String.fromCharCode(e[s])+String.fromCharCode(e[s+1]);){var u=String.fromCharCode(e[s+2]);if("B"===u)s+=8+o(u=String.fromCharCode(e[s+3]))*Kx(e,s+4);else if("Z"===u||"H"===u)for(s+=3;0!==e[s++];);else s+=3+o(u)}if(s>=t)return!1;if("B"!==String.fromCharCode(e[s+2])||"I"!==String.fromCharCode(e[s+3]))return!1;var c=Kx(e,s+4),l=s+8;if(l+4*c>t)return!1;var h="",f=0;a.length=0,s=l;for(var p=0;p<c;++p,s+=4){var d=Kx(e,s),g=d>>4,v=$x[15&d];"M"!==v&&"EQ"!==v&&"X"!==v&&"D"!==v&&"N"!==v&&"="!==v||(f+=g),h=h+g+v,a.push({len:g,ltr:v})}return i.cigar=h,i.lengthOnRef=f,!0},decodeBamRecords:function(e,t,n,r,i,a,o,s){for(;t<e.length;){var u=t+Kx(e,t)+4,c=new zx,l=Kx(e,t+4),h=Kx(e,t+8);if(u>e.length)return;if(l<0)t=u;else{if(void 0!==i&&(l>i||h>o))return!0;if(void 0!==i&&l<i)t=u;else{for(var f=Kx(e,t+12),p=(65280&f)>>8,d=255&f,g=Kx(e,t+16),v=(4294901760&g)>>16,m=65535&g,y=Kx(e,t+20),b=Kx(e,t+24),w=Kx(e,t+28),x=Kx(e,t+32),k=[],S=0;S<d-1;++S)k.push(String.fromCharCode(e[t+36+S]));k=k.join("");for(var _=0,C="",R=t+36+d,E=[],A=void 0,T=0;T<m;++T){var M=Kx(e,R),L=M>>4,I=$x[15&M];"M"!==I&&"EQ"!==I&&"X"!==I&&"D"!==I&&"N"!==I&&"="!==I||(_+=L),C=C+L+I,R+=4,A={len:L,ltr:I},E.push(A)}if(c.chr=r[l],c.start=h,c.flags=v,c.strand=!(16&v),c.readName=k,c.cigar=C,c.lengthOnRef=_,c.fragmentLength=x,c.mq=p,Xx.bam_tag2cigar(e,u,R,y,c,E),c.end=c.start+c.lengthOnRef,c.end<a)t=u;else{for(var P=[],N=y+1>>1,O=0;O<N;++O){var F=e[R+O];P.push(Wx[(240&F)>>4]),P.push(Wx[15&F])}P=P.slice(0,y).join(""),R+=N;for(var D=[],B=0;B<y;++B)D.push(e[R+B]);R+=y,b>=0&&(c.mate={chr:r[b],position:w,strand:!(32&v)}),c.seq=P,c.qual=D,c.tagBA=new Uint8Array(e.buffer.slice(R,u)),this.setPairOrientation(c),(void 0===s||s.pass(c))&&(Zx(c,E),n.push(c)),t=u}}}}},decodeSamRecords:function(e,t,n,r,i,a){var o,s,u,c,l,h,f,p,d,g;for(c=(o=Cr(e)).length,s=0;s<c;s++)if(l=o[s].split("\t"),(d=new zx).chr=l[2],d.start=Number.parseInt(l[3])-1,d.flags=Number.parseInt(l[1]),d.readName=l[0],d.strand=!(16&d.flags),d.mq=Number.parseInt(l[4]),d.cigar=l[5],d.fragmentLength=Number.parseInt(l[8]),d.seq=l[9],"*"!==d.chr&&d.isMapped()&&d.chr===n){if(d.start>i)break;if(p=0,(g=Qx(d.cigar)).forEach((function(e){var t=e.len,n=e.ltr;"M"!==n&&"EQ"!==n&&"X"!==n&&"D"!==n&&"N"!==n&&"="!==n||(p+=t)})),d.lengthOnRef=p,!(d.start+p<r)){for(h=l[10],d.qual=[],u=0;u<h.length;u++)d.qual[u]=h.charCodeAt(u)-33;d.tagDict=l.length<11?{}:ek(l.slice(11)),d.isMateMapped()&&(f=l[6],d.mate={chr:"="===f?d.chr:f,position:Number.parseInt(l[7]),strand:!(32&d.flags)}),this.setPairOrientation(d),(void 0===a||a.pass(d))&&(Zx(d,g),t.push(d))}}},setReaderDefaults:function(e,t){e.filter=new Gx(t.filter),t.readgroup&&(e.filter.readgroups=new Set([t.readgroup])),e.alleleFreqThreshold=void 0===t.alleleFreqThreshold?.2:t.alleleFreqThreshold,e.samplingWindowSize=void 0===t.samplingWindowSize?100:t.samplingWindowSize,e.samplingDepth=void 0===t.samplingDepth?500:t.samplingDepth,e.samplingDepth>1e4&&(e.samplingDepth=1e4),t.viewAsPairs?e.pairsSupported=!0:e.pairsSupported=void 0===t.pairsSupported||t.pairsSupported},setPairOrientation:function(e){if(e.isMapped()&&e.mate&&e.isMateMapped()&&e.mate.chr===e.chr){var t=e.strand?"F":"R",n=e.mate,r=n.strand?"F":"R",i=" ",a=" ";e.isFirstOfPair()?(i="1",a="2"):e.isSecondOfPair()&&(i="2",a="1");var o=[],s=e.fragmentLength,u=e.end-e.start;0===s&&(s=(e.start<n.position?n.position+u:n.position-u)-e.start),s>0?(o[0]=t,o[1]=i,o[2]=r,o[3]=a):(o[2]=t,o[3]=i,o[0]=r,o[1]=a),e.pairOrientation=o.join("")}}};function Zx(e,t){var n,r,i=[],a=0,o=e.start;e.scStart=e.start,e.scLengthOnRef=e.lengthOnRef;var s,u=zn(t);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=void 0;switch(c.ltr){case"H":case"P":break;case"S":l=o,e.scLengthOnRef+=c.len,0===i.length&&(e.scStart-=c.len,l-=c.len),i.push(new Vx({start:l,seqOffset:a,len:c.len,type:"S"})),a+=c.len;break;case"N":case"D":void 0===r&&(r=[]),r.push({start:o,len:c.len,type:c.ltr}),o+=c.len;break;case"I":void 0===n&&(n=[]),n.push(new Vx({start:o,len:c.len,seqOffset:a,type:"I"})),a+=c.len;break;case"M":case"EQ":case"=":case"X":i.push(new Vx({start:o,seqOffset:a,len:c.len,type:"M"})),a+=c.len,o+=c.len}}}catch(e){u.e(e)}finally{u.f()}e.blocks=i,e.insertions=n,e.gaps=r}function Kx(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function Qx(e){var t,n,r,i,a,o,s,u;for(t=[],n=[],a=null,i=e.length,r=0;r<i;r++)Jx(o=e.charAt(r))?n.push(o):(s=o,u=Number.parseInt(n.join("")),n=[],null!==a&&a.ltr===s?a.len+=u:(a={len:u,ltr:s},t.push(a)));return t}function Jx(e){var t=e.charCodeAt(0);return t>=48&&t<=57}function ek(e){var t={};return e.forEach((function(e){var n=e.split(":");t[n[0]]=n[2]})),t}var tk=Sr,nk=function(){function e(t,n){bn(this,e),this.config=t,this.genome=n,this.bamPath=t.url,this.isDataUri=tk(t.url)&&t.url.startsWith("data:"),Xx.setReaderDefaults(this,t)}var t;return xn(e,[{key:"readAlignments",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,d,g,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=function(e,t,n){var r,i,a,o;i=(r=this.header).chrAliasTable.hasOwnProperty(e)?r.chrAliasTable[e]:e,a=this.alignmentCache.queryFeatures(i,t,n),o=new Ix(e,t,n,this.samplingWindowSize,this.samplingDepth,this.pairsSupported);var s,u=zn(a);try{for(u.s();!(s=u.n()).done;){var c=s.value;o.push(c)}}catch(e){u.e(e)}finally{u.f()}return o.finish(),o},v=function(e){var t=[];this.header=Xx.decodeBamHeader(e),Xx.decodeBamRecords(e,this.header.size,t,this.header.chrNames),this.alignmentCache=new $b(t,i)},i=this.genome,!this.alignmentCache){e.next=14;break}a=this.header,o=a.chrAliasTable.hasOwnProperty(t)?a.chrAliasTable[t]:t,s=this.alignmentCache.queryFeatures(o,n,r),u=new Ix(t,n,r,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold),c=zn(s);try{for(c.s();!(l=c.n()).done;)h=l.value,u.push(h)}catch(e){c.e(e)}finally{c.f()}return u.finish(),e.abrupt("return",u);case 14:if(!this.isDataUri){e.next=21;break}return f=rk(this.bamPath),p=Ov(f.buffer),v.call(this,p),e.abrupt("return",m.call(this,t,n,r));case 21:return e.next=23,im.loadArrayBuffer(this.bamPath,Yv(this.config));case 23:return d=e.sent,g=Ov(d),v.call(this,g),e.abrupt("return",m.call(this,t,n,r));case 27:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}();function rk(e){var t=e.split(","),n=t[0].split(":")[1],r=t[1];r=n.indexOf("base64")>=0?atob(r):decodeURI(r);for(var i=new Uint8Array(r.length),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return i}var ik=function(){function e(t,n){bn(this,e),this.config=t,this.genome=n,this.bamPath=t.url,this.baiPath=t.indexURL,this.baiPath||!1===t.indexed||this.bamPath instanceof File||(this.baiPath=function(e,t){var n;if(e instanceof File)throw new Error("Cannot infer an index path for a local File.  Please select explicitly");return e.includes("?")?(n=e.indexOf("?"),e.substring(0,n)+"."+t+e.substring(n)):e+"."+t}(this.bamPath,"bai"),console.error("Warning: no indexURL specified for ".concat(this.config.url,".  Guessing ").concat(this.baiPath))),Xx.setReaderDefaults(this,t)}var t,n,r,i;return xn(e,[{key:"readAlignments",value:(i=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getChrIndex();case 2:if(i=e.sent,a=this.chrAliasTable.hasOwnProperty(t)?this.chrAliasTable[t]:t,o=i[a],s=new Ix(t,n,r,this.config.samplingWindowSize,this.config.samplingDepth,this.config.pairsSupported,this.config.alleleFreqThreshold),void 0!==o){e.next=10;break}return e.abrupt("return",s);case 10:return e.next=12,this.getIndex();case 12:if(u=e.sent,(c=u.blocksForRange(o,n,r))&&0!==c.length){e.next=16;break}return e.abrupt("return",s);case 16:l=zn(c),e.prev=18,l.s();case 20:if((h=l.n()).done){e.next=45;break}if(f=h.value,p=void 0,0!==f.maxv.offset){e.next=27;break}p=0,e.next=32;break;case 27:return d=Yv(this.config,{range:{start:f.maxv.block,size:26}}),e.next=30,im.loadArrayBuffer(this.bamPath,d);case 30:g=e.sent,p=Fv(g);case 32:return v=f.minv.block,m=f.maxv.block+p,y={start:v,size:m-v+1},e.next=37,im.loadArrayBuffer(this.bamPath,Yv(this.config,{range:y}));case 37:if(b=e.sent,w=Ov(b),!Xx.decodeBamRecords(w,f.minv.offset,s,this.indexToChr,o,n,r,this.filter)){e.next=42;break}return e.abrupt("break",45);case 42:case 43:e.next=20;break;case 45:e.next=50;break;case 47:e.prev=47,e.t0=e.catch(18),l.e(e.t0);case 50:return e.prev=50,l.f(),e.finish(50);case 53:return s.finish(),e.abrupt("return",s);case 55:case"end":return e.stop()}}),e,this,[[18,47,50,53]])}))),function(e,t,n){return i.apply(this,arguments)})},{key:"getHeader",value:(r=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.header){e.next=19;break}return t=this.genome,e.next=4,this.getIndex();case 4:if(!(n=e.sent).firstAlignmentBlock){e.next=14;break}return i=Yv(this.config,{range:{start:n.firstAlignmentBlock,size:26}}),e.next=9,im.loadArrayBuffer(this.bamPath,i);case 9:a=e.sent,o=Fv(a),r=n.firstAlignmentBlock+o,e.next=15;break;case 14:r=64e3;case 15:return s=Yv(this.config,{range:{start:0,size:r}}),e.next=18,Xx.readHeader(this.bamPath,s,t);case 18:this.header=e.sent;case 19:return e.abrupt("return",this.header);case 20:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getIndex",value:(n=yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.genome,this.index){e.next=5;break}return e.next=4,jb(this.baiPath,this.config,t);case 4:this.index=e.sent;case 5:return e.abrupt("return",this.index);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getChrIndex",value:(t=yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.chrToIndex){e.next=4;break}return e.abrupt("return",this.chrToIndex);case 4:return e.next=6,this.getHeader();case 6:return t=e.sent,this.chrToIndex=t.chrToIndex,this.indexToChr=t.chrNames,this.chrAliasTable=t.chrAliasTable,e.abrupt("return",this.chrToIndex);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),ak=function(){function e(t,n){bn(this,e),this.config=t,this.genome=n;var r={},i={};t.sources.sequences.forEach((function(e){if(r[e]=null,n){var t=n.getChromosomeName(e);i[t]=e}})),this.chrAliasTable=i,this.bamReaders=r,Xx.setReaderDefaults(this,t)}var t;return xn(e,[{key:"readAlignments",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.genome,a=(i=this).chrAliasTable.hasOwnProperty(t)?i.chrAliasTable[t]:t,this.bamReaders.hasOwnProperty(a)&&"none"!==this.bamReaders[a]){e.next=7;break}return e.abrupt("return",Promise.resolve(new Ix(t,n,r)));case 7:return(o=i.bamReaders[a])||(s={url:i.config.sources.url.replace("$CHR",a)},i.config.sources.indexURL&&(s.indexURL=i.config.sources.indexURL.replace("$CHR",a)),u=Object.assign(i.config,s),o=new ik(u),i.bamReaders[a]=o),e.abrupt("return",o.readAlignments(a,n,r).catch((function(e){console.error(e);var o="Error reading BAM or index file for: ".concat(s?s.url:"");return ir.presentAlert(new Error(o)),i.bamReaders[a]="none",new Ix(t,n,r)})));case 10:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}(),ok=function(e,t){this.config=e,this.genome=t,Xx.setReaderDefaults(this,e)};function sk(){var e=this,t=this.genome;if(this.header)return Promise.resolve(this.header);var n=this.config.url+"?file="+this.config.alignmentFile+"&options=-b,-H",r=Yv(this.config);return Xx.readHeader(n,r,t).then((function(t){return e.header=t,t}))}ok.prototype.readAlignments=function(e,t,n){var r=this;return sk.call(r).then((function(i){var a,o;return a=i.chrAliasTable.hasOwnProperty(e)?i.chrAliasTable[e]:e,o=r.config.url+"?reference="+r.config.referenceFile+"&file="+r.config.alignmentFile+"&region="+a+":"+t+"-"+n,im.loadString(o,Yv(r.config)).then((function(o){var s;return i.chrToIndex[a],s=new Ix(e,t,n,r.samplingWindowSize,r.samplingDepth,r.pairsSupported,r.alleleFreqThreshold),Xx.decodeSamRecords(o,s,a,t,n,r.filter),s}))}))};var uk=function(){function e(t,n){bn(this,e),this.config=t,this.genome=n,Xx.setReaderDefaults(this,t)}var t;return xn(e,[{key:"readAlignments",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,p,d,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.config.format||"BAM"===this.config.format.toUpperCase()){e.next=2;break}throw Error("htsget format ".concat(this.config.format," is not supported"));case 2:return a=this.genome,o=this.header&&this.header.chrAliasTable.hasOwnProperty(t)?this.header.chrAliasTable[t]:t,s=this.config.url?this.config.url+this.config.endpoint:this.config.endpoint+"/reads/",u=s+this.config.id+"?format=BAM&referenceName="+o+"&start="+n+"&end="+r,e.next=8,im.loadJson(u,this.config);case 8:return c=e.sent,e.next=11,ck(c.htsget.urls);case 11:if(l=e.sent,h=hk(l),f=Ov(h.buffer),p=f,this.header=Xx.decodeBamHeader(p,a),d=this.header.chrToIndex[t],g=new Ix(t,n,r,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold),Xx.decodeBamRecords(p,this.header.size,g,this.header.chrNames,d,n,r),g.finish(),0!==g.alignments.length){e.next=29;break}if(void 0!==d||!this.header.chrAliasTable.hasOwnProperty(t)||i){e.next=26;break}return o=this.header.chrAliasTable[t],e.abrupt("return",this.readAlignments(o,n,r,1));case 26:return e.abrupt("return",g);case 27:e.next=30;break;case 29:return e.abrupt("return",g);case 30:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})}]),e}();function ck(e){return lk.apply(this,arguments)}function lk(){return(lk=yn(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.forEach((function(e){if(e.url.startsWith("data:"))n.push(Promise.resolve(fk(e.url)));else{var t={};e.headers&&(t.headers=e.headers,t.headers.hasOwnProperty("referer")&&delete t.headers.referer),n.push(new Promise((function(n,r){im.loadArrayBuffer(e.url,t).then((function(e){n(new Uint8Array(e))}))})))}})),e.abrupt("return",Promise.all(n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hk(e){var t=0;e.forEach((function(e){t+=e.length}));var n=0,r=new Uint8Array(t);return e.forEach((function(e){r.set(e,n),n+=e.length})),r}function fk(e){var t=e.split(","),n=t[0].split(":")[1],r=t[1];r=n.indexOf("base64")>=0?atob(r):decodeURI(r);for(var i=new Uint8Array(r.length),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return i}_p("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Tp),xi("hasInstance"),xi("species"),xi("toStringTag");var pk=Xe.some,dk=lt("some"),gk=ot("some");Ne({target:"Array",proto:!0,forced:!dk||!gk},{some:function(e){return pk(this,e,arguments.length>1?arguments[1]:void 0)}}),mo("Array");var vk=lg.ArrayBuffer,mk=o.ArrayBuffer;Ne({global:!0,forced:mk!==vk},{ArrayBuffer:vk}),mo("ArrayBuffer");var yk=Ve("hasInstance"),bk=Function.prototype;yk in bk||L.f(bk,yk,{value:function(e){if("function"!=typeof this||!b(e))return!1;if(!b(this.prototype))return e instanceof this;for(;e=Ra(e);)if(this.prototype===e)return!0;return!1}}),_i(o.JSON,"JSON",!0),_i(Math,"Math",!0);var wk=Sp.onFreeze,xk=Object.freeze,kk=s((function(){xk(1)}));Ne({target:"Object",stat:!0,forced:kk,sham:!kp},{freeze:function(e){return xk&&b(e)?xk(wk(e)):e}});var Sk=A.f,_k=s((function(){Sk(1)}));Ne({target:"Object",stat:!0,forced:!u||_k,sham:!u},{getOwnPropertyDescriptor:function(e,t){return Sk(y(e),t)}});var Ck=/"/g;Ne({target:"String",proto:!0,forced:function(e){return s((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}("sub")},{sub:function(){return e="sub",t="",n="",r=String(m(this)),i="<"+e,""!==t&&(i+=" "+t+'="'+String(n).replace(Ck,"&quot;")+'"'),i+">"+r+"</"+e+">";var e,t,n,r,i}}),dg("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),dg("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}})),dg("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),dg("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var Rk=!o.setImmediate||!o.clearImmediate;Ne({global:!0,bind:!0,enumerable:!0,forced:Rk},{setImmediate:bl.set,clearImmediate:bl.clear});var Ek=eval,Ak=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==vn(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=35)}([function(e,t){var n=function(e){kn(n,e);var t=Mn(n);function n(){return bn(this,n),t.apply(this,arguments)}return n}(En(Error)),r=function(e){kn(n,e);var t=Mn(n);function n(){return bn(this,n),t.apply(this,arguments)}return n}(n);e.exports={CramBufferOverrunError:function(e){kn(n,e);var t=Mn(n);function n(){return bn(this,n),t.apply(this,arguments)}return n}(r),CramMalformedError:r,CramUnimplementedError:function(e){kn(n,e);var t=Mn(n);function n(){return bn(this,n),t.apply(this,arguments)}return n}(En(Error)),CramSizeLimitError:function(e){kn(n,e);var t=Mn(n);function n(){return bn(this,n),t.apply(this,arguments)}return n}(n),CramArgumentError:function(e){kn(n,e);var t=Mn(n);function n(){return bn(this,n),t.apply(this,arguments)}return n}(n)}},function(e,t,n){(function(e){
/*!
	     * The buffer module from node.js, for the browser.
	     *
	     * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	     * @license  MIT
	     */
var r=n(37),i=n(38),a=n(19);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),i=(e=s(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function d(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(c(e,a+f)!==c(t,f)){h=!1;break}if(h)return a}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function b(e,t,n,r){return j(U(t,e.length-n),e,n,r)}function w(e,t,n,r){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return w(e,t,n,r)}function k(e,t,n,r){return j(H(t),e,n,r)}function S(e,t,n,r){return j(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function _(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(e){var t=e.length;if(t<=R)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=R));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return _(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),c=this.slice(r,i),l=e.slice(t,n),h=0;h<s;++h)if(c[h]!==l[h]){a=c[h],o=l[h];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=z(e[a]);return i}function M(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function O(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return a||O(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,a){return a||O(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=u.isBuffer(e)?e:U(new u(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function H(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":vn(window))&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){var r=n(9),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=h;var a=n(7);a.inherits=n(4);var o=n(21),s=n(16);a.inherits(h,o);for(var u=i(s.prototype),c=0;c<u.length;c++){var l=u[c];h.prototype[l]||(h.prototype[l]=s.prototype[l])}function h(e){if(!(this instanceof h))return new h(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t,n){var r=n(0).CramBufferOverrunError,i={int:!0,byte:!0,long:!0,byteArray:!0,byteArrayBlock:!0};e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(bn(this,e),this.parameters=t,this.dataType=n,!n)throw new TypeError("must provide a data type to codec constructor");if(!i[n])throw new TypeError("invalid data type ".concat(n))}return xn(e,[{key:"_getBits",value:function(e,t,n){var i=0;if(t.bytePosition+(7-t.bitPosition+n)/8>e.length)throw new r("read error during decoding. the file seems to be truncated.");for(var a=n;a;a-=1)i<<=1,i|=e[t.bytePosition]>>t.bitPosition&1,t.bitPosition-=1,t.bitPosition<0&&(t.bytePosition+=1),t.bitPosition&=7;return i}}]),e}()},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==vn(e)},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==vn(e)&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==vn(e)||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(1).Buffer)},function(e,t,n){var r=n(72),i=n(0).CramBufferOverrunError;e.exports={itf8Size:function(e){return-128&e?-16384&e?-2097152&e?-268435456&e?5:4:3:2:1},parseItf8:function(e,t){var n,r=t,a=e[r];if(a<128?(n=a,r+=1):a<192?(n=16383&(a<<8|e[r+1]),r+=2):a<224?(n=2097151&(a<<16|e[r+1]<<8|e[r+2]),r+=3):a<240?(n=268435455&(a<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]),r+=4):(n=(15&a)<<28|e[r+1]<<20|e[r+2]<<12|e[r+3]<<4|15&e[r+4],r+=5),r>e.length)throw new i("Attempted to read beyond end of buffer; this file seems truncated.");return[n,r-t]},parseItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.parse(e),a=i.offset,o=i.result;return o._endPosition=a+r,o._size=a-n,o},tinyMemoize:function(e,t){var n=e.prototype[t],r="_memo_".concat(t);e.prototype[t]=function(){return r in this||(this[r]=n.call(this)),this[r]}},sequenceMD5:function(e){return r(e.toUpperCase().replace(/[^\x21-\x7e]/g,""))}}},function(e,t,n){(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick((function(){e.apply(null,a)}))}}}:e.exports=t}).call(this,n(3))},function(e,t,n){var r=n(1),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=vn(n))throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},o={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},function(e,t,n){var r=n(0).CramMalformedError,i=n(13),a=function e(){bn(this,e),this.F=void 0,this.C=void 0};function o(e,t,n,r){return n*(e>>r)+(e&(1<<r)-1)-t}var s={FC:a,AriDecoder:function e(){bn(this,e),this.fc=new Array(256);for(var t=0;t<this.fc.length;t+=1)this.fc[t]=new a;this.R=null},Symbol:function e(){bn(this,e),this.start=void 0,this.freq=void 0},symbolInit:function(e,t,n){if(!(t<=65536))throw new r("assertion failed: start <= 1<<16");if(!(n<=65536-t))throw new r("assertion failed: freq <= 1<<16");e.start=t,e.freq=n},advanceStep:o,advanceSymbolStep:function(e,t,n){return o(e,t.start,t.freq,n)},get:function(e,t){return e&(1<<t)-1},advanceSymbol:function(e,t,n,r){return function(e,t,n,r,a){if((e=r*(e>>a)+(e&(1<<a)-1)-n)<i.RANS_BYTE_L)do{e=e<<8|255&t.get()}while(e<i.RANS_BYTE_L);return e}(e,t,n.start,n.freq,r)},renormalize:function(e,t){if(e<i.RANS_BYTE_L)do{e=e<<8|255&t.get()}while(e<i.RANS_BYTE_L);return e}};e.exports=s},function(e,t){e.exports={TF_SHIFT:12,TOTFREQ:4096,RANS_BYTE_L:1<<23}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==vn(e)&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(a(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),o=(c=n.slice()).length,u=0;u<o;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,a,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(t=e.exports=n(21)).Stream=t,t.Readable=t,t.Writable=n(16),t.Duplex=n(5),t.Transform=n(25),t.PassThrough=n(46)},function(e,t,n){(function(t,r,i){var a=n(9);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(void 0),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var s,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:a.nextTick;y.WritableState=m;var c=n(7);c.inherits=n(4);var l,h={deprecate:n(45)},f=n(22),p=n(10).Buffer,d=i.Uint8Array||function(){},g=n(23);function v(){}function m(e,t){s=s||n(5),e=e||{};var r=t instanceof s;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(a.nextTick(i,r),a.nextTick(_,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),_(e,t))}(e,n,r,t,i);else{var o=k(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||x(e,n),r?u(w,e,n,o,i):w(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(e){if(s=s||n(5),!(l.call(y,this)||this instanceof s))return new y(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function b(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function w(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),_(e,t)}function x(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,b(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,h=n.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,l,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),_(e,t)}))}function _(e,t){var n=k(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(y,f),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:h.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===y&&e&&e._writableState instanceof m}})):l=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=e,p.isBuffer(r)||r instanceof d);return s&&!p.isBuffer(e)&&(e=function(e){return p.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),a.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),a.nextTick(r,o),i=!1),i}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,a){if(!n){var o=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=p.from(t,n)),t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,s,r,i,a);return u}(this,i,s,e,t,n)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,_(e,t),n&&(t.finished?a.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(3),n(43).setImmediate,n(2))},function(e,t){e.exports={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183}},function(e,t,n){var r=n(36);e.exports=r},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){var r=n(1).Buffer,i=n(39).Transform,a=n(51),o=n(27),s=n(26).ok,u=n(1).kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+u.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var l=Object.keys(a),h=0;h<l.length;h++){var f=l[h];f.match(/^Z/)&&Object.defineProperty(t,f,{enumerable:!0,value:a[f],writable:!1})}for(var p={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},d=Object.keys(p),g=0;g<d.length;g++){var v=d[g];p[p[v]]=v}function m(e,t,n){var i=[],a=0;function o(){for(var t;null!==(t=e.read());)i.push(t),a+=t.length;e.once("readable",o)}function s(){var t,o=null;a>=u?o=new RangeError(c):t=r.concat(i,a),i=[],e.close(),n(o,t)}e.on("error",(function(t){e.removeListener("end",s),e.removeListener("readable",o),n(t)})),e.on("end",s),e.end(t),o()}function y(e,t){if("string"==typeof t&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(t,n)}function b(e){if(!(this instanceof b))return new b(e);E.call(this,e,a.DEFLATE)}function w(e){if(!(this instanceof w))return new w(e);E.call(this,e,a.INFLATE)}function x(e){if(!(this instanceof x))return new x(e);E.call(this,e,a.GZIP)}function k(e){if(!(this instanceof k))return new k(e);E.call(this,e,a.GUNZIP)}function S(e){if(!(this instanceof S))return new S(e);E.call(this,e,a.DEFLATERAW)}function _(e){if(!(this instanceof _))return new _(e);E.call(this,e,a.INFLATERAW)}function C(e){if(!(this instanceof C))return new C(e);E.call(this,e,a.UNZIP)}function R(e){return e===a.Z_NO_FLUSH||e===a.Z_PARTIAL_FLUSH||e===a.Z_SYNC_FLUSH||e===a.Z_FULL_FLUSH||e===a.Z_FINISH||e===a.Z_BLOCK}function E(e,n){var o=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&!R(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!R(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||a.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:a.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!r.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(n);var s=this;this._hadError=!1,this._handle.onerror=function(e,n){A(s),s._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],s.emit("error",r)};var u=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(u=e.level);var c=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(c=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,u,e.memLevel||t.Z_DEFAULT_MEMLEVEL,c,e.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=u,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!o._handle},configurable:!0,enumerable:!0})}function A(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function T(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(p),writable:!1}),t.Deflate=b,t.Inflate=w,t.Gzip=x,t.Gunzip=k,t.DeflateRaw=S,t.InflateRaw=_,t.Unzip=C,t.createDeflate=function(e){return new b(e)},t.createInflate=function(e){return new w(e)},t.createDeflateRaw=function(e){return new S(e)},t.createInflateRaw=function(e){return new _(e)},t.createGzip=function(e){return new x(e)},t.createGunzip=function(e){return new k(e)},t.createUnzip=function(e){return new C(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new b(t),e,n)},t.deflateSync=function(e,t){return y(new b(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new x(t),e,n)},t.gzipSync=function(e,t){return y(new x(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new S(t),e,n)},t.deflateRawSync=function(e,t){return y(new S(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new C(t),e,n)},t.unzipSync=function(e,t){return y(new C(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new w(t),e,n)},t.inflateSync=function(e,t){return y(new w(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new k(t),e,n)},t.gunzipSync=function(e,t){return y(new k(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),m(new _(t),e,n)},t.inflateRawSync=function(e,t){return y(new _(t),e)},o.inherits(E,i),E.prototype.params=function(n,r,i){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var o=this;this.flush(a.Z_SYNC_FLUSH,(function(){s(o._handle,"zlib binding closed"),o._handle.params(n,r),o._hadError||(o._level=n,o._strategy=r,i&&i())}))}else e.nextTick(i)},E.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},E.prototype._flush=function(e){this._transform(r.alloc(0),"",e)},E.prototype.flush=function(t,n){var i=this,o=this._writableState;("function"==typeof t||void 0===t&&!n)&&(n=t,t=a.Z_FULL_FLUSH),o.ended?n&&e.nextTick(n):o.ending?n&&this.once("end",n):o.needDrain?n&&this.once("drain",(function(){return i.flush(t,n)})):(this._flushFlag=t,this.write(r.alloc(0),"",n))},E.prototype.close=function(t){A(this,t),e.nextTick(T,this)},E.prototype._transform=function(e,t,n){var i,o=this._writableState,s=(o.ending||o.ended)&&(!e||o.length===e.length);return null===e||r.isBuffer(e)?this._handle?(s?i=this._finishFlushFlag:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(e,i,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},E.prototype._processChunk=function(e,t,n){var i=e&&e.length,a=this._chunkSize-this._offset,o=0,l=this,h="function"==typeof n;if(!h){var f,p=[],d=0;this.on("error",(function(e){f=e})),s(this._handle,"zlib binding closed");do{var g=this._handle.writeSync(t,e,o,i,this._buffer,this._offset,a)}while(!this._hadError&&y(g[0],g[1]));if(this._hadError)throw f;if(d>=u)throw A(this),new RangeError(c);var v=r.concat(p,d);return A(this),v}s(this._handle,"zlib binding closed");var m=this._handle.write(t,e,o,i,this._buffer,this._offset,a);function y(u,c){if(this&&(this.buffer=null,this.callback=null),!l._hadError){var f=a-c;if(s(f>=0,"have should not go down"),f>0){var g=l._buffer.slice(l._offset,l._offset+f);l._offset+=f,h?l.push(g):(p.push(g),d+=g.length)}if((0===c||l._offset>=l._chunkSize)&&(a=l._chunkSize,l._offset=0,l._buffer=r.allocUnsafe(l._chunkSize)),0===c){if(o+=i-u,i=u,!h)return!0;var v=l._handle.write(t,e,o,i,l._buffer,l._offset,l._chunkSize);return v.callback=y,void(v.buffer=e)}if(!h)return!1;n()}}m.buffer=e,m.callback=y},o.inherits(b,E),o.inherits(w,E),o.inherits(x,E),o.inherits(k,E),o.inherits(S,E),o.inherits(_,E),o.inherits(C,E)}).call(this,n(3))},function(e,t,n){(function(t,r){var i=n(9);e.exports=b;var a,o=n(19);b.ReadableState=y,n(14).EventEmitter;var s=function(e,t){return e.listeners(t).length},u=n(22),c=n(10).Buffer,l=t.Uint8Array||function(){},h=n(7);h.inherits=n(4);var f=n(40),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,g=n(41),v=n(23);h.inherits(b,u);var m=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var r=t instanceof(a=a||n(5));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(24).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function b(e){if(a=a||n(5),!(this instanceof b))return new b(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function w(e,t,n,r,i){var a,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,_(e)}}(e,o)):(i||(a=function(e,t){var n,r;return r=t,c.isBuffer(r)||r instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?x(e,o,t,!1):R(e,o)):x(e,o,t,!1))):r||(o.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function x(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&_(e)),R(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=v.destroy,b.prototype._undestroy=v.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),w(this,e,t,!1,n)},b.prototype.unshift=function(e){return w(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return d||(d=n(24).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this};var k=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=k?e=k:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(C,e):C(e))}function C(e){p("emit readable"),e.emit("readable"),M(e)}function R(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(E,e,t))}function E(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function A(e){p("readable nexttick read 0"),e.read(0)}function T(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function L(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0==(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0==(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(P,t,e))}function P(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function N(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}b.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):_(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&I(this),null;var r,i=t.needReadable;return p("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",i=!0),t.ended||t.reading?p("reading or ended",i=!1):i&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(n,t))),null===(r=e>0?L(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&I(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,p("pipe count=%d opts=%j",a.pipesCount,t);var u=t&&!1===t.end||e===r.stdout||e===r.stderr?y:c;function c(){p("onend"),e.end()}a.endEmitted?i.nextTick(u):n.once("end",u),e.on("unpipe",(function t(r,i){p("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,p("cleanup"),e.removeListener("close",v),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",g),e.removeListener("unpipe",t),n.removeListener("end",c),n.removeListener("end",y),n.removeListener("data",d),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,M(e))}}(n);e.on("drain",l);var h=!1,f=!1;function d(t){p("ondata"),f=!1,!1!==e.write(t)||f||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==N(a.pipes,e))&&!h&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function g(t){p("onerror",t),y(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",m),y()}function m(){p("onfinish"),e.removeListener("close",v),y()}function y(){p("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",v),e.once("finish",m),e.emit("pipe",n),a.flowing||(p("pipe resume"),n.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=N(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},b.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):i.nextTick(A,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(T,e,t))}(this,e)),this},b.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(p("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){p("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<m.length;a++)e.on(m[a],this.emit.bind(this,m[a]));return this._read=function(t){p("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=L}).call(this,n(2),n(3))},function(e,t,n){e.exports=n(14).EventEmitter},function(e,t,n){var r=n(9);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){var r=n(10).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=h,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=o(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=o(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){e.exports=o;var r=n(5),i=n(7);function a(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){u(e,t,n)})):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(4),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){(function(t){
/*!
	     * The buffer module from node.js, for the browser.
	     *
	     * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	     * @license  MIT
	     */
function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var a=n(27),o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,u="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function l(e){return!i(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var h=e.exports=m,f=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(a.isFunction(e)){if(u)return e.name;var t=e.toString().match(f);return t&&t[1]}}function d(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(u||!a.isFunction(e))return a.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function v(e,t,n,r,i){throw new h.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function m(e,t){e||v(e,!0,t,"==",h.ok)}function y(e,t,n,o){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(a.isDate(e)&&a.isDate(t))return e.getTime()===t.getTime();if(a.isRegExp(e)&&a.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==vn(e)||null!==t&&"object"==vn(t)){if(l(e)&&l(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var u=(o=o||{actual:[],expected:[]}).actual.indexOf(e);return-1!==u&&u===o.expected.indexOf(t)||(o.actual.push(e),o.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(a.isPrimitive(e)||a.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=b(e),o=b(t);if(i&&!o||!i&&o)return!1;if(i)return y(e=s.call(e),t=s.call(t),n);var u,c,l=k(e),h=k(t);if(l.length!==h.length)return!1;for(l.sort(),h.sort(),c=l.length-1;c>=0;c--)if(l[c]!==h[c])return!1;for(c=l.length-1;c>=0;c--)if(!y(e[u=l[c]],t[u],n,r))return!1;return!0}(e,t,n,o))}return n?e===t:e==t}function b(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function x(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&v(i,n,"Missing expected exception"+r);var o="string"==typeof r,s=!e&&i&&!n;if((!e&&a.isError(i)&&o&&w(i,n)||s)&&v(i,n,"Got unwanted exception"+r),e&&i&&n&&!w(i,n)||!e&&i)throw i}h.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=d(g(this.actual),128)+" "+this.operator+" "+d(g(this.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=p(t),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},a.inherits(h.AssertionError,Error),h.fail=v,h.ok=m,h.equal=function(e,t,n){e!=t&&v(e,t,n,"==",h.equal)},h.notEqual=function(e,t,n){e==t&&v(e,t,n,"!=",h.notEqual)},h.deepEqual=function(e,t,n){y(e,t,!1)||v(e,t,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(e,t,n){y(e,t,!0)||v(e,t,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(e,t,n){y(e,t,!1)&&v(e,t,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function e(t,n,r){y(t,n,!0)&&v(t,n,r,"notDeepStrictEqual",e)},h.strictEqual=function(e,t,n){e!==t&&v(e,t,n,"===",h.strictEqual)},h.notStrictEqual=function(e,t,n){e===t&&v(e,t,n,"!==",h.notStrictEqual)},h.throws=function(e,t,n){x(!0,e,t,n)},h.doesNotThrow=function(e,t,n){x(!1,e,t,n)},h.ifError=function(e){if(e)throw e};var k=Object.keys||function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t}}).call(this,n(2))},function(e,t,n){(function(e,r){var i=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),u=r[n];n<a;u=r[++n])g(u)||!w(u)?o+=" "+u:o+=" "+s(u);return o},t.deprecate=function(n,i){if(y(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return function(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}};var a,o={};function s(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return m(i)||(i=l(e,i,r)),i}var a=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):d(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),k(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return h(n);if(0===o.length){if(S(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return h(n)}var c,w="",_=!1,R=["{","}"];return p(n)&&(_=!0,R=["[","]"]),S(n)&&(w=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(w=" "+RegExp.prototype.toString.call(n)),x(n)&&(w=" "+Date.prototype.toUTCString.call(n)),k(n)&&(w=" "+h(n)),0!==o.length||_&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=_?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)C(t,String(o))?a.push(f(e,t,n,r,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(f(e,t,n,r,i,!0))})),a}(e,n,r,s,o):o.map((function(t){return f(e,n,r,s,t,_)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(c,w,R)):R[0]+w+R[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),C(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=g(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),y(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return"number"==typeof e}function m(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===_(e)}function w(e){return"object"==vn(e)&&null!==e}function x(e){return w(e)&&"[object Date]"===_(e)}function k(e){return w(e)&&("[object Error]"===_(e)||e instanceof Error)}function S(e){return"function"==typeof e}function _(e){return Object.prototype.toString.call(e)}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.debuglog=function(e){if(y(a)&&(a=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var n=r.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){};return o[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=d,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=m,t.isSymbol=function(e){return"symbol"==vn(e)},t.isUndefined=y,t.isRegExp=b,t.isObject=w,t.isDate=x,t.isError=k,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==vn(e)||void 0===e},t.isBuffer=n(52),t.log=function(){},t.inherits=n(4),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,n(2),n(3))},function(e,t,n){e.exports=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{a=a+(i=i+t[r++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},function(e,t,n){var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},function(e,t,n){e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(bn(this,e),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return xn(e,[{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var t=this.oldCache.get(e);return this._set(e,t),t}}},{key:"set",value:function(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}},{key:"has",value:function(e){return this.cache.has(e)||this.oldCache.has(e)}},{key:"peek",value:function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=zn(this),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=In(n.value,1),i=r[0],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=zn(this),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=In(n.value,2),i=r[1],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=zn(this.cache),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,r;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:i=zn(this.oldCache),e.prev=18,i.s();case 20:if((a=i.n()).done){e.next=29;break}if(o=a.value,s=In(o,1),u=s[0],e.t1=this.cache.has(u),e.t1){e.next=27;break}return e.next=27,o;case 27:e.next=20;break;case 29:e.next=34;break;case 31:e.prev=31,e.t2=e.catch(18),i.e(e.t2);case 34:return e.prev=34,i.f(),e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[1,11,14,17],[18,31,34,37]])}))},{key:"size",get:function(){var e,t=0,n=zn(this.oldCache.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value;this.cache.has(r)||t++}}catch(e){n.e(e)}finally{n.f()}return this._size+t}}]),e}()},function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function i(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var a={},o={};function s(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=c(e,(0|e)<0?-1:0,!0),i&&(o[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=c(e,e<0?-1:0,!1),i&&(a[e]=n),n)}function u(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(e>=d)return S}else{if(e<=-g)return _;if(e+1>=g)return k}return e<0?u(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=s,r.fromNumber=u,r.fromBits=c;var l=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var i=u(l(n,8)),a=m,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+s),n);if(s<8){var f=u(l(n,s));a=a.mul(f).add(u(c))}else a=(a=a.mul(i)).add(u(c))}return a.unsigned=t,a}function f(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?h(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=h,r.fromValue=f;var p=4294967296,d=p*p,g=d/2,v=s(1<<24),m=s(0);r.ZERO=m;var y=s(0,!0);r.UZERO=y;var b=s(1);r.ONE=b;var w=s(1,!0);r.UONE=w;var x=s(-1);r.NEG_ONE=x;var k=c(-1,2147483647,!1);r.MAX_VALUE=k;var S=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=S;var _=c(0,-2147483648,!1);r.MIN_VALUE=_;var C=r.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=u(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=u(l(e,6),this.unsigned),a=this,o="";;){var s=a.div(i),c=(a.sub(s.mul(i)).toInt()>>>0).toString(e);if((a=s).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return i(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(i(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(b)},C.neg=C.negate,C.add=function(e){i(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,a=65535&this.low,o=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=0,h=0,p=0,d=0;return p+=(d+=a+(65535&e.low))>>>16,h+=(p+=r+u)>>>16,l+=(h+=n+s)>>>16,l+=t+o,c((p&=65535)<<16|(d&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},C.subtract=function(e){return i(e)||(e=f(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return m;if(i(e)||(e=f(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(_))return e.isOdd()?_:m;if(e.eq(_))return this.isOdd()?_:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return u(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,a=this.low>>>16,o=65535&this.low,s=e.high>>>16,l=65535&e.high,h=e.low>>>16,p=65535&e.low,d=0,g=0,y=0,b=0;return y+=(b+=o*p)>>>16,g+=(y+=a*p)>>>16,y&=65535,g+=(y+=o*h)>>>16,d+=(g+=r*p)>>>16,g&=65535,d+=(g+=a*h)>>>16,g&=65535,d+=(g+=o*l)>>>16,d+=t*p+r*h+a*l+o*s,c((y&=65535)<<16|(b&=65535),(d&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(i(e)||(e=f(e)),e.isZero())throw Error("division by zero");var t,r,a;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return w;a=y}else{if(this.eq(_))return e.eq(b)||e.eq(x)?_:e.eq(_)?b:(t=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?b:x:(r=this.sub(e.mul(t)),a=t.add(r.div(e)));if(e.eq(_))return this.unsigned?y:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=m}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),s=o<=48?1:l(2,o-48),h=u(t),p=h.mul(e);p.isNegative()||p.gt(r);)p=(h=u(t-=s,this.unsigned)).mul(e);h.isZero()&&(h=b),a=a.add(h),r=r.sub(p)}return a},C.div=C.divide,C.modulo=function(e){return i(e)||(e=f(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return c(~this.low,~this.high,this.unsigned)},C.and=function(e){return i(e)||(e=f(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return i(e)||(e=f(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return i(e)||(e=f(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){var r=n(87),i=n(94),a=n(97);function o(e){var t=r.parse(e),n=t.protocol,o=t.pathname;return"file:"===n?new a(unescape(o)):new i(e)}e.exports={LocalFile:a,RemoteFile:i,fromUrl:o,open:function(e,t,n){if(n)return n;if(e)return o(e);if(t)return new a(t);throw new Error("no url, path, or filehandle provided, cannot open")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__";function i(e){if("function"!=typeof e)throw new TypeError("Argument to promisify must be a function");var t=e[r],n=i.Promise||Promise;if("function"!=typeof n)throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var r=this,i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return new n((function(n,i){a.push((function(e){if(e)return i(e);for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];if(1===a.length||!t)return n(a[0]);var s={};a.forEach((function(e,n){var r=t[n];r&&(s[r]=e)})),n(s)})),e.call.apply(e,[r].concat(a))}))}}i.argumentNames=r,i.Promise=void 0,t.promisify=i},function(e,t,n){var r=n(18),i=n(99),a=n(100);e.exports={CramFile:r,IndexedCramFile:i,CraiIndex:a}},function(e,t,n){(function(t){var r=n(20),i=n(61),a=n(30),o=n(0),s=o.CramUnimplementedError,u=o.CramMalformedError,c=n(62),l=n(66),h=l.cramFileDefinition,f=l.getSectionParsers,p=n(71),d=n(33).open,g=n(8),v=g.parseItem,m=g.tinyMemoize,y=n(98).parseHeaderText,b=function(){function e(t){bn(this,e),this.file=d(t.url,t.path,t.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=t.seqFetch,this.options={checkSequenceMD5:!1!==t.checkSequenceMD5,cacheSize:void 0!==t.cacheSize?t.cacheSize:2e4},this.featureCache=new a({maxSize:this.options.cacheSize})}var n,o,l,g,m,b,w,x,k;return xn(e,[{key:"toString",value:function(){return this.file.filename?this.file.filename:this.file.url?this.file.url:"(cram file)"}},{key:"read",value:function(e,t,n,r){return this.file.read(e,t,n,r)}},{key:"stat",value:function(){return this.file.stat()}},{key:"getDefinition",value:(k=yn(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.allocUnsafe(h.maxLength),e.next=3,this.file.read(n,0,h.maxLength,0);case 3:if(2===(r=h.parser.parse(n).result).majorVersion||3===r.majorVersion){e.next=6;break}throw new s("CRAM version ".concat(r.majorVersion," not supported"));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"getSamHeader",value:(x=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContainerById(0);case 2:if(t=e.sent){e.next=5;break}throw new u("file contains no containers");case 5:return e.next=7,t.getFirstBlock();case 7:return n=e.sent,r=n.content,i=r.readInt32LE(0),a=r.toString("utf8",4,4+i),e.abrupt("return",y(a));case 12:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"getSectionParsers",value:(w=yn(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDefinition();case 2:return t=e.sent,n=t.majorVersion,e.abrupt("return",f(n));case 5:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"getContainerById",value:(b=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return n=e.sent,r=n.cramFileDefinition.maxLength,e.next=6,this.file.stat();case 6:i=e.sent,a=i.size,o=n.cramContainerHeader1,c=0;case 10:if(!(c<=t)){e.next=35;break}if(!(r+o.maxLength+8>=a)){e.next=13;break}return e.abrupt("return");case 13:return s=this.getContainerAtPosition(r),e.next=16,s.getHeader();case 16:if(l=e.sent){e.next=19;break}throw new u("container ".concat(t," not found in file"));case 19:if(0!==c){e.next=31;break}r=l._endPosition,h=0;case 22:if(!(h<l.numBlocks)){e.next=29;break}return e.next=25,this.readBlock(r);case 25:r=e.sent._endPosition;case 26:h+=1,e.next=22;break;case 29:e.next=32;break;case 31:r+=l._size+l.length;case 32:c+=1,e.next=10;break;case 35:return e.abrupt("return",s);case 36:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"checkCrc32",value:(m=yn(regeneratorRuntime.mark((function e(n,r,a,o){var s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.allocUnsafe(r),e.next=3,this.file.read(s,0,r,n);case 3:if((c=i.unsigned(s))===a){e.next=6;break}throw new u("crc mismatch in ".concat(o,": recorded CRC32 = ").concat(a,", but calculated CRC32 = ").concat(c));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return m.apply(this,arguments)})},{key:"containerCount",value:(g=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return t=e.sent,e.next=5,this.file.stat();case 5:n=e.sent,r=n.size,i=t.cramContainerHeader1,a=0,o=t.cramFileDefinition.maxLength;case 9:if(!(o+i.maxLength+8<r)){e.next=31;break}return e.next=12,this.getContainerAtPosition(o).getHeader();case 12:if(s=e.sent){e.next=15;break}return e.abrupt("break",31);case 15:if(0!==a){e.next=27;break}o=s._endPosition,u=0;case 18:if(!(u<s.numBlocks)){e.next=25;break}return e.next=21,this.readBlock(o);case 21:o=e.sent._endPosition;case 22:u+=1,e.next=18;break;case 25:e.next=28;break;case 27:o+=s._size+s.length;case 28:a+=1;case 29:e.next=9;break;case 31:return e.abrupt("return",a);case 32:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"getContainerAtPosition",value:function(e){return new p(this,e)}},{key:"readBlockHeader",value:(l=yn(regeneratorRuntime.mark((function e(n){var r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return r=e.sent,i=r.cramBlockHeader,e.next=6,this.file.stat();case 6:if(a=e.sent,o=a.size,!(n+i.maxLength>=o)){e.next=10;break}return e.abrupt("return");case 10:return s=t.allocUnsafe(i.maxLength),e.next=13,this.file.read(s,0,i.maxLength,n);case 13:return e.abrupt("return",v(s,i.parser,0,n));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"_parseSection",value:(o=yn(regeneratorRuntime.mark((function e(n,r){var i,a,o,s,c,l,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=h.length>2&&void 0!==h[2]?h[2]:n.maxLength,!(a=h.length>3?h[3]:void 0)){e.next=6;break}o=a,e.next=15;break;case 6:return e.next=8,this.file.stat();case 8:if(s=e.sent,c=s.size,!(r+i>=c)){e.next=12;break}return e.abrupt("return");case 12:return o=t.allocUnsafe(i),e.next=15,this.file.read(o,0,i,r);case 15:if((l=v(o,n.parser,0,r))._size===i){e.next=18;break}throw new u("section read error: requested size ".concat(i," does not equal parsed size ").concat(l._size));case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"_uncompress",value:function(e,t,n){if("gzip"===e)r.gunzipSync(t).copy(n);else{if("rans"!==e)throw new s("".concat(e," decompression not yet implemented"));c.uncompress(t,n)}}},{key:"readBlock",value:(n=yn(regeneratorRuntime.mark((function e(n){var r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDefinition();case 2:return r=e.sent,i=r.majorVersion,e.next=6,this.getSectionParsers();case 6:return a=e.sent,e.next=9,this.readBlockHeader(n);case 9:if(o=e.sent,s=o._endPosition,o.contentPosition=o._endPosition,u=t.allocUnsafe(o.uncompressedSize),"raw"===o.compressionMethod){e.next=20;break}return c=t.allocUnsafe(o.compressedSize),e.next=17,this.read(c,0,o.compressedSize,s);case 17:this._uncompress(o.compressionMethod,c,u),e.next=22;break;case 20:return e.next=22,this.read(u,0,o.uncompressedSize,s);case 22:if(o.content=u,!(i>=3)){e.next=35;break}return e.next=25,this._parseSection(a.cramBlockCrc32,s+o.compressedSize);case 25:if(l=e.sent,o.crc32=l.crc32,e.t0=this.validateChecksums,!e.t0){e.next=31;break}return e.next=31,this.checkCrc32(n,o._size+o.compressedSize,o.crc32,"block data");case 31:o._endPosition=l._endPosition,o._size=o.compressedSize+a.cramBlockCrc32.maxLength,e.next=36;break;case 35:o._endPosition=s+o.compressedSize,o._size=o.compressedSize;case 36:return e.abrupt("return",o);case 37:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),e}();"getDefinition getSectionParsers getSamHeader".split(" ").forEach((function(e){return m(b,e)})),e.exports=b}).call(this,n(1).Buffer)},function(e,t,n){t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=c(e),r=n[0],o=n[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),u=0,l=o>0?r-4:r,h=0;h<l;h+=4)t=i[e.charCodeAt(h)]<<18|i[e.charCodeAt(h+1)]<<12|i[e.charCodeAt(h+2)]<<6|i[e.charCodeAt(h+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===o&&(t=i[e.charCodeAt(h)]<<2|i[e.charCodeAt(h+1)]>>4,s[u++]=255&t),1===o&&(t=i[e.charCodeAt(h)]<<10|i[e.charCodeAt(h+1)]<<4|i[e.charCodeAt(h+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(l(e,o,o+16383>s?s:o+16383));return 1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=e[t+h];for(h+=f,a=p&(1<<-l)-1,p>>=-l,l+=s;l>0;a=256*a+e[t+h],h+=f,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+h],h+=f,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=c}return(p?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=l?(s=0,o=l):o+h>=1?(s=(t*u-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+p]=255&o,p+=d,o/=256,c-=8);e[n+p-d]|=128*g}},function(e,t,n){e.exports=i;var r=n(14).EventEmitter;function i(){r.call(this)}n(4)(i,r),i.Readable=n(15),i.Writable=n(47),i.Duplex=n(48),i.Transform=n(49),i.PassThrough=n(50),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",u));var o=!1;function s(){o||(o=!0,e.end())}function u(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",c),e.on("error",c),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e}},function(e,t){},function(e,t,n){var r=n(10).Buffer,i=n(42);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i=r.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=i,n=o,a.data.copy(t,n),o+=a.data.length,a=a.next;return i},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(44),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(2))},function(e,t,n){(function(e,t){!function(e,n){if(!e.setImmediate){var r,i,a,o,s,u=1,c={},l=!1,h=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&d(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){d(e.data)},r=function(e){a.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(e){var t=h.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(d,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[u]=i,r(u),u++},f.clearImmediate=p}function p(e){delete c[e]}function d(e){if(l)setTimeout(d,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(2),n(3))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(2))},function(e,t,n){e.exports=a;var r=n(25),i=n(7);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}i.inherits=n(4),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(16)},function(e,t,n){e.exports=n(5)},function(e,t,n){e.exports=n(15).Transform},function(e,t,n){e.exports=n(15).PassThrough},function(e,t,n){(function(e,r){var i=n(26),a=n(53),o=n(54),s=n(57),u=n(60);for(var c in u)t[c]=u[c];function l(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,l.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?o.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||s.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},l.prototype.write=function(e,t,n,r,i,a,o){return this._write(!0,e,t,n,r,i,a,o)},l.prototype.writeSync=function(e,t,n,r,i,a,o){return this._write(!1,e,t,n,r,i,a,o)},l.prototype._write=function(n,a,o,s,u,c,l,h){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==t.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==t.Z_NO_FLUSH&&a!==t.Z_PARTIAL_FLUSH&&a!==t.Z_SYNC_FLUSH&&a!==t.Z_FULL_FLUSH&&a!==t.Z_FINISH&&a!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==o&&(o=e.alloc(0),u=0,s=0),this.strm.avail_in=u,this.strm.input=o,this.strm.next_in=s,this.strm.avail_out=h,this.strm.output=c,this.strm.next_out=l,this.flush=a,!n)return this._process(),this._checkError()?this._afterSync():void 0;var f=this;return r.nextTick((function(){f._process(),f._after()})),this},l.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},l.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=s.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},l.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},l.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},l.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},l.prototype.init=function(e,n,r,a,o){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(e>=8&&e<=15,"invalid windowBits"),i(n>=-1&&n<=9,"invalid compression level"),i(r>=1&&r<=9,"invalid memlevel"),i(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,r,a,o),this._setDictionary()},l.prototype.params=function(){throw new Error("deflateParams Not supported")},l.prototype.reset=function(){this._reset(),this._setDictionary()},l.prototype._init=function(e,n,r,i,u){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=i,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=u,this.write_in_progress=!1,this.init_done=!0},l.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},l.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=o.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=s.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=l}).call(this,n(1).Buffer,n(3))},function(e,t){e.exports=function(e){return e&&"object"==vn(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){var r,i=n(11),a=n(55),o=n(28),s=n(29),u=n(56),c=-2,l=258,h=262,f=103,p=113,d=666;function g(e,t){return e.msg=u[t],t}function v(e){return(e<<1)-(e>4?9:0)}function m(e){for(var t=e.length;--t>=0;)e[t]=0}function y(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function b(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,y(e.strm)}function w(e,t){e.pending_buf[e.pending++]=t}function x(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function k(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-h?e.strstart-(e.w_size-h):0,c=e.window,f=e.w_mask,p=e.prev,d=e.strstart+l,g=c[a+o-1],v=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+o]===v&&c[n+o-1]===g&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<d);if(r=l-(d-a),a=d-l,r>o){if(e.match_start=t,o=r,r>=s)break;g=c[a+o-1],v=c[a+o]}}}while((t=p[t&f])>u&&0!=--i);return o<=e.lookahead?o:e.lookahead}function S(e){var t,n,r,a,u,c,l,f,p,d,g=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=g+(g-h)){i.arraySet(e.window,e.window,g,g,0),e.match_start-=g,e.strstart-=g,e.block_start-=g,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=g?r-g:0}while(--n);t=n=g;do{r=e.prev[--t],e.prev[t]=r>=g?r-g:0}while(--n);a+=g}if(0===e.strm.avail_in)break;if(c=e.strm,l=e.window,f=e.strstart+e.lookahead,p=a,d=void 0,(d=c.avail_in)>p&&(d=p),n=0===d?0:(c.avail_in-=d,i.arraySet(l,c.input,c.next_in,d,f),1===c.state.wrap?c.adler=o(c.adler,l,d,f):2===c.state.wrap&&(c.adler=s(c.adler,l,d,f)),c.next_in+=d,c.total_in+=d,d),e.lookahead+=n,e.lookahead+e.insert>=3)for(u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+3-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<h&&0!==e.strm.avail_in)}function _(e,t){for(var n,r;;){if(e.lookahead<h){if(S(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-h&&(e.match_length=k(e,n)),e.match_length>=3)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function C(e,t){for(var n,r,i;;){if(e.lookahead<h){if(S(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-h&&(e.match_length=k(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function R(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function E(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function A(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:p,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):g(e,c)}function T(e){var t,n=A(e);return 0===n&&((t=e.state).window_size=2*t.w_size,m(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function M(e,t,n,r,a,o){if(!e)return c;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>9||8!==n||r<8||r>15||t<0||t>9||o<0||o>4)return g(e,c);8===r&&(r=9);var u=new E;return e.state=u,u.strm=e,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=o,u.method=n,T(e)}r=[new R(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(S(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-h&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)})),new R(4,4,8,4,_),new R(4,5,16,8,_),new R(4,6,32,32,_),new R(4,4,16,16,C),new R(8,16,32,32,C),new R(8,16,128,128,C),new R(8,32,128,256,C),new R(32,128,258,1024,C),new R(32,258,258,4096,C)],t.deflateInit=function(e,t){return M(e,t,8,15,8,0)},t.deflateInit2=M,t.deflateReset=T,t.deflateResetKeep=A,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},t.deflate=function(e,t){var n,i,o,u;if(!e||!e.state||t>5||t<0)return e?g(e,c):c;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===d&&4!==t)return g(e,0===e.avail_out?-5:c);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,w(i,31),w(i,139),w(i,8),i.gzhead?(w(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),w(i,255&i.gzhead.time),w(i,i.gzhead.time>>8&255),w(i,i.gzhead.time>>16&255),w(i,i.gzhead.time>>24&255),w(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),w(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(w(i,255&i.gzhead.extra.length),w(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(w(i,0),w(i,0),w(i,0),w(i,0),w(i,0),w(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),w(i,3),i.status=p);else{var h=8+(i.w_bits-8<<4)<<8;h|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=p,x(i,h),0!==i.strstart&&(x(i,e.adler>>>16),x(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),y(e),o=i.pending,i.pending!==i.pending_buf_size));)w(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),y(e),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,w(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),y(e),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,w(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.status=f)}else i.status=f;if(i.status===f&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&y(e),i.pending+2<=i.pending_buf_size&&(w(i,255&e.adler),w(i,e.adler>>8&255),e.adler=0,i.status=p)):i.status=p),0!==i.pending){if(y(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&v(t)<=v(n)&&4!==t)return g(e,-5);if(i.status===d&&0!==e.avail_in)return g(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&i.status!==d){var k=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(S(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=l){if(S(e),e.lookahead<=l&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+l;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=l-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==k&&4!==k||(i.status=d),1===k||3===k)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===k&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),y(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(w(i,255&e.adler),w(i,e.adler>>8&255),w(i,e.adler>>16&255),w(i,e.adler>>24&255),w(i,255&e.total_in),w(i,e.total_in>>8&255),w(i,e.total_in>>16&255),w(i,e.total_in>>24&255)):(x(i,e.adler>>>16),x(i,65535&e.adler)),y(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==f&&t!==p&&t!==d?g(e,c):(e.state=null,t===p?g(e,-3):0):c},t.deflateSetDictionary=function(e,t){var n,r,a,s,u,l,h,f,p=t.length;if(!e||!e.state)return c;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return c;for(1===s&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),u=e.avail_in,l=e.next_in,h=e.input,e.avail_in=p,e.next_in=0,e.input=t,S(n);n.lookahead>=3;){r=n.strstart,a=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=2,S(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=l,e.input=h,e.avail_in=u,n.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){var r=n(11);function i(e){for(var t=e.length;--t>=0;)e[t]=0}var a=256,o=286,s=30,u=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);i(p);var d=new Array(60);i(d);var g=new Array(512);i(g);var v=new Array(256);i(v);var m=new Array(29);i(m);var y,b,w,x=new Array(s);function k(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function S(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function _(e){return e<256?g[e]:g[256+(e>>>7)]}function C(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function R(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,C(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function E(e,t,n){R(e,n[2*t],n[2*t+1])}function A(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function T(e,t,n){var r,i,a=new Array(16),o=0;for(r=1;r<=u;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=A(a[s]++,s))}}function M(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function L(e){e.bi_valid>8?C(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function I(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function P(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&I(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!I(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function N(e,t,n){var r,i,o,s,u=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],i=e.pending_buf[e.l_buf+u],u++,0===r?E(e,i,t):(E(e,(o=v[i])+a+1,t),0!==(s=c[o])&&R(e,i-=m[o],s),E(e,o=_(--r),n),0!==(s=l[o])&&R(e,r-=x[o],s))}while(u<e.last_lit);E(e,256,t)}function O(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==a[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)P(e,a,n);i=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,P(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,o,s,c=t.dyn_tree,l=t.max_code,h=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,g=t.stat_desc.max_length,v=0;for(a=0;a<=u;a++)e.bl_count[a]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(a=c[2*c[2*(r=e.heap[n])+1]+1]+1)>g&&(a=g,v++),c[2*r+1]=a,r>l||(e.bl_count[a]++,o=0,r>=d&&(o=p[r-d]),s=c[2*r],e.opt_len+=s*(a+o),f&&(e.static_len+=s*(h[2*r+1]+o)));if(0!==v){do{for(a=g-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[g]--,v-=2}while(v>0);for(a=g;0!==a;a--)for(r=e.bl_count[a];0!==r;)(i=e.heap[--n])>l||(c[2*i+1]!==a&&(e.opt_len+=(a-c[2*i+1])*c[2*i],c[2*i+1]=a),r--)}}(e,t),T(a,l,e.bl_count)}function F(e,t,n){var r,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<u&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4))}function D(e,t,n){var r,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<u&&i===o)){if(s<c)do{E(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(E(e,i,e.bl_tree),s--),E(e,16,e.bl_tree),R(e,s-3,2)):s<=10?(E(e,17,e.bl_tree),R(e,s-3,3)):(E(e,18,e.bl_tree),R(e,s-11,7));s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4)}}i(x);var B=!1;function z(e,t,n,i){R(e,0+(i?1:0),3),function(e,t,n,i){L(e),C(e,n),C(e,~n),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}t._tr_init=function(e){B||(function(){var e,t,n,r,i,a=new Array(16);for(n=0,r=0;r<28;r++)for(m[r]=n,e=0;e<1<<c[r];e++)v[n++]=r;for(v[n-1]=r,i=0,r=0;r<16;r++)for(x[r]=i,e=0;e<1<<l[r];e++)g[i++]=r;for(i>>=7;r<s;r++)for(x[r]=i<<7,e=0;e<1<<l[r]-7;e++)g[256+i++]=r;for(t=0;t<=u;t++)a[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,a[8]++;for(;e<=255;)p[2*e+1]=9,e++,a[9]++;for(;e<=279;)p[2*e+1]=7,e++,a[7]++;for(;e<=287;)p[2*e+1]=8,e++,a[8]++;for(T(p,287,a),e=0;e<s;e++)d[2*e+1]=5,d[2*e]=A(e,5);y=new k(p,c,257,o,u),b=new k(d,l,0,s,u),w=new k(new Array(0),h,0,19,7)}(),B=!0),e.l_desc=new S(e.dyn_ltree,y),e.d_desc=new S(e.dyn_dtree,b),e.bl_desc=new S(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,M(e)},t._tr_stored_block=z,t._tr_flush_block=function(e,t,n,r){var i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),O(e,e.l_desc),O(e,e.d_desc),s=function(e){var t;for(F(e,e.dyn_ltree,e.l_desc.max_code),F(e,e.dyn_dtree,e.d_desc.max_code),O(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?z(e,t,n,r):4===e.strategy||o===i?(R(e,2+(r?1:0),3),N(e,p,d)):(R(e,4+(r?1:0),3),function(e,t,n,r){var i;for(R(e,t-257,5),R(e,n-1,5),R(e,r-4,4),i=0;i<r;i++)R(e,e.bl_tree[2*f[i]+1],3);D(e,e.dyn_ltree,t-1),D(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),N(e,e.dyn_ltree,e.dyn_dtree)),M(e),r&&L(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(v[n]+a+1)]++,e.dyn_dtree[2*_(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){R(e,2,3),E(e,256,p),function(e){16===e.bi_valid?(C(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){var r=n(11),i=n(28),a=n(29),o=n(58),s=n(59),u=-2,c=12,l=30;function h(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function f(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):u}function d(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,p(e)):u}function g(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?u:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,d(e))):u}function v(e,t){var n,r;return e?(r=new f,e.state=r,r.window=null,0!==(n=g(e,t))&&(e.state=null),n):u}var m,y,b=!0;function w(e){if(b){var t;for(m=new r.Buf32(512),y=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,y,0,e.work,{bits:5}),b=!1}e.lencode=m,e.lenbits=9,e.distcode=y,e.distbits=5}function x(e,t,n,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),r.arraySet(o.window,t,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=d,t.inflateReset2=g,t.inflateResetKeep=p,t.inflateInit=function(e){return v(e,15)},t.inflateInit2=v,t.inflate=function(e,t){var n,f,p,d,g,v,m,y,b,k,S,_,C,R,E,A,T,M,L,I,P,N,O,F,D=0,B=new r.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;(n=e.state).mode===c&&(n.mode=13),g=e.next_out,p=e.output,m=e.avail_out,d=e.next_in,f=e.input,v=e.avail_in,y=n.hold,b=n.bits,k=v,S=m,N=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}if(2&n.wrap&&35615===y){n.check=0,B[0]=255&y,B[1]=y>>>8&255,n.check=a(n.check,B,2,0),y=0,b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",n.mode=l;break}if(8!=(15&y)){e.msg="unknown compression method",n.mode=l;break}if(b-=4,P=8+(15&(y>>>=4)),0===n.wbits)n.wbits=P;else if(P>n.wbits){e.msg="invalid window size",n.mode=l;break}n.dmax=1<<P,e.adler=n.check=1,n.mode=512&y?10:c,y=0,b=0;break;case 2:for(;b<16;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}if(n.flags=y,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=l;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=l;break}n.head&&(n.head.text=y>>8&1),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,n.check=a(n.check,B,2,0)),y=0,b=0,n.mode=3;case 3:for(;b<32;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}n.head&&(n.head.time=y),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,B[2]=y>>>16&255,B[3]=y>>>24&255,n.check=a(n.check,B,4,0)),y=0,b=0,n.mode=4;case 4:for(;b<16;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}n.head&&(n.head.xflags=255&y,n.head.os=y>>8),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,n.check=a(n.check,B,2,0)),y=0,b=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}n.length=y,n.head&&(n.head.extra_len=y),512&n.flags&&(B[0]=255&y,B[1]=y>>>8&255,n.check=a(n.check,B,2,0)),y=0,b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((_=n.length)>v&&(_=v),_&&(n.head&&(P=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,d,_,P)),512&n.flags&&(n.check=a(n.check,f,_,d)),v-=_,d+=_,n.length-=_),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===v)break e;_=0;do{P=f[d+_++],n.head&&P&&n.length<65536&&(n.head.name+=String.fromCharCode(P))}while(P&&_<v);if(512&n.flags&&(n.check=a(n.check,f,_,d)),v-=_,d+=_,P)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===v)break e;_=0;do{P=f[d+_++],n.head&&P&&n.length<65536&&(n.head.comment+=String.fromCharCode(P))}while(P&&_<v);if(512&n.flags&&(n.check=a(n.check,f,_,d)),v-=_,d+=_,P)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}if(y!==(65535&n.check)){e.msg="header crc mismatch",n.mode=l;break}y=0,b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=c;break;case 10:for(;b<32;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}e.adler=n.check=h(y),y=0,b=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=g,e.avail_out=m,e.next_in=d,e.avail_in=v,n.hold=y,n.bits=b,2;e.adler=n.check=1,n.mode=c;case c:if(5===t||6===t)break e;case 13:if(n.last){y>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}switch(n.last=1&y,b-=1,3&(y>>>=1)){case 0:n.mode=14;break;case 1:if(w(n),n.mode=20,6===t){y>>>=2,b-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=l}y>>>=2,b-=2;break;case 14:for(y>>>=7&b,b-=7&b;b<32;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",n.mode=l;break}if(n.length=65535&y,y=0,b=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(_=n.length){if(_>v&&(_=v),_>m&&(_=m),0===_)break e;r.arraySet(p,f,d,_,g),v-=_,d+=_,m-=_,g+=_,n.length-=_;break}n.mode=c;break;case 17:for(;b<14;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}if(n.nlen=257+(31&y),y>>>=5,b-=5,n.ndist=1+(31&y),y>>>=5,b-=5,n.ncode=4+(15&y),y>>>=4,b-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=l;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}n.lens[z[n.have++]]=7&y,y>>>=3,b-=3}for(;n.have<19;)n.lens[z[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},N=s(0,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,N){e.msg="invalid code lengths set",n.mode=l;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;A=(D=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,T=65535&D,!((E=D>>>24)<=b);){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}if(T<16)y>>>=E,b-=E,n.lens[n.have++]=T;else{if(16===T){for(F=E+2;b<F;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}if(y>>>=E,b-=E,0===n.have){e.msg="invalid bit length repeat",n.mode=l;break}P=n.lens[n.have-1],_=3+(3&y),y>>>=2,b-=2}else if(17===T){for(F=E+3;b<F;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}b-=E,P=0,_=3+(7&(y>>>=E)),y>>>=3,b-=3}else{for(F=E+7;b<F;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}b-=E,P=0,_=11+(127&(y>>>=E)),y>>>=7,b-=7}if(n.have+_>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=l;break}for(;_--;)n.lens[n.have++]=P}}if(n.mode===l)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=l;break}if(n.lenbits=9,O={bits:n.lenbits},N=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,N){e.msg="invalid literal/lengths set",n.mode=l;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},N=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,N){e.msg="invalid distances set",n.mode=l;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(v>=6&&m>=258){e.next_out=g,e.avail_out=m,e.next_in=d,e.avail_in=v,n.hold=y,n.bits=b,o(e,S),g=e.next_out,p=e.output,m=e.avail_out,d=e.next_in,f=e.input,v=e.avail_in,y=n.hold,b=n.bits,n.mode===c&&(n.back=-1);break}for(n.back=0;A=(D=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,T=65535&D,!((E=D>>>24)<=b);){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}if(A&&0==(240&A)){for(M=E,L=A,I=T;A=(D=n.lencode[I+((y&(1<<M+L)-1)>>M)])>>>16&255,T=65535&D,!(M+(E=D>>>24)<=b);){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}y>>>=M,b-=M,n.back+=M}if(y>>>=E,b-=E,n.back+=E,n.length=T,0===A){n.mode=26;break}if(32&A){n.back=-1,n.mode=c;break}if(64&A){e.msg="invalid literal/length code",n.mode=l;break}n.extra=15&A,n.mode=22;case 22:if(n.extra){for(F=n.extra;b<F;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}n.length+=y&(1<<n.extra)-1,y>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;A=(D=n.distcode[y&(1<<n.distbits)-1])>>>16&255,T=65535&D,!((E=D>>>24)<=b);){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}if(0==(240&A)){for(M=E,L=A,I=T;A=(D=n.distcode[I+((y&(1<<M+L)-1)>>M)])>>>16&255,T=65535&D,!(M+(E=D>>>24)<=b);){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}y>>>=M,b-=M,n.back+=M}if(y>>>=E,b-=E,n.back+=E,64&A){e.msg="invalid distance code",n.mode=l;break}n.offset=T,n.extra=15&A,n.mode=24;case 24:if(n.extra){for(F=n.extra;b<F;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}n.offset+=y&(1<<n.extra)-1,y>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=l;break}n.mode=25;case 25:if(0===m)break e;if(_=S-m,n.offset>_){if((_=n.offset-_)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=l;break}_>n.wnext?(_-=n.wnext,C=n.wsize-_):C=n.wnext-_,_>n.length&&(_=n.length),R=n.window}else R=p,C=g-n.offset,_=n.length;_>m&&(_=m),m-=_,n.length-=_;do{p[g++]=R[C++]}while(--_);0===n.length&&(n.mode=21);break;case 26:if(0===m)break e;p[g++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===v)break e;v--,y|=f[d++]<<b,b+=8}if(S-=m,e.total_out+=S,n.total+=S,S&&(e.adler=n.check=n.flags?a(n.check,p,S,g-S):i(n.check,p,S,g-S)),S=m,(n.flags?y:h(y))!==n.check){e.msg="incorrect data check",n.mode=l;break}y=0,b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===v)break e;v--,y+=f[d++]<<b,b+=8}if(y!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=l;break}y=0,b=0}n.mode=29;case 29:N=1;break e;case l:N=-3;break e;case 31:return-4;case 32:default:return u}return e.next_out=g,e.avail_out=m,e.next_in=d,e.avail_in=v,n.hold=y,n.bits=b,(n.wsize||S!==e.avail_out&&n.mode<l&&(n.mode<27||4!==t))&&x(e,e.output,e.next_out,S-e.avail_out)?(n.mode=31,-4):(k-=e.avail_in,S-=e.avail_out,e.total_in+=k,e.total_out+=S,n.total+=S,n.wrap&&S&&(e.adler=n.check=n.flags?a(n.check,p,S,e.next_out-S):i(n.check,p,S,e.next_out-S)),e.data_type=n.bits+(n.last?64:0)+(n.mode===c?128:0)+(20===n.mode||15===n.mode?256:0),(0===k&&0===S||4===t)&&0===N&&(N=-5),N)},t.inflateEnd=function(e){if(!e||!e.state)return u;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?u:(n.head=t,t.done=!1,0):u},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?u:11===n.mode&&i(1,t,r,0)!==n.check?-3:x(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):u},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){e.exports=function(e,t){var n,r,i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w,x,k,S,_,C,R;n=e.state,r=e.next_in,C=e.input,i=r+(e.avail_in-5),a=e.next_out,R=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,h=n.wnext,f=n.window,p=n.hold,d=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{d<15&&(p+=C[r++]<<d,d+=8,p+=C[r++]<<d,d+=8),b=g[p&m];t:for(;;){if(p>>>=w=b>>>24,d-=w,0==(w=b>>>16&255))R[a++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=g[(65535&b)+(p&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}x=65535&b,(w&=15)&&(d<w&&(p+=C[r++]<<d,d+=8),x+=p&(1<<w)-1,p>>>=w,d-=w),d<15&&(p+=C[r++]<<d,d+=8,p+=C[r++]<<d,d+=8),b=v[p&y];n:for(;;){if(p>>>=w=b>>>24,d-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=v[(65535&b)+(p&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&b,d<(w&=15)&&(p+=C[r++]<<d,(d+=8)<w&&(p+=C[r++]<<d,d+=8)),(k+=p&(1<<w)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=w,d-=w,k>(w=a-o)){if((w=k-w)>l&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=0,_=f,0===h){if(S+=c-w,w<x){x-=w;do{R[a++]=f[S++]}while(--w);S=a-k,_=R}}else if(h<w){if(S+=c+h-w,(w-=h)<x){x-=w;do{R[a++]=f[S++]}while(--w);if(S=0,h<x){x-=w=h;do{R[a++]=f[S++]}while(--w);S=a-k,_=R}}}else if(S+=h-w,w<x){x-=w;do{R[a++]=f[S++]}while(--w);S=a-k,_=R}for(;x>2;)R[a++]=_[S++],R[a++]=_[S++],R[a++]=_[S++],x-=3;x&&(R[a++]=_[S++],x>1&&(R[a++]=_[S++]))}else{S=a-k;do{R[a++]=R[S++],R[a++]=R[S++],R[a++]=R[S++],x-=3}while(x>2);x&&(R[a++]=R[S++],x>1&&(R[a++]=R[S++]))}break}}break}}while(r<i&&a<s);r-=x=d>>3,p&=(1<<(d-=x<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=p,n.bits=d}},function(e,t,n){var r=n(11),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,c,l,h,f){var p,d,g,v,m,y,b,w,x,k=f.bits,S=0,_=0,C=0,R=0,E=0,A=0,T=0,M=0,L=0,I=0,P=null,N=0,O=new r.Buf16(16),F=new r.Buf16(16),D=null,B=0;for(S=0;S<=15;S++)O[S]=0;for(_=0;_<u;_++)O[t[n+_]]++;for(E=k,R=15;R>=1&&0===O[R];R--);if(E>R&&(E=R),0===R)return c[l++]=20971520,c[l++]=20971520,f.bits=1,0;for(C=1;C<R&&0===O[C];C++);for(E<C&&(E=C),M=1,S=1;S<=15;S++)if(M<<=1,(M-=O[S])<0)return-1;if(M>0&&(0===e||1!==R))return-1;for(F[1]=0,S=1;S<15;S++)F[S+1]=F[S]+O[S];for(_=0;_<u;_++)0!==t[n+_]&&(h[F[t[n+_]]++]=_);if(0===e?(P=D=h,y=19):1===e?(P=i,N-=257,D=a,B-=257,y=256):(P=o,D=s,y=-1),I=0,_=0,S=C,m=l,A=E,T=0,g=-1,v=(L=1<<E)-1,1===e&&L>852||2===e&&L>592)return 1;for(;;){b=S-T,h[_]<y?(w=0,x=h[_]):h[_]>y?(w=D[B+h[_]],x=P[N+h[_]]):(w=96,x=0),p=1<<S-T,C=d=1<<A;do{c[m+(I>>T)+(d-=p)]=b<<24|w<<16|x|0}while(0!==d);for(p=1<<S-1;I&p;)p>>=1;if(0!==p?(I&=p-1,I+=p):I=0,_++,0==--O[S]){if(S===R)break;S=t[n+h[_]]}if(S>E&&(I&v)!==g){for(0===T&&(T=E),m+=C,M=1<<(A=S-T);A+T<R&&!((M-=O[A+T])<=0);)A++,M<<=1;if(L+=1<<A,1===e&&L>852||2===e&&L>592)return 1;c[g=I&v]=E<<24|A<<16|m-l|0}}return 0!==I&&(c[m+I]=S-T<<24|64<<16|0),f.bits=E,0}},function(e,t,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){var r=n(1).Buffer,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function a(e){if(r.isBuffer(e))return e;var t="function"==typeof r.alloc&&"function"==typeof r.from;if("number"==typeof e)return t?r.alloc(e):new r(e);if("string"==typeof e)return t?r.from(e):new r(e);throw new Error("input must be buffer, number, or string, received "+vn(e))}function o(e,t){e=a(e),r.isBuffer(t)&&(t=t.readUInt32BE(0));for(var n=-1^~~t,o=0;o<e.length;o++)n=i[255&(n^e[o])]^n>>>8;return-1^n}function s(){return e=o.apply(null,arguments),(t=a(4)).writeInt32BE(e,0),t;var e,t}"undefined"!=typeof Int32Array&&(i=new Int32Array(i)),s.signed=function(){return o.apply(null,arguments)},s.unsigned=function(){return o.apply(null,arguments)>>>0},e.exports=s},function(e,t,n){(function(t){var r=n(0).CramMalformedError,i=n(12),a=n(63),o=n(64),s=n(65),u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;bn(this,e),this._buffer=t,this._position=n,this.length=t.length}return xn(e,[{key:"get",value:function(){var e=this._buffer[this._position];return this._position+=1,e}},{key:"getByte",value:function(){return this.get()}},{key:"getByteAt",value:function(e){return this._buffer[e]}},{key:"position",value:function(){return this._position}},{key:"put",value:function(e){return this._buffer[this._position]=e,this._position+=1,e}},{key:"putAt",value:function(e,t){return this._buffer[e]=t,t}},{key:"setPosition",value:function(e){return this._position=e,e}},{key:"getInt",value:function(){var e=this._buffer.readInt32LE(this._position);return this._position+=4,e}},{key:"remaining",value:function(){return this._buffer.length-this._position}}]),e}();e.exports={uncompress:function(e,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===e.length)return n.fill(0),n;var l=new u(e,c),h=l.get();if(0!==h&&1!==h)throw new r("Invalid rANS order ".concat(h));if(l.getInt()!==l.remaining()-4)throw new r("Incorrect input length.");var f=l.getInt(),p=new u(n||t.allocUnsafe(f));if(p.length<f)throw new r("Output buffer too small to fit ".concat(f," bytes."));switch(h){case 0:return function(e,t){for(var n=new i.AriDecoder,r=new Array(256),s=0;s<r.length;s+=1)r[s]=new i.Symbol;return a.readStatsO0(e,n,r),o.uncompress(e,n,r,t),t}(l,p);case 1:return function(e,t){for(var n=new Array(256),r=0;r<n.length;r+=1)n[r]=new i.AriDecoder;for(var o=new Array(256),u=0;u<o.length;u+=1){o[u]=new Array(256);for(var c=0;c<o[u].length;c+=1)o[u][c]=new i.Symbol}return a.readStatsO1(e,n,o),s.uncompress(e,t,n,o),t}(l,p);default:throw new r("Invalid rANS order: ".concat(h))}}}}).call(this,n(1).Buffer)},function(e,t,n){var r=n(0).CramMalformedError,i=n(13),a=n(12);function o(e){if(!e)throw new r("assertion failed")}e.exports={readStatsO0:function(e,t,n){var r=0,s=0,u=255&e.get();do{null==t.fc[u]&&(t.fc[u]=new a.FC),t.fc[u].F=255&e.get(),t.fc[u].F>=128&&(t.fc[u].F&=-129,t.fc[u].F=(127&t.fc[u].F)<<8|255&e.get()),t.fc[u].C=s,a.symbolInit(n[u],t.fc[u].C,t.fc[u].F),t.R||(t.R=new Array(i.TOTFREQ)),t.R.fill(u,s,s+t.fc[u].F),s+=t.fc[u].F,0===r&&u+1===(255&e.getByteAt(e.position()))?(u=255&e.get(),r=255&e.get()):0!==r?(r-=1,u+=1):u=255&e.get()}while(0!==u);o(s<i.TOTFREQ)},readStatsO1:function(e,t,n){var r=0,s=255&e.get();do{var u=0,c=0,l=255&e.get();null==t[s]&&(t[s]=new a.AriDecoder);do{null==t[s].fc[l]&&(t[s].fc[l]=new a.FC),t[s].fc[l].F=255&e.get(),t[s].fc[l].F>=128&&(t[s].fc[l].F&=-129,t[s].fc[l].F=(127&t[s].fc[l].F)<<8|255&e.get()),t[s].fc[l].C=c,0===t[s].fc[l].F&&(t[s].fc[l].F=i.TOTFREQ),null==n[s][l]&&(n[s][l]=new a.RansDecSymbol),a.symbolInit(n[s][l],t[s].fc[l].C,t[s].fc[l].F),null==t[s].R&&(t[s].R=new Array(i.TOTFREQ)),t[s].R.fill(l,c,c+t[s].fc[l].F),o((c+=t[s].fc[l].F)<=i.TOTFREQ),0===u&&l+1===(255&e.getByteAt(e.position()))?(l=255&e.get(),u=255&e.get()):0!==u?(u-=1,l+=1):l=255&e.get()}while(0!==l);0===r&&s+1===(255&e.getByteAt(e.position()))?(s=255&e.get(),r=255&e.get()):0!==r?(r-=1,s+=1):s=255&e.get()}while(0!==s)}}},function(e,t,n){var r=n(0).CramMalformedError,i=n(13),a=n(12);e.exports={uncompress:function(e,t,n,o){for(var s,u=e.getInt(),c=e.getInt(),l=e.getInt(),h=e.getInt(),f=o.remaining(),p=-4&f,d=0;d<p;d+=4){var g=t.R[a.get(u,i.TF_SHIFT)],v=t.R[a.get(c,i.TF_SHIFT)],m=t.R[a.get(l,i.TF_SHIFT)],y=t.R[a.get(h,i.TF_SHIFT)];o.putAt(d,g),o.putAt(d+1,v),o.putAt(d+2,m),o.putAt(d+3,y),u=a.advanceSymbolStep(u,n[255&g],i.TF_SHIFT),c=a.advanceSymbolStep(c,n[255&v],i.TF_SHIFT),l=a.advanceSymbolStep(l,n[255&m],i.TF_SHIFT),h=a.advanceSymbolStep(h,n[255&y],i.TF_SHIFT),u=a.renormalize(u,e),c=a.renormalize(c,e),l=a.renormalize(l,e),h=a.renormalize(h,e)}switch(o.setPosition(p),3&f){case 0:break;case 1:s=t.R[a.get(u,i.TF_SHIFT)],a.advanceSymbol(u,e,n[255&s],i.TF_SHIFT),o.put(s);break;case 2:s=t.R[a.get(u,i.TF_SHIFT)],a.advanceSymbol(u,e,n[255&s],i.TF_SHIFT),o.put(s),s=t.R[a.get(c,i.TF_SHIFT)],a.advanceSymbol(c,e,n[255&s],i.TF_SHIFT),o.put(s);break;case 3:s=t.R[a.get(u,i.TF_SHIFT)],a.advanceSymbol(u,e,n[255&s],i.TF_SHIFT),o.put(s),s=t.R[a.get(c,i.TF_SHIFT)],a.advanceSymbol(c,e,n[255&s],i.TF_SHIFT),o.put(s),s=t.R[a.get(l,i.TF_SHIFT)],a.advanceSymbol(l,e,n[255&s],i.TF_SHIFT),o.put(s);break;default:throw new r("invalid output size encountered during rANS decoding")}o.setPosition(0)}}},function(e,t,n){var r=n(13),i=n(12);e.exports={uncompress:function(e,t,n,a){for(var o=t.remaining(),s=e.getInt(),u=e.getInt(),c=e.getInt(),l=e.getInt(),h=o>>2,f=0,p=h,d=2*h,g=3*h,v=0,m=0,y=0,b=0;f<h;f+=1,p+=1,d+=1,g+=1){var w=255&n[v].R[i.get(s,r.TF_SHIFT)],x=255&n[m].R[i.get(u,r.TF_SHIFT)],k=255&n[y].R[i.get(c,r.TF_SHIFT)],S=255&n[b].R[i.get(l,r.TF_SHIFT)];t.putAt(f,w),t.putAt(p,x),t.putAt(d,k),t.putAt(g,S),s=i.advanceSymbolStep(s,a[v][w],r.TF_SHIFT),u=i.advanceSymbolStep(u,a[m][x],r.TF_SHIFT),c=i.advanceSymbolStep(c,a[y][k],r.TF_SHIFT),l=i.advanceSymbolStep(l,a[b][S],r.TF_SHIFT),s=i.renormalize(s,e),u=i.renormalize(u,e),c=i.renormalize(c,e),l=i.renormalize(l,e),v=w,m=x,y=k,b=S}for(;g<o;g+=1){var _=255&n[b].R[i.get(l,r.TF_SHIFT)];t.putAt(g,_),l=i.advanceSymbol(l,e,a[b][_],r.TF_SHIFT),b=_}}}},function(e,t,n){var r=n(67).Parser,i=(new r).itf8(),a={parser:(new r).string("magic",{length:4}).uint8("majorVersion").uint8("minorVersion").string("fileId",{length:20,stripNull:!0}),maxLength:26},o={parser:(new r).uint8("compressionMethod",{formatter:function(e){var t=["raw","gzip","bzip2","lzma","rans"][e];if(!t)throw new Error("compression method number ".concat(e," not implemented"));return t}}).uint8("contentType",{formatter:function(e){var t=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][e];if(!t)throw new Error("invalid block content type id ".concat(e));return t}}).itf8("contentId").itf8("compressedSize").itf8("uncompressedSize"),maxLength:17},s={parser:(new r).uint32("crc32"),maxLength:4},u=(new r).itf8("size").buffer("entries",{length:"size",formatter:function(e){function t(t,n){for(var r=e.toString("utf8",t,n),i=[],a=0;a<r.length;a+=3)i.push(r.substr(a,3));return i}var n,r=[],i=0;for(n=0;n<e.length;n+=1)e[n]||(r.push(t(i,n)),i=n+1);return n>i&&r.push(t(i,n)),r}}),c=(new r).uint8(null,{formatter:function(e){return!!e}}),l=(new r).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new r).string("key",{length:2,stripNull:!1}).choice("value",{tag:"key",choices:{MI:c,UI:c,PI:c,RN:c,AP:c,RR:c,SM:(new r).array(null,{type:"uint8",length:5}),TD:(new r).nest(null,{type:u,formatter:function(e){return e.entries}})}})});function h(e){var t={};return e.entries.forEach((function(e){var n=e.key,r=e.value;t[n]&&console.warn("duplicate key ".concat(n," in map")),t[n]=r})),t}var f={cramFileDefinition:a,cramBlockHeader:o,cramBlockCrc32:s},p={cramUnmappedSliceHeader:function(e){var t=0,n=(new r).itf8("numRecords");return t+=5,e>=3?(n=n.ltf8("recordCounter"),t+=9):2===e&&(n=n.itf8("recordCounter"),t+=5),n=n.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:i,length:"numContentIds"}),t+=10,e>=2&&(n=n.array("md5",{type:"uint8",length:16}),t+=16),{parser:n,maxLength:function(e){return t+5*e}}},cramMappedSliceHeader:function(e){var t=(new r).itf8("refSeqId").itf8("refSeqStart").itf8("refSeqSpan").itf8("numRecords"),n=20;return e>=3?(t=t.ltf8("recordCounter"),n+=9):2===e&&(t=t.itf8("recordCounter"),n+=5),t=t.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:i,length:"numContentIds"}).itf8("refBaseBlockId"),n+=15,e>=2&&(t=t.array("md5",{type:"uint8",length:16}),n+=16),{parser:t,maxLength:function(e){return n+5*e}}},cramEncoding:function(e){return{parser:(new r).namely("cramEncoding").itf8("codecId").itf8("parametersBytes").choice("parameters",{tag:"codecId",choices:{0:new r,1:(new r).itf8("blockContentId"),2:(new r).itf8("offset").itf8("M"),3:r.start().itf8("numCodes").array("symbols",{length:"numCodes",type:i}).itf8("numLengths").array("bitLengths",{length:"numLengths",type:i}),4:r.start().nest("lengthsEncoding",{type:"cramEncoding"}).nest("valuesEncoding",{type:"cramEncoding"}),5:(new r).uint8("stopByte")[e>1?"itf8":"int"]("blockContentId"),6:(new r).itf8("offset").itf8("length"),7:(new r).itf8("offset").itf8("K"),8:(new r).itf8("offset").itf8("log2m"),9:(new r).itf8("offset")}})}},cramDataSeriesEncodingMap:function(e){return(new r).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new r).string("key",{length:2,stripNull:!1}).nest("value",{type:this.cramEncoding(e).parser})})},cramTagEncodingMap:function(e){return(new r).itf8("mapSize").itf8("mapCount").array("entries",{length:"mapCount",type:(new r).itf8("key",{formatter:function(e){return String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)}}).nest("value",{type:this.cramEncoding(e).parser})})},cramCompressionHeader:function(e){var t=new r;return{parser:t=t.nest("preservation",{type:l,formatter:h}).nest("dataSeriesEncoding",{type:this.cramDataSeriesEncodingMap(e),formatter:h}).nest("tagEncoding",{type:this.cramTagEncodingMap(e),formatter:h})}},cramContainerHeader1:function(e){var t=(new r).int32("length").itf8("refSeqId").itf8("refSeqStart").itf8("alignmentSpan").itf8("numRecords"),n=24;return e>=3?(t=t.ltf8("recordCounter"),n+=9):2===e&&(t=t.itf8("recordCounter"),n+=5),e>1&&(t=t.ltf8("numBases"),n+=9),{parser:t=t.itf8("numBlocks").itf8("numLandmarks"),maxLength:n+=10}},cramContainerHeader2:function(e){var t=(new r).itf8("numLandmarks").array("landmarks",{type:(new r).itf8(),length:"numLandmarks"}),n=0;return e>=3&&(t=t.uint32("crc32"),n=4),{parser:t,maxLength:function(e){return 5+5*e+n}}}};e.exports={cramFileDefinition:a,getSectionParsers:function(e){var t=Object.assign({},f);return Object.keys(p).forEach((function(n){t[n]=p[n](e)})),t}}},function(e,t,n){(function(e){var r=n(68),i=n(70).Context,a=n(31);"undefined"!=typeof window&&(window.Buffer=e);var o={UInt8:1,UInt16LE:2,UInt16BE:2,UInt32LE:4,UInt32BE:4,Int8:1,Int16LE:2,Int16BE:2,Int32LE:4,Int32BE:4,FloatLE:4,FloatBE:4,DoubleLE:8,DoubleBE:8},s={},u=[];!function(){var e;for(e=1;e<=32;e++)u.push(e)}();var c={};Object.keys(o).concat(Object.keys({String:null,Buffer:null,Array:null,Skip:null,Choice:null,Nest:null,Bit:null,Itf8:null,Ltf8:null})).forEach((function(e){c[e.toLowerCase()]=e}));var l=function(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="le",this.constructorFn=null,this.alias=null};l.start=function(){return new l},Object.keys(o).forEach((function(e){l.prototype[e.toLowerCase()]=function(t,n){return this.setNextParser(e.toLowerCase(),t,n)};var t=e.replace(/BE|LE/,"").toLowerCase();t in l.prototype||(l.prototype[t]=function(e,n){return this[t+this.endian](e,n)})})),u.forEach((function(e){l.prototype["bit"+e.toString()]=function(t,n){return n||(n={}),n.length=e,this.setNextParser("bit",t,n)}})),l.prototype.namely=function(e){return s[e]=this,this.alias=e,this},l.prototype.skip=function(e,t){if(t&&t.assert)throw new Error("assert option on skip is not allowed.");return this.setNextParser("skip","",{length:e})},l.prototype.string=function(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)},l.prototype.buffer=function(e,t){if(!t.length&&!t.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",e,t)},l.prototype.array=function(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("Length option of array is not defined.");if(!t.type)throw new Error("Type option of array is not defined.");if("string"==typeof t.type&&!s[t.type]&&Object.keys(o).indexOf(c[t.type])<0)throw new Error('Specified primitive type "'+t.type+'" is not supported.');return this.setNextParser("array",e,t)},l.prototype.choice=function(e,t){if(1==arguments.length&&"object"==vn(e)&&(t=e,e=null),!t.tag)throw new Error("Tag option of array is not defined.");if(!t.choices)throw new Error("Choices option of array is not defined.");return Object.keys(t.choices).forEach((function(n){if(!t.choices[n])throw new Error("Choice Case "+n+" of "+e+" is not valid.");if("string"==typeof t.choices[n]&&!s[t.choices[n]]&&Object.keys(o).indexOf(c[t.choices[n]])<0)throw new Error('Specified primitive type "'+t.choices[n]+'" is not supported.')}),this),this.setNextParser("choice",e,t)},l.prototype.nest=function(e,t){if(1==arguments.length&&"object"==vn(e)&&(t=e,e=null),!t.type)throw new Error("Type option of nest is not defined.");if(!(t.type instanceof l||s[t.type]))throw new Error("Type option of nest must be a Parser object.");if(!(t.type instanceof l||e))throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",e,t)},l.prototype.endianess=function(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: "+e)}return this},l.prototype.create=function(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this},l.prototype.getCode=function(){var e=new i;return e.pushCode("if (!Buffer.isBuffer(buffer)) {"),e.generateError('"argument buffer is not a Buffer object"'),e.pushCode("}"),this.alias?this.addAliasedCode(e):this.addRawCode(e),this.alias?e.pushCode("return {0}(0)","___parser_"+this.alias):e.pushCode("return { offset: offset, result: vars };"),e.code},l.prototype.addRawCode=function(e){e.pushCode("var offset = 0;"),this.constructorFn?e.pushCode("var vars = new constructorFn();"):e.pushCode("var vars = {};"),this.generate(e),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };")},l.prototype.addAliasedCode=function(e){return e.pushCode("function {0}(offset) {","___parser_"+this.alias),this.constructorFn?e.pushCode("var vars = new constructorFn();"):e.pushCode("var vars = {};"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e},l.prototype.resolveReferences=function(e){var t=e.getUnresolvedReferences();e.markRequested(t),t.forEach((function(t){s[t].addAliasedCode(e)}))},l.prototype.compile=function(){var e="(function(buffer, constructorFn, Long) { "+this.getCode()+" })";this.compiled=r.runInThisContext(e)},l.prototype.sizeOf=function(){var e=NaN;if(Object.keys(o).indexOf(this.type)>=0)e=o[this.type];else if("String"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("Buffer"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("Array"===this.type&&"number"==typeof this.options.length){var t=NaN;"string"==typeof this.options.type?t=o[c[this.options.type]]:this.options.type instanceof l&&(t=this.options.type.sizeOf()),e=this.options.length*t}else"Skip"===this.type?e=this.options.length:"Nest"===this.type?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e},l.prototype.parse=function(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn,a)},l.prototype.setNextParser=function(e,t,n){var r=new l;return r.type=c[e],r.varName=t,r.options=n||r.options,r.endian=this.endian,this.head?this.head.next=r:this.next=r,this.head=r,this},l.prototype.generate=function(e){this.type&&(this["generate"+this.type](e),this.generateAssert(e));var t=e.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)},l.prototype.generateAssert=function(e){if(this.options.assert){var t=e.generateVariable(this.varName);switch(vn(this.options.assert)){case"function":e.pushCode("if (!({0}).call(vars, {1})) {",this.options.assert,t);break;case"number":e.pushCode("if ({0} !== {1}) {",this.options.assert,t);break;case"string":e.pushCode('if ("{0}" !== {1}) {',this.options.assert,t);break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}e.generateError('"Assert error: {0} is " + {0}',t),e.pushCode("}")}},l.prototype.generateNext=function(e){return this.next&&(e=this.next.generate(e)),e},Object.keys(o).forEach((function(e){l.prototype["generate"+e]=function(t){t.pushCode("{0} = buffer.read{1}(offset);",t.generateVariable(this.varName),e),t.pushCode("offset += {0};",o[e])}})),l.prototype.generateBit=function(e){var t=JSON.parse(JSON.stringify(this));if(t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["Bit","Nest"].indexOf(this.next.type)<0){var n=0;e.bitFields.forEach((function(e){n+=e.options.length}));var r=e.generateTmpVariable();if(n<=8)e.pushCode("var {0} = buffer.readUInt8(offset);",r),n=8;else if(n<=16)e.pushCode("var {0} = buffer.readUInt16BE(offset);",r),n=16;else if(n<=24){var i=e.generateTmpVariable(),a=e.generateTmpVariable();e.pushCode("var {0} = buffer.readUInt16BE(offset);",i),e.pushCode("var {0} = buffer.readUInt8(offset + 2);",a),e.pushCode("var {2} = ({0} << 8) | {1};",i,a,r),n=24}else{if(!(n<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");e.pushCode("var {0} = buffer.readUInt32BE(offset);",r),n=32}e.pushCode("offset += {0};",n/8);var o=0,s="be"===this.endian;e.bitFields.forEach((function(t){e.pushCode("{0} = {1} >> {2} & {3};",t.varName,r,s?n-o-t.options.length:o,(1<<t.options.length)-1),o+=t.options.length})),e.bitFields=[]}},l.prototype.generateSkip=function(e){var t=e.generateOption(this.options.length);e.pushCode("offset += {0};",t)},l.prototype.generateString=function(e){var t=e.generateVariable(this.varName),n=e.generateTmpVariable();this.options.length&&this.options.zeroTerminated?(e.pushCode("var {0} = offset;",n),e.pushCode("while(buffer.readUInt8(offset++) !== 0 && offset - {0}  < {1});",n,this.options.length),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - {2} < {3} ? offset - 1 : offset);",t,this.options.encoding,n,this.options.length)):this.options.length?(e.pushCode("{0} = buffer.toString('{1}', offset, offset + {2});",t,this.options.encoding,e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))):this.options.zeroTerminated?(e.pushCode("var {0} = offset;",n),e.pushCode("while(buffer.readUInt8(offset++) !== 0);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - 1);",t,this.options.encoding,n)):this.options.greedy&&(e.pushCode("var {0} = offset;",n),e.pushCode("while(buffer.length > offset++);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset);",t,this.options.encoding,n)),this.options.stripNull&&e.pushCode("{0} = {0}.replace(/\\x00+$/g, '')",t)},l.prototype.generateBuffer=function(e){"eof"===this.options.readUntil?e.pushCode("{0} = buffer.slice(offset);",e.generateVariable(this.varName)):(e.pushCode("{0} = buffer.slice(offset, offset + {1});",e.generateVariable(this.varName),e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))),this.options.clone&&e.pushCode("{0} = Buffer.from({0});",e.generateVariable(this.varName))},l.prototype.generateArray=function(e){var t=e.generateOption(this.options.length),n=e.generateOption(this.options.lengthInBytes),r=this.options.type,i=e.generateTmpVariable(),a=e.generateVariable(this.varName),u=e.generateTmpVariable(),h=this.options.key,f="string"==typeof h;if(f?e.pushCode("{0} = {};",a):e.pushCode("{0} = [];",a),"function"==typeof this.options.readUntil?e.pushCode("do {"):"eof"===this.options.readUntil?e.pushCode("for (var {0} = 0; offset < buffer.length; {0}++) {",i):void 0!==n?e.pushCode("for (var {0} = offset; offset - {0} < {1}; ) {",i,n):e.pushCode("for (var {0} = 0; {0} < {1}; {0}++) {",i,t),"string"==typeof r)if(s[r]){var p=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",p,"___parser_"+r),e.pushCode("var {0} = {1}.result; offset = {1}.offset;",u,p),r!==this.alias&&e.addReference(r)}else e.pushCode("var {0} = buffer.read{1}(offset);",u,c[r]),e.pushCode("offset += {0};",o[c[r]]);else r instanceof l&&(e.pushCode("var {0} = {};",u),e.pushScope(u),r.generate(e),e.popScope());f?e.pushCode("{0}[{2}.{1}] = {2};",a,h,u):e.pushCode("{0}.push({1});",a,u),e.pushCode("}"),"function"==typeof this.options.readUntil&&e.pushCode(" while (!({0}).call(this, {1}, buffer.slice(offset)));",this.options.readUntil,u)},l.prototype.generateChoiceCase=function(e,t,n){if("string"==typeof n)if(s[n]){var r=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",r,"___parser_"+n),e.pushCode("{0} = {1}.result; offset = {1}.offset;",e.generateVariable(this.varName),r),n!==this.alias&&e.addReference(n)}else e.pushCode("{0} = buffer.read{1}(offset);",e.generateVariable(this.varName),c[n]),e.pushCode("offset += {0};",o[c[n]]);else n instanceof l&&(e.pushPath(t),n.generate(e),e.popPath(t))},l.prototype.generateChoice=function(e){var t=e.generateOption(this.options.tag);this.varName&&e.pushCode("{0} = {};",e.generateVariable(this.varName)),e.pushCode("switch({0}) {",t),Object.keys(this.options.choices).forEach((function(t){var n=this.options.choices[t];isNaN(parseInt(t,10))?e.pushCode("case '{0}':",t):e.pushCode("case {0}:",t),this.generateChoiceCase(e,this.varName,n),e.pushCode("break;")}),this),e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError('"Met undefined tag value " + {0} + " at choice"',t),e.pushCode("}")},l.prototype.generateNest=function(e){var t=e.generateVariable(this.varName);if(this.options.type instanceof l)this.varName&&e.pushCode("{0} = {};",t),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(s[this.options.type]){var n=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",n,"___parser_"+this.options.type),e.pushCode("{0} = {1}.result; offset = {1}.offset;",t,n),this.options.type!==this.alias&&e.addReference(this.options.type)}},l.prototype.generateFormatter=function(e,t,n){"function"==typeof n&&e.pushCode("{0} = ({1}).call(this, {0});",t,n)},l.prototype.isInteger=function(){return!!this.type.match(/U?Int[8|16|32][BE|LE]?|Bit\d+/)},l.prototype.itf8=function(e,t){return this.setNextParser("itf8",e,t)},l.prototype.generateItf8=function(e){var t=e.generateVariable(this.varName),n=e.generateTmpVariable();e.pushCode("\n    var ".concat(n," = buffer[offset];\n    if (").concat(n," < 0x80) {\n      ").concat(t," = ").concat(n,";\n      offset += 1;\n    } else if (").concat(n," < 0xc0) {\n      ").concat(t," = ((").concat(n,"<<8) | buffer[offset+1]) & 0x3fff;\n      offset += 2;\n    } else if (").concat(n," < 0xe0) {\n      ").concat(t," = ((").concat(n,"<<16) | (buffer[offset+1]<< 8) |  buffer[offset+2]) & 0x1fffff;\n      offset += 3;\n    } else if (").concat(n," < 0xf0) {\n      ").concat(t," = ((").concat(n,"<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n      offset += 4\n    } else {\n      ").concat(t," = ((").concat(n," & 0x0f)<<28) | (buffer[offset+1]<<20) | (buffer[offset+2]<<12) | (buffer[offset+3]<<4) | (buffer[offset+4] & 0x0f);\n      // x=((0xff & 0x0f)<<28) | (0xff<<20) | (0xff<<12) | (0xff<<4) | (0x0f & 0x0f);\n      // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n      offset += 5\n    }\n  "))},l.prototype.ltf8=function(e,t){return this.setNextParser("ltf8",e,t)},l.prototype.generateLtf8=function(e){var t=e.generateVariable(this.varName),n=e.generateTmpVariable();e.pushCode("\n  var ".concat(n," = buffer[offset];\n  if (").concat(n," < 0x80) {\n    ").concat(t," = ").concat(n,";\n    offset += 1;\n  } else if (").concat(n," < 0xc0) {\n    ").concat(t," = ((buffer[offset]<<8) | buffer[offset+1]) & 0x3fff;\n    offset += 2;\n  } else if (").concat(n," < 0xe0) {\n    ").concat(t," = ((buffer[offset]<<16) | (buffer[offset+1]<<8) | buffer[offset+2]) & 0x1fffff;\n    ").concat(t," = (((").concat(n," & 63) << 16) | buffer.readUInt16LE(offset + 1));\n    offset += 3;\n  } else if (").concat(n," < 0xf0) {\n    ").concat(t," = ((buffer[offset]<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n    offset += 4;\n  } else if (").concat(n," < 0xf8) {\n    ").concat(t," = (((buffer[offset] & 15) * Math.pow(2,32))) +\n      (buffer[offset+1]<<24) | (buffer[offset+2]<<16 | buffer[offset+3]<<8 | buffer[offset+4])\n    // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n    offset += 5;\n  } else if (").concat(n," < 0xfc) {\n    ").concat(t," = ((((buffer[offset] & 7) << 8) | buffer[offset+1] )) * Math.pow(2,32) +\n      (buffer[offset+2]<<24) | (buffer[offset+3]<<16 | buffer[offset+4]<<8 | buffer[offset+5])\n    offset += 6;\n  } else if (").concat(n," < 0xfe) {\n    ").concat(t," = ((((buffer[offset] & 3) << 16) | buffer[offset+1]<<8 | buffer[offset+2])) * Math.pow(2,32) +\n      (buffer[offset+3]<<24) | (buffer[offset+4]<<16 | buffer[offset+5]<<8 | buffer[offset+6])\n    offset += 7;\n  } else if (").concat(n," < 0xff) {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+8));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 8;\n  } else {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+9));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 9;\n  }\n  "))},t.Parser=l}).call(this,n(1).Buffer)},function(e,t,n){var r=n(69),i=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},a=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},o=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),s=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval2","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function u(){}u.prototype={};var c=t.Script=function(e){if(!(this instanceof c))return new c(e);this.code=e};c.prototype.runInContext=function(e){if(!(e instanceof u))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,c=n.eval2,l=n.execScript;!c&&l&&(l.call(n,"null"),c=n.eval2),a(i(e),(function(t){n[t]=e[t]})),a(s,(function(t){e[t]&&(n[t]=e[t])}));var h=i(n),f=c.call(n,this.code);return a(i(n),(function(t){(t in e||-1===r(h,t))&&(e[t]=n[t])})),a(s,(function(t){t in e||o(e,t,n[t])})),document.body.removeChild(t),f},c.prototype.runInThisContext=function(){return Ek(this.code)},c.prototype.runInNewContext=function(e){var t=c.createContext(e),n=this.runInContext(t);return a(i(t),(function(n){e[n]=t[n]})),n},a(i(c.prototype),(function(e){t[e]=c[e]=function(t){var n=c(t);return n[e].apply(n,[].slice.call(arguments,1))}})),t.createScript=function(e){return t.Script(e)},t.createContext=c.createContext=function(e){var t=new u;return"object"==vn(e)&&a(i(e),(function(n){t[n]=e[n]})),t}},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t){var n=function(){this.code="",this.scopes=[["vars"]],this.isAsync=!1,this.bitFields=[],this.tmpVariableCount=0,this.references={}};n.prototype.generateVariable=function(e){var t=[];for(Array.prototype.push.apply(t,this.scopes[this.scopes.length-1]);/^\$parent\./.test(e);)t.pop(),e=e.replace(/^\$parent\./,"");return e&&t.push(e),t.join(".")},n.prototype.generateOption=function(e){switch(vn(e)){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return"("+e+").call("+this.generateVariable()+", vars)"}},n.prototype.generateError=function(){var e=Array.prototype.slice.call(arguments),t=n.interpolate.apply(this,e);this.isAsync?this.pushCode("return process.nextTick(function() { callback(new Error("+t+"), vars); });"):this.pushCode("throw new Error("+t+");")},n.prototype.generateTmpVariable=function(){return"$tmp"+this.tmpVariableCount++},n.prototype.pushCode=function(){var e=Array.prototype.slice.call(arguments);this.code+=n.interpolate.apply(this,e)+"\n"},n.prototype.pushPath=function(e){e&&this.scopes[this.scopes.length-1].push(e)},n.prototype.popPath=function(e){e&&this.scopes[this.scopes.length-1].pop()},n.prototype.pushScope=function(e){this.scopes.push([e])},n.prototype.popScope=function(){this.scopes.pop()},n.prototype.addReference=function(e){this.references[e]||(this.references[e]={resolved:!1,requested:!1})},n.prototype.markResolved=function(e){this.references[e].resolved=!0},n.prototype.markRequested=function(e){e.forEach(function(e){this.references[e].requested=!0}.bind(this))},n.prototype.getUnresolvedReferences=function(){var e=this.references;return Object.keys(this.references).filter((function(t){return!e[t].resolved&&!e[t].requested}))},n.interpolate=function(e){var t=e.match(/{\d+}/g),n=Array.prototype.slice.call(arguments,1);return t&&t.forEach((function(t){var r=parseInt(t.substr(1,t.length-2),10);e=e.replace(t,n[r].toString())})),e},t.Context=n},function(e,t,n){(function(t){var r=n(0).CramMalformedError,i=n(8),a=i.itf8Size,o=i.parseItem,s=i.tinyMemoize,u=n(75),c=n(78),l=function(){function e(t,n){bn(this,e),this.file=t,this.filePosition=n}var n,i,s,l;return xn(e,[{key:"getHeader",value:function(){return this._readContainerHeader(this.filePosition)}},{key:"getCompressionHeaderBlock",value:(l=yn(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(e.sent.numRecords){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,this.file.getSectionParsers();case 6:return t=e.sent,e.next=9,this.getFirstBlock();case 9:if("COMPRESSION_HEADER"===(n=e.sent).contentType){e.next=12;break}throw new r("invalid content type ".concat(n.contentType," in what is supposed to be the compression header block"));case 12:return i=o(n.content,t.cramCompressionHeader.parser,0,n.contentPosition),e.abrupt("return",(n.content=i,n));case 14:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getFirstBlock",value:(s=yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:return t=e.sent,e.abrupt("return",this.file.readBlock(t._endPosition));case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getCompressionScheme",value:(i=yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompressionHeaderBlock();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",new c(t.content));case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getSlice",value:function(e,t){return new u(this,e,t)}},{key:"_readContainerHeader",value:(n=yn(regeneratorRuntime.mark((function e(n){var r,i,s,u,c,l,h,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getSectionParsers();case 2:return r=e.sent,i=r.cramContainerHeader1,s=r.cramContainerHeader2,e.next=7,this.file.stat();case 7:if(u=e.sent,c=u.size,!(n>=c)){e.next=11;break}return e.abrupt("return");case 11:return l=t.allocUnsafe(i.maxLength),e.next=14,this.file.read(l,0,i.maxLength,n);case 14:if(h=o(l,i.parser),f=a(h.numLandmarks),!(n+h.length>=c)){e.next=17;break}return e.abrupt("return",void console.warn("".concat(this.file,": container header at ").concat(n," indicates that the container has length ").concat(h.length,", which extends beyond the length of the file. Skipping this container.")));case 17:return p=t.allocUnsafe(s.maxLength(h.numLandmarks)),e.next=20,this.file.read(p,0,s.maxLength(h.numLandmarks),n+h._size-f);case 20:if(d=o(p,s.parser),e.t0=this.file.validateChecksums&&void 0!==d.crc32,!e.t0){e.next=25;break}return e.next=25,this.file.checkCrc32(n,h._size+d._size-f-4,d.crc32,"container header beginning at position ".concat(n));case 25:return e.abrupt("return",Object.assign(h,d,{_size:h._size+d._size-f,_endPosition:h._size+d._size-f+n}));case 26:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),e}();"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach((function(e){return s(l,e)})),e.exports=l}).call(this,n(1).Buffer)},function(e,t,n){var r,i,a,o,s;r=n(73),i=n(32).utf8,a=n(74),o=n(32).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var n=r.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,h=-1732584194,f=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var d=s._ff,g=s._gg,v=s._hh,m=s._ii;for(p=0;p<n.length;p+=16){var y=c,b=l,w=h,x=f;c=d(c,l,h,f,n[p+0],7,-680876936),f=d(f,c,l,h,n[p+1],12,-389564586),h=d(h,f,c,l,n[p+2],17,606105819),l=d(l,h,f,c,n[p+3],22,-1044525330),c=d(c,l,h,f,n[p+4],7,-176418897),f=d(f,c,l,h,n[p+5],12,1200080426),h=d(h,f,c,l,n[p+6],17,-1473231341),l=d(l,h,f,c,n[p+7],22,-45705983),c=d(c,l,h,f,n[p+8],7,1770035416),f=d(f,c,l,h,n[p+9],12,-1958414417),h=d(h,f,c,l,n[p+10],17,-42063),l=d(l,h,f,c,n[p+11],22,-1990404162),c=d(c,l,h,f,n[p+12],7,1804603682),f=d(f,c,l,h,n[p+13],12,-40341101),h=d(h,f,c,l,n[p+14],17,-1502002290),c=g(c,l=d(l,h,f,c,n[p+15],22,1236535329),h,f,n[p+1],5,-165796510),f=g(f,c,l,h,n[p+6],9,-1069501632),h=g(h,f,c,l,n[p+11],14,643717713),l=g(l,h,f,c,n[p+0],20,-373897302),c=g(c,l,h,f,n[p+5],5,-701558691),f=g(f,c,l,h,n[p+10],9,38016083),h=g(h,f,c,l,n[p+15],14,-660478335),l=g(l,h,f,c,n[p+4],20,-405537848),c=g(c,l,h,f,n[p+9],5,568446438),f=g(f,c,l,h,n[p+14],9,-1019803690),h=g(h,f,c,l,n[p+3],14,-187363961),l=g(l,h,f,c,n[p+8],20,1163531501),c=g(c,l,h,f,n[p+13],5,-1444681467),f=g(f,c,l,h,n[p+2],9,-51403784),h=g(h,f,c,l,n[p+7],14,1735328473),c=v(c,l=g(l,h,f,c,n[p+12],20,-1926607734),h,f,n[p+5],4,-378558),f=v(f,c,l,h,n[p+8],11,-2022574463),h=v(h,f,c,l,n[p+11],16,1839030562),l=v(l,h,f,c,n[p+14],23,-35309556),c=v(c,l,h,f,n[p+1],4,-1530992060),f=v(f,c,l,h,n[p+4],11,1272893353),h=v(h,f,c,l,n[p+7],16,-155497632),l=v(l,h,f,c,n[p+10],23,-1094730640),c=v(c,l,h,f,n[p+13],4,681279174),f=v(f,c,l,h,n[p+0],11,-358537222),h=v(h,f,c,l,n[p+3],16,-722521979),l=v(l,h,f,c,n[p+6],23,76029189),c=v(c,l,h,f,n[p+9],4,-640364487),f=v(f,c,l,h,n[p+12],11,-421815835),h=v(h,f,c,l,n[p+15],16,530742520),c=m(c,l=v(l,h,f,c,n[p+2],23,-995338651),h,f,n[p+0],6,-198630844),f=m(f,c,l,h,n[p+7],10,1126891415),h=m(h,f,c,l,n[p+14],15,-1416354905),l=m(l,h,f,c,n[p+5],21,-57434055),c=m(c,l,h,f,n[p+12],6,1700485571),f=m(f,c,l,h,n[p+3],10,-1894986606),h=m(h,f,c,l,n[p+10],15,-1051523),l=m(l,h,f,c,n[p+1],21,-2054922799),c=m(c,l,h,f,n[p+8],6,1873313359),f=m(f,c,l,h,n[p+15],10,-30611744),h=m(h,f,c,l,n[p+6],15,-1560198380),l=m(l,h,f,c,n[p+13],21,1309151649),c=m(c,l,h,f,n[p+4],6,-145523070),f=m(f,c,l,h,n[p+11],10,-1120210379),h=m(h,f,c,l,n[p+2],15,718787259),l=m(l,h,f,c,n[p+9],21,-343485551),c=c+y>>>0,l=l+b>>>0,h=h+w>>>0,f=f+x>>>0}return r.endian([c,l,h,f])})._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},function(e,t){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?t.push(n.charAt(i>>>6*(3-a)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(e.charAt(r))>>>6-2*i);return t}},e.exports=r},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
	   * Determine if an object is a Buffer
	   *
	   * @author   Feross Aboukhadijeh <https://feross.org>
	   * @license  MIT
	   */e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){var r=n(0),i=r.CramMalformedError,a=r.CramBufferOverrunError,o=r.CramArgumentError,s=n(8),u=s.parseItem,c=s.tinyMemoize,l=s.sequenceMD5,h=n(17),f=n(76);function p(e,t,n,r){if(!r)throw new i("could not resolve intra-slice mate pairs, file seems truncated or malformed");var a=!!(r.mate||void 0!==r.mateRecordNumber&&r.mateRecordNumber!==t);n.readName||(n.readName=String(n.uniqueId),r.readName=n.readName),n.mate={sequenceId:r.sequenceId,alignmentStart:r.alignmentStart,uniqueId:r.uniqueId},r.readName&&(n.mate.readName=r.readName),r.mate||void 0!==r.mateRecordNumber||(r.mate={sequenceId:n.sequenceId,alignmentStart:n.alignmentStart,uniqueId:n.uniqueId},n.readName&&(r.mate.readName=n.readName)),n.flags|=h.BAM_FPAIRED,r.flags&h.BAM_FUNMAP&&(n.flags|=h.BAM_FMUNMAP),n.flags&h.BAM_FUNMAP&&(r.flags|=h.BAM_FMUNMAP),r.flags&h.BAM_FREVERSE&&(n.flags|=h.BAM_FMREVERSE),n.flags&h.BAM_FREVERSE&&(r.flags|=h.BAM_FMREVERSE),void 0===n.templateLength&&(a?function(e,t,n){var r=function t(n){var r=[n];if(n.mateRecordNumber>=0){var a=e[n.mateRecordNumber];if(!a)throw new i("intra-slice mate record not found, this file seems malformed");r.push.apply(r,Pn(t(a)))}return r}(n),a=r.map((function(e){return e.alignmentStart})),o=r.map((function(e){return e.alignmentStart+e.readLength-1})),s=Math.max.apply(Math,Pn(o))-Math.min.apply(Math,Pn(a))+1;s>=0&&r.forEach((function(e){if(void 0!==e.templateLength)throw new i("mate pair group has some members that have template lengths already, this file seems malformed");e.templateLength=s}))}(e,0,n):function(e,t){var n=Math.min(e.alignmentStart,t.alignmentStart),r=Math.max(e.alignmentStart+e.readLength-1,t.alignmentStart+t.readLength-1)-n+1;e.templateLength=r,t.templateLength=r}(n,r)),delete n.mateRecordNumber}var d=function(){function e(t,n){bn(this,e),this.container=t,this.file=t.file,this.containerPosition=n}var t,n,r,s,c,h,d,g;return xn(e,[{key:"getHeader",value:(g=yn(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getSectionParsers();case 2:return t=e.sent,e.next=5,this.container.getHeader();case 5:return n=e.sent,e.next=8,this.file.readBlock(n._endPosition+this.containerPosition);case 8:if("MAPPED_SLICE_HEADER"!==(r=e.sent).contentType){e.next=13;break}r.content=u(r.content,t.cramMappedSliceHeader.parser,0,n._endPosition),e.next=16;break;case 13:if("UNMAPPED_SLICE_HEADER"===r.contentType){e.next=15;break}throw new i("error reading slice header block, invalid content type ".concat(r._contentType));case 15:r.content=u(r.content,t.cramUnmappedSliceHeader.parser,0,n._endPosition);case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"getBlocks",value:(d=yn(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:t=e.sent,n=t._endPosition,r=new Array(t.content.numBlocks),i=0;case 6:if(!(i<r.length)){e.next=14;break}return e.next=9,this.file.readBlock(n);case 9:r[i]=e.sent,n=r[i]._endPosition;case 11:i+=1,e.next=6;break;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getCoreDataBlock",value:(h=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"_getBlocksContentIdIndex",value:(c=yn(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return t=e.sent,n={},e.abrupt("return",(t.forEach((function(e){"EXTERNAL_DATA"===e.contentType&&(n[e.contentId]=e)})),n));case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getBlockByContentId",value:(s=yn(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlocksContentIdIndex();case 2:return e.t0=t,e.abrupt("return",e.sent[e.t0]);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getReferenceRegion",value:(r=yn(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(!((t=e.sent.content).refSeqId<0)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.container.getCompressionScheme();case 7:if(n=e.sent,!(t.refBaseBlockId>=0)){e.next=15;break}if(r=this.getBlockByContentId(t.refBaseBlockId)){e.next=12;break}throw new i("embedded reference specified, but reference block does not exist");case 12:if(!(t.span>r.uncompressedSize)){e.next=14;break}throw new i("Embedded reference is too small");case 14:return e.abrupt("return",{seq:r.data.toString("utf8"),start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 15:if(!n.referenceRequired&&!this.file.fetchReferenceSequenceCallback){e.next=24;break}if(this.file.fetchReferenceSequenceCallback){e.next=18;break}throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");case 18:return e.next=20,this.file.fetchReferenceSequenceCallback(t.refSeqId,t.refSeqStart,t.refSeqStart+t.refSeqSpan-1);case 20:if((a=e.sent).length===t.refSeqSpan){e.next=23;break}throw new o("seqFetch callback returned a reference sequence of the wrong length");case 23:return e.abrupt("return",{seq:a,start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 24:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getAllRecords",value:function(){return this.getRecords((function(){return!0}))}},{key:"_fetchRecords",value:(n=yn(regeneratorRuntime.mark((function e(){var t,n,r,o,s,u,c,h,d,g,v,m,y,b,w,x,k,S,_=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getDefinition();case 2:return t=e.sent,n=t.majorVersion,e.next=6,this.container.getCompressionScheme();case 6:return r=e.sent,e.next=9,this.getHeader();case 9:return o=e.sent,e.next=12,this._getBlocksContentIdIndex();case 12:if(s=e.sent,!(n>1&&this.file.options.checkSequenceMD5&&o.content.refSeqId>=0&&"0000000000000000"!==o.content.md5.join(""))){e.next=21;break}return e.next=16,this.getReferenceRegion();case 16:if(!(u=e.sent)){e.next=21;break}if(c=u.seq,h=u.start,d=u.end,g=l(c),v=o.content.md5.map((function(e){return(e<16?"0":"")+e.toString(16)})).join(""),g===v){e.next=21;break}throw new i("MD5 checksum reference mismatch for ref ".concat(o.content.refSeqId," pos ").concat(h,"..").concat(d,". recorded MD5: ").concat(v,", calculated MD5: ").concat(g));case 21:return e.next=23,this.getCoreDataBlock();case 23:m=e.sent,y={lastAlignmentStart:o.content.refSeqStart||0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{getCursor:function(e){return this[e]||(this[e]={bitPosition:7,bytePosition:0}),this[e]}}},b=function(e){var t=r.getCodecForDataSeries(e);if(!t)throw new i("no codec defined for ".concat(e," data series"));return t.decode(_,m,s,y)},w=new Array(o.content.numRecords),x=0;case 28:if(!(x<w.length)){e.next=42;break}e.prev=29,w[x]=f(this,b,r,o,m,s,y,n,x),w[x].uniqueId=o.contentPosition+o.content.recordCounter+x+1,e.next=39;break;case 33:if(e.prev=33,e.t0=e.catch(29),!(e.t0 instanceof a)){e.next=38;break}return console.warn("read attempted beyond end of buffer, file seems truncated."),w=w.filter((function(e){return!!e})),e.abrupt("break",42);case 38:throw e.t0;case 39:x+=1,e.next=28;break;case 42:for(k=0;k<w.length;k+=1)(S=w[k].mateRecordNumber)>=0&&p(w,k,w[k],w[S]);return e.abrupt("return",w);case 44:case"end":return e.stop()}}),e,this,[[29,33]])}))),function(){return n.apply(this,arguments)})},{key:"getRecords",value:(t=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f,p,d,g=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.container.filePosition+this.containerPosition,(r=this.file.featureCache.get(n))||(r=this._fetchRecords(),this.file.featureCache.set(n,r)),e.next=5,r;case 5:if(!(i=e.sent.filter(t)).length||!this.file.fetchReferenceSequenceCallback){e.next=20;break}return e.next=9,this.getHeader();case 9:if(!((a=e.sent).content.refSeqId>=0||-2===a.content.refSeqId)){e.next=20;break}return o=a.content.refSeqId>=0?a.content.refSeqId:void 0,e.next=14,this.container.getCompressionScheme();case 14:for(s=e.sent,u={},c=0;c<i.length;c+=1)l=void 0!==o?o:i[c].sequenceId,(h=u[l])||(h={id:l,start:i[c].alignmentStart,end:-1/0},u[l]=h),(f=i[c].alignmentStart+(i[c].lengthOnRef||i[c].readLength)-1)>h.end&&(h.end=f),i[c].alignmentStart<h.start&&(h.start=i[c].alignmentStart);return e.next=19,Promise.all(Object.values(u).map(function(){var e=yn(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=-1!==t.id&&t.start<=t.end,!e.t0){e.next=5;break}return e.next=4,g.file.fetchReferenceSequenceCallback(t.id,t.start,t.end);case 4:t.seq=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:for(p=0;p<i.length;p+=1)(d=u[void 0!==o?o:i[p].sequenceId])&&d.seq&&i[p].addReferenceSequence(d,s);case 20:return e.abrupt("return",i);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach((function(e){return c(d,e)})),e.exports=d},function(e,t,n){(function(t){var r=n(0),i=r.CramMalformedError,a=r.CramUnimplementedError,o=n(31),s=n(77),u=n(17);function c(e){var t=e.indexOf(0);return-1===t?e.toString("utf8"):e.toString("utf8",0,t)}function l(e,n){if(n.readInt32LE||(n=t.from(n)),"Z"===e)return c(n);if("A"===e)return String.fromCharCode(n[0]);if("I"===e){var r=o.fromBytesLE(n);if(r.greaterThan(Number.MAX_SAFE_INTEGER)||r.lessThan(Number.MIN_SAFE_INTEGER))throw new a("integer overflow");return r.toNumber()}if("i"===e)return n.readInt32LE(0);if("s"===e)return n.readInt16LE(0);if("S"===e)return n.readUInt16LE(0);if("c"===e)return n.readInt8(0);if("C"===e)return n.readUInt8(0);if("f"===e)return n.readFloatLE(0);if("H"===e){var s=c(n);return Number.parseInt(s.replace(/^0x/,""),16)}if("B"===e)return function(e){var t=String.fromCharCode(e[0]),n=e.readInt32LE(1),r={c:["readInt8",1],C:["readUInt8",1],s:["readInt16LE",2],S:["readUInt16LE",2],i:["readInt32LE",4],I:["readUInt32LE",4],f:["readFloatLE",4]}[t];if(!r)throw new i("invalid tag value array type '".concat(t,"'"));for(var a=In(r,2),o=a[0],s=a[1],u=new Array(n),c=5,l=0;l<n;l+=1)u[l]=e[o](c),c+=s;return u}(n);throw new i("Unrecognized tag type ".concat(e))}function h(e){if(e instanceof t)return c(e);if(e.length&&e.indexOf){if(!e[e.length-1]){var n=e.indexOf(0);return String.fromCharCode.apply(String,Pn(e.slice(0,n)))}return String.fromCharCode.apply(String,Pn(e))}return String(e)}e.exports=function(e,t,n,r,a,o,c,f,p){var d=new s;if(d.flags=t("BF"),d.cramFlags=t("CF"),f>1&&-2===r.content.refSeqId?d.sequenceId=t("RI"):d.sequenceId=r.content.refSeqId,d.readLength=t("RL"),d.alignmentStart=t("AP"),n.APdelta&&(d.alignmentStart+=c.lastAlignmentStart),c.lastAlignmentStart=d.alignmentStart,d.readGroupId=t("RG"),n.readNamesIncluded&&(d.readName=h(t("RN"))),d.isDetached()){var g={};g.flags=t("MF"),n.readNamesIncluded||(g.readName=h(t("RN")),d.readName=g.readName),g.sequenceId=t("NS"),g.alignmentStart=t("NP"),(g.flags||g.sequenceId>-1)&&(d.mate=g),d.templateSize=t("TS"),g.flags&u.CRAM_M_UNMAP&&(d.flags|=u.BAM_FMUNMAP),g.flags&u.CRAM_M_REVERSE&&(d.flags|=u.BAM_FMREVERSE)}else d.hasMateDownStream()&&(d.mateRecordNumber=t("NF")+p+1);var v=t("TL");if(v<0)throw new i("invalid TL index");for(var m=n.getTagNames(v),y=m.length,b=0;b<y;b+=1){var w=m[b],x=w.substr(0,2),k=w.substr(2,1),S=n.getCodecForTag(w);if(!S)throw new i("no codec defined for auxiliary tag ".concat(w));var _=S.decode(e,a,o,c);d.tags[x]=l(k,_)}if(d.isSegmentUnmapped())if(d.isUnknownBases())d.readBases=null,d.qualityScores=null;else{for(var C=new Array(d.readLength),R=0;R<C.length;R+=1)C[R]=t("BA");if(d.readBases=String.fromCharCode.apply(String,C),d.isPreservingQualityScores()){for(var E=0;E<C.length;E+=1)C[E]=t("QS");d.qualityScores=C}}else{var A=t("FN");A&&(d.readFeatures=function(e,t,n,r,a){var o=0,s=e.alignmentStart-1,u=new Array(t);function c(e){var t=In(e,2),r=t[0],i=t[1],a=n(i);return"character"===r?String.fromCharCode(a):"string"===r?a.toString("utf8"):"numArray"===r?a.toArray():a}for(var l=0;l<t;l+=1){var h=String.fromCharCode(n("FC")),f=n("FP"),p={code:h},d={B:["character","BA"],S:["string",a>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[h];if(!d)throw new i('invalid read feature code "'.concat(h,'"'));p.data=c(d);var g={B:["number","QS"]}[h];g&&(p.data=[p.data,c(g)]),o+=f,p.pos=o,s+=f,p.refPos=s,"D"===h||"N"===h?s+=p.data:"H"===h?s-=p.data:"I"===h||"S"===h?s-=p.data.length:"i"===h&&(s-=1),u[l]=p}return u}(d,A,t,0,f));var T=d.readLength;if(d.readFeatures&&d.readFeatures.forEach((function(e){var t=e.code,n=e.data;"D"===t||"N"===t?T+=n:"I"===t||"S"===t?T-=n.length:"i"===t&&(T-=1)})),Number.isNaN(T)&&(console.warn("".concat(d.readName||"".concat(d.sequenceId,":").concat(d.alignmentStart)," record has invalid read features")),T=d.readLength),d.lengthOnRef=T,d.mappingQuality=t("MQ"),d.isPreservingQualityScores()){for(var M=new Array(d.readLength),L=0;L<M.length;L+=1)M[L]=t("QS");d.qualityScores=M}}return d}}).call(this,n(1).Buffer)},function(e,t,n){var r=n(17),i={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};e.exports=function(){function e(){bn(this,e),this.tags={}}return xn(e,[{key:"isPaired",value:function(){return!!(this.flags&r.BAM_FPAIRED)}},{key:"isProperlyPaired",value:function(){return!!(this.flags&r.BAM_FPROPER_PAIR)}},{key:"isSegmentUnmapped",value:function(){return!!(this.flags&r.BAM_FUNMAP)}},{key:"isMateUnmapped",value:function(){return!!(this.flags&r.BAM_FMUNMAP)}},{key:"isReverseComplemented",value:function(){return!!(this.flags&r.BAM_FREVERSE)}},{key:"isMateReverseComplemented",value:function(){return!!(this.flags&r.BAM_FMREVERSE)}},{key:"isRead1",value:function(){return!!(this.flags&r.BAM_FREAD1)}},{key:"isRead2",value:function(){return!!(this.flags&r.BAM_FREAD2)}},{key:"isSecondary",value:function(){return!!(this.flags&r.BAM_FSECONDARY)}},{key:"isFailedQc",value:function(){return!!(this.flags&r.BAM_FQCFAIL)}},{key:"isDuplicate",value:function(){return!!(this.flags&r.BAM_FDUP)}},{key:"isSupplementary",value:function(){return!!(this.flags&r.BAM_FSUPPLEMENTARY)}},{key:"isDetached",value:function(){return!!(this.cramFlags&r.CRAM_FLAG_DETACHED)}},{key:"hasMateDownStream",value:function(){return!!(this.cramFlags&r.CRAM_FLAG_MATE_DOWNSTREAM)}},{key:"isPreservingQualityScores",value:function(){return!!(this.cramFlags&r.CRAM_FLAG_PRESERVE_QUAL_SCORES)}},{key:"isUnknownBases",value:function(){return!!(this.cramFlags&r.CRAM_FLAG_NO_SEQ)}},{key:"getReadBases",value:function(){return!this.readBases&&this._refRegion&&(this.readBases=function(e,t){if((e.lengthOnRef||e.readLength)&&!e.isUnknownBases()){var n=e.alignmentStart-t.start;if(!e.readFeatures)return t.seq.substr(n,e.lengthOnRef).toUpperCase();for(var r="",i=n,a=0;r.length<e.readLength;)if(a<e.readFeatures.length&&e.readFeatures[a].pos===r.length+1){var o=e.readFeatures[a];a+=1,"b"===o.code?(r+=o.data,i+=1):"B"===o.code?(r+=o.data[0],i+=1):"X"===o.code?(r+=o.sub,i+=1):"I"===o.code?r+=o.data:"D"===o.code?i+=o.data:"i"===o.code?r+=o.data:"N"===o.code?i+=o.data:"S"===o.code?r+=o.data:"P"===o.code||o.code}else if(a<e.readFeatures.length){var s=t.seq.substr(i,e.readFeatures[a].pos-r.length-1);r+=s,i+=s.length}else{var u=t.seq.substr(i,e.readLength-r.length);r+=u,i+=u.length}return r.toUpperCase()}}(this,this._refRegion)),this.readBases}},{key:"getPairOrientation",value:function(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.sequenceId===this.mate.sequenceId){var e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F",n=" ",r=" ";this.isRead1()?(n="1",r="2"):this.isRead2()&&(n="2",r="1");var i=[],a=this.templateLength||this.templateSize;return this.alignmentStart>this.mate.alignmentStart&&a>0&&(a=-a),a>0?(i[0]=e,i[1]=n,i[2]=t,i[3]=r):(i[2]=e,i[3]=n,i[0]=t,i[1]=r),i.join("")}return null}},{key:"addReferenceSequence",value:function(e,t){this.readFeatures&&this.readFeatures.forEach((function(n){"X"===n.code&&function(e,t,n,r){if(t){var a=r.refPos-t.start,o=t.seq.charAt(a);o&&(r.ref=o);var s=i[o];void 0===s&&(s=4);var u=n.substitutionMatrix[s][r.data];u&&(r.sub=u)}}(0,e,t,n)})),!this.readBases&&e.start<=this.alignmentStart&&e.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=e)}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this).forEach((function(n){"_"!==n.charAt(0)&&(t[n]=e[n])})),t.readBases=this.getReadBases(),t}}]),e}()},function(e,t,n){var r=n(0).CramMalformedError,i=n(79).instantiateCodec,a={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int",TM:"ignore",TV:"ignore"};e.exports=function(){function e(t){bn(this,e),Object.assign(this,t),this.readNamesIncluded=t.preservation.RN,this.APdelta=t.preservation.AP,this.referenceRequired=!!t.preservation.RR,this.tagIdsDictionary=t.preservation.TD,this.substitutionMatrix=function(e){for(var t=new Array(5),n=0;n<5;n+=1)t[n]=new Array(4);return t[0][e[0]>>6&3]="C",t[0][e[0]>>4&3]="G",t[0][e[0]>>2&3]="T",t[0][e[0]>>0&3]="N",t[1][e[1]>>6&3]="A",t[1][e[1]>>4&3]="G",t[1][e[1]>>2&3]="T",t[1][e[1]>>0&3]="N",t[2][e[2]>>6&3]="A",t[2][e[2]>>4&3]="C",t[2][e[2]>>2&3]="T",t[2][e[2]>>0&3]="N",t[3][e[3]>>6&3]="A",t[3][e[3]>>4&3]="C",t[3][e[3]>>2&3]="G",t[3][e[3]>>0&3]="N",t[4][e[4]>>6&3]="A",t[4][e[4]>>4&3]="C",t[4][e[4]>>2&3]="G",t[4][e[4]>>0&3]="T",t}(t.preservation.SM),this.dataSeriesCodecCache={},this.tagCodecCache={}}return xn(e,[{key:"getCodecForTag",value:function(e){if(!this.tagCodecCache[e]){var t=this.tagEncoding[e];t&&(this.tagCodecCache[e]=i(t,"byteArray"))}return this.tagCodecCache[e]}},{key:"getTagNames",value:function(e){return this.tagIdsDictionary[e]}},{key:"getCodecForDataSeries",value:function(e){if(!this.dataSeriesCodecCache[e]){var t=this.dataSeriesEncoding[e];if(t){var n=a[e];if(!n)throw new r("data series name ".concat(e," not defined in file compression header"));this.dataSeriesCodecCache[e]=i(t,n)}}return this.dataSeriesCodecCache[e]}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this).forEach((function(n){/Cache$/.test(n)||(t[n]=e[n])})),t}}]),e}()},function(e,t,n){var r=n(0).CramUnimplementedError,i=n(80),a=n(81),o=n(82),s=n(83),u=n(84),c=n(85),l={1:a,3:i,4:s,5:o,6:u,7:n(86),9:c};function h(e){return l[e]}e.exports={getCodecClassWithId:h,instantiateCodec:function e(t,n){var i=h("ignore"===n?0:t.codecId);if(!i)throw new r("no codec implemented for codec ID ".concat(t.codecId));return new i(t.parameters,n,e)}}},function(e,t,n){var r=n(0).CramMalformedError,i=n(6);e.exports=function(e){kn(n,e);var t=Mn(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(bn(this,n),e=t.call(this,r,i),!["byte","int"].includes(e.dataType))throw new TypeError("".concat(e.dataType," decoding not yet implemented by HUFFMAN_INT codec"));return e.buildCodeBook(),e.buildCodes(),e.buildCaches(),0===e.sortedCodes[0].bitLength&&(e._decode=e._decodeZeroLengthCode),Tn(e)}return xn(n,[{key:"buildCodeBook",value:function(){for(var e=this,t=new Array(this.parameters.numCodes),n=0;n<this.parameters.numCodes;n+=1)t[n]={symbol:this.parameters.symbols[n],bitLength:this.parameters.bitLengths[n]};t=t.sort((function(e,t){return e.bitLength-t.bitLength||e.symbol-t.symbol})),this.codeBook={},t.forEach((function(t){e.codeBook[t.bitLength]||(e.codeBook[t.bitLength]=[]),e.codeBook[t.bitLength].push(t.symbol)}))}},{key:"buildCodes",value:function(){var e=this;this.codes={};var t=0,n=-1;Object.entries(this.codeBook).forEach((function(i){var a=In(i,2),o=a[0],s=a[1];o=parseInt(o,10),s.forEach((function(i){var a={bitLength:o,value:i};n+=1;var s=o-t;if(n<<=s,a.bitCode=n,t+=s,function(e){var t=e-(e>>1)&1431655765;return 16843009*((t=(858993459&t)+(t>>2&858993459))+(t>>4)&252645135)>>24}(n)>o)throw new r("Symbol out of range");e.codes[i]=a}))}))}},{key:"buildCaches",value:function(){this.sortedCodes=Object.values(this.codes).sort((function(e,t){return e.bitLength-t.bitLength||e.bitCode-t.bitCode})),this.sortedByValue=Object.values(this.codes).sort((function(e,t){return e.value-t.value})),this.sortedValuesByBitCode=this.sortedCodes.map((function(e){return e.value})),this.sortedBitCodes=this.sortedCodes.map((function(e){return e.bitCode})),this.sortedBitLengthsByBitCode=this.sortedCodes.map((function(e){return e.bitLength}));var e=Math.max.apply(Math,Pn(this.sortedBitCodes));this.bitCodeToValue=new Array(e+1).fill(-1);for(var t=0;t<this.sortedBitCodes.length;t+=1)this.bitCodeToValue[this.sortedCodes[t].bitCode]=t}},{key:"decode",value:function(e,t,n,r){return this._decode(e,t,r.coreBlock)}},{key:"_decodeZeroLengthCode",value:function(){return this.sortedCodes[0].value}},{key:"_decode",value:function(e,t,n){for(var i=t.content,a=0,o=0,s=0;s<this.sortedCodes.length;s+=1){var u=this.sortedCodes[s].bitLength;o<<=u-a,o|=this._getBits(i,n,u-a),a=u;var c=this.bitCodeToValue[o];if(c>-1&&this.sortedBitLengthsByBitCode[c]===u)return this.sortedValuesByBitCode[c];for(var l=s;this.sortedCodes[l+1].bitLength===u&&l<this.sortedCodes.length;l+=1)s+=1}throw new r("Huffman symbol not found.")}}]),n}(i)},function(e,t,n){var r=n(0),i=r.CramUnimplementedError,a=r.CramMalformedError,o=r.CramBufferOverrunError,s=n(6),u=n(8).parseItf8;e.exports=function(e){kn(n,e);var t=Mn(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(bn(this,n),"int"===(e=t.call(this,r,a)).dataType)e._decodeData=e._decodeInt;else{if("byte"!==e.dataType)throw new i("".concat(e.dataType," decoding not yet implemented by EXTERNAL codec"));e._decodeData=e._decodeByte}return Tn(e)}return xn(n,[{key:"decode",value:function(e,t,n,r){var i=this.parameters.blockContentId,o=n[i];if(!o)throw new a("no block found with content ID ".concat(i));var s=r.externalBlocks.getCursor(i);return this._decodeData(o,s)}},{key:"_decodeInt",value:function(e,t){var n=In(u(e.content,t.bytePosition),2),r=n[0],i=n[1];return t.bytePosition+=i,r}},{key:"_decodeByte",value:function(e,t){if(t.bytePosition>=e.content.length)throw new o("attempted to read beyond end of block. this file seems truncated.");var n=e.content[t.bytePosition];return t.bytePosition+=1,n}}]),n}(s)},function(e,t,n){var r=n(0),i=r.CramBufferOverrunError,a=r.CramMalformedError,o=n(6);e.exports=function(e){kn(n,e);var t=Mn(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(bn(this,n),e=t.call(this,r,i),"byteArray"!==i)throw new TypeError("byteArrayStop codec does not support data type ".concat(i));return e._decode=e._decodeByteArray,Tn(e)}return xn(n,[{key:"decode",value:function(e,t,n,r){var i=this.parameters.blockContentId,o=n[i];if(!o)throw new a("no block found with content ID ".concat(i));var s=r.externalBlocks.getCursor(i);return this._decode(o,s)}},{key:"_decodeByteArray",value:function(e,t){for(var n=e.content,r=this.parameters.stopByte,a=t.bytePosition,o=t.bytePosition;n[o]!==r&&o<n.length;){if(o===n.length)throw new i("byteArrayStop reading beyond length of data buffer?");o+=1}return t.bytePosition=o+1,n.slice(a,o)}}]),n}(o)},function(e,t,n){var r=n(8).tinyMemoize,i=function(e){kn(n,e);var t=Mn(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(bn(this,n),(e=t.call(this,r,i)).instantiateCodec=a,"byteArray"!==i)throw new TypeError("byteArrayLength does not support data type ".concat(i));return Tn(e)}return xn(n,[{key:"decode",value:function(e,t,n,r){for(var i=this._getLengthCodec().decode(e,t,n,r),a=this._getDataCodec(),o=new Array(i),s=0;s<i;s+=1)o[s]=a.decode(e,t,n,r);return o}},{key:"_getLengthCodec",value:function(){var e=this.parameters.lengthsEncoding;return this.instantiateCodec(e,"int")}},{key:"_getDataCodec",value:function(){var e=this.parameters.valuesEncoding;return this.instantiateCodec(e,"byte")}}]),n}(n(6));"_getLengthCodec _getDataCodec".split(" ").forEach((function(e){return r(i,e)})),e.exports=i},function(e,t,n){var r=n(0).CramUnimplementedError,i=n(6);e.exports=function(e){kn(n,e);var t=Mn(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(bn(this,n),"int"!==(e=t.call(this,i,a)).dataType)throw new r("".concat(e.dataType," decoding not yet implemented by BETA codec"));return Tn(e)}return xn(n,[{key:"decode",value:function(e,t,n,r){return this._getBits(t.content,r.coreBlock,this.parameters.length)-this.parameters.offset}}]),n}(i)},function(e,t,n){var r=n(0).CramUnimplementedError,i=n(6);e.exports=function(e){kn(n,e);var t=Mn(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(bn(this,n),"int"!==(e=t.call(this,i,a)).dataType)throw new r("".concat(e.dataType," decoding not yet implemented by GAMMA codec"));return Tn(e)}return xn(n,[{key:"decode",value:function(e,t,n,r){for(var i=1;0===this._getBits(t.content,r.coreBlock,1);)i+=1;return(this._getBits(t.content,r.coreBlock,i-1)|1<<i-1)-this.parameters.offset}}]),n}(i)},function(e,t,n){var r=n(0).CramUnimplementedError,i=n(6);e.exports=function(e){kn(n,e);var t=Mn(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(bn(this,n),"int"!==(e=t.call(this,i,a)).dataType)throw new r("".concat(e.dataType," decoding not yet implemented by SUBEXP codec"));return Tn(e)}return xn(n,[{key:"decode",value:function(e,t,n,r){for(var i,a,o=0;this._getBits(t.content,r.coreBlock,1);)o+=1;return 0===o?(i=this.parameters.K,a=this._getBits(t.content,r.coreBlock,i)):a=1<<(i=o+this.parameters.K-1)|this._getBits(t.content,r.coreBlock,i),a-this.parameters.offset}}]),n}(i)},function(e,t,n){var r=n(88),i=n(90);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=b(e)),e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),h=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(91);function b(e,t,n){if(e&&i.isObject(e)&&e instanceof a)return e;var r=new a;return r.parse(e,t,n),r}a.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+vn(e));var a=e.indexOf("?"),s=-1!==a&&a<e.indexOf("#")?"?":"#",c=e.split(s);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(s);if(b=b.trim(),!n&&1===e.split("#").length){var w=u.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=o.exec(b);if(x){var k=(x=x[0]).toLowerCase();this.protocol=k,b=b.substr(x.length)}if(n||x||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===b.substr(0,2);!S||x&&v[x]||(b=b.substr(2),this.slashes=!0)}if(!v[x]&&(S||x&&!m[x])){for(var _,C,R=-1,E=0;E<f.length;E++)-1!==(A=b.indexOf(f[E]))&&(-1===R||A<R)&&(R=A);for(-1!==(C=-1===R?b.lastIndexOf("@"):b.lastIndexOf("@",R))&&(_=b.slice(0,C),b=b.slice(C+1),this.auth=decodeURIComponent(_)),R=-1,E=0;E<h.length;E++){var A;-1!==(A=b.indexOf(h[E]))&&(-1===R||A<R)&&(R=A)}-1===R&&(R=b.length),this.host=b.slice(0,R),b=b.slice(R),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var M=this.hostname.split(/\./),L=(E=0,M.length);E<L;E++){var I=M[E];if(I&&!I.match(p)){for(var P="",N=0,O=I.length;N<O;N++)I.charCodeAt(N)>127?P+="x":P+=I[N];if(!P.match(p)){var F=M.slice(0,E),D=M.slice(E+1),B=I.match(d);B&&(F.push(B[1]),D.unshift(B[2])),D.length&&(b="/"+D.join(".")+b),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=r.toASCII(this.hostname));var z=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+z,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!g[k])for(E=0,L=l.length;E<L;E++){var H=l[E];if(-1!==b.indexOf(H)){var j=encodeURIComponent(H);j===H&&(j=escape(H)),b=b.split(H).join(j)}}var q=b.indexOf("#");-1!==q&&(this.hash=b.substr(q),b=b.slice(0,q));var V=b.indexOf("?");if(-1!==V?(this.search=b.substr(V),this.query=b.substr(V+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,V)):t&&(this.search="",this.query={}),b&&(this.pathname=b),m[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var G=this.search||"";this.path=z+G}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+a+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},a.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(i.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var n=new a,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!m[e.protocol]){for(var h=Object.keys(e),f=0;f<h.length;f++){var p=h[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=w||b||n.host&&e.pathname,k=x,S=n.pathname&&n.pathname.split("/")||[],_=(d=e.pathname&&e.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(_&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),x=x&&(""===d[0]||""===S[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=d;else if(d.length)S||(S=[]),S.pop(),S=S.concat(d),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search))return _&&(n.hostname=n.host=S.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=S.slice(-1)[0],R=(n.host||e.host||S.length>1)&&("."===C||".."===C)||""===C,E=0,A=S.length;A>=0;A--)"."===(C=S[A])?S.splice(A,1):".."===C?(S.splice(A,1),E++):E&&(S.splice(A,1),E--);if(!x&&!k)for(;E--;E)S.unshift("..");!x||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),R&&"/"!==S.join("/").substr(-1)&&S.push("");var T,M=""===S[0]||S[0]&&"/"===S[0].charAt(0);return _&&(n.hostname=n.host=M?"":S.length?S.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift())),(x=x||n.host&&S.length)&&!M&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,r){var i;
/*! https://mths.be/punycode v1.4.1 by @mathias */!function(a){t&&t.nodeType,e&&e.nodeType;var o="object"==vn(r)&&r;o.global!==o&&o.window!==o&&o.self;var s,u=2147483647,c=36,l=/^xn--/,h=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,g=String.fromCharCode;function v(e){throw new RangeError(p[e])}function m(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+m((e=e.replace(f,".")).split("."),t).join(".")}function b(e){for(var t,n,r=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function w(e){return m(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+g(e)})).join("")}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function k(e,t,n){var r=0;for(e=n?d(e/700):e>>1,e+=d(e/t);e>455;r+=c)e=d(e/35);return d(r+36*e/(e+38))}function S(e){var t,n,r,i,a,o,s,l,h,f,p,g=[],m=e.length,y=0,b=128,x=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&v("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(a=y,o=1,s=c;i>=m&&v("invalid-input"),((l=(p=e.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:c)>=c||l>d((u-y)/o))&&v("overflow"),y+=l*o,!(l<(h=s<=x?1:s>=x+26?26:s-x));s+=c)o>d(u/(f=c-h))&&v("overflow"),o*=f;x=k(y-a,t=g.length+1,0==a),d(y/t)>u-b&&v("overflow"),b+=d(y/t),y%=t,g.splice(y++,0,b)}return w(g)}function _(e){var t,n,r,i,a,o,s,l,h,f,p,m,y,w,S,_=[];for(m=(e=b(e)).length,t=128,n=0,a=72,o=0;o<m;++o)(p=e[o])<128&&_.push(g(p));for(r=i=_.length,i&&_.push("-");r<m;){for(s=u,o=0;o<m;++o)(p=e[o])>=t&&p<s&&(s=p);for(s-t>d((u-n)/(y=r+1))&&v("overflow"),n+=(s-t)*y,t=s,o=0;o<m;++o)if((p=e[o])<t&&++n>u&&v("overflow"),p==t){for(l=n,h=c;!(l<(f=h<=a?1:h>=a+26?26:h-a));h+=c)S=l-f,w=c-f,_.push(g(x(f+S%w,0))),l=d(S/w);_.push(g(x(l,0))),a=k(n,y,r==i),n=0,++r}++n,++t}return _.join("")}s={version:"1.4.1",ucs2:{decode:b,encode:w},decode:S,encode:_,toASCII:function(e){return y(e,(function(e){return h.test(e)?"xn--"+_(e):e}))},toUnicode:function(e){return y(e,(function(e){return l.test(e)?S(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(89)(e),n(2))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==vn(e)&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){t.decode=t.parse=n(92),t.encode=t.stringify=n(93)},function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,a){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h,f,p,d,g=e[l].replace(s,"%20"),v=g.indexOf(n);v>=0?(h=g.substr(0,v),f=g.substr(v+1)):(h=g,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),r(o,p)?i(o[p])?o[p].push(d):o[p]=[o[p],d]:o[p]=d}return o};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=function(e){switch(vn(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==vn(e)?a(o(e),(function(o){var s=encodeURIComponent(r(o))+n;return i(e[o])?a(e[o],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[o]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){(function(t){var r=n(95),i=n(96);e.exports=function(){function e(t){var n=this;bn(this,e),this.position=0,this.url=t,this.cache=new i({fetch:function(e,t){return n._fetch(e,t)}})}var n,a,o;return xn(e,[{key:"_fetch",value:(o=yn(regeneratorRuntime.mark((function e(n,i){var a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},i<1/0?a.range="bytes=".concat(n,"-").concat(n+i):i===1/0&&0!==n&&(a.range="bytes=".concat(n,"-")),e.next=4,r(this.url,{method:"GET",headers:a,redirect:"follow",mode:"cors"});case 4:if((200!==(o=e.sent).status||0!==n)&&206!==o.status){e.next=13;break}return e.t0=t,e.next=9,o.arrayBuffer();case 9:return e.t1=e.sent,s=e.t0.from.call(e.t0,e.t1),u=/\/(\d+)$/.exec(o.headers.get("content-range")),e.abrupt("return",(u&&u[1]?this._stat={size:parseInt(u[1],10)}:this._stat={size:void 0},s));case 13:throw new Error("HTTP ".concat(o.status," fetching ").concat(this.url));case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"read",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return null===r&&(this.position,this.position+=n),this.cache.get(e,t,n,r)}},{key:"readFile",value:(a=yn(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(this.url,{method:"GET",redirect:"follow",mode:"cors"});case 2:return n=e.sent,e.t0=t,e.next=6,n.arrayBuffer();case 6:return e.t1=e.sent,e.abrupt("return",e.t0.from.call(e.t0,e.t1));case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"stat",value:(n=yn(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._stat){e.next=6;break}return n=t.allocUnsafe(10),e.next=4,this.read(n,0,10,0);case 4:if(this._stat){e.next=6;break}throw new Error("unable to determine size of file at ".concat(this.url));case 6:return e.abrupt("return",this._stat);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}]),e}()}).call(this,n(1).Buffer)},function(e,t){var n=function(e){function t(){this.fetch=!1}return t.prototype=e,new t}("undefined"!=typeof self?self:this);!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in e,o="ArrayBuffer"in e;if(o)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=d(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=d(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=c(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},f.prototype.delete=function(e){delete this.map[c(e)]},f.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},f.prototype.set=function(e,t){this.map[c(e)]=l(t)},f.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},r&&(f.prototype[Symbol.iterator]=f.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var n,r,i=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function x(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},m.call(b.prototype),m.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];x.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,n){return new Promise((function(r,a){var o=new b(e,n);if(o.signal&&o.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new x(i,n))},s.onerror=function(){a(new TypeError("Network request failed"))},s.ontimeout=function(){a(new TypeError("Network request failed"))},s.onabort=function(){a(new t.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",u)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}S.polyfill=!0,e.fetch||(e.fetch=S,e.Headers=f,e.Request=b,e.Response=x),t.Headers=f,t.Request=b,t.Response=x,t.fetch=S}({})}(n),delete n.fetch.polyfill,e.exports=t=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,t.default=n.fetch},function(e,t,n){var r=n(30);e.exports=function(){function e(t){var n=t.fetch,i=t.size,a=void 0===i?1e7:i,o=t.chunkSize,s=void 0===o?32768:o;if(bn(this,e),!n)throw new Error("fetch function required");this.fetch=n,this.chunkSize=s,this.lruCache=new r({maxSize:Math.floor(a/s)})}return xn(e,[{key:"get",value:function(){var e=yn(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<n+r)){e.next=2;break}throw new Error("output buffer not big enough for request");case 2:for(a=Math.floor(i/this.chunkSize),o=Math.floor((i+r)/this.chunkSize),s=new Array(o-a+1),u=function(e){s[e-a]=f._getChunk(e).then((function(t){return{data:t,chunkNumber:e}}))},c=a;c<=o;c+=1)u(c);return e.next=7,Promise.all(s);case 7:l=e.sent,h=i-l[0].chunkNumber*this.chunkSize,l.forEach((function(e){var s=e.data,u=e.chunkNumber,c=u*f.chunkSize,l=0,p=f.chunkSize,d=n+(u-a)*f.chunkSize-h;u===a&&(d=n,l=h),u===o&&(p=i+r-c),s.copy(t,d,l,p)}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_getChunk",value:function(e){var t=this.lruCache.get(e);if(t)return t;var n=this.fetch(e*this.chunkSize,this.chunkSize);return this.lruCache.set(e,n),n}}]),e}()},function(e,t,n){n(34).promisify;var r=null,i=r;e.exports=function(){function e(t){bn(this,e),this.position=0,this.filename=t,this.fd=i(this.filename,"r")}var t,n,r;return xn(e,[{key:"read",value:(r=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,r=a.length>2?a[2]:void 0,null===(i=a.length>3?a[3]:void 0)&&(this.position,this.position+=r),e.t0=null,e.next=8,this.fd;case 8:return e.t1=e.sent,e.t2=t,e.t3=n,e.t4=r,e.t5=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"readFile",value:(n=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=null,e.next=3,this.fd;case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"stat",value:(t=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._stat,e.t0){e.next=9;break}return e.t1=null,e.next=5,this.fd;case 5:return e.t2=e.sent,e.next=8,(0,e.t1)(e.t2);case 8:this._stat=e.sent;case 9:return e.abrupt("return",this._stat);case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},function(e,t){e.exports={parseHeaderText:function(e){var t=e.split(/\r?\n/),n=[];return t.forEach((function(e){var t=function(e){return Nn(e)||On(e)||Fn(e)||Bn()}(e.split(/\t/)),r=t[0],i=t.slice(1).map((function(e){var t=In(e.split(":",2),2);return{tag:t[0],value:t[1]}}));r&&n.push({tag:r.substr(1),data:i})})),n}}},function(e,t,n){var r=n(0),i=r.CramUnimplementedError,a=r.CramSizeLimitError,o=n(18);e.exports=function(){function e(t){if(bn(this,e),t.cram?this.cram=t.cram:this.cram=new o({url:t.cramUrl,path:t.cramPath,filehandle:t.cramFilehandle,seqFetch:t.seqFetch,checkSequenceMD5:t.checkSequenceMD5,cacheSize:t.cacheSize}),!(this.cram instanceof o))throw new Error("invalid arguments: no cramfile");if(this.index=t.index,!this.index.getEntriesForRange)throw new Error("invalid arguments: not an index");this.fetchSizeLimit=t.fetchSizeLimit||3e6}var t;return xn(e,[{key:"getRecordsForRange",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var o,s,u,c,l,h,f,p,d,g,v,m,y,b,w,x,k,S,_,C,R,E,A,T,M,L,I,P=this,N=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=N.length>3&&void 0!==N[3]?N[3]:{}).viewAsPairs=s.viewAsPairs||!1,s.pairAcrossChr=s.pairAcrossChr||!1,s.maxInsertSize=s.maxInsertSize||2e5,"string"!=typeof t){e.next=3;break}throw new i("string sequence names not yet supported");case 3:return u=t,e.next=6,this.index.getEntriesForRange(u,n,r);case 6:if(c=e.sent,!((l=c.map((function(e){return e.sliceBytes})).reduce((function(e,t){return e+t}),0))>this.fetchSizeLimit)){e.next=10;break}throw new a("data size of ".concat(l.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 10:return h=function(e){return e.sequenceId===t&&e.alignmentStart<=r&&e.alignmentStart+e.lengthOnRef>=n},e.next=13,Promise.all(c.map((function(e){return P.getRecordsInSlice(e,h)})));case 13:if(f=e.sent,p=(o=Array.prototype).concat.apply(o,Pn(f)),!s.viewAsPairs){e.next=36;break}for(d={},g={},v=0;v<p.length;v+=1)m=p[v].readName,y=p[v].uniqueId,d[m]||(d[m]=0),d[m]+=1,g[y]=1;for(b={},Object.entries(d).forEach((function(e){var t=In(e,2),n=t[0];1===t[1]&&(b[n]=!0)})),w=[],x=0;x<p.length;x+=1)k=p[x].readName,b[k]&&p[x].mate&&(p[x].mate.sequenceId===u||s.pairAcrossChr)&&Math.abs(p[x].alignmentStart-p[x].mate.alignmentStart)<s.maxInsertSize&&(S=this.index.getEntriesForRange(p[x].mate.sequenceId,p[x].mate.alignmentStart,p[x].mate.alignmentStart+1),w.push(S));return e.next=24,Promise.all(w);case 24:for(_=e.sent,C=[],R=0;R<_.length;R+=1)(E=C).push.apply(E,Pn(_[R]));if(C=C.sort((function(e,t){return e.toString().localeCompare(t.toString())})).filter((function(e,t,n){return!t||e.toString()!==n[t-1].toString()})),A=[],T=[],!((M=C.map((function(e){return e.sliceBytes})).reduce((function(e,t){return e+t}),0))>this.fetchSizeLimit)){e.next=31;break}throw new Error("mate data size of ".concat(M.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 31:return C.forEach((function(e){var t=P.cram.featureCache.get(e.toString());t||(t=P.getRecordsInSlice(e,(function(){return!0})),P.cram.featureCache.set(e.toString(),t)),A.push(t);var n=t.then((function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e[n];b[r.readName]&&!g[r.uniqueId]&&t.push(r)}return t}));T.push(n)})),e.next=34,Promise.all(T);case 34:(L=e.sent).length&&(I=L.reduce((function(e,t){return e.concat(t)})),p=p.concat(I));case 36:return e.abrupt("return",p);case 37:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"getRecordsInSlice",value:function(e,t){var n=e.containerStart,r=e.sliceStart,i=e.sliceBytes;return this.cram.getContainerAtPosition(n).getSlice(r,i).getRecords(t)}},{key:"hasDataForReferenceSequence",value:function(e){return this.index.hasDataForReferenceSequence(e)}}]),e}()},function(e,t,n){var r=(0,n(34).promisify)(n(20).gunzip),i=n(33).open,a=n(0).CramMalformedError,o=function(){function e(t){bn(this,e),Object.assign(this,t)}return xn(e,[{key:"toString",value:function(){return"".concat(this.start,":").concat(this.span,":").concat(this.containerStart,":").concat(this.sliceStart,":").concat(this.sliceBytes)}}]),e}();function s(e,t){if(t.some((function(e){return void 0===e})))throw new a("invalid .crai index file");var n=In(t,6),r=n[0],i=n[1],s=n[2],u=n[3],c=n[4],l=n[5];e[r]||(e[r]=[]),e[r].push(new o({start:i,span:s,containerStart:u,sliceStart:c,sliceBytes:l}))}e.exports=function(){function e(t){bn(this,e);var n=i(t.url,t.path,t.filehandle);this.readFile=n.readFile.bind(n),this.index=this.parseIndex()}var t,n;return xn(e,[{key:"parseIndex",value:function(){var e={};return this.readFile().then((function(e){return 31===e[0]&&139===e[1]?r(e):e})).then((function(t){for(var n=[],r="",i=0;i<t.length;i+=1){var o=t[i];if(o>=48&&o<=57||!r&&45===o)r+=String.fromCharCode(o);else if(9===o)n.push(Number.parseInt(r,10)),r="";else if(10===o)n.push(Number.parseInt(r,10)),r="",s(e,n),n=[];else if(13!==o&&32!==o)throw new a("invalid .crai index file")}return r&&n.push(Number.parseInt(r,10)),6===n.length&&s(e,n),Object.entries(e).forEach((function(t){var n=In(t,2),r=n[0],i=n[1];e[r]=i.sort((function(e,t){return e.start-t.start||e.span-t.span}))})),e}))}},{key:"getIndex",value:function(){return this.index}},{key:"hasDataForReferenceSequence",value:(n=yn(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.index;case 2:return e.t0=t,e.abrupt("return",!!e.sent[e.t0]);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getEntriesForRange",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.index;case 2:if(e.t0=t,i=e.sent[e.t0]){e.next=6;break}return e.abrupt("return",[]);case 6:a=i.length,o=function(e){var t=e.start,i=e.start+e.span;return t>=r?-1:i<=n?1:0},u=0,c=a-1;case 8:if(!(u<=c)){e.next=19;break}if(!((l=o(i[s=Math.round((c+u)/2)]))>0)){e.next=14;break}u=s+1,e.next=17;break;case 14:if(l<0){e.next=16;break}return e.abrupt("break",19);case 16:c=s-1;case 17:e.next=8;break;case 19:for(h=s;h&&!o(i[h-1]);)h-=1;for(f=s;f<a-1&&!o(i[f+1]);)f+=1;return p=i[h].start,e.abrupt("return",i[f].start+i[f].span>=n&&r>=p?i.slice(h,f+1):[]);case 25:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}()}]),Tk=function(){function e(t,n,r){bn(this,e),this.config=t,this.browser=r,this.genome=n,this.cramFile=new Ak.CramFile({filehandle:new Mk(t.url,t),seqFetch:t.seqFetch||function(e,t,n){var r=this.genome.sequence,i=this.genome;return this.getHeader().then((function(a){var o=i.getChromosomeName(a.chrNames[e]);return r.getSequence(o,t-1,n)}))}.bind(this),checkSequenceMD5:void 0===t.checkSequenceMD5||t.checkSequenceMD5});var i=new Mk(t.indexURL,t);this.indexedCramFile=new Ak.IndexedCramFile({cram:this.cramFile,index:new Ak.CraiIndex({filehandle:i}),fetchSizeLimit:3e7}),Xx.setReaderDefaults(this,t)}var t,n;return xn(e,[{key:"getHeader",value:(n=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.header){e.next=50;break}return t=this.genome,e.next=4,this.cramFile.getSamHeader();case 4:n=e.sent,r={},i=[],a={},o=[],s=zn(n),e.prev=10,s.s();case 12:if((u=s.n()).done){e.next=41;break}if("SQ"!==(c=u.value).tag){e.next=38;break}l=zn(c.data),e.prev=16,l.s();case 18:if((h=l.n()).done){e.next=28;break}if("SN"!==(f=h.value).tag){e.next=26;break}return p=f.value,r[p]=i.length,i.push(p),t&&(d=t.getChromosomeName(p),a[d]=p),e.abrupt("break",28);case 26:e.next=18;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(16),l.e(e.t0);case 33:return e.prev=33,l.f(),e.finish(33);case 36:e.next=39;break;case 38:"RG"===c.tag&&o.push(c.data);case 39:e.next=12;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(10),s.e(e.t1);case 46:return e.prev=46,s.f(),e.finish(46);case 49:this.header={chrNames:i,chrToIndex:r,chrAliasTable:a,readGroups:o};case 50:return e.abrupt("return",this.header);case 51:case"end":return e.stop()}}),e,this,[[10,43,46,49],[16,30,33,36]])}))),function(){return n.apply(this,arguments)})},{key:"readAlignments",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,d,g,v,m,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=function(e,t){var n,r,i=[],a=0,o="";if(t.scStart=t.start,t.scLengthOnRef=t.lengthOnRef,e.readFeatures){var s,u=zn(e.readFeatures);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=c.code,h=c.data,f=c.pos-1,p=c.refPos-1;switch(l){case"S":case"I":case"i":case"N":case"D":if(f>a){var d=f-a;i.push(new Vx({start:p-d,seqOffset:a,len:d,type:"M"})),a+=d,o+=d+"M"}if("S"===l){var g=p;t.scLengthOnRef+=h.length,0===f&&(t.scStart-=h.length,g-=h.length);var v=h.length;i.push(new Vx({start:g,seqOffset:a,len:v,type:"S"})),a+=v,o+=v+l}else if("I"===l||"i"===l){void 0===n&&(n=[]);var m="i"===l?1:h.length;n.push(new Vx({start:p-1,len:m,seqOffset:a,type:"I"})),a+=m,o+=m+l}else"D"!==l&&"N"!==l||(r||(r=[]),r.push({start:p,len:h,type:l}),o+=h+l);break;case"H":case"P":o+=h+l}}}catch(e){u.e(e)}finally{u.f()}}var y=e.readLength-a;y>0&&(i.push(new Vx({start:e.alignmentStart+e.lengthOnRef-y-1,seqOffset:a,len:y,type:"M"})),o+=y+"M"),t.blocks=i,t.insertions=n,t.gaps=r,t.cigar=o},m=function(e,t){var n=new zx;if(n.chr=t[e.sequenceId],n.start=e.alignmentStart-1,n.lengthOnRef=e.lengthOnRef,n.flags=e.flags,n.strand=!(16&e.flags),n.fragmentLength=e.templateLength||e.templateSize,n.mq=e.mappingQuality,n.end=e.alignmentStart+e.lengthOnRef,n.readGroupId=e.readGroupId,e.mate&&void 0!==e.mate.sequenceId){var r=void 0!==e.mate.flags?!(1&e.mate.flags):!(32&e.flags);n.mate={chr:t[e.mate.sequenceId],position:e.mate.alignmentStart,strand:r}}return n.seq=e.getReadBases(),n.qual=e.qualityScores,n.tagDict=e.tags,n.readName=e.readName,y(e,n),n.mate&&n.start>n.mate.position&&n.fragmentLength>0&&(n.fragmentLength=-n.fragmentLength),Xx.setPairOrientation(n),n},this.browser,e.next=5,this.getHeader();case 5:if(i=e.sent,a=i.chrAliasTable.hasOwnProperty(t)?i.chrAliasTable[t]:t,o=i.chrToIndex[a],s=new Ix(t,n,r,this.samplingWindowSize,this.samplingDepth,this.pairsSupported,this.alleleFreqThreshold),void 0!==o){e.next=13;break}return e.abrupt("return",s);case 13:return e.prev=13,e.next=16,this.indexedCramFile.getRecordsForRange(o,n,r);case 16:u=e.sent,c=zn(u),e.prev=18,c.s();case 20:if((l=c.n()).done){e.next=41;break}if(h=l.value,f=h.sequenceId,p=h.alignmentStart,d=p+h.lengthOnRef,!(f<0)){e.next=29;break}return e.abrupt("continue",39);case 29:if(!(f>o||p>r)){e.next=33;break}return e.abrupt("return");case 33:if(!(f<o)){e.next=35;break}return e.abrupt("continue",39);case 35:if(!(d<n)){e.next=37;break}return e.abrupt("continue",39);case 37:g=m(h,i.chrNames),s.push(g);case 39:e.next=20;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(18),c.e(e.t0);case 46:return e.prev=46,c.f(),e.finish(46);case 49:return s.finish(),e.abrupt("return",s);case 53:throw e.prev=53,e.t1=e.catch(13),(v=e.t1.message)&&v.indexOf("MD5")>=0&&(v="Sequence mismatch. Is this the correct genome for the loaded CRAM?"),ir.presentAlert(new Error(v)),e.t1;case 59:case"end":return e.stop()}}),e,this,[[13,53],[18,43,46,49]])}))),function(e,n,r){return t.apply(this,arguments)})}]),e}(),Mk=function(){function e(t,n){var r=this;bn(this,e),this.position=0,this.url=t,this.config=n,this.cache=new Lk({fetch:function(e,t){return r._fetch(e,t)}})}var t,r,i,a;return xn(e,[{key:"_fetch",value:(a=yn(regeneratorRuntime.mark((function e(t,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={start:t,size:r},this._stat={size:void 0},e.next=4,im.loadArrayBuffer(this.url,Yv(this.config,{range:i}));case 4:return a=e.sent,e.abrupt("return",n.from(a));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"read",value:(i=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,r=a.length>2&&void 0!==a[2]?a[2]:1/0,null===(i=a.length>3&&void 0!==a[3]?a[3]:0)&&(this.position,this.position+=r),e.abrupt("return",this.cache.get(t,n,r,i));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"readFile",value:(r=yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,im.loadArrayBuffer(this.url,Yv(this.config));case 2:return t=e.sent,e.abrupt("return",n.from(t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"stat",value:(t=yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._stat){e.next=6;break}return t=n.allocUnsafe(10),e.next=4,this.read(t,0,10,0);case 4:if(this._stat){e.next=6;break}throw new Error("unable to determine size of file at ".concat(this.url));case 6:return e.abrupt("return",this._stat);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Lk=function(){function e(t){var n=t.fetch,r=t.size,i=void 0===r?1e7:r,a=t.chunkSize,o=void 0===a?32768:a;bn(this,e),this.fetch=n,this.chunkSize=o,this.lruCache=new Ik({maxSize:Math.floor(i/o)})}return xn(e,[{key:"get",value:function(){var e=yn(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<n+r)){e.next=2;break}throw new Error("output buffer not big enough for request");case 2:for(a=Math.floor(i/this.chunkSize),o=Math.floor((i+r)/this.chunkSize),s=new Array(o-a+1),u=function(e){s[e-a]=f._getChunk(e).then((function(t){return{data:t,chunkNumber:e}}))},c=a;c<=o;c+=1)u(c);return e.next=9,Promise.all(s);case 9:l=e.sent,h=i-l[0].chunkNumber*this.chunkSize,l.forEach((function(e){var s=e.data,u=e.chunkNumber,c=u*f.chunkSize,l=0,p=f.chunkSize,d=n+(u-a)*f.chunkSize-h;u===a&&(d=n,l=h),u===o&&(p=i+r-c),s.copy(t,d,l,p)}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_getChunk",value:function(e){var t=this.lruCache.get(e);if(t)return t;var n=this.fetch(e*this.chunkSize,this.chunkSize);return this.lruCache.set(e,n),n}}]),e}(),Ik=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(bn(this,e),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return xn(e,[{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var t=this.oldCache.get(e);return this._set(e,t),t}}},{key:"set",value:function(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}},{key:"has",value:function(e){return this.cache.has(e)||this.oldCache.has(e)}},{key:"peek",value:function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=zn(this),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=In(n.value,1),i=r[0],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=zn(this),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=In(n.value,2),i=r[1],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=zn(this.cache),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,r;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:i=zn(this.oldCache),e.prev=18,i.s();case 20:if((a=i.n()).done){e.next=28;break}if(o=a.value,s=In(o,1),u=s[0],this.cache.has(u)){e.next=26;break}return e.next=26,o;case 26:e.next=20;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(18),i.e(e.t1);case 33:return e.prev=33,i.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[1,11,14,17],[18,30,33,36]])}))},{key:"size",get:function(){var e,t=0,n=zn(this.oldCache.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value;this.cache.has(r)||t++}}catch(e){n.e(e)}finally{n.f()}return this._size+t}}]),e}(),Pk={ALIGNMENT_MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",CLIP_SOFT:"S",CLIP_HARD:"H",PAD:"P",SEQUENCE_MATCH:"=",SEQUENCE_MISMATCH:"X"},Nk=function(e,t){this.config=e,this.genome=t,this.url=e.url,this.filter=new Gx(e.filter),this.readGroupSetIds=e.readGroupSetIds,this.authKey=e.authKey,this.samplingWindowSize=void 0===e.samplingWindowSize?100:e.samplingWindowSize,this.samplingDepth=void 0===e.samplingDepth?1e3:e.samplingDepth,e.viewAsPairs?this.pairsSupported=!0:this.pairsSupported=void 0===e.pairsSupported||e.pairsSupported};Nk.prototype.readAlignments=function(e,t,n){var r=this.genome,i=this;return(i.chrAliasTable?Promise.resolve(i.chrAliasTable):i.readMetadata().then((function(e){if(i.chrAliasTable={},r&&e.readGroups&&e.readGroups.length>0){var t=e.readGroups[0].referenceSetId;return t?vw({url:i.url+"/references/search",body:{referenceSetId:t},decode:function(e){return e.references}}).then((function(e){return e.forEach((function(e){var t=e.name,n=r.getChromosomeName(t);i.chrAliasTable[n]=t})),i.chrAliasTable})):(function(e,t){var n;if("461916304629"===t||"337315832689"===t){for(n=1;n<23;n++)e["chr"+n]=n;e.chrX="X",e.chrY="Y",e.chrM="MT"}}(i.chrAliasTable,i.config.datasetId),i.chrAliasTable)}return i.chrAliasTable}))).then((function(r){var o=r.hasOwnProperty(e)?r[e]:e;return vw({url:i.url+"/reads/search",body:{readGroupSetIds:[i.readGroupSetIds],referenceName:o,start:t,end:n,pageSize:"10000"},decode:a,results:new Ix(e,t,n,i.samplingWindowSize,i.samplingDepth,i.pairsSupported,i.alleleFreqThreshold)})}));function a(e){var t,n,a,o,s,u=e.alignments,c=u.length,l=[];for(t=0;t<c;t++){var h=u[t];(n=new zx).readName=h.fragmentName,n.properPlacement=h.properPlacement,n.duplicateFragment=h.duplicateFragment,n.numberReads=h.numberReads,n.fragmentLength=h.fragmentLength,n.readNumber=h.readNumber,n.failedVendorQualityChecks=h.failedVendorQualityChecks,n.secondaryAlignment=h.secondaryAlignment,n.supplementaryAlignment=h.supplementaryAlignment,n.seq=h.alignedSequence,n.qual=h.alignedQuality,n.matePos=h.nextMatePosition,n.tagDict=h.info,n.flags=0,h.alignment?(n.mapped=!0,n.chr=h.alignment.position.referenceName,r&&(n.chr=r.getChromosomeName(n.chr)),n.start=parseInt(h.alignment.position.position),n.strand=!h.alignment.position.reverseStrand,n.mq=h.alignment.mappingQuality,n.cigar=f(h.alignment.cigar),a=p(h.alignment.cigar),n.lengthOnRef=a.lengthOnRef,s=d(n,a.array),n.blocks=s.blocks,n.insertions=s.insertions):n.mapped=!1,(o=h.nextMatePosition)&&(n.mate={chr:o.referenceFrame,position:parseInt(o.position),strand:!o.reverseStrand}),i.filter.pass(n)&&l.push(n)}return l;function f(e){var t="";return e.forEach((function(e){var n=Pk[e.operation],r=e.operationLength;t+=r+n})),t}function p(e){var t,n,r,i,a=0,o=[];for(i=0;i<e.length;i++)t=e[i],r=Pk[t.operation],n=parseInt(t.operationLength),"M"!==r&&"EQ"!==r&&"X"!==r&&"D"!==r&&"N"!==r&&"="!==r||(a+=n),o.push({len:n,ltr:r});return{lengthOnRef:a,array:o}}function d(e,t){for(var n,r,i,a=[],o=0,s=e.start,u=t.length,c=0;c<u;c++){var l=t[c];switch(l.ltr){case"H":case"P":break;case"S":o+=l.len,i="S";break;case"N":case"D":void 0===n&&(n=[]),n.push({start:s,len:l.len,type:l.ltr}),s+=l.len;break;case"I":void 0===r&&(r=[]),r.push(new Vx({start:s,len:l.len,seqOffset:o})),o+=l.len;break;case"M":case"EQ":case"=":case"X":a.push(new Vx({start:s,len:l.len,seqOffset:o,gapType:i})),o+=l.len,s+=l.len}}return{blocks:a,insertions:r,gaps:n}}}},Nk.prototype.readMetadata=function(){return gw({url:this.url,entity:"readgroupsets",entityId:this.readGroupSetIds})};var Ok=Sr,Fk=function(){function e(t,n){bn(this,e);var r=n.genome;if(this.config=t,this.genome=r,this.alignmentContainer=void 0,Ok(t.url)&&t.url.startsWith("data:")){if("cram"===t.format)throw"CRAM data uris are not supported";this.config.indexed=!1}"ga4gh"===t.sourceType?this.bamReader=new Nk(t,r):"pysam"===t.sourceType?this.bamReader=new ok(t,r):"htsget"===t.sourceType?this.bamReader=new uk(t,r):"shardedBam"===t.sourceType?this.bamReader=new ak(t,r):"cram"===t.format?this.bamReader=new Tk(t,r,n):!1===this.config.indexed?this.bamReader=new nk(t,r):this.bamReader=new ik(t,r),this.viewAsPairs=t.viewAsPairs,this.showSoftClips=t.showSoftClips}var t;return xn(e,[{key:"setViewAsPairs",value:function(e){this.viewAsPairs!==e&&(this.viewAsPairs=e)}},{key:"setShowSoftClips",value:function(e){this.showSoftClips!==e&&(this.showSoftClips=e)}},{key:"getAlignments",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.genome,a=this.showSoftClips,!this.alignmentContainer||!this.alignmentContainer.contains(t,n,r)){e.next=6;break}return e.abrupt("return",this.alignmentContainer);case 6:return e.next=8,this.bamReader.readAlignments(t,n,r);case 8:if(o=e.sent,s=o.alignments,this.viewAsPairs||(s=Mx([{alignments:s}])),u=s.length>0,o.packedAlignmentRows=Lx(s,o.start,o.end,a),o.alignments=void 0,this.alignmentContainer=o,!u){e.next=26;break}return e.next=18,i.sequence.getSequence(t,o.start,o.end);case 18:if(!(c=e.sent)){e.next=25;break}return o.coverageMap.refSeq=c,o.sequence=c,e.abrupt("return",o);case 25:console.error("No sequence for: "+t+":"+o.start+"-"+o.end);case 26:return e.abrupt("return",o);case 27:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}(),Dk=function(e){kn(r,e);var t,n=Mn(r);function r(e,t){var i;return bn(this,r),(i=n.call(this,e,t)).type="alignment",void 0===e.alleleFreqThreshold&&(e.alleleFreqThreshold=.2),i.featureSource=new Fk(e,t),i.showCoverage=void 0===e.showCoverage||e.showCoverage,i.showAlignments=void 0===e.showAlignments||e.showAlignments,i.coverageTrack=new Bk(e,An(i)),i.alignmentTrack=new zk(e,An(i)),i.alignmentTrack.setTop(i.coverageTrack,i.showCoverage),i.visibilityWindow=e.visibilityWindow||3e4,i.viewAsPairs=e.viewAsPairs,i.pairsSupported=!1!==e.pairsSupported,i.showSoftClips=e.showSoftClips,i.showAllBases=e.showAllBases,i.showMismatches=!1!==e.showMismatches,i.color=e.color||"rgb(185, 185, 185)",i.coverageColor=e.coverageColor||"rgb(150, 150, 150)",i.minFragmentLength=e.minFragmentLength,i.maxFragmentLength=e.maxFragmentLength,e.sort&&(Array.isArray(e.sort)?i.assignSort(e.sort[0]):i.assignSort(e.sort)),i.height=void 0!==e.height?e.height:300,i}return xn(r,[{key:"sort",value:function(e){e=this.assignSort(e);var t,n=zn(this.trackView.viewports);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.containsPosition(e.chr,e.position)){var i=r.getCachedFeatures();i&&(Uk(e,i),r.repaint())}}}catch(e){n.e(e)}finally{n.f()}}},{key:"assignSort",value:function(e){if(e.locus){var t=function(e){const t=e.split(":"),n=t[1].split("-"),r={chr:t[0],start:Number.parseInt(n[0].replace(/,/g,""))-1};return n.length>1?r.end=Number.parseInt(n[1].replace(/,/g,"")):r.end=r.start+1,r}(e.locus);e.chr=t.chr,e.position=t.start}else e.position--;return e.direction="ASC"===e.direction||!0===e.direction,e.chr=this.browser.genome.getChromosomeName(e.chr),this.sortObject=e,this.sortObject}},{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r,i,a){var o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureSource.getAlignments(t,n,r);case 2:return(o=e.sent).alignments&&o.alignments.length>99&&(void 0===this.minFragmentLength&&(this.minFragmentLength=o.pairedEndStats.lowerFragmentLength),void 0===this.maxFragmentLength&&(this.maxFragmentLength=o.pairedEndStats.upperFragmentLength)),(s=this.sortObject)&&s.chr===t&&s.position>=n&&s.position<=r&&Uk(s,o),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i,a){return t.apply(this,arguments)})},{key:"computePixelHeight",value:function(e){return(this.showCoverage?this.coverageTrack.height:0)+(this.showAlignments?this.alignmentTrack.computePixelHeight(e):0)+15}},{key:"draw",value:function(e){Lp.fillRect(e.context,0,e.pixelTop,e.pixelWidth,e.pixelHeight,{fillStyle:"rgb(255, 255, 255)"}),!0===this.showCoverage&&this.coverageTrack.height>0?(this.trackView.controlCanvas.style.display="block",this.coverageTrack.draw(e)):this.trackView.controlCanvas.style.display="none",!0===this.showAlignments&&(this.alignmentTrack.setTop(this.coverageTrack,this.showCoverage),this.alignmentTrack.draw(e))}},{key:"paintAxis",value:function(e,t,n){this.browser.isMultiLocusMode()?e.clearRect(0,0,t,n):this.coverageTrack.paintAxis(e,t,this.coverageTrack.height)}},{key:"contextMenuItemList",value:function(e){return this.alignmentTrack.contextMenuItemList(e)}},{key:"popupData",value:function(e){return!0===this.showCoverage&&e.y>=this.coverageTrack.top&&e.y<this.coverageTrack.height?this.coverageTrack.popupData(e):this.alignmentTrack.popupData(e)}},{key:"menuItemList",value:function(){var e=this,t=["<hr/>"];t=t.concat(Vm.numericDataMenuItems(this.trackView));var n=lc('<div class="igv-track-menu-category igv-track-menu-border-top">');n.text("Color by"),t.push({name:void 0,object:n,click:void 0,init:void 0});var r=[{key:"strand",label:"read strand"}];this.alignmentTrack.hasPairs&&(r.push({key:"firstOfPairStrand",label:"first-of-pair strand"}),r.push({key:"pairOrientation",label:"pair orientation"}),r.push({key:"fragmentLength",label:"insert size (TLEN)"}));var i="tag"+(this.alignmentTrack.colorByTag?" ("+this.alignmentTrack.colorByTag+")":"");r.push({key:"tag",label:i});for(var a=0,o=r;a<o.length;a++){var s=o[a],u=this.alignmentTrack.colorBy===s.key;t.push(this.colorByCB(s,u))}var c=function(){if(!e.autoHeight){var t=15+(e.showCoverage?e.coverageTrack.height:0)+(e.showAlignments?e.alignmentTrack.height:0);e.trackView.setTrackHeight(t)}};t.push({object:lc('<div class="igv-track-menu-border-top">')}),t.push({object:Um("Show Coverage",this.showCoverage),click:function(){e.showCoverage=!e.showCoverage,c(),e.trackView.checkContentHeight(),e.trackView.repaintViews()}}),t.push({object:Um("Show Alignments",this.showAlignments),click:function(){e.showAlignments=!e.showAlignments,c(),e.trackView.checkContentHeight(),e.trackView.repaintViews()}}),t.push({object:lc('<div class="igv-track-menu-border-top">')}),t.push({object:Um("Show all bases",this.showAllBases),click:function(){e.showAllBases=!e.showAllBases,e.config.showAllBases=e.showAllBases,e.trackView.repaintViews()}}),t.push({object:lc('<div class="igv-track-menu-border-top">')}),this.pairsSupported&&this.alignmentTrack.hasPairs&&t.push({object:Um("View as pairs",this.viewAsPairs),click:function(){e.viewAsPairs=!e.viewAsPairs,e.config.viewAsPairs=e.viewAsPairs,e.featureSource.setViewAsPairs(e.viewAsPairs);var t,n=zn(e.getCachedAlignmentContainers());try{for(n.s();!(t=n.n()).done;)t.value.setViewAsPairs(e.viewAsPairs)}catch(e){n.e(e)}finally{n.f()}e.trackView.repaintViews()}}),t.push({object:Um("Show soft clips",this.showSoftClips),click:function(){e.showSoftClips=!e.showSoftClips,e.config.showSoftClips=e.showSoftClips,e.featureSource.setShowSoftClips(e.showSoftClips);var t,n=zn(e.getCachedAlignmentContainers());try{for(n.s();!(t=n.n()).done;)t.value.setShowSoftClips(e.showSoftClips)}catch(e){n.e(e)}finally{n.f()}e.trackView.repaintViews()}});var l=lc('<div class="igv-track-menu-category igv-track-menu-border-top">');return l.text("Display mode"),t.push({name:void 0,object:l,click:void 0,init:void 0}),t.push({object:Um("expand","EXPANDED"===this.alignmentTrack.displayMode),click:function(){e.alignmentTrack.displayMode="EXPANDED",e.config.displayMode="EXPANDED",e.trackView.checkContentHeight(),e.trackView.repaintViews()}}),t.push({object:Um("squish","SQUISHED"===this.alignmentTrack.displayMode),click:function(){e.alignmentTrack.displayMode="SQUISHED",e.config.displayMode="SQUISHED",e.trackView.checkContentHeight(),e.trackView.repaintViews()}}),t}},{key:"colorByCB",value:function(e,t){var n=this;return{name:void 0,object:Um(e.label,t),click:function(t){e.key===n.alignmentTrack.colorBy?(n.alignmentTrack.colorBy="none",n.config.colorBy="none",n.trackView.repaintViews()):"tag"===e.key?n.browser.inputDialog.present({label:"Tag Name",value:n.alignmentTrack.colorByTag?n.alignmentTrack.colorByTag:"",callback:function(e){n.alignmentTrack.colorBy="tag",n.config.colorBy="tag",e!==n.alignmentTrack.colorByTag&&(n.alignmentTrack.colorByTag=e,n.config.colorByTag=e,n.alignmentTrack.tagColors=new Zw("Set1"),lc("#color-by-tag").text(self.alignmentTrack.colorByTag)),n.trackView.repaintViews()}},t):(n.alignmentTrack.colorBy=e.key,n.config.colorBy=e.key,n.trackView.repaintViews())},init:void 0}}},{key:"dispose",value:function(){this.trackView=void 0}},{key:"getState",value:function(){var e=Ln(Sn(r.prototype),"getState",this).call(this);return this.sortObject&&(e.sort={chr:this.sortObject.chr,position:this.sortObject.position+1,option:this.sortObject.option,direction:this.sortObject.direction?"ASC":"DESC"}),e}},{key:"getCachedAlignmentContainers",value:function(){return this.trackView.viewports.map((function(e){return e.getCachedFeatures()}))}},{key:"height",set:function(e){this._height=e,this.coverageTrack&&this.showAlignments&&(this.alignmentTrack.height=this.showCoverage?e-this.coverageTrack.height:e)},get:function(){return this._height}},{key:"dataRange",get:function(){return this.coverageTrack.dataRange},set:function(e){this.coverageTrack.dataRange=e}},{key:"logScale",get:function(){return this.coverageTrack.logScale},set:function(e){this.coverageTrack.logScale=e}},{key:"autoscale",get:function(){return this.coverageTrack.autoscale},set:function(e){this.coverageTrack.autoscale=e}}]),r}(ub),Bk=function(){function e(t,n){bn(this,e),this.parent=n,this.featureSource=n.featureSource,this.height=void 0!==t.coverageTrackHeight?t.coverageTrackHeight:50,this.paintAxis=yx,this.top=0,this.autoscale=t.autoscale||void 0===t.max,this.autoscale||(this.dataRange={min:t.min||0,max:t.max})}return xn(e,[{key:"draw",value:function(e){var t=e.pixelTop,n=(e.pixelHeight,this.parent.browser.nucleotideColors);if(!(t>this.height)){var r,i=e.context,a=e.features.coverageMap;a.refSeq&&(r=a.refSeq.toUpperCase());var o=e.bpPerPixel,s=e.bpStart,u=s+e.pixelWidth*o+1,c=this.parent.coverageColor;"rgb(185, 185, 185)"!==this.parent.color&&(c=ei.darkenLighten(this.parent.color,-35)),Lp.setProperties(i,{fillStyle:c,strokeStyle:c});for(var l=Math.max(1,Math.ceil(1/o)),h=0,f=a.coverage.length;h<f;h++){var p=a.bpStart+h;if(!(p<s)){if(p>u)break;var d=a.coverage[h];if(d){var g=Math.round(d.total/this.dataRange.max*this.height),v=this.height-g,m=Math.floor((p-s)/o);Lp.fillRect(i,m,v,l,g)}}}if(r)for(var y=0,b=a.coverage.length;y<b;y++){var w=a.bpStart+y;if(!(w<s)){if(w>u)break;var x=a.coverage[y];if(x){var k=x.total/this.dataRange.max*this.height,S=this.height-k,_=Math.floor((w-s)/o),C=r[y];if(x.isMismatch(C)){Lp.setProperties(i,{fillStyle:n[C]}),Lp.fillRect(i,_,S,l,k);for(var R=0,E=0,A=["A","C","T","G"];E<A.length;E++){var T=A[E],M=(x["pos"+T]+x["neg"+T])/this.dataRange.max*this.height;S=this.height-M-R,R+=M,Lp.setProperties(i,{fillStyle:n[T]}),Lp.fillRect(i,_,S,l,M)}}}}}}}},{key:"popupData",value:function(e){var t=e.viewport.getCachedFeatures();if(t&&0!==t.length){var n=Math.floor(e.genomicLocation),r=e.viewport.referenceFrame,i=t.coverageMap,a=[],o=Math.floor(n-i.bpStart),s=i.coverage[o];if(s){a.push(r.chr+":"+_r(1+n)),a.push({name:"Total Count",value:s.total});var u=s.posA+s.negA;u>0&&(u=u.toString()+" ("+Math.round(u/s.total*100)+"%, "+s.posA+"+, "+s.negA+"- )"),a.push({name:"A",value:u}),(u=s.posC+s.negC)>0&&(u=u.toString()+" ("+Math.round(u/s.total*100)+"%, "+s.posC+"+, "+s.negC+"- )"),a.push({name:"C",value:u}),(u=s.posG+s.negG)>0&&(u=u.toString()+" ("+Math.round(u/s.total*100)+"%, "+s.posG+"+, "+s.negG+"- )"),a.push({name:"G",value:u}),(u=s.posT+s.negT)>0&&(u=u.toString()+" ("+Math.round(u/s.total*100)+"%, "+s.posT+"+, "+s.negT+"- )"),a.push({name:"T",value:u}),(u=s.posN+s.negN)>0&&(u=u.toString()+" ("+Math.round(u/s.total*100)+"%, "+s.posN+"+, "+s.negN+"- )"),a.push({name:"N",value:u}),a.push("<HR/>"),a.push({name:"DEL",value:s.del.toString()}),a.push({name:"INS",value:s.ins.toString()})}return a}}}]),e}(),zk=function(){function e(t,n){bn(this,e),this.parent=n,this.browser=n.browser,this.featureSource=n.featureSource,this.top=0===t.coverageTrackHeight?0:t.coverageTrackHeight+5,this.displayMode=t.displayMode||"EXPANDED",this.alignmentRowHeight=t.alignmentRowHeight||14,this.squishedRowHeight=t.squishedRowHeight||3,this.negStrandColor=t.negStrandColor||"rgba(150, 150, 230, 0.75)",this.posStrandColor=t.posStrandColor||"rgba(230, 150, 150, 0.75)",this.insertionColor=t.insertionColor||"rgb(138, 94, 161)",this.deletionColor=t.deletionColor||"black",this.skippedColor=t.skippedColor||"rgb(150, 170, 170)",this.pairConnectorColor=t.pairConnectorColor,this.smallFragmentLengthColor=t.smallFragmentLengthColor||"rgb(0, 0, 150)",this.largeFragmentLengthColor=t.largeFragmentLengthColor||"rgb(200, 0, 0)",this.pairOrientation=t.pairOrienation||"fr",this.pairColors={},this.pairColors.RL=t.rlColor||"rgb(0, 150, 0)",this.pairColors.RR=t.rrColor||"rgb(20, 50, 200)",this.pairColors.LL=t.llColor||"rgb(0, 150, 150)",this.colorBy=t.colorBy||"pairOrientation",this.colorByTag=t.colorByTag?t.colorByTag.toUpperCase():void 0,this.bamColorTag=void 0===t.bamColorTag?"YC":t.bamColorTag,this.hideSmallIndels=t.hideSmallIndels,this.indelSizeThreshold=t.indelSizeThreshold||1,this.hasPairs=!1}return xn(e,[{key:"setTop",value:function(e,t){this.top=0===e.height||!1===t?0:5+e.height}},{key:"computePixelHeight",value:function(e){return e.packedAlignmentRows?(e.hasDownsampledIntervals()?10:0)+("SQUISHED"===this.displayMode?this.squishedRowHeight:this.alignmentRowHeight)*e.packedAlignmentRows.length+5:0}},{key:"draw",value:function(e){var t=e.features,n=e.context,r=e.bpPerPixel,i=e.bpStart,a=e.pixelWidth,o=i+a*r+1,s=t.packedAlignmentRows,u=this.parent.showSoftClips,c=this.parent.showAllBases,l=this.browser.nucleotideColors,h=t.sequence;h&&(h=h.toUpperCase());var f=0,p=e.pixelTop;n.save(),this.top&&n.translate(0,this.top);var d=p+e.pixelHeight;t.hasDownsampledIntervals()?(f=10,t.downsampledIntervals.forEach((function(e){var t=(e.start-i)/r,a=(e.end-i)/r;a-t>5&&(t+=1,a-=1),Lp.fillRect(n,t,2,a-t,3,{fillStyle:"black"})}))):f=0,this.alignmentsYOffset=f;var g="SQUISHED"===this.displayMode?this.squishedRowHeight:this.alignmentRowHeight;if(s)for(var v=s.length,m=0;m<v;m++){var y=s[m],b=f+g*m,w=g<=4?g:g-2;if(b>d)break;if(!(b+w<p)){var x,k=zn(y.alignments);try{for(k.s();!(x=k.n()).done;){var S=x.value;if(this.hasPairs=this.hasPairs||S.isPaired(),!(S.start+S.lengthOnRef<i)){if(S.start>o)break;!0!==S.hidden&&(S instanceof Cx?(_.call(this,S,b,w),C.call(this,S.firstAlignment,b,w),S.secondAlignment&&C.call(this,S.secondAlignment,b,w)):C.call(this,S,b,w))}}}catch(e){k.e(e)}finally{k.f()}}}function _(e,t,a){var s=this.getConnectorColor(e.firstAlignment),u=(e.connectingStart-i)/r,c=(e.connectingEnd-i)/r,l=t+a/2;e.connectingEnd<i||e.connectingStart>o||(e.mq<=0&&(s=ei.addAlpha(s,.15)),Lp.setProperties(n,{fillStyle:s,strokeStyle:s}),Lp.strokeLine(n,u,l,c,l))}function C(e,a,s){if(!(e.start+e.lengthOnRef<i||e.start>o)){var f=u?e.blocks:e.blocks.filter((function(e){return"S"!==e.type})),p=this.getAlignmentColor(e),d=p;e.mq<=0&&(p=ei.addAlpha(p,.15)),Lp.setProperties(n,{fillStyle:p,strokeStyle:d});for(var v=0;v<f.length;v++){var m=f[v];if(!(v!==f.length-1&&f[v+1].start<i)&&(M.call(this,m,v),m.start+m.len>o))break}if(e.insertions){var y,b=-1,w=zn(e.insertions);try{for(w.s();!(y=w.n()).done;){var x=y.value;if(!(this.hideSmallIndels&&x.len<=this.indelSizeThreshold||x.start<i)){if(x.start>o)break;var k=(x.start-i)/r-1;k-b>2&&(Lp.fillRect(n,k,a-1,3,s+2,{fillStyle:this.insertionColor}),b=k)}}}catch(e){w.e(e)}finally{w.f()}}if(e.gaps){var S,_=a+s/2,C=zn(e.gaps);try{for(C.s();!(S=C.n()).done;){var R=S.value,E=(R.start-i)/r,A=(R.start+R.len-i)/r,T="D"===R.type?this.deletionColor:this.skippedColor;Lp.strokeLine(n,E,_,A,_,{strokeStyle:T})}}catch(e){C.e(e)}finally{C.f()}}}function M(o,u){var v=o.start-t.start,m=(o.start-i)/r,y=(o.start+o.len-i)/r,b=Math.max(1,y-m),w=g/2,x="S"===o.type,k=e.mq<=0||this.highlightedAlignmentReadNamed===e.readName||x,S=d;this.highlightedAlignmentReadNamed===e.readName?S="red":x&&(S="rgb(50,50,50)");var _,C,R=!0===e.strand&&u===f.length-1,E=!1===e.strand&&0===u;if(R|E?(R?(_=[m,y,y+w,y,m,m],C=[a,a,a+s/2,a+s,a+s,a]):E&&(_=[y,m,m-w,m,y,y],C=[a,a,a+s/2,a+s,a+s,a]),Lp.fillPolygon(n,_,C,{fillStyle:p}),k&&Lp.strokePolygon(n,_,C,{strokeStyle:S})):(Lp.fillRect(n,m,a,b,s,{fillStyle:p}),k&&(n.save(),n.strokeStyle=S,n.strokeRect(m,a,b,s),n.restore())),this.parent.showMismatches&&(x||c||h&&e.seq&&"*"!==e.seq))for(var A=e.seq?e.seq.toUpperCase():void 0,T=e.qual,M=o.seqOffset,I=0,P=o.len;I<P;I++)if(!(v+I<0)){var N=A?A.charAt(M+I):"",O=h.charAt(v+I);if("="===N&&(N=O),"X"===N||O!==N||x||c){var F=void 0;if(F=!x&&void 0!==T&&T.length>M+I?Hk(T[M+I],l[N]):l[N]){var D=(o.start+I-i)/r,B=Math.max(1,1/r);L(n,r,{x:D,y:a,width:B,height:s},F,N)}}}}function L(e,t,n,r,i){var a;if(t<=.1&&n.height>=8){var o=Math.min(10,n.height);e.font=o+"px sans-serif",a=n.x+n.width/2,Lp.strokeText(e,i,a-e.measureText(i).width/2,o-1+n.y,{strokeStyle:r})}else Lp.fillRect(e,n.x,n.y,n.width,n.height,{fillStyle:r})}}n.restore()}},{key:"popupData",value:function(e){var t=this.getClickedObject(e.viewport,e.y,e.genomicLocation);return t?t.popupData(e.genomicLocation):void 0}},{key:"contextMenuItemList",value:function(e){var t=this,n=e.viewport,r=this.parent.showSoftClips,i=this.getClickedObject(n,e.y,e.genomicLocation),a=i&&"function"==typeof i.alignmentContaining?i.alignmentContaining(e.genomicLocation,r):i,o=(a&&i.isPaired,[]),s=function(r){var i=t.parent.sortObject,a=!i||i.position!==Math.floor(e.genomicLocation)||!i.direction,o={chr:n.referenceFrame.chr,position:Math.floor(e.genomicLocation),sortOption:r,direction:a};t.parent.sortObject=o,Uk(o,n.getCachedFeatures()),n.repaint()};return o.push("<b>Sort by...</b>"),o.push({label:"&nbsp; base",click:function(){return s("BASE")}}),o.push({label:"&nbsp; read strand",click:function(){return s("STRAND")}}),o.push({label:"&nbsp; insert size",click:function(){return s("INSERT_SIZE")}}),o.push({label:"&nbsp; gap size",click:function(){return s("GAP_SIZE")}}),o.push({label:"&nbsp; chromosome of mate",click:function(){return s("MATE_CHR")}}),o.push({label:"&nbsp; mapping quality",click:function(){return s("MQ")}}),o.push({label:"&nbsp; tag",click:function(){var r=t.parent.sortObject,i=!r||r.position!==Math.floor(e.genomicLocation)||!r.direction,a={label:"Tag Name",value:t.sortByTag?t.sortByTag:"",callback:function(r){if(r){var a={chr:n.referenceFrame.chr,position:Math.floor(e.genomicLocation),sortOption:"TAG",tag:r,direction:i};t.sortByTag=r,t.parent.sortObject=a,Uk(a,n.getCachedFeatures()),n.repaint()}}};t.browser.inputDialog.present(a,e.event)}}),o.push("<hr/>"),a.isPaired()&&a.isMateMapped()&&o.push({label:"View mate in split screen",click:function(){a.mate&&(t.highlightedAlignmentReadNamed=a.readName,t.browser.presentSplitScreenMultiLocusPanel(a,e.viewport.referenceFrame))},init:void 0}),o.push({label:"View read sequence",click:function(){if(a){var e=a.seq;e&&"*"!==e?ir.presentAlert(e):ir.presentAlert("Read sequence: *")}}}),o.push("<hr/>"),o}},{key:"getClickedObject",value:function(e,t,n){var r=this.parent.showSoftClips,i=e.getCachedFeatures();if(i&&0!==i.length){var a=i.packedAlignmentRows,o=i.downsampledIntervals,s="SQUISHED"===this.displayMode?this.squishedRowHeight:this.alignmentRowHeight,u=Math.floor((t-this.top-this.alignmentsYOffset)/s);if(u<0){for(var c=0;c<o.length;c++)if(o[c].start<=n&&o[c].end>=n)return o[c]}else if(u<a.length){var l=a[u].alignments.filter((function(e){return e.containsLocation(n,r)}));if(l.length>0)return l[0]}}}},{key:"getConnectorColor",value:function(e){if(this.pairConnectorColor)return this.pairConnectorColor;switch(this.colorBy){case"strand":case"firstOfPairStrand":case"pairOrientation":case"tag":return this.parent.color||"rgb(200, 200, 200)";default:return this.getAlignmentColor(e)}}},{key:"getAlignmentColor",value:function(e){var t=this.parent.color;switch(this.colorBy){case"strand":t=e.strand?this.posStrandColor:this.negStrandColor;break;case"firstOfPairStrand":e instanceof Cx?t=e.firstOfPairStrand()?this.posStrandColor:this.negStrandColor:e.isPaired()&&(e.isFirstOfPair()?t=e.strand?this.posStrandColor:this.negStrandColor:e.isSecondOfPair()?t=e.strand?this.negStrandColor:this.posStrandColor:console.error("ERROR. Paired alignments are either first or second."));break;case"pairOrientation":if(e.mate&&e.isMateMapped()&&e.mate.chr!==e.chr)t=qk(e.mate.chr);else if(this.pairOrientation&&e.pairOrientation){var n=jk[this.pairOrientation];if(n){var r=this.pairColors[n[e.pairOrientation]];r&&(t=r)}}break;case"fragmentLength":e.mate&&e.isMateMapped()&&e.mate.chr!==e.chr?t=qk(e.mate.chr):this.parent.minFragmentLength&&Math.abs(e.fragmentLength)<this.parent.minFragmentLength?t=this.smallFragmentLengthColor:this.parent.maxFragmentLength&&Math.abs(e.fragmentLength)>this.parent.maxFragmentLength&&(t=this.largeFragmentLengthColor);break;case"tag":var i=e.tags()[this.colorByTag];void 0!==i&&(this.bamColorTag===this.colorByTag?t="rgb("+i+")":(this.tagColors||(this.tagColors=new Zw("Set1")),t=this.tagColors.getColor(i)));break;default:t=this.parent.color}return t}}]),e}();function Uk(e,t){var n,r=e.direction,i=zn(t.packedAlignmentRows);try{for(i.s();!(n=i.n()).done;)n.value.updateScore(e,t)}catch(e){i.e(e)}finally{i.f()}t.packedAlignmentRows.sort((function(e,t){var n=e.score>t.score?1:e.score<t.score?-1:0;return!0===r?n:-n}))}function Hk(e,t){var n;return n=e<5?.1:Math.max(.1,Math.min(1,.1+.9*(e-5)/15)),(n=Math.round(10*n)/10)<1&&(t=ei.addAlpha(t,n)),t}var jk={fr:{F1R2:"LR",F2R1:"LR",F1F2:"LL",F2F1:"LL",R1R2:"RR",R2R1:"RR",R1F2:"RL",R2F1:"RL"},rf:{R1F2:"LR",R2F1:"LR",R1R2:"LL",R2R1:"LL",F1F2:"RR",F2F1:"RR",F1R2:"RL",F2R1:"RL"},ff:{F2F1:"LR",R1R2:"LR",F2R1:"LL",R1F2:"LL",R2F1:"RR",F1R2:"RR",R2R1:"RL",F1F2:"RL"}};function qk(e){if(Vk[e])return Vk[e];if(Vk["chr"+e]){var t=Vk["chr"+e];return Vk[e]=t,t}var n=ei.randomRGB();return Vk[e]=n,n}var Vk={chrX:"rgb(204, 153, 0)",chrY:"rgb(153, 204, 0",chrUn:"rgb(50, 50, 50)",chr1:"rgb(80, 80, 255)",chrI:"rgb(139, 155, 187)",chr2:"rgb(206, 61, 50)",chrII:"rgb(206, 61, 50)",chr2a:"rgb(216, 71, 60)",chr2b:"rgb(226, 81, 70)",chr3:"rgb(116, 155, 88)",chrIII:"rgb(116, 155, 88)",chr4:"rgb(240, 230, 133)",chrIV:"rgb(240, 230, 133)",chr5:"rgb(70, 105, 131)",chr6:"rgb(186, 99, 56)",chr7:"rgb(93, 177, 221)",chr8:"rgb(128, 34, 104)",chr9:"rgb(107, 215, 107)",chr10:"rgb(213, 149, 167)",chr11:"rgb(146, 72, 34)",chr12:"rgb(131, 123, 141)",chr13:"rgb(199, 81, 39)",chr14:"rgb(213, 143, 92)",chr15:"rgb(122, 101, 165)",chr16:"rgb(228, 175, 105)",chr17:"rgb(59, 27, 83)",chr18:"rgb(205, 222, 183)",chr19:"rgb(97, 42, 121)",chr20:"rgb(174, 31, 99)",chr21:"rgb(231, 199, 111)",chr22:"rgb(90, 101, 94)",chr23:"rgb(204, 153, 0)",chr24:"rgb(153, 204, 0)",chr25:"rgb(51, 204, 0)",chr26:"rgb(0, 204, 51)",chr27:"rgb(0, 204, 153)",chr28:"rgb(0, 153, 204)",chr29:"rgb(10, 71, 255)",chr30:"rgb(71, 117, 255)",chr31:"rgb(255, 194, 10)",chr32:"rgb(255, 209, 71)",chr33:"rgb(153, 0, 51)",chr34:"rgb(153, 26, 0)",chr35:"rgb(153, 102, 0)",chr36:"rgb(128, 153, 0)",chr37:"rgb(51, 153, 0)",chr38:"rgb(0, 153, 26)",chr39:"rgb(0, 153, 102)",chr40:"rgb(0, 128, 153)",chr41:"rgb(0, 51, 153)",chr42:"rgb(26, 0, 153)",chr43:"rgb(102, 0, 153)",chr44:"rgb(153, 0, 128)",chr45:"rgb(214, 0, 71)",chr46:"rgb(255, 20, 99)",chr47:"rgb(0, 214, 143)",chr48:"rgb(20, 255, 177)"},Gk=function(e){kn(i,e);var t,n,r=Mn(i);function i(e,t){var n;return bn(this,i),(n=r.call(this,e,t)).theta=e.theta||Math.PI/4,n.sinTheta=Math.sin(n.theta),n.cosTheta=Math.cos(n.theta),n.height=e.height||250,n.arcType=e.arcType||"nested",n.arcOrientation=void 0===e.arcOrientation||e.arcOrientation,n.showBlocks=void 0===e.showBlocks||e.showBlocks,n.blockHeight=e.blockHeight||3,n.thickness=e.thickness||1,n.color=e.color||"rgb(180,25,137)",n.alpha=e.alpha||.15,e.valueColumn?(n.valueColumn=e.valueColumn,n.hasValue=!0):e.useScore&&(n.hasValue=!0,n.valueColumn="score"),n.logScale=!1!==e.logScale,e.max?(n.dataRange={min:e.min||0,max:e.max},n.autoscale=!1):n.autoscale=!0,n.featureSource=Yw(e,t.genome),n.featureSource.getWGFeatures=Zk,n}return xn(i,[{key:"postInit",value:(n=yn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.featureSource.getHeader){e.next=4;break}return e.next=3,this.featureSource.getHeader();case 3:this.header=e.sent;case 4:if(this.header&&this.setTrackProperties(this.header),void 0!==this.visibilityWindow||"function"!=typeof this.featureSource.defaultVisibilityWindow){e.next=10;break}return e.next=8,this.featureSource.defaultVisibilityWindow();case 8:this.visibilityWindow=e.sent,this.featureSource.visibilityWindow=this.visibilityWindow;case 10:return e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"supportsWholeGenome",value:function(){return!0}},{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.visibilityWindow,e.next=3,this.featureSource.getFeatures({chr:t,start:n,end:r,visibilityWindow:i});case 3:return a=e.sent,void 0===this.hasValue&&a&&a.length>0&&(this.hasValue=void 0!==a[0].score),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"draw",value:function(e){"proportional"===this.arcType?this.drawProportional(e):this.drawNested(e)}},{key:"drawNested",value:function(e){var t=e.context,n=e.pixelWidth,r=e.pixelHeight,i=e.viewportWidth,a=e.bpPerPixel,o=e.bpStart,s=a;Lp.fillRect(t,0,e.pixelTop,n,r,{fillStyle:"rgb(255, 255, 255)"});var u,c=e.features;if(c){(function(){var e,t=0,a=zn(c);try{for(a.s();!(e=a.n()).done;){var u=e.value,l=(u.start-o)/s,h=(u.end-o)/s;h>=0&&l<=n&&(t=Math.max(t,h-l))}}catch(e){a.e(e)}finally{a.f()}var f=Math.min(i,t)/2;if(t>0){var p=(r-10)/f;this.theta=function(e){var t,n=[.01570925532366355,.15838444032453644,.3249196962329063,.5095254494944288,.7265425280053609,.9999999999999999],r=[.031415926535897934,.3141592653589793,.6283185307179586,.9424777960769379,1.2566370614359172,1.5707963267948966];for(t=0;t<n.length&&!(n[t]>e);t++);var i=0===t?0:n[t-1],a=(e-i)/((t<n.length?n[t]:1)-i),o=0===t?0:r[t-1],s=t<r.length?r[t]:Math.PI/2;return o+a*(s-o)}(p),this.sinTheta=Math.sin(this.theta),this.cosTheta=Math.cos(this.theta)}}).call(this);var l=this.arcOrientation?e.pixelHeight:0,h=this.arcOrientation;t.font="8px",t.textAlign="center";var f,p=zn(c);try{for(p.s();!(f=p.n()).done;){var d=f.value,g=d.color||this.color;if(g&&this.config.useScore&&(g=Xk(g,(u=d.score,Math.min(1,.11+u/779*.89).toString()))),t.lineWidth=d.thickness||this.thickness||1,d.chr1===d.chr2||"all"===d.chr){var v=Wk(d,this.browser.genome),m=v.m1,y=v.m2,b=Math.round((m-o)/s),w=Math.round((y-o)/s);if(w<0||b>n)continue;var x=w-b;x<3&&(x=3,b--);var k=x/2,S=k/this.sinTheta,_=this.cosTheta*S,C=b+k,R=void 0,E=void 0,A=void 0;if(h?(R=this.height+_,E=Math.PI+Math.PI/2-this.theta,A=Math.PI+Math.PI/2+this.theta):(R=-_,E=Math.PI/2-this.theta,A=Math.PI/2+this.theta),this.showBlocks&&"all"!==d.chr){var T=(d.start1-o)/s,M=(d.end1-o)/s,L=(d.start2-o)/s,I=(d.end2-o)/s,P=this.arcOrientation?-this.blockHeight:this.blockHeight;t.fillRect(T,l,M-T,P),t.fillRect(L,l,I-L,P)}g&&!this.config.useScore&&x>i&&(g=Xk(g,this.alpha)),t.strokeStyle=g,t.fillStyle=g,t.beginPath(),t.arc(C,R,S,E,A,!1),t.stroke(),d.drawState={xc:C,yc:R,r:S}}else{var N=Math.round((d.start-o)/s),O=Math.round((d.end-o)/s);if(O<0||N>n)continue;var F=O-N;F<3&&(F=3,N--);var D=d.chr===d.chr1?d.chr2:d.chr1;t.strokeStyle=g,t.fillStyle=g,h?(t.fillRect(N,this.height/2,F,this.height/2),t.fillText(D,N+F/2,this.height/2-5),d.drawState={x:N,y:this.height/2,w:F,h:this.height/2}):(t.fillRect(N,0,F,this.height/2),t.fillText(D,N+F/2,this.height/2+13),d.drawState={x:N,y:0,w:F,h:this.height/2})}}}catch(e){p.e(e)}finally{p.f()}}}},{key:"drawProportional",value:function(e){var t=e.context,n=e.pixelWidth,r=e.pixelHeight,i=e.bpPerPixel,a=e.bpStart,o=i;Lp.fillRect(t,0,e.pixelTop,n,r,{fillStyle:"rgb(255, 255, 255)"});var s=e.features;if(s&&s.length>0){var u,c=this.logScale?e.pixelHeight/Math.log10(this.dataRange.max+1):e.pixelHeight/(this.dataRange.max-this.dataRange.min),l=this.arcOrientation?e.pixelHeight:0,h=zn(s);try{for(h.s();!(u=h.n()).done;){var f=u.value;t.save();var p=this.valueColumn?f[this.valueColumn]:f.score;if(void 0!==p&&!Number.isNaN(p)){var d=this.logScale?Math.log10(p+1)*c:p*c;if(f.chr1===f.chr2||"all"===f.chr){var g=Wk(f,this.browser.genome),v=g.m1,m=g.m2,y=(v-a)/o,b=(m-a)/o,w=b-y;if(w<3&&(w=3,y--),b<0||y>n||p<this.dataRange.min)continue;var x=w/2,k=y+w/2,S=!!this.arcOrientation,_=f.color||this.color;if(t.strokeStyle=_,t.lineWidth=f.thickness||this.thickness||1,t.beginPath(),t.ellipse(k,l,x,d,0,0,Math.PI,S),t.stroke(),this.showBlocks&&"all"!==f.chr){t.fillStyle=_;var C=(f.start1-a)/o,R=(f.end1-a)/o,E=(f.start2-a)/o,A=(f.end2-a)/o,T=this.arcOrientation?-this.blockHeight:this.blockHeight;t.fillRect(C,l,R-C,T),t.fillRect(E,l,A-E,T)}if(this.alpha){var M=Xk(_,this.alpha);t.fillStyle=M,t.fill()}t.restore(),f.drawState={xc:k,yc:l,radiusX:x,radiusY:d}}else{var L=Math.round((f.start-a)/o),I=Math.round((f.end-a)/o);if(I<0||L>n||p<this.dataRange.min)continue;var P=Math.min(d,this.height-13),N=I-L;N<3&&(N=3,L--);var O=f.chr===f.chr1?f.chr2:f.chr1;if(t.font="8px",t.textAlign="center",this.arcOrientation){var F=this.height-P;t.fillRect(L,F,N,P),t.fillText(O,L+N/2,F-5),f.drawState={x:L,y:F,w:N,h:P}}else t.fillRect(L,0,N,P),t.fillText(O,L+N/2,P+13),f.drawState={x:L,y:0,w:N,h:P}}}}}catch(e){h.e(e)}finally{h.f()}}}},{key:"menuItemList",value:function(){var e=this,t=[{name:"Set track color",click:function(){e.trackView.presentColorPicker()}},"<HR/>"];if(this.hasValue)for(var n={nested:"Nested Arcs",proportional:"Proportional Arcs"},r=function(){var r=a[i];t.push({object:Um(n[r],r===e.arcType),click:function(){e.arcType=r,e.trackView.repaintViews()}})},i=0,a=["nested","proportional"];i<a.length;i++)r();return t.push({object:Um("Show Blocks",this.showBlocks),click:function(){e.showBlocks=!e.showBlocks,e.trackView.repaintViews()}}),t.push({name:"Toggle arc direction",click:function(){e.arcOrientation=!e.arcOrientation,e.trackView.repaintViews()}}),"proportional"===this.arcType&&(t.push("<HR>"),t=t.concat(Vm.numericDataMenuItems(this.trackView))),t}},{key:"doAutoscale",value:function(e){var t=0;if(e){var n,r=zn(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.valueColumn?i[this.valueColumn]:i.score;Number.isNaN(a)||(t=Math.max(t,a))}}catch(e){r.e(e)}finally{r.f()}}return{min:0,max:t}}},{key:"popupData",value:function(e,t){t||(t=this.clickedFeatures(e));var n,r=[],i=zn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a._||a;if(r.push({name:"Region 1",value:$k(o.chr1,o.start1,o.end1,o.strand1)}),r.push({name:"Region 2",value:$k(o.chr2,o.start2,o.end2,o.strand2)}),o.name&&r.push({name:"Name",value:o.name}),void 0!==o.value&&r.push({name:"Value",value:o.value}),void 0!==o.score&&r.push({name:"Score",value:o.score}),o.extras&&this.header&&this.header.columnNames)for(var s=this.header.columnNames,u=10;u<s.length;u++)"info"===s[u]?Kk(r,o.extras[u-10]):r.push({name:s[u],value:o.extras[u-10]});break}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"clickedFeatures",value:function(e){var t=e.viewport.getCachedFeatures(),n=[];if(t){var r,i="proportional"===this.arcType,a=zn(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.drawState)if(o.chr1===o.chr2||"all"===o.chr)if(i){var s=o.drawState,u=s.xc,c=s.yc,l=s.radiusX,h=s.radiusY,f=e.canvasX-u,p=e.canvasY-c,d=f/l*(f/l)+p/h*(p/h);d<=1&&n.push({score:1/d,feature:o})}else{var g=o.drawState,v=g.xc,m=g.yc,y=g.r,b=e.canvasX-v,w=e.canvasY-m,x=Math.abs(Math.sqrt(b*b+w*w)-y);x<5&&n.push({score:x,feature:o})}else{var k=o.drawState,S=k.x,_=k.y,C=k.w,R=k.h;if(e.canvasX>=S-5&&e.canvasX<=S+C+5&&e.canvasY>=_&&e.canvasY<=_+R){var E=-Math.abs(e.canvasX-(S+C/2));n.push({score:E,feature:o});break}}}}catch(e){a.e(e)}finally{a.f()}}return n.length>1&&n.sort((function(e,t){return e.score-t.score})),n.map((function(e){return e.feature}))}}]),i}(ub);function Wk(e,t){var n=(e.start1+e.end1)/2,r=(e.start2+e.end2)/2;if("all"===e.chr&&(n=t.getGenomeCoordinate(e.chr1,n),r=t.getGenomeCoordinate(e.chr2,r)),n>r){var i=n;n=r,r=i}return{m1:n,m2:r}}function $k(e,t,n,r){return r&&"."!==r?"".concat(e,":").concat(_r(t+1),"-").concat(_r(n)," (").concat(r,")"):"".concat(e,":").concat(_r(t+1),"-").concat(_r(n))}var Yk=new Map;function Xk(e,t){var n="".concat(e,"_").concat(t),r=Yk.get(n);return r||(r=ei.addAlpha(e,t),Yk.set(n,r)),r}function Zk(e){var t,n=this.genome,r=[],i=zn(n.wgChromosomeNames);try{for(i.s();!(t=i.n()).done;){var a=e[t.value];if(a){var o,s=zn(a);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!u.dup){var c=Object.assign({},u);c.chr="all",c.start=n.getGenomeCoordinate(u.chr1,u.start1),c.end=n.getGenomeCoordinate(u.chr2,u.end2),r.push(c)}}}catch(e){s.e(e)}finally{s.f()}}}}catch(e){i.e(e)}finally{i.f()}return r}function Kk(e,t){var n,r=zn(t.split(";"));try{for(r.s();!(n=r.n()).done;){var i=n.value.split("=");2===i.length&&e.push({name:i[0],value:i[1]})}}catch(e){r.e(e)}finally{r.f()}}for(var Qk=Sr,Jk=function(e){kn(a,e);var t,n,r,i=Mn(a);function a(e,t){var n;return bn(this,a),(n=i.call(this,e,t)).visibilityWindow=e.visibilityWindow,n.displayMode=e.displayMode||"EXPANDED",n.labelDisplayMode=e.labelDisplayMode,n.variantHeight=e.variantHeight||10,n.squishedCallHeight=e.squishedCallHeight||1,n.expandedCallHeight=e.expandedCallHeight||10,n.expandedVGap=void 0!==e.expandedVGap?e.expandedVGap:2,n.squishedVGap=void 0!==e.squishedVGap?e.squishedVGap:1,n.expandedGroupGap=e.expandedGroupGap||10,n.squishedGroupGap=e.squishedGroupGap||5,n.featureHeight=e.featureHeight||14,n.visibilityWindow=e.visibilityWindow,n.featureSource=Yw(e,t.genome),n.noCallColor=e.noCallColor||"rgb(245, 245, 245)",n.nonRefColor=e.nonRefColor||"rgb(200, 200, 215)",n.mixedColor=e.mixedColor||"rgb(200, 220, 200)",n.homrefColor=e.homrefColor||"rgb(200, 200, 200)",n.homvarColor=e.homvarColor||"rgb(17,248,254)",n.hetvarColor=e.hetvarColor||"rgb(34,12,253)",n.sortDirection="ASC",n.type=e.type||"variant",n.nRows=1,n}return xn(a,[{key:"postInit",value:(r=yn(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:return e.sent,void 0===this.visibilityWindow&&!1!==this.config.indexed&&(t=this.config.url instanceof File?this.config.url.name:this.config.url,Qk(t)&&t.toLowerCase().includes("gnomad")?this.visibilityWindow=1e3:this.callSets?(n=this.callSets.length,this.visibilityWindow=Math.max(1e3,1e6-1e4*n)):this.visibilityWindow=1e6),e.abrupt("return",this);case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"supportsWholeGenome",value:function(){return!1===this.config.indexed&&!1!==this.config.supportsWholeGenome}},{key:"getHeader",value:(n=yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.header){e.next=4;break}return e.abrupt("return",this.header);case 4:if("function"!=typeof this.featureSource.getHeader){e.next=13;break}return e.next=7,this.featureSource.getHeader();case 7:return(t=e.sent)&&(this.callSets=t.callSets||[]),this.header=t,e.abrupt("return",t);case 13:return this.callSets=[],e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getCallsetsLength",value:function(){return this.callSets.length}},{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.header){e.next=4;break}return e.next=3,this.getHeader();case 3:this.header=e.sent;case 4:return e.abrupt("return",this.featureSource.getFeatures({chr:t,start:n,end:r,bpPerPixel:i,visibilityWindow:this.visibilityWindow}));case 5:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"computePixelHeight",value:function(e){if("COLLAPSED"===this.displayMode)return this.nRows=1,10+this.variantHeight;var t=0;if(e){var n,r=zn(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.row&&i.row>t&&(t=i.row)}}catch(e){r.e(e)}finally{r.f()}}var a="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;this.nRows=t+1;var o=10+this.nRows*(this.variantHeight+a);this.variantBandHeight=o;var s="EXPANDED"===this.displayMode?this.expandedCallHeight:this.squishedCallHeight;return o+a+(this.getCallsetsLength()*this.nRows+1)*(s+a)}},{key:"draw",value:function(e){var t=e.context,n=this.callSets,r=this.getCallsetsLength(),i=e.pixelWidth,a=e.pixelHeight,o="EXPANDED"===this.displayMode?this.expandedCallHeight:this.squishedCallHeight,s=e.bpPerPixel,u=e.bpStart,c=u+i*s+1;Lp.fillRect(t,0,e.pixelTop,i,a,{fillStyle:"rgb(255, 255, 255)"});var l="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;n&&r>0&&"COLLAPSED"!==this.displayMode&&Lp.strokeLine(t,0,this.variantBandHeight,i,this.variantBandHeight,{strokeStyle:"rgb(224,224,224) "});var h=e.features;if(h){var f,p=zn(h);try{for(p.s();!(f=p.n()).done;){var d=f.value;if(!(d.end<u)){if(d.start>c)break;var g=10+("COLLAPSED"===this.displayMode?0:d.row*(this.variantHeight+l)),v=this.variantHeight,m=Math.round((d.start-u)/s),y=Math.round((d.end-u)/s),b=Math.max(1,y-m);if(b<3?(b=3,m-=1):b>5&&(m+=1,b-=2),"NONVARIANT"===d.type?t.fillStyle=this.nonRefColor:"MIXED"===d.type?t.fillStyle=this.mixedColor:t.fillStyle=this.color||this.defaultColor,t.fillRect(m,g,b,v),r>0&&d.calls&&"COLLAPSED"!==this.displayMode){var w,x=0,k=zn(n);try{for(k.s();!(w=k.n()).done;){var S=w.value,_=d.calls[S.id];if(_){var C,R=this.variantBandHeight+l+(x+d.row)*(o+l),E=!0,A=!0,T=!1,M=zn(_.genotype);try{for(M.s();!(C=M.n()).done;){var L=C.value;if("."===L){T=!0;break}0!==L&&(A=!1),0===L&&(E=!1)}}catch(e){M.e(e)}finally{M.f()}t.fillStyle=T?this.noCallColor:A?this.homrefColor:E?this.homvarColor:this.hetvarColor,t.fillRect(m,R,b,o)}x++}}catch(e){k.e(e)}finally{k.f()}}}}}catch(e){p.e(e)}finally{p.f()}}}},{key:"popupData",value:function(e,t){t||(t=this.clickedFeatures(e));var n,r=e.genomicLocation,i=this.browser.genome.id,a=[],o=this.browser.sampleInformation,s=zn(t);try{for(s.s();!(n=s.n()).done;){var u=n.value;if(a.length>0&&a.push("<HR>"),"COLLAPSED"===this.displayMode)Array.prototype.push.apply(a,u.popupData(r,this.type));else{var c=e.y,l="EXPANDED"===this.displayMode?this.expandedVGap:this.squishedVGap;if(c<=this.variantBandHeight){var h=Math.floor((c-10)/(this.variantHeight+l));u.row===h&&Array.prototype.push.apply(a,u.popupData(r,i),this.type)}else{var f=this.callSets;if(f&&u.calls){var p=this.nRows*("SQUISHED"===this.displayMode?this.squishedCallHeight:this.expandedCallHeight),d=Math.floor((c-this.variantBandHeight)/(p+l));if(d>=0&&d<f.length){var g=f[d],v=u.calls[g.id];Array.prototype.push.apply(a,m(v,u,0,o))}}}}}}catch(e){s.e(e)}finally{s.f()}return a;function m(e,t,n,r){var i,a="",o=t.alternateBases.split(","),s=zn(e.genotype);try{for(s.s();!(i=s.n()).done;){var u=i.value;if("."===u){a+="No Call";break}a+=0===u?t.referenceBases:o[u-1].replace("<","&lt;")}}catch(e){s.e(e)}finally{s.f()}var c=[];if(void 0!==e.callSetName&&c.push({name:"Name",value:e.callSetName}),c.push({name:"Genotype",value:a}),void 0!==e.phaseset&&c.push({name:"Phase set",value:e.phaseset}),void 0!==e.genotypeLikelihood&&c.push({name:"genotypeLikelihood",value:e.genotypeLikelihood.toString()}),r){var l=r.getAttributes(e.callSetName);l&&Object.keys(l).forEach((function(e){var t=e.replace(/([A-Z])/g," $1");t=t.charAt(0).toUpperCase()+t.slice(1),c.push({name:t,value:l[e]})}))}var h=Object.keys(e.info);h.length&&c.push("<hr>"),h.forEach((function(t){c.push({name:t,value:e.info[t]})}));var f=[];return f.length>0&&(c.push("<HR/>"),c=c.concat(f)),c}}},{key:"menuItemList",value:function(){var e=this,t=[];return t.push({object:lc('<div class="igv-track-menu-border-top">')}),["COLLAPSED","SQUISHED","EXPANDED"].forEach((function(n){t.push({object:Um({COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"}[n],n===e.displayMode),click:function(){e.displayMode=n,e.trackView.checkContentHeight(),e.trackView.repaintViews()}})})),t}}]),a}(ub),eS=function(e){kn(r,e);var t,n=Mn(r);function r(e,t){var i;bn(this,r),(i=n.call(this,e,t)).config=e,i.url=e.url,i.name=e.name,i.pValueField=e.pValueField||"pValue",i.geneField=e.geneField||"geneSymbol",i.snpField=e.snpField||"snp";var a=e.minLogP||e.min,o=e.maxLogP||e.max;return i.dataRange={min:a||3.5,max:o||25},i.autoscale=!o||e.autoscale,i.autoscalePercentile=void 0===e.autoscalePercentile?98:e.autoscalePercentile,i.background=e.background,i.divider=e.divider||"rgb(225,225,225)",i.dotSize=e.dotSize||2,i.height=e.height||100,i.autoHeight=!1,i.disableButtons=e.disableButtons,i.visibilityWindow=void 0===e.visibilityWindow?2e6:e.visibilityWindow>=0?Math.min(2e6,e.visibilityWindow):2e6,i.featureSource=Yw(e,t.genome),Jw.gtexLoaded=!0,i}return xn(r,[{key:"paintAxis",value:function(e,t,n){var r=(this.dataRange.max-this.dataRange.min)/n,i={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};Lp.fillRect(e,0,0,t,n,{fillStyle:"rgb(255, 255, 255)"});for(var a=Math.ceil(10*(this.dataRange.max-this.dataRange.min)/n),o=4;o<=this.dataRange.max;o+=a){var s=.85*t,u=s-5,c=s,l=n-(o-this.dataRange.min)/r;Lp.strokeLine(e,u,l,c,l,i),l>8&&Lp.fillText(e,o,u-1,l+2,i)}i.textAlign="center",Lp.fillText(e,"-log10(pvalue)",t/4,n/2,i,{rotate:{angle:-90}})}},{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.pValueField,e.next=3,this.featureSource.getFeatures({chr:t,start:n,end:r});case 3:return(a=e.sent).forEach((function(e){e.value=e[i]})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t=this,n=e.context,r=e.pixelWidth,i=e.pixelHeight;this.background&&Lp.fillRect(n,0,0,r,i,{fillStyle:this.background}),Lp.strokeLine(n,0,i-1,r,i-1,{strokeStyle:this.divider}),n.save();var a=function(a){var o,s=a?2*t.dotSize:t.dotSize,u=e.bpStart,c=(t.dataRange.max-t.dataRange.min)/i,l=e.referenceFrame.selection,h=zn(e.features);try{for(h.s();!(o=h.n()).done;){var f=o.value,p=(f.start-u+.5)/e.bpPerPixel;if(!(p<0)){if(p>r)break;var d=f.snp.toUpperCase(),g=f[t.geneField].toUpperCase(),v=l&&(l.snp===d||l.gene===g);if(!a||v){l&&l.snp===d&&l.addGene(g);var m=-Math.log(f[t.pValueField])/Math.LN10;if(m>=t.dataRange.min){var y=void 0;m>t.dataRange.max?(m=t.dataRange.max,y=!0):y=!1;var b=Math.max(0+s,i-Math.round((m-t.dataRange.min)/c));f.px=p,f.py=b,f.radius=s;var w=void 0;a&&l?(w=l.colorForGene(g),Lp.setProperties(n,{fillStyle:w,strokeStyle:"black"})):(w=y?"rgb(150, 150, 150)":"rgb(180, 180, 180)",Lp.setProperties(n,{fillStyle:w,strokeStyle:w})),Lp.fillCircle(n,p,b,s),Lp.strokeCircle(n,p,b,s)}}}}}catch(e){h.e(e)}finally{h.f()}};a(!1),a(!0),n.restore()}},{key:"popupData",value:function(e){var t=e.viewport.getCachedFeatures();if(!t||0===t.length)return[];var n,r=this.name,i=[],a=zn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;Math.abs(o.px-e.canvasX)<o.radius+3&&Math.abs(o.py-e.canvasY)<o.radius+3&&(i.length>0&&i.push("<hr>"),i.push({name:"snp id",value:o.snp},{name:"gene id",value:o.geneId},{name:"gene name",value:o.geneName},{name:"p value",value:o.pValue},{name:"tissue",value:r}))}}catch(e){a.e(e)}finally{a.f()}return i}},{key:"menuItemList",value:function(){return Vm.numericDataMenuItems(this.trackView)}},{key:"doAutoscale",value:function(e){if(e.length>0){var t=e.map((function(e){return-Math.log(e.value)/Math.LN10}));this.dataRange.max=Zr(t,this.autoscalePercentile)}else{var n=this.config.maxLogP||this.config.max;this.dataRange.max=n||25}return this.dataRange}}]),r}(ub),tS={X:"rgb(204, 153, 0)",Y:"rgb(153, 204, 0)",Un:"darkGray)",1:"rgb(80, 80, 255)",I:"rgb(139, 155, 187)",2:"rgb(206, 61, 50)",II:"rgb(206, 61, 50)","2a":"rgb(210, 65, 55)","2b":"rgb(215, 70, 60)",3:"rgb(116, 155, 88)",III:"rgb(116, 155, 88)",4:"rgb(240, 230, 133)",IV:"rgb(240, 230, 133)",5:"rgb(70, 105, 131)",6:"rgb(186, 99, 56)",7:"rgb(93, 177, 221)",8:"rgb(128, 34, 104)",9:"rgb(107, 215, 107)",10:"rgb(213, 149, 167)",11:"rgb(146, 72, 34)",12:"rgb(131, 123, 141)",13:"rgb(199, 81, 39)",14:"rgb(213, 143, 92)",15:"rgb(122, 101, 165)",16:"rgb(228, 175, 105)",17:"rgb(59, 27, 83)",18:"rgb(205, 222, 183)",19:"rgb(97, 42, 121)",20:"rgb(174, 31, 99)",21:"rgb(231, 199, 111)",22:"rgb(90, 101, 94)",23:"rgb(204, 153, 0)",24:"rgb(153, 204, 0)",25:"rgb(51, 204, 0)",26:"rgb(0, 204, 51)",27:"rgb(0, 204, 153)",28:"rgb(0, 153, 204)",29:"rgb(10, 71, 255)",30:"rgb(71, 117, 255)",31:"rgb(255, 194, 10)",32:"rgb(255, 209, 71)",33:"rgb(153, 0, 51)",34:"rgb(153, 26, 0)",35:"rgb(153, 102, 0)",36:"rgb(128, 153, 0)",37:"rgb(51, 153, 0)",38:"rgb(0, 153, 26)",39:"rgb(0, 153, 102)",40:"rgb(0, 128, 153)",41:"rgb(0, 51, 153)",42:"rgb(26, 0, 153)",43:"rgb(102, 0, 153)",44:"rgb(153, 0, 128)",45:"rgb(214, 0, 71)",46:"rgb(255, 20, 99)",47:"rgb(0, 214, 143)",48:"rgb(20, 255, 177)"},nS=0,rS=Object.keys(tS);nS<rS.length;nS++){var iS=rS[nS];tS["chr"+iS]=tS[iS]}var aS=function(e){kn(r,e);var t,n=Mn(r);function r(e,t){var i;return bn(this,r),(i=n.call(this,e,t)).useChrColors=void 0===e.useChrColors||e.useChrColors,i.trait=e.trait,i.posteriorProbability=e.posteriorProbability,i.height=e.height||100,e.autoscale||(e.posteriorProbability?i.dataRange={min:void 0===e.min?0:e.min,max:void 0===e.max?1:e.max}:i.dataRange={min:void 0===e.min?0:e.min,max:void 0===e.max?25:e.max}),i.autoscale=e.autoscale,i.autoscalePercentile=void 0===e.autoscalePercentile?98:e.autoscalePercentile,i.background=e.background,i.divider=e.divider||"rgb(225,225,225)",i.dotSize=e.dotSize||3,i.popoverWindow=void 0===e.popoverWindow?1e8:e.popoverWindow,i.description=e.description,i.colorScales=e.color?new kx(e.color):{"*":new wx(e.colorScale||{thresholds:[5e-8,5e-4,.5],colors:["rgb(255,50,50)","rgb(251,100,100)","rgb(251,170,170)","rgb(227,238,249)"]})},i.featureSource=Yw(e,t.genome),i}return xn(r,[{key:"supportsWholeGenome",value:function(){return!0}},{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.featureSource.getFeatures({chr:t,start:n,end:r}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t=e.features,n=e.context,r=e.pixelWidth,i=e.pixelHeight;if(this.background&&Lp.fillRect(n,0,0,r,i,{fillStyle:this.background}),Lp.strokeLine(n,0,i-1,r,i-1,{strokeStyle:this.divider}),t){var a,o=e.bpPerPixel,s=e.bpStart,u=s+r*o+1,c=zn(t);try{for(c.s();!(a=c.n()).done;){var l=a.value,h=l.start;if(!(h<s)){if(h>u)break;var f=this.getColorScale(l._f?l._f.chr:l.chr),p=void 0,d=void 0;if(this.posteriorProbability)d=l.value,p=f.getColor(d);else{var g=l.value||l.score;if(!g)continue;d=-Math.log10(g),p=f.getColor(d)}var v=(this.dataRange.max-this.dataRange.min)/i,m=Math.round((h-s)/o),y=Math.max(this.dotSize,i-Math.round((d-this.dataRange.min)/v));p&&Lp.setProperties(n,{fillStyle:p,strokeStyle:"black"}),Lp.fillCircle(n,m,y,this.dotSize),l.px=m,l.py=y}}}catch(e){c.e(e)}finally{c.f()}}}},{key:"getColorScale",value:function(e){if(this.useChrColors){var t=this.colorScales[e];if(!t){var n=tS[e]||Qw.get();t=new kx(n),this.colorScales[e]=t}return t}return this.colorScales("*")}},{key:"paintAxis",value:function(e,t,n){Lp.fillRect(e,0,0,t,n,{fillStyle:"rgb(255, 255, 255)"});var r={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"},i=(this.dataRange.max-this.dataRange.min)/n;if(this.posteriorProbability)for(var a=this.dataRange.min;a<this.dataRange.max;a+=.1){var o=n-Math.round((a-this.dataRange.min)/i);Lp.strokeLine(e,45,o-2,50,o-2,r),Lp.fillText(e,a.toFixed(1),44,o+2,r)}else for(var s=Math.ceil(10*(this.dataRange.max-this.dataRange.min)/n),u=this.dataRange.min;u<this.dataRange.max;u+=s){var c=n-Math.round((u-this.dataRange.min)/i);Lp.strokeLine(e,45,c,50,c,r),Lp.fillText(e,Math.floor(u),44,c+4,r)}r.textAlign="center",this.posteriorProbability?Lp.fillText(e,"PPA",t/2,n/2,r,{rotate:{angle:-90}}):Lp.fillText(e,"-log10(pvalue)",t/2,n/2,r,{rotate:{angle:-90}})}},{key:"popupData",value:function(e){var t=[],n=e.viewport.trackView.track,r=e.viewport.getCachedFeatures();if(r){var i,a=0,o=zn(r);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=Math.abs(e.canvasX-s.px),c=Math.abs(e.canvasY-s.py),l=s.value||s.score;if(u<this.dotSize&&c<this.dotSize){if(a>0&&t.push("<HR/>"),5==a){t.push("...");break}if("function"==typeof s.popupData)t=t.concat(s.popupData());else{var h=s.realChr||s.chr,f=(s.realStart||s.start)+1;t.push({name:"chromosome",value:h}),t.push({name:"position",value:f}),t.push({name:"name",value:s.name}),n.posteriorProbability?t.push({name:"posterior probability",value:l}):t.push({name:"pValue",value:l})}a++}}}catch(e){o.e(e)}finally{o.f()}}return t}},{key:"menuItemList",value:function(){return Vm.numericDataMenuItems(this.trackView)}},{key:"doAutoscale",value:function(e){if(e.length>0){var t=this.posteriorProbability?e:e.map((function(e){var t=void 0!==e.value?e.value:e.score;return{value:-Math.log(t)/Math.LN10}})),n=Xv(t);this.dataRange.max=n.max,this.dataRange.min=n.min!==n.max?n.min:0}else this.posteriorProbability?(this.dataRange.min=this.config.min||0,this.dataRange.max=this.config.max||1):(this.dataRange.max=this.config.max||25,this.dataRange.min=this.config.min||0);return this.dataRange}}]),r}(ub),oS=function(e){kn(i,e);var t,n,r=Mn(i);function i(e,t){var n;return bn(this,i),(n=r.call(this,e,t)).autoscale=e.autoscale||void 0===e.max,n.dataRange={min:e.min||0,max:e.max},n.windowFunction=e.windowFunction||"mean",n.paintAxis=yx,n.graphType=e.graphType||"bar",e._featureSource?(n.featureSource=e._featureSource,delete e._featureSource):n.featureSource=Yw(n.config,t.genome),n}return xn(i,[{key:"postInit",value:(n=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.featureSource.getHeader){e.next=7;break}return e.next=3,this.featureSource.getHeader();case 3:if(this.header=e.sent,this.sampleNames=this.header.columnNames.slice(3),this.setTrackProperties(this.header),this.header.hasOwnProperty("highlight")){this.config.highlightSamples={},t=this.header.highlight,Array.isArray(t)||(t=[t]),n=zn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,2===(a=i.split(";")).length&&(this.config.highlightSamples[a[0]]=a[1])}catch(e){n.e(e)}finally{n.f()}}case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"menuItemList",value:function(){return Vm.numericDataMenuItems(this.trackView)}},{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureSource.getFeatures({chr:t,start:0,end:Number.MAX_VALUE});case 2:i=e.sent,a=void 0,o=void 0,s=1;case 6:if(!(s<i.length-1)){e.next=14;break}if(void 0===a&&i[s].end>n&&(a=s-1),!(void 0===o&&i[s].start>r)){e.next=11;break}return o=s+1,e.abrupt("break",14);case 11:s++,e.next=6;break;case 14:return void 0===a&&(a=0),void 0===o&&(o=i.length),e.abrupt("return",i.slice(a,o));case 17:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t=this,n=e.features,r=e.context,i=e.bpPerPixel,a=e.bpStart,o=(e.pixelWidth,e.pixelHeight),s=function(e){return(t.dataRange.max-e)/(t.dataRange.max-t.dataRange.min)*o},u=function(e){var t=Math.floor((e-a)/i);return isNaN(t)&&console.warn("isNaN(x). feature start "+_r(e)+" bp start "+_r(a)),t};if(n&&n.length>0&&(void 0===this.dataRange.min&&(this.dataRange.min=0),this.dataRange.max>this.dataRange.min)){var c=this.config.highlightSamples,l=this.config.onlyHandleClicksForHighlightedSamples,h=-1,f={},p=[],d=[];this.clickDetectorCache={};var g,v=zn(n);try{for(v.s();!(g=v.n()).done;){var m=g.value,y=u(m.start),b=u(m.end),w=h>=0?u(h):y;if(!(isNaN(y)||isNaN(b)||y-w<1&&b-y<1)){this.clickDetectorCache[y]=[],this.clickDetectorCache[b]=[];for(var x=0;x<m.values.length;x++){var k=this.sampleNames[x],S=m.values[x],_=s(S);if(y-w>=1){var C=f[k],R=s(C),E=c&&c[k];E?p.push([w,R,y,_,E]):Lp.strokeLine(r,w,R,y,_,{strokeStyle:"#D9D9D9"}),(!l||k in c)&&this.clickDetectorCache[y].push([w,R,y,_,k,E||"gray"])}if(b-y>=1){var A=c&&c[k];A?d.push([y,_,b,_,A]):Lp.strokeLine(r,y,_,b,_,{strokeStyle:"gray"}),(!l||k in c)&&this.clickDetectorCache[b].push([y,_,b,_,k,A||"gray"])}f[k]=S}h=m.end}}}catch(e){v.e(e)}finally{v.f()}for(var T=0,M=p;T<M.length;T++){var L=M[T];Lp.strokeLine(r,L[0],L[1],L[2],L[3],{strokeStyle:L[4],lineWidth:1.3})}for(var I=0,P=d;I<P.length;I++){var N=P[I];Lp.strokeLine(r,N[0],N[1],N[2],N[3],{strokeStyle:N[4],lineWidth:2})}}!function(e){if(t.config.hasOwnProperty("guideLines")){var n,r=zn(t.config.guideLines);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.hasOwnProperty("color")&&i.hasOwnProperty("y")&&i.hasOwnProperty("dotted")){var a=s(i.y),o={strokeStyle:i.color,strokeWidth:2};i.dotted?Lp.dashedLine(e.context,0,a,e.pixelWidth,a,5,o):Lp.strokeLine(e.context,0,a,e.pixelWidth,a,o)}}}catch(e){r.e(e)}finally{r.f()}}}(e)}},{key:"doAutoscale",value:function(e){var t,n;return e.length>0?(t=Number.MAX_VALUE,n=-Number.MAX_VALUE,e.forEach((function(e){t=Math.min.apply(Math,[t].concat(Pn(e.values))),n=Math.max.apply(Math,[n].concat(Pn(e.values)))})),t-=.01,n+=.01):(t=0,n=100),{min:t,max:n}}},{key:"clickedFeatures",value:function(e){for(var t=e.canvasX,n=e.canvasY,r=null,i=0,a=Object.keys(this.clickDetectorCache);i<a.length&&(r=a[i],!((r=parseInt(r))>=t));i++);if(r){var o,s=Number.MAX_VALUE,u=[],c=zn(this.clickDetectorCache[r]);try{for(c.s();!(o=c.n()).done;){var l=o.value,h=l[0],f=l[2];if(t<h||t>f)return[];var p=l[1],d=l[3];if(!(n<Math.min(p,d)-10||n>Math.max(p,d)+10)){var g=sS(t,n,h,p,f,d);g<s&&(u=[{name:l[4],color:l[5]}],s=g)}}}catch(e){c.e(e)}finally{c.f()}if(s<5)return u}return[]}},{key:"popupData",value:function(e,t){t||(t=this.clickedFeatures(e));var n=[];return t.forEach((function(e){for(var t=0,r=Object.keys(e);t<r.length;t++){var i=r[t];$v(e[i])&&n.push({name:i,value:e[i]})}})),n}},{key:"supportsWholeGenome",value:function(){return!1}}]),i}(ub);function sS(e,t,n,r,i,a){var o=i-n,s=a-r,u=Math.abs(o*(r-t)-(n-e)*s),c=Math.sqrt(o*o+s*s);return c>0?u/c:0}var uS=function(e){kn(r,e);var t,n=Mn(r);function r(e,t){var i;return bn(this,r),i=n.call(this,e,t),e.height||(i.height=300),i.arcOrientation=!1,i.theta=Math.PI/2,e.format,i.featureSource=new lS(e,t.genome),i}return xn(r,[{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.featureSource.getFeatures(t,n,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t=this,n=Math.PI/2,r=e.context,i=e.pixelWidth,a=e.pixelHeight,o=(e.viewportWidth,e.bpPerPixel),s=e.bpStart,u=o,c=t.arcOrientation;Lp.fillRect(r,0,e.pixelTop,i,a,{fillStyle:"rgb(255, 255, 255)"});var l=e.features;l&&(cS(l,1),l.forEach((function(e){if(e.startLeft){var i=Math.round((e.startLeft-s)/u),a=Math.round((e.startRight-s)/u),o=Math.round((e.endLeft-s)/u),l=Math.round((e.endRight-s)/u);r.fillStyle=e.color,r.strokeStyle=e.color,r.beginPath();var h=(i+l)/2,f=(l-i)/2,p=t.height,d=Math.PI+(Math.PI/2-n),g=2*Math.PI-(Math.PI/2-n);c?(p=0,r.arc(h,p,f,g,d),r.lineTo(l,p)):(r.arc(h,p,f,d,g),r.lineTo(o,p));var v=(a+o)/2,m=(o-a)/2,y=p;c?(r.arc(v,y,m,d,g,!0),r.lineTo(o,y)):(r.arc(v,y,m,g,d,!0),r.lineTo(i,y)),r.stroke(),r.fill(),e.drawState={x1:h,y1:p,r1:f,x2:v,y2:y,r2:m,sa:d,ea:g}}else{var b=Math.round((e.start-s)/u),w=Math.round((e.end-s)/u);r.strokeStyle=e.color,r.beginPath();var x=(b+w)/2,k=(w-b)/2,S=t.height,_=Math.PI+(Math.PI/2-n),C=2*Math.PI-(Math.PI/2-n);c?(S=0,r.arc(x,S,k,C,_)):r.arc(x,S,k,_,C),r.stroke(),e.drawState={x1:x,y1:S,r1:k,sa:_,ea:C}}})))}},{key:"clickedFeatures",value:function(e){var t=Ln(Sn(r.prototype),"clickedFeatures",this).call(this,e),n=[];cS(t,-1);var i,a=zn(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.drawState,u=e.canvasX-s.x1,c=e.canvasY-s.y1,l=Math.sqrt(u*u+c*c),h=s.r1+3,f=void 0,p=void 0;if(void 0===s.x2)f=l,p=s.r1-3;else{var d=e.canvasX-s.x2,g=e.canvasY-s.y2;f=Math.sqrt(d*d+g*g),p=s.r2-3}if(l<h&&f>p){n.push(o);break}}}catch(e){a.e(e)}finally{a.f()}return n}},{key:"popupData",value:function(e,t){if(t||(t=this.clickedFeatures(e)),t&&t.length>0)return ub.extractPopupData(t[0],this.getGenomeId())}},{key:"menuItemList",value:function(){var e=this;return[{name:"Toggle arc direction",click:function(){e.arcOrientation=!e.arcOrientation,e.trackView.repaintViews()}}]}}]),r}(ub);function cS(e,t){e.sort((function(e,n){var r=void 0===e.score?-Number.MAX_VALUE:e.score,i=void 0===n.score?-Number.MAX_VALUE:n.score;return(void 0===t?1:t)*(r-i)}))}var lS=function(){function e(t,n){bn(this,e),this.config=t,this.genome=n}var t;return xn(e,[{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e){if(!e)return null;for(var t,n=ib(e),r=!0,i=[],a=[],o=[];void 0!==(t=n.nextLine());){var s=t.split("\t");if(r&&t.startsWith("color:")){var u="rgb("+s[1]+","+s[2]+","+s[3]+")";i.push(u),s.length>4&&a.push(s[4])}else{r=!1;var c=s[0],l=Number.parseInt(s[1])-1,h=Number.parseInt(s[2])-1,f=Number.parseInt(s[3]),p=Number.parseInt(s[4]),d=Number.parseInt(s[5]),g=i[d],v=void 0;(v=l<=p?{chr:c,startLeft:Math.min(l,h),startRight:Math.max(l,h),endLeft:Math.min(f,p),endRight:Math.max(f,p),color:g,score:d}:{chr:c,startLeft:Math.min(f,p),startRight:Math.max(f,p),endLeft:Math.min(l,h),endRight:Math.max(l,h),color:g,score:d}).start=v.startLeft,v.end=v.endRight,a.length>d&&(v.description=a[d]),o.push(v)}}return o},i=this.genome,this.featureCache){e.next=11;break}return a=Yv(this.config),e.next=6,im.loadString(this.config.url,a);case 6:return o=e.sent,this.featureCache=new $b(s(o),i),e.abrupt("return",this.featureCache.queryFeatures(t,n,r));case 11:return e.abrupt("return",this.featureCache.queryFeatures(t,n,r));case 12:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}(),hS=function(){function e(t){bn(this,e),this.browser=t,this.type="ideogram",this.id=this.type,this.height=16,this.order=Number.MIN_SAFE_INTEGER,this.disableButtons=!0,this.ignoreTrackMenu=!0}var t;return xn(e,[{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"computePixelHeight",value:function(e){return this.height}},{key:"draw",value:function(e){}},{key:"computePixelHeight",value:function(){}},{key:"dispose",value:function(){this.trackView=void 0}}]),e}(),fS={tracks:{ideogram:function(e,t){return new hS(e,t)},sequence:function(e,t){return new mx(e,t)},feature:function(e,t){return new nx(e,t)},seg:function(e,t){return new Sx(e,t)},wig:function(e,t){return new bx(e,t)},merged:function(e,t){return new _x(e,t)},alignment:function(e,t){return new Dk(e,t)},interaction:function(e,t){return new Gk(e,t)},interact:function(e,t){return new Gk(e,t)},variant:function(e,t){return new Jk(e,t)},eqtl:function(e,t){return new eS(e,t)},gwas:function(e,t){return new aS(e,t)},arc:function(e,t){return new uS(e,t)},gcnv:function(e,t){return new oS(e,t)}},addTrack:function(e,t){this.tracks[e]=t},getTrack:function(e){return this.tracks[e]}},pS=function(){function e(t,n){bn(this,e),this.config=t,this.name=t.name,this.roiSource=Yw(t,n),this.color=t.color||"rgba(68, 134, 247, 0.25)"}var t;return xn(e,[{key:"getFeatures",value:(t=yn(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.roiSource.getFeatures({chr:t,start:n,end:r}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"draw",value:function(e){var t,n,r,i;if(i=e.features){t=e.bpStart+(e.pixelWidth*e.bpPerPixel+1);for(var a=0,o=i.length;a<o;a++)if(!((n=i[a]).end<e.bpStart)){if(n.start>t)break;r=dS(n,e.bpStart,e.bpPerPixel),Lp.fillRect(e.context,r.x,e.pixelTop,r.width,e.pixelHeight,{fillStyle:this.color})}}}}]),e}();function dS(e,t,n){var r,i;return r=Math.round((e.start-t)/n),(i=Math.round((e.end-t)/n)-r)<3&&(i=3,r-=1),{x:r,width:i}}var gS=function(){function e(t,n){bn(this,e),this.geneColors={},this.gene=null,this.snp=null,this.genesCount=0,t&&(this.gene=t.toUpperCase(),this.geneColors[this.gene]=vS[this.genesCount++]),n&&(this.snp=n.toUpperCase())}return xn(e,[{key:"addGene",value:function(e){this.geneColors[e.toUpperCase()]||(this.geneColors[e.toUpperCase()]=vS[this.genesCount++])}},{key:"colorForGene",value:function(e){return this.geneColors[e.toUpperCase()]}}]),e}(),vS=new Array;vS.push("rgb(228,26,28)"),vS.push("rgb(55,126,184)"),vS.push("rgb(77,175,74)"),vS.push("rgb(166,86,40)"),vS.push("rgb(152,78,163)"),vS.push("rgb(255,127,0)"),vS.push("rgb(247,129,191)"),vS.push("rgb(153,153,153)"),vS.push("rgb(255,255,51)"),vS.push("rgb(102, 194, 165"),vS.push("rgb(252, 141, 98"),vS.push("rgb(141, 160, 203"),vS.push("rgb(231, 138, 195"),vS.push("rgb(166, 216, 84"),vS.push("rgb(255, 217, 47"),vS.push("rgb(229, 196, 148"),vS.push("rgb(179, 179, 179"),vS.push("rgb( 141, 211, 199"),vS.push("rgb(255, 255, 179"),vS.push("rgb(190, 186, 218"),vS.push("rgb(251, 128, 114"),vS.push("rgb(128, 177, 211"),vS.push("rgb(253, 180, 98"),vS.push("rgb(179, 222, 105"),vS.push("rgb(252, 205, 229"),vS.push("rgb(217, 217, 217"),vS.push("rgb(188, 128, 189"),vS.push("rgb(204, 235, 197"),vS.push("rgb(255, 237, 111");var mS=!Zc((function(e){Array.from(e)}));Ne({target:"Array",stat:!0,forced:mS},{from:xh});var yS=function(){function e(t,n){bn(this,e);var r=(new DOMParser).parseFromString(t,"text/xml");this.processRootNode(r,n);var i=r.getElementsByTagName("Resource"),a=r.getElementsByTagName("Track"),o=a&&a.length>0,s=[];this.tracks=s;var u=new Map;Array.from(i).forEach((function(e,t){var n={url:e.getAttribute("path"),indexURL:e.getAttribute("index"),order:t};u.set(n.url,n),o||s.push(n)})),o&&Array.from(a).forEach((function(e){var t=e.getElementsByTagName("Track");if(t&&t.length>0){var n={type:"merged",tracks:[]};bS(e,n),s.push(n),Array.from(t).forEach((function(e){e.processed=!0;var t=e.getAttribute("id"),r=u.get(t);r&&(n.tracks.push(r),bS(e,r),r.autoscale=!1,n.height=r.height)}))}else if(!e.processed){var r=e.getAttribute("id"),i=u.get(r);i&&(s.push(i),bS(e,i))}}))}return xn(e,[{key:"processRootNode",value:function(e,t){var n=e.getElementsByTagName("Session");!n||n.length;var r=n.item(0),i=r.getAttribute("genome"),a=r.getAttribute("locus"),o=r.getAttribute("ucscID");t&&t.hasOwnProperty(i)?this.genome=i:(this.reference={fastaURL:i},o&&(this.reference.id=o)),a&&(this.locus=a)}}]),e}();function bS(e,t){t.name=e.getAttribute("name");var n=e.getAttribute("color");n&&(t.color="rgb("+n+")");var r=e.getAttribute("altColor");n&&(t.altColor="rgb("+r+")");var i=e.getAttribute("height");i&&(t.height=parseInt(i));var a=e.getAttribute("autoScale");a&&(t.autoscale="true"===a);var o=e.getAttribute("autoscaleGroup");o&&(t.autoscaleGroup=o);var s=e.getAttribute("windowFunction");s&&(t.windowFunction=s);var u=e.getAttribute("visibilityWindow")||e.getAttribute("featureVisibilityWindow");u&&(t.visibilityWindow=u);var c=e.getAttribute("indexed");c&&(t.indexed="true"===c);var l=e.getAttribute("normalize");l&&(t.normalize="true"===l);var h=e.getElementsByTagName("DataRange");if(h.length>0){var f=h.item(0);t.min=Number.parseFloat(f.getAttribute("minimum")),t.max=Number.parseFloat(f.getAttribute("maximum")),t.logScale="LOG"===f.getAttribute("type")}}var wS=Cr,xS=function(){function e(){bn(this,e),this.attributes={},this.plinkLoaded=!1}var t;return xn(e,[{key:"loadPlinkFile",value:(t=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||(n={}),r=Yv(n),e.next=4,im.loadString(t,r);case 4:i=e.sent,a=wS(i),o=zn(a);try{for(o.s();!(s=o.n()).done;)u=s.value,c=u.split(" "),this.attributes[c[1]]={familyId:c[0],fatherId:c[2],motherId:c[3],sex:c[4],phenotype:c[5]}}catch(e){o.e(e)}finally{o.f()}return this.plinkLoaded=!0,e.abrupt("return",this);case 10:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getAttributes",value:function(e){return this.attributes[e]}},{key:"getAttributeNames",value:function(){return this.hasAttributes()?Object.keys(this.attributes[Object.keys(this.attributes)[0]]):[]}},{key:"hasAttributes",value:function(){return Object.keys(this.attributes).length>0}}]),e}();function kS(e,t){return(new xS).loadPlinkFile(e,t)}var SS=function(){function e(t,n,r,i,a){bn(this,e),this.genome=t,this.chr=n,this.start=r,this.initialEnd=i,this.initialStart=r,this.bpPerPixel=a,this.id=gr()}return xn(e,[{key:"calculateEnd",value:function(e){return this.start+this.bpPerPixel*e}},{key:"calculateBPP",value:function(e,t){return(e-this.start)/t}},{key:"set",value:function(e){this.chr=e.chr,this.start=e.start,this.bpPerPixel=e.bpPerPixel}},{key:"toPixels",value:function(e){return e/this.bpPerPixel}},{key:"toBP",value:function(e){return this.bpPerPixel*e}},{key:"shiftPixels",value:function(e,t){var n=this.start;return this.start+=e*this.bpPerPixel,this.clamp(t),n!==this.start}},{key:"clamp",value:function(e){var t=this.genome.getChromosome(this.chr).bpStart||0;if(this.start=Math.max(t,this.start),e){var n=this.genome.getChromosome(this.chr).bpLength-e*this.bpPerPixel;this.start>n&&(this.start=n)}}},{key:"getChromosome",value:function(){return this.genome.getChromosome(this.chr)}},{key:"presentLocus",value:function(e){if("all"===this.chr)return this.chr;var t=_r(Math.floor(this.start)+1),n=_r(Math.round(this.start+this.bpPerPixel*e));return"".concat(this.chr,":").concat(t,"-").concat(n)}}]),e}();function _S(e,t){var n=e.calculateViewportWidth(t.length);return t.map((function(t){e.flanking&&t.gene&&(t.start=Math.max(0,t.start-e.flanking),t.end+=e.flanking);var r=e.genome.getChromosome(t.chr);Zv(r.bpLength,t,e.minimumBases());var i=new SS(e.genome,t.chr,t.start,t.end,(t.end-t.start)/n);return i.locusSearchString=t.locusSearchString,(t.gene||t.snp)&&(i.selection=new gS(t.gene,t.snp)),i}))}var CS={A:"rgb(  0, 200,   0)",C:"rgb(  0,0,200)",T:"rgb(255,0,0)",G:"rgb(209,113,  5)",N:"rgb(80,80,80)"};function RS(e,t){return ES.apply(this,arguments)}function ES(){return(ES=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n&&""!==n.trim()){e.next=2;break}return e.abrupt("return");case 2:(n&&"all"===n.trim().toLowerCase()||"*"===n)&&(n="all"),r=n.split(" "),i=t.searchConfig,a=[],o=function(){var e=yn(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=AS(t,n))||(r=t.genome.featureDB[n.toUpperCase()]),r){e.next=6;break}return e.next=5,TS(t,n,i);case 5:r=e.sent;case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=zn(r),e.prev=8,s.s();case 10:if((u=s.n()).done){e.next=18;break}return c=u.value,e.next=14,o(c);case 14:(l=e.sent)&&(l.locusSearchString=c,a.push(l));case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),s.e(e.t0);case 23:return e.prev=23,s.f(),e.finish(23);case 26:if(0!==a.length){e.next=31;break}return e.next=29,o(n);case 29:(h=e.sent)&&(h.locusSearchString=n,a.push(h));case 31:return e.abrupt("return",0===a.length?void 0:a);case 32:case"end":return e.stop()}}),e,null,[[8,20,23,26]])})))).apply(this,arguments)}function AS(e,t){var n=t.split(":"),r=n[0];if("all"===r&&e.genome.getChromosome(r))return{chr:r,start:0,end:e.genome.getChromosome(r).bpLength};if(void 0!==e.genome.getChromosome(r)){var i={chr:e.genome.getChromosomeName(r),start:0,end:e.genome.getChromosome(r).bpLength};if(n.length>1){var a,o=n[1].split("-");if(o.length>2)return;if(a=o[0].replace(/,/g,""),isNaN(a))return;if(i.start=parseInt(a,10)-1,i.end=i.start+1,1===o.length&&(i.start-=20,i.end+=20),2===o.length){if(a=o[1].replace(/,/g,""),isNaN(a))return;i.end=parseInt(a,10)}}return i}}function TS(e,t,n){return MS.apply(this,arguments)}function MS(){return(MS=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=r.url.replace("$FEATURE$",n.toUpperCase())).indexOf("$GENOME$")>-1&&(i=i.replace("$GENOME$",t.genome.id?t.genome.id:"hg19")),e.next=4,im.loadString(i);case 4:return a=e.sent,(o=LS(t,a,r))&&(o.locusSearchString=n),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LS(e,t,n){var r;if(r="plain"===n.type?function(e,t){var n=[],r=[];return Cr(t).forEach((function(e){""===e||n.push(e)})),n.forEach((function(t){var n,i,a,o,s=t.split("\t");s.length>=3&&(a=(i=s[1].split(":"))[1].split("-"),n=s[2].trim(),o={gene:s[0],chromosome:e.genome.getChromosomeName(i[0].trim()),start:parseInt(a[0].replace(/,/g,"")),end:parseInt(a[1].replace(/,/g,"")),type:"gtex"===n?"snp":"gene"},r.push(o))})),r}(e,t):JSON.parse(t),n.resultsField&&(r=r[n.resultsField]),r&&0!==r.length){var i,a=n.chromosomeField||"chromosome",o=n.startField||"start",s=n.endField||"end",u=n.coords||1;(i=Array.isArray(r)?r[0]:r).hasOwnProperty(a)&&i.hasOwnProperty(o)||console.error("Search service results must include chromosome and start fields: "+i);var c=i[a],l=e.genome.getChromosome(c);if(!l)return;var h=l.name,f=i[o]-u,p=i[s];void 0===p&&(p=f+1);var d={chr:h,start:f,end:p},g=i.type?i.type:"gene";return n.geneField&&"gene"===g&&(d.gene=i[n.geneField]),n.snpField&&"snp"===g&&(d.snp=i[n.snpField]),d}}var IS=function(){function e(t,n){bn(this,e),this.config=t,this.guid=gr(),this.namespace=".browser_"+this.guid,this.parent=n,this.$root=lc("<div>",{class:"igv-root"}),lc(n).append(this.$root);var r=lc("<div>",{class:"igv-track-container"});this.$root.append(r),ir.init(this.$root.get(0)),this.trackContainer=r.get(0),this.initialize(t),this.trackViews=[],this.trackLabelsVisible=!0,this.isCenterGuideVisible=!1,this.cursorGuideVisible=!1,this.constants={dragThreshold:3,scrollThreshold:5,defaultColor:"rgb(0,0,150)",doubleClickDelay:t.doubleClickDelay||500},this.eventHandlers={},this.$spinner=lc("<div>",{class:"igv-track-container-spinner"}),r.append(this.$spinner),this.$spinner.append(Hm("spinner")),this.stopSpinner(),this.addMouseHandlers()}var t,n,r,i,a,o,s,u,c,l,h,f,p;return xn(e,[{key:"initialize",value:function(e){e.gtex&&(Jw.gtexLoaded=!0),this.flanking=e.flanking,this.crossDomainProxy=e.crossDomainProxy,this.formats=e.formats,this.trackDefaults=e.trackDefaults,this.nucleotideColors=e.nucleotideColors||CS;for(var t=0,n=Object.keys(this.nucleotideColors);t<n.length;t++){var r=n[t];this.nucleotideColors[r.toLowerCase()]=this.nucleotideColors[r]}e.search?this.searchConfig={type:"json",url:e.search.url,coords:void 0===e.search.coords?1:e.search.coords,chromosomeField:e.search.chromosomeField||"chromosome",startField:e.search.startField||"start",endField:e.search.endField||"end",geneField:e.search.geneField||"gene",snpField:e.search.snpField||"snp",resultsField:e.search.resultsField}:(e.reference&&e.reference.id?e.reference.id:e.genome&&e.genome,this.searchConfig={type:"plain",url:"https://igv.org/genomes/locus.php?genome=$GENOME$&name=$FEATURE$",coords:0,chromosomeField:"chromosome",startField:"start",endField:"end",geneField:"gene",snpField:"snp"})}},{key:"startSpinner",value:function(){var e=this.$spinner;e&&(e.addClass("igv-fa5-spin"),e.show())}},{key:"stopSpinner",value:function(){var e=this.$spinner;e&&(e.hide(),e.removeClass("igv-fa5-spin"))}},{key:"isMultiLocusMode",value:function(){return this.referenceFrameList&&this.referenceFrameList.length>1}},{key:"addTrackToFactory",value:function(e,t){fS.addTrack(e,t)}},{key:"isMultiLocusWholeGenomeView",value:function(){if(void 0===this.referenceFrameList||1===this.referenceFrameList.length)return!1;var e,t=zn(this.referenceFrameList);try{for(t.s();!(e=t.n()).done;)if("all"===e.value.chr.toLowerCase())return!0}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"toSVG",value:function(){var e,t=this.trackContainer.getBoundingClientRect(),n=t.x,r=t.y,i=t.width,a=t.height,o=this.trackViews[0].$viewportContainer.get(0).getBoundingClientRect().x,s=i+5*(this.referenceFrameList.length-1),u=a,c=new qp({width:s,height:8e3,backdropColor:"white",multiLocusGap:5,viewbox:{x:0,y:0,width:s,height:8e3}}),l=o-n,h=zn(this.trackViews);try{for(h.s();!(e=h.n()).done;)e.value.renderSVGContext(c,{deltaX:l,deltaY:-r})}catch(e){h.e(e)}finally{h.f()}return c.setHeight(u),c.getSerializedSvg(!0)}},{key:"saveSVGtoFile",value:function(e){var t=this.toSVG();if(e.$container){var n=this.trackContainer.getBoundingClientRect();e.$container.empty(),e.$container.width(n.width),e.$container.append(t)}Wr(e.filename||"igv.svg",URL.createObjectURL(new Blob([t],{type:"application/octet-stream"})))}},{key:"loadSession",value:(p=yn(regeneratorRuntime.mark((function t(n){var r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=function(){return(a=yn(regeneratorRuntime.mark((function t(n){var r,i,a,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.url||n.file,!n.url||!n.url.startsWith("blob:")&&!n.url.startsWith("data:")){t.next=6;break}return i=e.uncompressSession(n.url),t.abrupt("return",JSON.parse(i));case 6:if(a=n.filename){t.next=16;break}if(!n.url){t.next=14;break}return t.next=11,Qv(n.url);case 11:t.t0=t.sent,t.next=15;break;case 14:t.t0=n.file.name;case 15:a=t.t0;case 16:if(!a.endsWith(".xml")){t.next=24;break}return o=Fm.KNOWN_GENOMES,t.next=20,im.loadString(r);case 20:return s=t.sent,t.abrupt("return",new yS(s,o));case 24:if(!a.endsWith(".json")){t.next=28;break}return t.abrupt("return",im.loadJson(r));case 28:return t.abrupt("return",void 0);case 29:case"end":return t.stop()}}),t)})))).apply(this,arguments)},i=function(e){return a.apply(this,arguments)},this.roi=[],!n.url&&!n.file){t.next=9;break}return t.next=6,i(n);case 6:r=t.sent,t.next=10;break;case 9:r=n;case 10:return t.abrupt("return",this.loadSessionObject(r));case 11:case"end":return t.stop()}}),t,this)}))),function(e){return p.apply(this,arguments)})},{key:"loadSessionObject",value:(f=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.removeAllTracks(),e.next=3,this.loadGenome(t.reference||t.genome,t.locus,!1);case 3:if(n=e.sent,void 0===this.ideogram&&!1!==this.config.showIdeogram&&(this.ideogram=new hS(this),this.addTrack(this.ideogram)),void 0===this.rulerTrack&&!1!==this.config.showRuler&&(this.rulerTrack=new gy(this),this.addTrack(this.rulerTrack)),t.gtexSelections){r=zn(this.referenceFrameList);try{for(r.s();!(i=r.n()).done;)for(a=i.value,o=0,s=Object.keys(t.gtexSelections);o<s.length;o++)u=s[o],c=t.gtexSelections[u].gene,l=t.gtexSelections[u].snp,a.selection=new gS(c,l)}catch(e){r.e(e)}finally{r.f()}}if(t.roi){this.roi=[],h=zn(t.roi);try{for(h.s();!(f=h.n()).done;)p=f.value,this.roi.push(new pS(p,n))}catch(e){h.e(e)}finally{h.f()}}return 0===(d=t.tracks||[]).filter((function(e){return"sequence"===e.type})).length&&!1!==this.config.showSequence&&d.push({type:"sequence",order:dx}),e.next=13,this.loadTrackList(d);case 13:this.ideogram&&this.ideogram.trackView.updateViews(),this.rulerTrack&&this.rulerTrack.trackView.updateViews(),this.updateLocusSearchWidget(this.referenceFrameList),this.windowSizePanel.updatePanel(this.referenceFrameList);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"loadGenome",value:function(){var e=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=function(e,t){return e?Array.isArray(e)?e.join(" "):e:t.getHomeChromosomeName()},u=function(){return(u=yn(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sr(t)?n=t:t.genome?n=t.genome:void 0!==t.id&&void 0===t.fastaURL&&(n=t.id),!n){e.next=8;break}return r=Fm.KNOWN_GENOMES,(i=r[n])||ir.presentAlert(new Error("Unknown genome id: ".concat(n)),void 0),e.abrupt("return",i);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},s=function(e){return u.apply(this,arguments)},Sr(t)&&t.startsWith("{"))try{t=JSON.parse(t)}catch(e){}return e.next=6,s.call(this,t);case 6:return i=e.sent,e.next=9,Fm.loadGenome(i);case 9:return a=e.sent,o=this.genome&&this.genome.id!==a.id,this.genome=a,this.$current_genome.text(a.id||""),this.$current_genome.attr("title",a.id||""),this.chromosomeSelectWidget.update(a),o&&this.removeAllTracks(),this.genome=a,e.prev=17,e.next=20,this.search(c(n,a),!0);case 20:this.referenceFrameList=e.sent,e.next=30;break;case 23:return e.prev=23,e.t0=e.catch(17),e.t0.message(),ir.presentAlert(new Error("Unrecognized locus ".concat(n)),void 0),e.next=29,this.search(this.genome.getHomeChromosomeName());case 29:this.referenceFrameList=e.sent;case 30:if(!i.tracks){e.next=33;break}return e.next=33,this.loadTrackList(i.tracks);case 33:return!1!==r&&this.updateViews(),e.abrupt("return",this.genome);case 35:case"end":return e.stop()}}),e,this,[[17,23]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"updateUIWithReferenceFrameListChange",value:function(e){var t=this.isMultiLocusWholeGenomeView()||Fm.isWholeGenomeView(e[0].chr);t||this.isMultiLocusMode()?this.centerGuide.forcedHide():this.centerGuide.forcedShow(),this.navbarManager.navbarDidResize(this.$navigation.width(),t),PS(this.trackViews,this.trackLabelsVisible)}},{key:"setTrackLabelName",value:function(e,t){e.viewports.forEach((function(e){e.setTrackLabel(t)}))}},{key:"hideTrackLabels",value:function(){this.trackLabelsVisible=!1,PS(this.trackViews,this.trackLabelsVisible)}},{key:"showTrackLabels",value:function(){this.trackLabelsVisible=!0,PS(this.trackViews,this.trackLabelsVisible)}},{key:"hideCursorGuide",value:function(){this.cursorGuide.$guide.hide(),this.cursorGuideVisible=!1}},{key:"showCursorGuide",value:function(){this.cursorGuide.$guide.show(),this.cursorGuideVisible=!0}},{key:"setCustomCursorGuideMouseHandler",value:function(e){this.cursorGuide.customMouseHandler=e}},{key:"hideCenterGuide",value:function(){this.centerGuide.$container.hide(),this.isCenterGuideVisible=!1}},{key:"showCenterGuide",value:function(){this.centerGuide.$container.show(),this.centerGuide.resize(),this.isCenterGuideVisible=!0}},{key:"loadTrackList",value:(h=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.startSpinner(),n=[],r=zn(t);try{for(r.s();!(i=r.n()).done;)a=i.value,n.push(this.loadTrack(a,!0))}catch(e){r.e(e)}finally{r.f()}return e.next=7,Promise.all(n);case 7:return o=e.sent,(s=this.trackViews.filter((function(e){return e.track.autoscaleGroup}))).length>0&&this.updateViews(this.referenceFrameList[0],s),e.abrupt("return",o);case 11:return e.prev=11,this.stopSpinner(),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[0,,11,14]])}))),function(e){return h.apply(this,arguments)})},{key:"loadROI",value:(l=yn(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.roi||(this.roi=[]),Array.isArray(t)){n=zn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.roi.push(new pS(i,this.genome))}catch(e){n.e(e)}finally{n.f()}}else this.roi.push(new pS(t,this.genome));return e.next=4,this.updateViews(void 0,void 0,!0);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"removeROI",value:function(e){for(var t=0;t<this.roi.length;t++)if(this.roi[t].name===e.name){this.roi.splice(t,1);break}var n,r=zn(this.trackViews);try{for(r.s();!(n=r.n()).done;)n.value.updateViews(void 0,void 0,!0)}catch(e){r.e(e)}finally{r.f()}}},{key:"clearROIs",value:function(){this.roi=[];var e,t=zn(this.trackViews);try{for(t.s();!(e=t.n()).done;)e.value.updateViews(void 0,void 0,!0)}catch(e){t.e(e)}finally{t.f()}}},{key:"loadTrack",value:(c=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sr(t)&&(t=JSON.parse(t)),e.prev=1,n||this.startSpinner(),e.next=5,this.createTrack(t);case 5:if(void 0!==(r=e.sent)){e.next=9;break}return ir.presentAlert(new Error("Unknown file type: ".concat(t.url||t)),void 0),e.abrupt("return",r);case 9:if(void 0===r.order&&(r.order=this.trackViews.length),"function"!=typeof r.postInit){e.next=13;break}return e.next=13,r.postInit();case 13:if(!t.sync){e.next=18;break}return e.next=16,this.addTrack(r);case 16:e.next=19;break;case 18:this.addTrack(r);case 19:return e.abrupt("return",r);case 22:e.prev=22,e.t0=e.catch(1),i={401:"Access unauthorized",403:"Access forbidden",404:"Not found"},console.error(e.t0),a=e.t0.message||e.t0.error||e.t0.toString(),i.hasOwnProperty(a)&&(a=i[a]),a+=": "+t.url,ir.presentAlert(new Error(a),void 0);case 30:return e.prev=30,n||this.stopSpinner(),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[1,22,30,33]])}))),function(e,t){return c.apply(this,arguments)})},{key:"createTrack",value:(u=yn(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qr(t.url);case 2:if(Sr(n=e.sent)&&(n=n.trim()),!n){e.next=15;break}if(!t.format){e.next=9;break}t.format=t.format.toLowerCase(),e.next=15;break;case 9:if(r=t.filename){e.next=14;break}return e.next=13,Qv(n);case 13:r=e.sent;case 14:t.format=Xr(r);case 15:if(!(i=t.type)||"bedtype"===i){e.next=20;break}i=i.toLowerCase(),e.next=29;break;case 20:if("bedtype"!==(i=Kv(t))){e.next=29;break}return a=Yw(t,this.genome),t._featureSource=a,e.next=26,a.trackType();case 26:o=e.sent,i=o||"annotation",t.type=i;case 29:if(this.trackDefaults&&i&&(s=this.trackDefaults[i]))for(u in s)s.hasOwnProperty(u)&&void 0===t[u]&&(t[u]=s[u]);e.t0=i,e.next="annotation"===e.t0?33:"genes"===e.t0?33:"fusionjuncspan"===e.t0?33:"junctions"===e.t0?33:"splicejunctions"===e.t0?33:"snp"===e.t0?33:35;break;case 33:return c=fS.getTrack("feature")(t,this),e.abrupt("break",36);case 35:c=fS.tracks.hasOwnProperty(i)?fS.getTrack(i)(t,this):void 0;case 36:if(t.roi&&c){c.roi=[],l=zn(t.roi);try{for(l.s();!(h=l.n()).done;)f=h.value,c.roi.push(new pS(f,this.genome))}catch(e){l.e(e)}finally{l.f()}}return e.abrupt("return",c);case 38:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"addTrack",value:(s=yn(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new yy(this,lc(this.trackContainer),t),this.trackViews.push(n),PS(this.trackViews,this.trackLabelsVisible),this.reorderTracks(),t.autoscaleGroup){e.next=6;break}return e.abrupt("return",n.updateViews());case 6:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"reorderTracks",value:function(){this.trackViews.sort((function(e,t){var n=function(e){return"ideogram"===e.track.id?1:"ruler"===e.track.id?2:3},r=n(e),i=n(t);return r===i?(e.track.order||0)-(t.track.order||0):r-i})),lc(this.trackContainer).children("igv-track").detach();var e,t=zn(this.trackViews);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.trackContainer.appendChild(n.trackDiv)}}catch(e){t.e(e)}finally{t.f()}}},{key:"removeTrackByName",value:function(e){var t,n=zn(this.trackViews.slice());try{for(n.s();!(t=n.n()).done;){var r=t.value;e===r.track.name&&this.removeTrack(r.track)}}catch(e){n.e(e)}finally{n.f()}}},{key:"removeTrack",value:function(e){for(var t,n=0;n<this.trackViews.length;n++)if(e===this.trackViews[n].track){t=this.trackViews[n];break}t&&(this.trackViews.splice(n,1),lc(t.trackDiv).remove(),this.fireEvent("trackremoved",[t.track]),t.dispose())}},{key:"removeAllTracks",value:function(){var e,t=[],n=zn(this.trackViews);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.track.id;"ruler"!==i&&"ideogram"!==i?(this.trackContainer.removeChild(r.trackDiv),this.fireEvent("trackremoved",[r.track]),r.dispose()):t.push(r)}}catch(e){n.e(e)}finally{n.f()}this.trackViews=t}},{key:"findTracks",value:function(e,t){var n="function"==typeof e?function(t){return e(t.track)}:function(n){return t===n.track[e]};return this.trackViews.filter(n).map((function(e){return e.track}))}},{key:"setTrackHeight",value:function(e){this.trackHeight=e,this.trackViews.forEach((function(t){t.setTrackHeight(e)}))}},{key:"visibilityChange",value:function(){var e=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.referenceFrameList.find((function(e){return e.bpPerPixel<0}))){t=this.calculateViewportWidth(this.referenceFrameList.length),n=zn(this.referenceFrameList);try{for(n.s();!(r=n.n()).done;)(i=r.value).bpPerPixel=(i.initialEnd-i.start)/t}catch(e){n.e(e)}finally{n.f()}}return this.referenceFrameList&&((a=this.isMultiLocusWholeGenomeView()||Fm.isWholeGenomeView(this.referenceFrameList[0].chr))||this.isMultiLocusMode()?this.centerGuide.forcedHide():this.centerGuide.forcedShow(),this.navbarManager.navbarDidResize(this.$navigation.width(),a)),e.next=5,this.resize();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resize",value:(o=yn(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.calculateViewportWidth(this.referenceFrameList.length),n=zn(this.referenceFrameList);try{for(n.s();!(r=n.n()).done;)i=r.value,a=i.toBP(t),o=i.genome.getChromosome(i.chr),s=o.bpLength,a>s&&(i.bpPerPixel=s/t)}catch(e){n.e(e)}finally{n.f()}u=zn(this.trackViews);try{for(u.s();!(c=u.n()).done;)c.value.resize(t)}catch(e){u.e(e)}finally{u.f()}return this.centerGuide&&this.centerGuide.resize(),this.referenceFrameList&&this.referenceFrameList.length>0&&(this.updateLocusSearchWidget(this.referenceFrameList),this.windowSizePanel.updatePanel(this.referenceFrameList)),e.next=9,this.updateViews();case 9:l=zn(this.trackViews);try{for(l.s();!(h=l.n()).done;)f=h.value,p=f.viewports,d=f.$viewportContainer,xy(p,d)}catch(e){l.e(e)}finally{l.f()}case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"updateViews",value:(a=yn(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,p,d,g,v,m,y,b,w,x,k,S,_,C,R,E,A,T,M,L,I,P,N;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||(n=this.trackViews),!t&&this.referenceFrameList&&1===this.referenceFrameList.length&&(t=this.referenceFrameList[0]),t&&(this.referenceFrameList.length>1?(this.updateLocusSearchWidget(this.referenceFrameList),this.windowSizePanel.updatePanel(this.referenceFrameList)):(this.updateLocusSearchWidget([t]),this.windowSizePanel.updatePanel([t]))),this.centerGuide&&this.centerGuide.repaint(),!this.dragObject){e.next=24;break}i=zn(n),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=12,o.updateViews(r);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=73;break;case 24:s={},u=[],c=zn(n);try{for(c.s();!(l=c.n()).done;)h=l.value,(f=h.track.autoscaleGroup)?((p=s[f])||(p=[],s[f]=p),p.push(h)):u.push(h)}catch(e){c.e(e)}finally{c.f()}d=Object.keys(s),g=0,v=d;case 30:if(!(g<v.length)){e.next=65;break}m=v[g],y=s[m],b=[],w=zn(y);try{for(w.s();!(x=w.n()).done;)k=x.value,b.push(k.getInViewFeatures())}catch(e){w.e(e)}finally{w.f()}return e.next=38,Promise.all(b);case 38:S=e.sent,_=[],R=zn(S);try{for(R.s();!(E=R.n()).done;)A=E.value,_=_.concat(A)}catch(e){R.e(e)}finally{R.f()}C=Xv(_),T=zn(y),e.prev=44,T.s();case 46:if((M=T.n()).done){e.next=54;break}return(L=M.value).track.dataRange=C,L.track.autoscale=!1,e.next=52,L.updateViews(r);case 52:e.next=46;break;case 54:e.next=59;break;case 56:e.prev=56,e.t1=e.catch(44),T.e(e.t1);case 59:return e.prev=59,T.f(),e.finish(59);case 62:g++,e.next=30;break;case 65:I=0,P=u;case 66:if(!(I<P.length)){e.next=73;break}return N=P[I],e.next=70,N.updateViews(r);case 70:I++,e.next=66;break;case 73:case"end":return e.stop()}}),e,this,[[6,16,19,22],[44,56,59,62]])}))),function(e,t,n){return a.apply(this,arguments)})},{key:"loadInProgress",value:function(){var e;for(e=0;e<this.trackViews.length;e++)if(this.trackViews[e].isLoading())return!0;return!1}},{key:"updateLocusSearchWidget",value:function(e){if(e.length>1)return this.$searchInput.val(""),void this.chromosomeSelectWidget.$select.val("");this.rulerTrack&&this.rulerTrack.updateLocusLabel();var t=e[0];if(t.locusSearchString&&"all"===t.locusSearchString.toLowerCase())this.$searchInput.val(t.locusSearchString),this.chromosomeSelectWidget.$select.val("all");else{var n,r,i;if(this.chromosomeSelectWidget.$select.val(t.chr),this.$searchInput){var a=t.start+t.bpPerPixel*this.viewportWidth();if(this.genome){var o=this.genome.getChromosome(t.chr);o&&(a=Math.min(a,o.bpLength))}n=_r(Math.floor(t.start+1)),r=_r(Math.floor(a)),i=t.chr+":"+n+"-"+r,this.$searchInput.val(i)}this.fireEvent("locuschange",[{chr:t.chr,start:n,end:r,label:i}])}}},{key:"viewportContainerWidth",value:function(){return this.trackViews&&this.trackViews.length>0?this.trackViews[0].$viewportContainer.width():this.trackContainer.getBoundingClientRect().width-112}},{key:"calculateViewportWidth",value:function(e){return 1===e?this.viewportContainerWidth():Math.floor((this.viewportContainerWidth()-5*(e-1))/e)}},{key:"viewportWidth",value:function(){return this.trackViews[0].viewports[0].$viewport.width()}},{key:"minimumBases",value:function(){return this.config.minimumBases}},{key:"updateZoomSlider",value:function(e){var t=this.trackViews[0].viewports[0],n=t.referenceFrame,r=t.$viewport.width()*n.bpPerPixel,i=n.getChromosome().bpLength,a=(i-r)/(i-this.minimumBases()),o=Math.round(100*a);e.val(o)}},{key:"zoom",value:function(e){this.zoomWithScaleFactor(e)}},{key:"zoomIn",value:function(){this.zoomWithScaleFactor(.5)}},{key:"zoomOut",value:function(){this.zoomWithScaleFactor(2)}},{key:"zoomWithRangePercentage",value:function(e){if(!this.loadInProgress()){var t,n=zn(this.trackViews[0].viewports);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.referenceFrame,a=i.start+i.toBP(r.$viewport.width()/2),o=i.getChromosome(),s=c((o.bpLength-o.bpStart)/r.$viewport.width(),this.minimumBases()/r.$viewport.width(),e),u=s*r.$viewport.width();function c(e,t,n){return(1-n)*e+n*t}i.start=a-u/2,i.bpPerPixel=s,i.clamp(r.$viewport.width()),this.updateViews(r.referenceFrame)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"zoomWithScaleFactor",value:function(e,t,n){var r,i=zn(n?[n]:this.trackViews[0].viewports);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.referenceFrame,s=o.getChromosome(),u=o.start,c=o.bpPerPixel,l=s.bpLength-s.bpStart,h=e<1?this.minimumBases()/a.$viewport.width():l/a.$viewport.width(),f=void 0===t?o.start+o.toBP(a.$viewport.width()/2):t,p=void 0,d=(p=e<1?Math.max(o.bpPerPixel*e,h):Math.min(o.bpPerPixel*e,h))*a.$viewport.width();o.start=f-d/2,o.bpPerPixel=p,o.clamp(a.$viewport.width()),(u!==o.start||c!==o.bpPerPixel)&&this.updateViews(a.referenceFrame)}}catch(e){i.e(e)}finally{i.f()}}},{key:"presentSplitScreenMultiLocusPanel",value:function(e,t){var n=this.calculateViewportWidth(1+this.referenceFrameList.length);!function(e,t,n,r){var i=(n+(n+r))/2;e.start=i-e.bpPerPixel*(t/2),e.initialEnd=e.start+e.bpPerPixel*t,e.locusSearchString=e.presentLocus(t)}(t,n,e.start,e.lengthOnRef);var r=this.genome.getChromosomeName(e.mate.chr),i=function(e,t,n,r,i,a){var o=(i+(i+a))/2-n*(r/2),s=new SS(e,t,o,o+n*r,n);return s.locusSearchString=s.presentLocus(r),s}(this.genome,r,t.bpPerPixel,n,e.mate.position,e.lengthOnRef);this.addMultiLocusPanelWithReferenceFrameIndex(i,1+this.referenceFrameList.indexOf(t),n)}},{key:"selectMultiLocusPanelWithReferenceFrame",value:function(e){var t=this;this.referenceFrameList.filter((function(t){return e!==t})).forEach((function(e){return t.removeMultiLocusPanelWithReferenceFrame(e,!1)})),this.resize()}},{key:"removeMultiLocusPanelWithReferenceFrame",value:function(e,t){var n,r=zn(this.trackViews);try{for(r.s();!(n=r.n()).done;)n.value.removeViewportForReferenceFrame(e)}catch(e){r.e(e)}finally{r.f()}var i=this.referenceFrameList.indexOf(e);if(this.referenceFrameList.splice(i,1),this.updateUIWithReferenceFrameListChange(this.referenceFrameList),!0===t)this.resize();else{var a,o=zn(this.trackViews);try{for(o.s();!(a=o.n()).done;){var s=a.value;xy(s.viewports,s.$viewportContainer)}}catch(e){o.e(e)}finally{o.f()}}}},{key:"addMultiLocusPanelWithReferenceFrameIndex",value:function(e,t,n){if(t===this.referenceFrameList.length){this.referenceFrameList.push(e);var r,i=zn(this.trackViews);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=ny(a,this.referenceFrameList,t,n);a.viewports.push(o)}}catch(e){i.e(e)}finally{i.f()}}else{this.referenceFrameList.splice(t,0,e);var s,u=zn(this.trackViews);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=ny(c,this.referenceFrameList,t,n);c.viewports.splice(t,0,l),l.$viewport.detach().insertAfter(c.viewports[t-1].$viewport)}}catch(e){u.e(e)}finally{u.f()}}var h,f=zn(this.trackViews);try{for(f.s();!(h=f.n()).done;)h.value.updateViewportForMultiLocus()}catch(e){f.e(e)}finally{f.f()}this.rulerTrack&&this.rulerTrack.updateLocusLabel(),this.updateUIWithReferenceFrameListChange(this.referenceFrameList),this.resize()}},{key:"getViewportWithGUID",value:function(e){var t,n=void 0,r=zn(this.trackViews);try{for(r.s();!(t=r.n()).done;){var i,a=zn(t.value.viewports);try{for(a.s();!(i=a.n()).done;){var o=i.value;e===o.guid&&(n=o)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"goto",value:(i=yn(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.search(t+":"+n+"-"+r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"search",value:(r=yn(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RS(this,t);case 2:if(r=e.sent,e.t0=r,!e.t0){e.next=9;break}return e.next=7,r;case 7:e.t1=e.sent.length,e.t0=e.t1>0;case 9:if(!e.t0){e.next=20;break}i=_S(this,r),this.referenceFrameList=i,by(this.trackViews),a=zn(this.trackViews);try{for(a.s();!(o=a.n()).done;)s=o.value,wy(this,i,s)}catch(e){a.e(e)}finally{a.f()}return this.updateUIWithReferenceFrameListChange(i),n||this.updateViews(),e.abrupt("return",i);case 20:throw new Error("Unrecognized locus ".concat(t));case 21:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"loadSampleInformation",value:(n=yn(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,t instanceof File&&(n=t.name),"fam"!==n.substr(n.lastIndexOf(".")+1)){e.next=7;break}return e.next=6,kS(t);case 6:this.sampleInformation=e.sent;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"on",value:function(e,t){this.eventHandlers[e]||(this.eventHandlers[e]=[]),this.eventHandlers[e].push(t)}},{key:"un",value:function(e,t){if(this.eventHandlers[e]){var n=this.eventHandlers[e].indexOf(t);-1!==n&&this.eventHandlers[e].splice(n,1)}}},{key:"off",value:function(e,t){if(e)if(t){var n=this.eventHandlers[e].indexOf(t);-1!==n&&this.eventHandlers[e].splice(n,1)}else this.eventHandlers[e]=[];else this.eventHandlers={}}},{key:"fireEvent",value:function(e,t,n){var r,i=this.eventHandlers[e];if(void 0!==i&&0!==i.length)return r=n||window,i.map((function(e){return e.apply(r,t)}))[0]}},{key:"dispose",value:function(){lc(window).off(this.namespace),lc(document).off(this.namespace),this.eventHandlers=void 0,this.trackViews.forEach((function(e){e.dispose()}))}},{key:"toJSON",value:function(){var e={version:"2.7.4"};if(e.reference=this.genome.toJSON(),Gr(e.reference.fastaURL))throw new Error("Error. Sessions cannot include local file references ".concat(e.reference.fastaURL.name,"."));if(Gr(e.reference.indexURL))throw new Error("Error. Sessions cannot include local file references ".concat(e.reference.indexURL.name,"."));var t,n=[],r={},i=zn(this.trackViews[0].viewports);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.referenceFrame,s=a.$viewport[0].clientWidth,u=o.presentLocus(s);if(n.push(u),o.selection){var c={gene:o.selection.gene,snp:o.selection.snp};r[u]=c}}}catch(e){i.e(e)}finally{i.f()}e.locus=1===n.length?n[0]:n,Object.getOwnPropertyNames(r).length>0&&(e.gtexSelections=r);var l,h=[],f=[],p=zn(this.trackViews);try{for(p.s();!(l=p.n()).done;){var d=l.value.track;try{var g=void 0;(g="function"==typeof d.getState?d.getState():d.config)&&(g.browser&&delete g.browser,g.order=d.order,h.push(g))}catch(w){f.push(w)}}}catch(e){p.e(e)}finally{p.f()}if(f.length>0){var v,m=1,y="Errors encountered saving session:",b=zn(f);try{for(b.s();!(v=b.n()).done;){var w=v.value;y+=" (".concat(m++,") ").concat(w.toString(),".")}}catch(e){b.e(e)}finally{b.f()}throw Error(y)}if(h.filter((function(e){e.url&&Gr(e.url)})).length>0)throw new Error("Error. Sessions cannot include local file references.");return e.tracks=h,e}},{key:"compressedSession",value:function(){return function(e){const t=[];for(var n=0;n<e.length;n++)t.push(e.charCodeAt(n));const r=new wr.RawDeflate(t).compress(),i=String.fromCharCode.apply(null,r);return kr(i).replace(/\+/g,".").replace(/\//g,"_").replace(/=/g,"-")}(JSON.stringify(this.toJSON()))}},{key:"sessionURL",value:function(){var e=window.location.href.slice(),t=e.indexOf("?");return(t>0?e.substring(0,t):e)+"?sessionURL=blob:"+this.compressedSession()}},{key:"currentLoci",value:function(){var e,t=[],n=zn(this.trackViews[0].viewports);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.referenceFrame,a=r.$viewport[0].clientWidth,o=i.presentLocus(a);t.push(o)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"mouseDownOnViewport",value:function(e,t){var n;n=dr(e),this.vpMouseDown={viewport:t,lastMouseX:n.x,mouseDownX:n.x,lastMouseY:n.y,mouseDownY:n.y,referenceFrame:t.referenceFrame}}},{key:"cancelTrackPan",value:function(){var e=this.dragObject;this.dragObject=void 0,this.isScrolling=!1,this.vpMouseDown=void 0,e&&e.viewport.referenceFrame.start!==e.start&&(this.updateViews(),this.fireEvent("trackdragend"))}},{key:"startTrackDrag",value:function(e){this.dragTrack=e}},{key:"updateTrackDrag",value:function(e){if(e&&this.dragTrack){var t=this.dragTrack,n=this.trackViews.indexOf(e),r=this.trackViews.indexOf(t),i=this.trackViews;i[n]=t,i[r]=e;var a=this.trackViews[n].track.order;this.trackViews[r].track.order=a;var o=i.length,s=a;if(n<r)for(var u=n+1;u<o;u++){var c=i[u].track;if(!(c.order<=s))break;c.order=Math.min(Number.MAX_SAFE_INTEGER,s+1),s=c.order}else for(var l=n-1;l>0;l--){var h=i[l].track;if(!(h.order>=s))break;h.order=Math.max(-Number.MAX_SAFE_INTEGER,s-1),s=h.order}this.reorderTracks()}}},{key:"endTrackDrag",value:function(){this.dragTrack&&this.dragTrack.$trackDragScrim.hide(),this.dragTrack=void 0}},{key:"addMouseHandlers",value:function(){var e=this,t=this;function n(e){var n,r,i,a;if(e.preventDefault(),!t.loadInProgress()&&(n=dr(e),t.vpMouseDown)){var o=Math.abs(n.x-t.vpMouseDown.mouseDownX)>Math.abs(n.y-t.vpMouseDown.mouseDownY);if(i=(r=t.vpMouseDown.viewport).$viewport.width(),a=r.referenceFrame,!t.dragObject&&!t.isScrolling)if(o)t.vpMouseDown.mouseDownX&&Math.abs(n.x-t.vpMouseDown.mouseDownX)>t.constants.dragThreshold&&(t.dragObject={viewport:r,start:a.start});else if(t.vpMouseDown.mouseDownY&&Math.abs(n.y-t.vpMouseDown.mouseDownY)>t.constants.scrollThreshold){t.isScrolling=!0;var s=r.trackView,u=s.$viewportContainer.height(),c=Sy(s.viewports);t.vpMouseDown.r=u/c}if(t.dragObject&&(a.shiftPixels(t.vpMouseDown.lastMouseX-n.x,i)&&(t.referenceFrameList.length>1?t.updateLocusSearchWidget(t.referenceFrameList):t.updateLocusSearchWidget([t.vpMouseDown.referenceFrame]),t.updateViews()),t.fireEvent("trackdrag")),t.isScrolling){var l=t.vpMouseDown.r*(t.vpMouseDown.lastMouseY-n.y);t.vpMouseDown.viewport.trackView.scrollBy(l)}t.vpMouseDown.lastMouseX=n.x,t.vpMouseDown.lastMouseY=n.y}}function r(e){t.cancelTrackPan(),t.endTrackDrag()}lc(window).on("resize"+this.namespace,(function(){e.resize()})),lc(this.root).on("mouseup",r),lc(this.root).on("mouseleave",r),lc(this.trackContainer).on("mousemove",n),lc(this.trackContainer).on("touchmove",n),lc(this.trackContainer).on("mouseleave",r),lc(this.trackContainer).on("mouseup",r),lc(this.trackContainer).on("touchend",r)}},{key:"getDriveFileInfo",value:(t=yn(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ir(t),r="https://www.googleapis.com/drive/v3/files/"+n+"?supportsTeamDrives=true",e.abrupt("return",im.loadJson(r,Yv({})));case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}],[{key:"uncompressSession",value:function(e){if(e.indexOf("/gzip;base64")>0){var t,n="",r=zn(Ur(e));try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=String.fromCharCode(i)}}catch(e){r.e(e)}finally{r.f()}return n}return function(e){e=e.replace(/\./g,"+").replace(/_/g,"/").replace(/-/g,"=");const t=atob(e),n=[];for(let e=0;e<t.length;e++)n.push(t.charCodeAt(e));const r=new wr.RawInflate(n).decompress();let i="";for(let e of r)i+=String.fromCharCode(e);return i}(e.substring(5))}}]),e}();function PS(e,t){var n,r=zn(e);try{for(r.s();!(n=r.n()).done;){var i,a=n.value,o=zn(a.viewports);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.$trackLabel&&(0===a.viewports.indexOf(s)&&!0===t?s.$trackLabel.show():s.$trackLabel.hide())}}catch(e){o.e(e)}finally{o.f()}}}catch(e){r.e(e)}finally{r.f()}}var NS=function(){function e(t,n){bn(this,e),this.$container=lc("<div>",{class:"igv-windowsize-panel-container"}),t.append(this.$container),this.browser=n}return xn(e,[{key:"show",value:function(){this.$container.show()}},{key:"hide",value:function(){this.$container.hide()}},{key:"updatePanel",value:function(e){var t,n,r;this.$container.text(1===e.length?(t=Math.round(this.browser.viewportWidth()*e[0].bpPerPixel))>1e7?(n=" mb",r=t/1e6,Math.floor(r).toString()+n):t>1e4?(n=" kb",r=t/1e3,_r(Math.floor(r))+n):_r(t)+" bp":"")}}]),e}(),OS=function(){function e(t,n){var r=this;bn(this,e),this.$container=lc("<div>",{class:"igv-generic-dialog-container"}),t.append(this.$container),this.$container.offset({left:0,top:0});var i=lc("<div>",{class:"igv-generic-dialog-header"});this.$container.append(i),br(i[0],(function(){r.$minimum_input.val(void 0),r.$maximum_input.val(void 0),r.$container.offset({left:0,top:0}),r.$container.hide()})),this.$minimum=lc("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$minimum);var a=lc("<div>");a.text("Minimum"),this.$minimum.append(a),this.$minimum_input=lc("<input>"),this.$minimum.append(this.$minimum_input),this.$maximum=lc("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$maximum);var o=lc("<div>");o.text("Maximum"),this.$maximum.append(o),this.$maximum_input=lc("<input>"),this.$maximum.append(this.$maximum_input);var s=lc("<div>",{class:"igv-generic-dialog-ok-cancel"});this.$container.append(s),this.$ok=lc("<div>"),s.append(this.$ok),this.$ok.text("OK"),this.$cancel=lc("<div>"),s.append(this.$cancel),this.$cancel.text("Cancel"),this.$cancel.on("click",(function(){r.$minimum_input.val(void 0),r.$maximum_input.val(void 0),r.$container.offset({left:0,top:0}),r.$container.hide()})),ni(this.$container.get(0),i.get(0)),this.$container.hide()}return xn(e,[{key:"configure",value:function(e){var t,n,r=this,i=e.trackView.dataRange();i?(t=i.min,n=i.max):(t=0,n=100),this.$minimum_input.val(t),this.$maximum_input.val(n),this.$minimum_input.unbind(),this.$minimum_input.on("keyup",(function(t){13===t.keyCode&&r.processResults(e)})),this.$maximum_input.unbind(),this.$maximum_input.on("keyup",(function(t){13===t.keyCode&&r.processResults(e)})),this.$ok.unbind(),this.$ok.on("click",(function(t){r.processResults(e)}))}},{key:"processResults",value:function(e){var t=parseFloat(this.$minimum_input.val()),n=parseFloat(this.$maximum_input.val());isNaN(t)||isNaN(n)?ir.presentAlert(new Error("Must input numeric values"),void 0):e.trackView.setDataRange(t,n),this.$minimum_input.val(void 0),this.$maximum_input.val(void 0),this.$container.offset({left:0,top:0}),this.$container.hide()}},{key:"present",value:function(e){var t=e.offset().top,n=lc("body").scrollTop();this.$container.offset({left:e.width()-this.$container.width(),top:t+n}),this.$container.show()}}]),e}(),FS=function(e){this.$container=lc('<div class="igv-user-feedback">'),e.append(this.$container);var t=lc("<div>");this.$container.append(t);var n=lc("<div>");t.append(n);var r=Hm("exclamation-triangle","red");n.append(r);var i=lc("<div>");t.append(i);var a=Hm("times-circle","grey");i.append(a);var o=lc("<div>");this.$container.append(o);var s=lc("<div>");o.append(s),s.text("i am user feedback"),i.click((function(){s.html(""),(void 0).$container.hide()}))};FS.prototype.show=function(){this.$container.show()},FS.prototype.hide=function(){this.$container.hide()};var DS=function(e,t){var n=lc('<div class="igv-navbar-button">');e.append(n),n.text("Save SVG"),n.on("click.svg-save-control",(function(){t.saveSVGtoFile({})}))},BS=function(e,t){var n;this.$zoomContainer=lc('<div class="igv-zoom-widget">'),t.append(this.$zoomContainer),n=lc("<div>"),this.$zoomContainer.append(n),n.append(Hm("minus-circle")),n.on("click",(function(){e.zoomOut()})),n=lc("<div>"),this.$zoomContainer.append(n),this.$slider=lc('<input type="range"/>'),n.append(this.$slider),this.$slider.on("change",(function(t){e.zoomWithRangePercentage(t.target.value/100)})),n=lc("<div>"),this.$zoomContainer.append(n),n.append(Hm("plus-circle")),n.on("click",(function(){e.zoomIn()})),this.currentChr=void 0;var r=this;e.on("locuschange",(function(){e.updateZoomSlider(r.$slider)}))};BS.prototype.hide=function(){this.$zoomContainer.hide()},BS.prototype.show=function(){this.$zoomContainer.show()},BS.prototype.hideSlider=function(){this.$slider.hide()},BS.prototype.showSlider=function(){this.$slider.show()};var zS=function(e,t){this.showAllChromosomes=!1!==e.config.showAllChromosomes,this.$container=lc("<div>",{class:"igv-chromosome-select-widget-container"}),t.append(this.$container),this.$select=lc("<select>",{name:"chromosome-select-widget"}),this.$container.append(this.$select),this.$select.on("change",(function(){""!==lc(this).val()&&(e.search(lc(this).val()),lc(this).blur())}))};zS.prototype.update=function(e){this.$select.empty();var t=this.showAllChromosomes?e.chromosomeNames.slice():e.wgChromosomeNames.slice();e.showWholeGenomeView()&&(t.unshift("all"),t.unshift(""));var n,r=zn(t);try{for(r.s();!(n=r.n()).done;){var i,a=n.value;i=lc("<option>",{value:a}),this.$select.append(i),i.text(a)}}catch(e){r.e(e)}finally{r.f()}};var US=function(e,t){var n=this;this.browser=t,this.$button=lc('<div class="igv-navbar-button">'),e.append(this.$button),this.$button.text("track labels"),this.$button.on("click",(function(){!0===t.trackLabelsVisible?n.doHide():n.doShow()}))};US.prototype.doHide=function(){this.$button.removeClass("igv-navbar-button-clicked"),this.browser.hideTrackLabels()},US.prototype.doShow=function(){this.$button.addClass("igv-navbar-button-clicked"),this.browser.showTrackLabels()},US.prototype.setState=function(e){!0===e?this.$button.addClass("igv-navbar-button-clicked"):this.$button.removeClass("igv-navbar-button-clicked")},US.prototype.disable=function(){this.doHide(),this.$button.hide()},US.prototype.enable=function(){this.$button.show()};var HS=function(){function e(t,n,r,i){bn(this,e);var a=this;this.browser=i,this.$container=lc('<div class="igv-center-guide igv-center-guide-thin">'),t.append(this.$container),!0===r.showCenterGuideButton&&(this.$centerGuideToggle=lc('<div class="igv-navbar-button">'),n.append(this.$centerGuideToggle),this.$centerGuideToggle.text("center line"),this.$centerGuideToggle.on("click",(function(){!0===i.isCenterGuideVisible?a.doHide():a.doShow()})))}return xn(e,[{key:"doHide",value:function(){this.$centerGuideToggle&&this.$centerGuideToggle.removeClass("igv-navbar-button-clicked"),this.browser.hideCenterGuide()}},{key:"doShow",value:function(){this.$centerGuideToggle&&this.$centerGuideToggle.addClass("igv-navbar-button-clicked"),this.browser.showCenterGuide()}},{key:"setState",value:function(e){this.$centerGuideToggle&&(!0===e?this.$centerGuideToggle.addClass("igv-navbar-button-clicked"):this.$centerGuideToggle.removeClass("igv-navbar-button-clicked"))}},{key:"forcedHide",value:function(){this.$centerGuideToggle&&this.$centerGuideToggle.hide(),!0===this.browser.isCenterGuideVisible&&this.$container.hide()}},{key:"forcedShow",value:function(){this.$centerGuideToggle&&this.$centerGuideToggle.show(),!0===this.browser.isCenterGuideVisible&&this.$container.show()}},{key:"repaint",value:function(){var e,t,n,r,i,a,o;this.browser.referenceFrameList&&(1/(o=this.browser.referenceFrameList[0]).bpPerPixel>1?(e=this.browser.trackViews[0].$viewportContainer.position(),t=Math.round(this.browser.trackViews[0].$viewportContainer.width()/2),r=e.left+t-.5*(n=o.toPixels(1)),i=Math.round(r).toString()+"px",a=Math.round(n).toString()+"px",this.$container.css({left:i,width:a}),this.$container.removeClass("igv-center-guide-thin"),this.$container.addClass("igv-center-guide-wide")):(this.$container.css({left:"50%",width:"1px"}),this.$container.removeClass("igv-center-guide-wide"),this.$container.addClass("igv-center-guide-thin")))}},{key:"resize",value:function(){this.repaint()}}]),e}(),jS=function(e,t,n,r){var i=this,a=this;this.browser=r,this.$guide=lc('<div class="igv-cursor-tracking-guide">'),e.append(this.$guide),e.on("mousemove.cursor-guide",(function(t){t.preventDefault();var n=lc(document.elementFromPoint(t.clientX,t.clientY)),a=n.parent(),o=void 0;if(a.hasClass("igv-viewport-content")?o=a.parent():a.hasClass("igv-viewport")&&n.hasClass("igv-viewport-content")?o=a:a.hasClass("igv-viewport-container")&&n.hasClass("igv-viewport")&&(o=n),n.attr("class"),a.attr("class"),o){var s=qS(t,o,i.$guide,e,r);if(s){var u=s.bp,c=s.start,l=s.end,h=s.interpolant;i.customMouseHandler&&i.customMouseHandler({bp:u,start:c,end:l,interpolant:h})}}})),!0===n.showCursorTrackingGuideButton&&(this.$button=lc('<div class="igv-navbar-button">'),t.append(this.$button),this.$button.text("cursor guide"),this.$button.on("click",(function(){!0===r.cursorGuideVisible?a.doHide():a.doShow()})))},qS=function(e,t,n,r,i){var a=vr(e,r.get(0)).x,o="".concat(a,"px");n.css({left:o});var s=vr(e,t.get(0)),u=s.x,c=s.xNormalized,l=s.width,h=t.data("viewportGUID"),f=i.getViewportWithGUID(h);if(void 0!==f){var p=f.referenceFrame,d=p.start,g=p.bpPerPixel;return{$host:t.closest(".igv-track-container"),host_css_left:o,bp:Math.round(d+u*g),start:d,end:1+d+l*g,interpolant:c}}};jS.prototype.doHide=function(){this.$button&&this.$button.removeClass("igv-navbar-button-clicked"),this.browser.hideCursorGuide()},jS.prototype.doShow=function(){this.$button.addClass("igv-navbar-button-clicked"),this.browser.showCursorGuide()},jS.prototype.setState=function(e){this.$button&&(!0===e?this.$button.addClass("igv-navbar-button-clicked"):this.$button.removeClass("igv-navbar-button-clicked"))},jS.prototype.disable=function(){this.doHide(),this.$guide.hide()},jS.prototype.enable=function(){this.$button&&this.$button.show()};var VS=function(){function e(t){bn(this,e),this.browser=t}return xn(e,[{key:"navbarDidResize",value:function(e,t){this.updateNavbar(this.createResponsiveClassSchedule(e,t))}},{key:"updateNavbar",value:function(e){this.browser.$toggle_button_container.removeClass(),this.browser.$toggle_button_container.addClass(e.$toggle_button_container),this.browser.zoomWidget.$zoomContainer.removeClass(),this.browser.zoomWidget.$zoomContainer.addClass(e.$zoomContainer)}},{key:"createResponsiveClassSchedule",value:function(e,t){var n={};return t?this.browser.windowSizePanel.hide():this.browser.windowSizePanel.show(),e>990?(n.$toggle_button_container="igv-navbar-toggle-button-container",n.$zoomContainer="igv-zoom-widget"):e>860?(n.$toggle_button_container="igv-navbar-toggle-button-container",n.$zoomContainer="igv-zoom-widget-900"):e>540?(n.$toggle_button_container="igv-navbar-toggle-button-container-750",n.$zoomContainer="igv-zoom-widget-900"):(n.$toggle_button_container="igv-navbar-toggle-button-container-750",n.$zoomContainer="igv-zoom-widget-900",this.browser.windowSizePanel.hide()),t&&(n.$zoomContainer="igv-zoom-widget-hidden"),n}}]),e}(),GS=[];function WS(){return(WS=yn(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),Fm.KNOWN_GENOMES){e.next=4;break}return e.next=4,Fm.initializeGenomes(n);case 4:if(ZS(n),!1!==n.queryParametersSupported&&KS(n),n.apiKey&&im.setApiKey(n.apiKey),n.oauthToken&&Iv.setToken(n.oauthToken),!n.clientId||Nr()){e.next=11;break}return e.next=11,Pr({clientId:n.clientId,apiKey:n.apiKey,scope:"https://www.googleapis.com/auth/userinfo.profile"});case 11:if(YS(n),r=new IS(n,t),GS.push(r),XS(r,n),r.userFeedback=new FS(lc(r.trackContainer)),r.userFeedback.hide(),r.inputDialog=new ar(r.$root.get(0)),r.dataRangeDialog=new OS(r.$root),!1===n.showTrackLabels?r.hideTrackLabels():(r.showTrackLabels(),r.trackLabelControl&&r.trackLabelControl.setState(r.trackLabelsVisible)),!1===n.showCursorTrackingGuide?r.cursorGuide.doHide():r.cursorGuide.doShow(),!1===n.showCenterGuide?r.centerGuide.doHide():r.centerGuide.doShow(),!n.sessionURL){e.next=27;break}return e.next=25,r.loadSession({url:n.sessionURL});case 25:e.next=29;break;case 27:return e.next=29,r.loadSessionObject(n);case 29:return i=r.isMultiLocusWholeGenomeView()||Fm.isWholeGenomeView(r.referenceFrameList[0].chr),r.isMultiLocusMode()||i?r.centerGuide.forcedHide():r.centerGuide.forcedShow(),r.navbarManager.navbarDidResize(r.$navigation.width(),i),e.abrupt("return",r);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $S(){return($S=yn(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=zn(GS),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,r.visibilityChange();case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function YS(e){var t=1;e.tracks&&e.tracks.forEach((function(e){void 0===e.order&&(e.order=t++)}))}function XS(e,t){var n=function(e,t){e.navbarManager=new VS(e);var n=lc("<div>",{class:"igv-navbar"});e.$navigation=n;var r=lc("<div>",{class:"igv-navbar-left-container"});n.append(r);var i=lc("<div>",{class:"igv-logo"});r.append(i);var a=lc('<svg width="690px" height="324px" viewBox="0 0 690 324" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>IGV</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="IGV" fill="#666666"><polygon id="Path" points="379.54574 8.00169252 455.581247 8.00169252 515.564813 188.87244 532.884012 253.529506 537.108207 253.529506 554.849825 188.87244 614.833392 8.00169252 689.60164 8.00169252 582.729511 320.722144 486.840288 320.722144"></polygon><path d="M261.482414,323.793286 C207.975678,323.793286 168.339046,310.552102 142.571329,284.069337 C116.803612,257.586572 103.919946,217.158702 103.919946,162.784513 C103.919946,108.410325 117.437235,67.8415913 144.472217,41.0770945 C171.507199,14.3125977 212.903894,0.930550071 268.663545,0.930550071 C283.025879,0.930550071 298.232828,1.84616386 314.284849,3.6774189 C330.33687,5.50867394 344.839793,7.97378798 357.794056,11.072835 L357.794056,68.968378 C339.48912,65.869331 323.578145,63.5450806 310.060654,61.9955571 C296.543163,60.4460336 284.574731,59.6712835 274.154998,59.6712835 C255.850062,59.6712835 240.502308,61.4320792 228.111274,64.9537236 C215.720241,68.4753679 205.793482,74.2507779 198.330701,82.2801269 C190.867919,90.309476 185.587729,100.87425 182.48997,113.974767 C179.392212,127.075284 177.843356,143.345037 177.843356,162.784513 C177.843356,181.942258 179.251407,198.000716 182.067551,210.960367 C184.883695,223.920018 189.671068,234.41436 196.429813,242.443709 C203.188559,250.473058 212.059279,256.178037 223.042241,259.558815 C234.025202,262.939594 247.683295,264.629958 264.01693,264.629958 C268.241146,264.629958 273.098922,264.489094 278.590403,264.207362 C284.081883,263.925631 289.643684,263.50304 295.275972,262.939577 L295.275972,159.826347 L361.595831,159.826347 L361.595831,308.579859 C344.698967,313.087564 327.239137,316.750019 309.215815,319.567334 C291.192494,322.38465 275.281519,323.793286 261.482414,323.793286 L261.482414,323.793286 L261.482414,323.793286 Z" id="Path"></path>;<polygon id="Path" points="0.81355666 5.00169252 73.0472883 5.00169252 73.0472883 317.722144 0.81355666 317.722144"></polygon></g> </g> </svg>');a.css("width","34px"),a.css("height","32px"),i.append(a),e.$current_genome=lc("<div>",{class:"igv-current-genome"}),r.append(e.$current_genome),e.$current_genome.text("");var o=lc("<div>",{class:"igv-navbar-genomic-location"});r.append(o),e.chromosomeSelectWidget=new zS(e,o),void 0===t.showChromosomeWidget&&(t.showChromosomeWidget=!0),!0===t.showChromosomeWidget?e.chromosomeSelectWidget.$container.show():e.chromosomeSelectWidget.$container.hide();var s=lc("<div>",{class:"igv-locus-size-group"});o.append(s);var u=lc("<div>",{class:"igv-search-container"});s.append(u),e.$searchInput=lc("<input>",{class:"igv-search-input",type:"text",placeholder:"Locus Search"}),u.append(e.$searchInput),e.$searchInput.change(yn(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.$searchInput.val(),t.next=4,e.search(n);case 4:(r=t.sent).length>1&&(e.updateLocusSearchWidget(r),e.windowSizePanel.updatePanel(r)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),ir.presentAlert(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))));var c=lc("<div>",{class:"igv-search-icon-container"});u.append(c),c.append(Hm("search")),c.on("click",(function(){return e.search(e.$searchInput.val())})),e.windowSizePanel=new NS(s,e);var l=lc("<div>",{class:"igv-navbar-right-container"});n.append(l);var h=lc('<div class="igv-navbar-toggle-button-container">');return l.append(h),e.$toggle_button_container=h,e.cursorGuide=new jS(lc(e.trackContainer),h,t,e),e.centerGuide=new HS(lc(e.trackContainer),h,t,e),!0===t.showTrackLabelButton&&(e.trackLabelControl=new US(h,e)),t.showSVGButton&&(e.svgSaveControl=new DS(h,e)),e.zoomWidget=new BS(e,l),!1===t.showNavigation&&e.$navigation.hide(),n}(e,t);n.insertBefore(lc(e.trackContainer)),!1===t.showControls&&n.hide()}function ZS(e){void 0===e.promisified&&(e.promisified=!1),void 0===e.minimumBases&&(e.minimumBases=40),void 0===e.showIdeogram&&(e.showIdeogram=!0),void 0===e.showCursorTrackingGuideButton&&(e.showCursorTrackingGuideButton=!0),void 0===e.showCenterGuideButton&&(e.showCenterGuideButton=!0),void 0===e.showSVGButton&&(e.showSVGButton=!0),void 0===e.showTrackLabelButton&&(e.showTrackLabelButton=!0),void 0===e.showCursorTrackingGuide&&(e.showCursorTrackingGuide=!1),void 0===e.showCenterGuide&&(e.showCenterGuide=!1),void 0===e.showTrackLabels&&(e.showTrackLabels=!0),void 0===e.showControls&&(e.showControls=!0),void 0===e.showNavigation&&(e.showNavigation=!0),void 0===e.showRuler&&(e.showRuler=!0),void 0===e.flanking&&(e.flanking=1e3),void 0===e.pairsSupported&&(e.pairsSupported=!0),e.tracks||(e.tracks=[])}function KS(e){var t,n,r,i,a,o,s,u,c,l,h;if(a={},t=(s=window.location.href).indexOf("?"),n=s.lastIndexOf("#"),t>=0)for(n<0&&(n=s.length),r=t+1;r<n;)(i=s.indexOf("&",r))<0&&(i=n),2===(o=s.substring(r,i).split("=",2)).length&&(u=o[0],c=decodeURIComponent(o[1]),"file"===u?l=c.split(","):"index"===u?h=c.split(","):e[u]=c,r=i+1);if(l){e.tracks||(e.tracks=[]);for(var f=0;f<l.length;f++){if(l[f].endsWith(".xml")||l[f].endsWith(".json")){e.sessionURL=l[f];break}var p={url:l[f]};h&&h.length>f&&(p.indexURL=h[f]),e.tracks.push(p)}}return a}var QS=im,JS=im.setApiKey;return function(){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML='.igv-generic-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 2048;\n  background-color: white;\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-generic-container div:first-child {\n    cursor: move;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    height: 24px;\n    width: 100%;\n    background-color: #dddddd; }\n    .igv-generic-container div:first-child i {\n      display: block;\n      color: #5f5f5f;\n      cursor: pointer;\n      width: 14px;\n      height: 14px;\n      margin-right: 8px;\n      margin-bottom: 4px; }\n\n.igv-generic-dialog-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 300px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  z-index: 2048;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-generic-dialog-container .igv-generic-dialog-header {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-generic-dialog-container .igv-generic-dialog-header div {\n      margin-right: 4px;\n      margin-bottom: 2px;\n      height: 12px;\n      width: 12px;\n      color: #7F7F7F; }\n    .igv-generic-dialog-container .igv-generic-dialog-header div:hover {\n      cursor: pointer;\n      color: #444; }\n  .igv-generic-dialog-container .igv-generic-dialog-one-liner {\n    color: #373737;\n    width: 95%;\n    height: 24px;\n    line-height: 24px;\n    text-align: left;\n    margin-top: 8px;\n    padding-left: 8px;\n    overflow-wrap: break-word;\n    background-color: white; }\n  .igv-generic-dialog-container .igv-generic-dialog-label-input {\n    margin-top: 8px;\n    width: 95%;\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    padding-left: 8px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input div {\n      width: 30%;\n      height: 100%;\n      font-size: 16px;\n      text-align: right;\n      padding-right: 8px;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-label-input input {\n      width: 50%;\n      font-size: 16px; }\n  .igv-generic-dialog-container .igv-generic-dialog-input {\n    margin-top: 8px;\n    width: calc(100% - 16px);\n    height: 24px;\n    color: #373737;\n    line-height: 24px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-input input {\n      display: block;\n      height: 100%;\n      width: 100%;\n      padding-left: 4px;\n      font-family: "Open Sans", sans-serif;\n      font-weight: 400;\n      color: #373737;\n      text-align: left;\n      outline: none;\n      border-style: solid;\n      border-width: thin;\n      border-color: #7F7F7F;\n      background-color: white; }\n    .igv-generic-dialog-container .igv-generic-dialog-input input {\n      font-size: 16px; }\n  .igv-generic-dialog-container .igv-generic-dialog-ok-cancel {\n    width: 100%;\n    height: 28px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div {\n      margin-top: 32px;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: 14px;\n      font-weight: 400;\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child {\n      margin-left: 32px;\n      margin-right: 0;\n      background-color: #5ea4e0; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child {\n      margin-left: 0;\n      margin-right: 32px;\n      background-color: #c4c4c4; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n  .igv-generic-dialog-container .igv-generic-dialog-ok {\n    width: 100%;\n    height: 36px;\n    margin-top: 32px;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-around;\n    align-items: center; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok div {\n      width: 98px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: medium;\n      font-weight: 400;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-generic-dialog-container .igv-generic-dialog-ok div:hover {\n      cursor: pointer;\n      background-color: #25597f; }\n\n.igv-menu-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  min-width: 132px;\n  z-index: 4096;\n  cursor: pointer;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  color: #4b4b4b;\n  background: white;\n  border-radius: 4px;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-end;\n  text-align: left; }\n  .igv-menu-popup > div:not(:first-child) {\n    width: 100%; }\n    .igv-menu-popup > div:not(:first-child) > div {\n      background: white; }\n    .igv-menu-popup > div:not(:first-child) > div.context-menu {\n      padding-left: 4px;\n      padding-right: 4px; }\n    .igv-menu-popup > div:not(:first-child) > div:last-child {\n      border-bottom-left-radius: 4px;\n      border-bottom-right-radius: 4px;\n      border-bottom-color: transparent;\n      border-bottom-style: solid;\n      border-bottom-width: thin; }\n    .igv-menu-popup > div:not(:first-child) > div:hover {\n      background: #efefef; }\n\n.igv-menu-popup-shim {\n  padding-left: 8px;\n  padding-right: 8px; }\n\n.igv-menu-popup-header {\n  position: relative;\n  width: 100%;\n  height: 24px;\n  cursor: move;\n  border-top-color: transparent;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  border-bottom-color: #7F7F7F;\n  border-bottom-style: solid;\n  border-bottom-width: thin;\n  background-color: #eee;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  align-items: center; }\n  .igv-menu-popup-header div {\n    margin-right: 4px;\n    height: 12px;\n    width: 12px;\n    color: #7F7F7F; }\n  .igv-menu-popup-header div:hover {\n    cursor: pointer;\n    color: #444; }\n\n.igv-menu-popup-check-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: 20px;\n  background-color: transparent; }\n  .igv-menu-popup-check-container div {\n    padding-top: 2px;\n    padding-left: 8px; }\n  .igv-menu-popup-check-container div:first-child {\n    position: relative;\n    width: 12px;\n    height: 12px; }\n    .igv-menu-popup-check-container div:first-child svg {\n      position: absolute;\n      width: 12px;\n      height: 12px; }\n\n.igv-user-feedback {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 512px;\n  height: 360px;\n  z-index: 2048;\n  background-color: white;\n  border-color: #a2a2a2;\n  border-style: solid;\n  border-width: thin;\n  font-family: "Open Sans", sans-serif;\n  font-size: medium;\n  font-weight: 400;\n  color: #444;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-user-feedback div:first-child {\n    position: relative;\n    height: 24px;\n    width: 100%;\n    background-color: white;\n    border-bottom-color: #a2a2a2;\n    border-bottom-style: solid;\n    border-bottom-width: thin; }\n    .igv-user-feedback div:first-child div {\n      position: absolute;\n      top: 2px;\n      width: 16px;\n      height: 16px;\n      background-color: transparent; }\n    .igv-user-feedback div:first-child div:first-child {\n      left: 8px; }\n    .igv-user-feedback div:first-child div:last-child {\n      cursor: pointer;\n      right: 8px; }\n  .igv-user-feedback div:last-child {\n    width: 100%;\n    height: calc(100% - 24px);\n    border-width: 0; }\n    .igv-user-feedback div:last-child div {\n      width: auto;\n      height: auto;\n      margin: 8px; }\n\n.igv-root {\n  position: relative;\n  padding-top: 4px;\n  margin-left: 10px;\n  margin-right: 10px;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: stretch; }\n  .igv-root .igv-navbar {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    align-items: center;\n    color: #444;\n    font-size: 12px;\n    font-family: "Open Sans", sans-serif;\n    font-weight: 400;\n    line-height: 32px;\n    padding-left: 8px;\n    padding-right: 8px;\n    margin-top: 2px;\n    margin-bottom: 4px;\n    height: 32px;\n    border-style: solid;\n    border-radius: 3px;\n    border-width: thin;\n    border-color: #bfbfbf;\n    background-color: #f3f3f3; }\n    .igv-root .igv-navbar .igv-navbar-left-container {\n      display: flex;\n      flex-flow: row;\n      flex-wrap: nowrap;\n      justify-content: space-between;\n      align-items: center;\n      height: 32px;\n      line-height: 32px; }\n      .igv-root .igv-navbar .igv-navbar-left-container .igv-logo {\n        width: 34px;\n        height: 32px;\n        margin-right: 8px; }\n      .igv-root .igv-navbar .igv-navbar-left-container .igv-current-genome {\n        height: 32px;\n        margin-left: 4px;\n        margin-right: 4px;\n        user-select: none;\n        line-height: 32px;\n        vertical-align: middle;\n        text-align: center; }\n      .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location {\n        display: flex;\n        flex-flow: row;\n        flex-wrap: nowrap;\n        justify-content: space-between;\n        align-items: center;\n        height: 100%; }\n        .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-chromosome-select-widget-container {\n          display: flex;\n          flex-flow: column;\n          flex-wrap: nowrap;\n          justify-content: space-around;\n          align-items: center;\n          height: 100%;\n          width: 125px;\n          margin-right: 4px; }\n          .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-chromosome-select-widget-container select {\n            display: block;\n            cursor: pointer;\n            width: 100px;\n            height: 75%;\n            outline: none;\n            font-size: 12px;\n            font-family: "Open Sans", sans-serif;\n            font-weight: 400; }\n        .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group {\n          display: flex;\n          flex-flow: row;\n          flex-wrap: nowrap;\n          justify-content: space-between;\n          align-items: center;\n          margin-left: 8px;\n          height: 22px; }\n          .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container {\n            display: flex;\n            flex-flow: row;\n            flex-wrap: nowrap;\n            justify-content: flex-start;\n            align-items: center;\n            width: 200px;\n            height: 22px;\n            line-height: 22px; }\n            .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container input.igv-search-input {\n              cursor: text;\n              width: 85%;\n              height: 22px;\n              line-height: 22px;\n              font-size: 12px;\n              font-family: "Open Sans", sans-serif;\n              font-weight: 400;\n              text-align: left;\n              padding-left: 8px;\n              margin-right: 8px;\n              outline: none;\n              border-style: solid;\n              border-radius: 3px;\n              border-width: thin;\n              border-color: #bfbfbf;\n              background-color: white; }\n            .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container .igv-search-icon-container {\n              cursor: pointer;\n              height: 16px;\n              width: 16px; }\n          .igv-root .igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-windowsize-panel-container {\n            margin-left: 4px;\n            user-select: none; }\n    .igv-root .igv-navbar .igv-navbar-right-container {\n      display: flex;\n      flex-flow: row;\n      flex-wrap: nowrap;\n      justify-content: space-between;\n      align-items: center;\n      height: 32px;\n      line-height: 32px; }\n      .igv-root .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container {\n        display: flex;\n        flex-flow: row;\n        flex-wrap: nowrap;\n        justify-content: space-between;\n        align-items: center;\n        height: 100%; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container div {\n          margin-left: 0;\n          margin-right: 4px; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container div:last-child {\n          margin-left: 0;\n          margin-right: 0; }\n      .igv-root .igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container-750 {\n        display: none; }\n      .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget {\n        color: #737373;\n        font-size: 18px;\n        height: 32px;\n        line-height: 32px;\n        margin-left: 8px;\n        user-select: none;\n        display: flex;\n        flex-flow: row;\n        flex-wrap: nowrap;\n        justify-content: flex-end;\n        align-items: center; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget div {\n          cursor: pointer;\n          margin-left: unset;\n          margin-right: unset; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget div:first-child {\n          height: 24px;\n          width: 24px;\n          margin-left: unset;\n          margin-right: 8px; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget div:last-child {\n          height: 24px;\n          width: 24px;\n          margin-left: 8px;\n          margin-right: unset; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget div:nth-child(even) {\n          display: block;\n          height: fit-content; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget input {\n          display: block;\n          width: 125px; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget svg {\n          display: block; }\n      .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 {\n        color: #737373;\n        font-size: 18px;\n        height: 32px;\n        line-height: 32px;\n        margin-left: 8px;\n        user-select: none;\n        display: flex;\n        flex-flow: row;\n        flex-wrap: nowrap;\n        justify-content: flex-end;\n        align-items: center; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div {\n          cursor: pointer;\n          margin-left: unset;\n          margin-right: unset; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:first-child {\n          height: 24px;\n          width: 24px;\n          margin-left: unset;\n          margin-right: 8px; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:last-child {\n          height: 24px;\n          width: 24px;\n          margin-left: 8px;\n          margin-right: unset; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:nth-child(even) {\n          width: 0;\n          height: 0;\n          display: none; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 input {\n          width: 0;\n          height: 0;\n          display: none; }\n        .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 svg {\n          display: block; }\n      .igv-root .igv-navbar .igv-navbar-right-container .igv-zoom-widget-hidden {\n        display: none; }\n  .igv-root .igv-ideogram-container {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center;\n    margin-top: 10px;\n    height: 16px;\n    width: 100%; }\n    .igv-root .igv-ideogram-container .igv-ideogram-content {\n      height: 100%;\n      background-color: white; }\n    .igv-root .igv-ideogram-container .igv-ideogram-content:first-child {\n      margin-left: 50px; }\n    .igv-root .igv-ideogram-container .igv-ideogram-content-border-right {\n      border-right-color: #292929;\n      border-right-style: solid;\n      border-right-width: 1px; }\n  .igv-root .igv-track-container {\n    position: relative; }\n\n.igv-multi-locus-separator {\n  pointer-events: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  z-index: 2;\n  width: 1px;\n  background-color: gray; }\n\n.igv-track-container-spinner {\n  position: absolute;\n  top: 90%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1024;\n  width: 24px;\n  height: 24px;\n  pointer-events: none;\n  color: #737373; }\n\n.igv-track {\n  position: relative;\n  width: 100%;\n  margin-top: 4px;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: stretch; }\n\n.igv-left-hand-gutter {\n  width: 50px;\n  height: 100%; }\n\n.igv-right-hand-gutter {\n  position: relative;\n  width: 36px;\n  height: 100%;\n  background: white; }\n\n.igv-viewport-container {\n  position: relative;\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: stretch;\n  width: calc(100% - 112px);\n  height: 100%; }\n  .igv-viewport-container .igv-viewport {\n    position: relative;\n    height: 100%;\n    overflow-x: hidden;\n    overflow-y: hidden;\n    background-color: white; }\n  .igv-viewport-container .igv-viewport-multi-locus-gap-shim {\n    height: 100%;\n    width: 1px;\n    margin-left: 2px;\n    margin-right: 2px;\n    background-color: transparent; }\n\n.igv-viewport-content {\n  position: relative;\n  width: 100%; }\n\n.igv-canvas {\n  position: relative;\n  display: block; }\n\n.igv-scrollbar-shim {\n  position: relative;\n  width: 14px;\n  height: 100%;\n  background-color: white; }\n\n.igv-scrollbar-outer-div {\n  position: relative;\n  width: 14px;\n  height: 100%;\n  background-color: white; }\n  .igv-scrollbar-outer-div > div {\n    cursor: pointer;\n    position: absolute;\n    top: 0;\n    left: 2px;\n    width: 8px;\n    border-width: 1px;\n    border-style: solid;\n    border-color: #c4c4c4;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px;\n    background-color: transparent; }\n  .igv-scrollbar-outer-div > div:hover {\n    background-color: #c4c4c4; }\n\n.igv-viewport-border-right {\n  border-right-color: #292929;\n  border-right-style: solid;\n  border-right-width: 1px; }\n\n.igv-viewport-ruler {\n  cursor: pointer;\n  font-family: "Open Sans", sans-serif;\n  font-size: 10px;\n  font-weight: 200;\n  text-align: center; }\n  .igv-viewport-ruler > div {\n    height: 100%; }\n\n.igv-track-manipulation-handle {\n  position: relative;\n  cursor: pointer;\n  width: 12px;\n  height: 100%;\n  margin-left: 0;\n  font-size: medium;\n  border-color: #c4c4c4;\n  border-style: solid;\n  border-width: 0;\n  border-top-right-radius: 6px;\n  border-bottom-right-radius: 6px;\n  z-index: 512;\n  background-color: #c4c4c4; }\n\n.igv-track-manipulation-handle:hover,\n.igv-track-manipulation-handle:focus,\n.igv-track-manipulation-handle:active {\n  border-color: #7e7e7e;\n  background-color: #7e7e7e; }\n\n.igv-multi-locus-panel-border {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 1px;\n  background-color: green;\n  border-right-color: #ff0000;\n  border-right-style: solid;\n  border-right-width: 1px; }\n\n.igv-navbar-button {\n  box-sizing: unset;\n  padding-left: 6px;\n  padding-right: 6px;\n  height: 18px;\n  text-transform: capitalize;\n  user-select: none;\n  line-height: 18px;\n  text-align: center;\n  vertical-align: middle;\n  font-family: "Open Sans", sans-serif;\n  font-size: 11px;\n  font-weight: 200;\n  color: #737373;\n  background-color: #f3f3f3;\n  border-color: #737373;\n  border-style: solid;\n  border-width: thin;\n  border-radius: 6px; }\n\n.igv-navbar-button-clicked {\n  color: white;\n  background-color: #737373; }\n\n.igv-navbar-button:hover {\n  cursor: pointer; }\n\n.igv-logo-nonav {\n  margin-left: 4px;\n  margin-top: 12px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 34px;\n  height: 16px; }\n\n.igv-search-results {\n  position: absolute;\n  top: 32px;\n  left: 2px;\n  height: 320px;\n  width: 213px;\n  background-color: white;\n  border-color: #7F7F7F;\n  border-style: solid;\n  border-width: thin;\n  overflow-x: hidden;\n  overflow-y: auto;\n  z-index: 9999; }\n  .igv-search-results tr {\n    font-family: "Open Sans", sans-serif;\n    font-size: small;\n    font-weight: 400;\n    color: #444; }\n  .igv-search-results tr:hover,\n  .igv-search-results tr:focus,\n  .igv-search-results tr:active {\n    cursor: pointer;\n    font-weight: 700;\n    color: #141414; }\n\n.igv-viewport-message {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: rgba(0, 0, 0, 0.15);\n  font-family: "Open Sans", sans-serif;\n  font-size: 25px;\n  font-weight: bold;\n  user-select: none; }\n\n.igv-whole-genome-container {\n  display: flex;\n  flex-flow: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n  background-color: white; }\n  .igv-whole-genome-container div {\n    font-family: "Open Sans", sans-serif;\n    font-size: 10px;\n    font-weight: 400;\n    color: #444;\n    height: 100%;\n    text-align: center;\n    border-right-color: #bfbfbf;\n    border-right-style: solid;\n    border-right-width: thin; }\n    .igv-whole-genome-container div span {\n      display: block;\n      padding-top: 6px;\n      text-overflow: ellipsis; }\n  .igv-whole-genome-container div:last-child {\n    border-right-color: transparent; }\n  .igv-whole-genome-container div:hover,\n  .igv-whole-genome-container div:focus,\n  .igv-whole-genome-container div:active {\n    cursor: pointer;\n    background-color: #efefef; }\n\n.igv-multi-locus-panel-close-container {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 16px;\n  height: 16px;\n  color: #666666;\n  z-index: 1000; }\n\n.igv-multi-locus-panel-close-container:hover {\n  cursor: pointer;\n  color: #434343; }\n\n.igv-multi-locus-panel-label-div {\n  position: absolute;\n  left: 50%;\n  top: 15%;\n  transform: translate(-50%, -25%);\n  font-family: "Open Sans", sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  text-align: center;\n  min-width: 16px;\n  z-index: 64;\n  color: #373737;\n  background-color: white;\n  padding: 1px; }\n\n.igv-multi-locus-panel-label-div:hover {\n  cursor: pointer; }\n\n.igv-viewport-spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1024;\n  width: 24px;\n  height: 24px;\n  pointer-events: none;\n  color: #737373; }\n\n.igv-ruler-sweeper-div {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 100%;\n  z-index: 99999;\n  background-color: rgba(68, 134, 247, 0.25); }\n\n.igv-track-menu-border-top {\n  border-top-color: #a2a2a2;\n  border-top-style: solid;\n  border-top-width: thin; }\n\n.igv-track-menu-category {\n  padding-left: 4px;\n  font-weight: 400; }\n\n.igv-track-drag-scrim {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 256;\n  background-color: rgba(68, 134, 247, 0.25); }\n\n.igv-trackgear-container {\n  position: relative;\n  width: 20px;\n  height: 20px;\n  margin-left: 4px;\n  color: #7F7F7F; }\n\n.igv-trackgear-container:hover {\n  cursor: pointer;\n  color: #444; }\n\n.igv-track-label {\n  position: absolute;\n  left: 8px;\n  top: 8px;\n  width: auto;\n  height: auto;\n  max-width: 200px;\n  padding-left: 4px;\n  padding-right: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-family: "Open Sans", sans-serif;\n  font-size: small;\n  font-weight: 400;\n  text-align: center;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  border-color: #444;\n  border-radius: 2px;\n  border-style: solid;\n  border-width: thin;\n  background-color: white;\n  z-index: 128;\n  cursor: pointer; }\n\n.igv-track-label:hover,\n.igv-track-label:focus,\n.igv-track-label:active {\n  background-color: rgba(0, 0, 0, 0.05); }\n\n.zoom-in-notice-container {\n  position: absolute;\n  top: 10px;\n  left: 50%; }\n  .zoom-in-notice-container div {\n    position: relative;\n    left: -50%;\n    font-family: "Open Sans", sans-serif;\n    font-size: medium;\n    font-weight: 400;\n    color: #3f3f3f;\n    background-color: rgba(255, 255, 255, 0.51);\n    z-index: 64; }\n\n.igv-center-guide {\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 50%;\n  width: 8px;\n  z-index: 8;\n  display: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  border-left-style: dashed;\n  border-left-width: thin;\n  border-right-style: dashed;\n  border-right-width: thin; }\n\n.igv-center-guide-wide {\n  background-color: rgba(0, 0, 0, 0);\n  border-left-color: rgba(127, 127, 127, 0.51);\n  border-right-color: rgba(127, 127, 127, 0.51); }\n\n.igv-center-guide-thin {\n  left: 50%;\n  width: 1px;\n  background-color: rgba(0, 0, 0, 0);\n  border-left-color: rgba(127, 127, 127, 0.51);\n  border-right-color: rgba(0, 0, 0, 0);\n  /*background-color: rgba(127, 127, 127, 0.51);*/\n  /*border-left-color: rgba(0,0,0,0);*/\n  /*border-right-color: rgba(0,0,0,0);*/ }\n\n.igv-cursor-tracking-guide {\n  pointer-events: none;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 50%;\n  width: 1px;\n  z-index: 1;\n  border-left-style: dotted;\n  border-left-width: thin;\n  border-left-color: rgba(127, 127, 127, 0.76);\n  display: none; }\n\n.igv-clickable {\n  cursor: pointer;\n  background-color: white; }\n\n#color-by-tag {\n  color: #444; }\n\n#color-by-tag:hover,\n#color-by-tag:focus,\n#color-by-tag:active {\n  cursor: pointer;\n  padding-left: 2px;\n  padding-right: 2px;\n  color: white;\n  border-color: #444;\n  border-radius: 2px;\n  border-style: solid;\n  border-width: thin;\n  background-color: #7f7f7f; }\n\n.igv-ellipsis {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis; }\n\n.igv-spinner-container {\n  color: #3f3f3f;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  padding-top: 8px;\n  font-size: 24px;\n  z-index: 512; }\n\n.igv-fa-check-visible {\n  color: inherit;\n  padding-right: 2px; }\n\n.igv-fa-check-hidden {\n  color: transparent;\n  padding-right: 2px; }\n\n.validateTips {\n  border: 1px solid transparent;\n  padding: 0.3em; }\n  .validateTips fieldset {\n    border: 0; }\n\n.igv-spacer-10 {\n  height: 10px;\n  width: 100%;\n  font-size: 0;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  display: block; }\n\n.igv-fa5-spin {\n  -webkit-animation: igv-fa5-spin 2s infinite linear;\n  animation: igv-fa5-spin 2s infinite linear; }\n\n@-webkit-keyframes igv-fa5-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n@keyframes igv-fa5-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n\n/*# sourceMappingURL=igv.css.map */\n',document.head.insertBefore(e,document.head.childNodes[document.head.childNodes.length-1])}(),{createBrowser:function(e,t){return WS.apply(this,arguments)},removeBrowser:function(e){e.dispose(),e.$root.remove(),GS=GS.filter((function(t){return t!==e}))},removeAllBrowsers:function(){var e,t=zn(GS);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.dispose(),n.$root.remove()}}catch(e){t.e(e)}finally{t.f()}GS=[]},visibilityChange:function(){return $S.apply(this,arguments)},setGoogleOauthToken:function(e){return Iv.setToken(e)},oauth:Iv,version:Im,xhr:QS,setApiKey:JS}},e.exports=i()}).call(this,n(9),n(29).Buffer,n(26))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(28);function i(){}e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(30),i=n(31),a=n(32);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function d(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(c(e,a+f)!==c(t,f)){h=!1;break}if(h)return a}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function w(e,t,n,r){return j(U(t,e.length-n),e,n,r)}function x(e,t,n,r){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return x(e,t,n,r)}function S(e,t,n,r){return j(H(t),e,n,r)}function _(e,t,n,r){return j(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),c=this.slice(r,i),l=e.slice(t,n),h=0;h<s;++h)if(c[h]!==l[h]){a=c[h],o=l[h];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=z(e[a]);return i}function M(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function O(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return a||O(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,a){return a||O(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=u.isBuffer(e)?e:U(new u(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function H(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(9))},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),o=r[0],s=r[1],u=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),l=0,h=s>0?o-4:o;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(l(e,o,o+16383>s?s:o+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=e[t+h];for(h+=f,a=p&(1<<-l)-1,p>>=-l,l+=s;l>0;a=256*a+e[t+h],h+=f,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+h],h+=f,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=c}return(p?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=l?(s=0,o=l):o+h>=1?(s=(t*u-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&s,p+=d,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+p]=255&o,p+=d,o/=256,c-=8);e[n+p-d]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r=n(7),i=n(34),a=n(35),o=n(6),s=n(8),u=n(23),c=n(36);function l(e,t){return t=t.split("// __split__"),new i.Program(e,t[0],t[1])}e.exports=function(e,t,n){var h,f,p,d,g,v,m,y,b,w,x,k,S,_,C,R,E,A,T,M,L,I,P,N,O,F,D,B=this,z=null,U=null,H=null,j=null,q=null,V=null,G=0,W=!1,$=!1;function Y(e){p.viewport(0,0,n,n);var i=s.clone(e);i.zoom=1/h,i.translation.x=0,i.translation.y=0;for(var a=r.mat4.create(),o=0;o<3;o++){var u=r.vec3.random(r.vec3.create(),1);r.mat4.rotate(a,a,10*Math.random(),u)}i.rotation=r.mat4.multiply(r.mat4.create(),a,i.rotation),E.bind(),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT);var c=s.getRect(i),l=r.mat4.create();r.mat4.ortho(l,c.left,c.right,c.bottom,c.top,0,h);var f=r.mat4.create();r.mat4.lookAt(f,[0,0,0],[0,0,-1],[0,1,0]);var d=r.mat4.create();r.mat4.translate(d,d,[0,0,-h/2]),r.mat4.multiply(d,d,i.rotation),L.setUniform("uProjection","Matrix4fv",!1,l),L.setUniform("uView","Matrix4fv",!1,f),L.setUniform("uModel","Matrix4fv",!1,d),L.setUniform("uBottomLeft","2fv",[c.left,c.bottom]),L.setUniform("uTopRight","2fv",[c.right,c.top]),L.setUniform("uAtomScale","1f",2.5*i.atomScale),L.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),L.setUniform("uRes","1f",n),L.setUniform("uDepth","1f",h),L.setUniform("uMode","1i",0),L.setUniform("uAtomShade","1f",e.atomShade),z.render(),e.bonds&&null!=U&&(I.setUniform("uProjection","Matrix4fv",!1,l),I.setUniform("uView","Matrix4fv",!1,f),I.setUniform("uModel","Matrix4fv",!1,d),I.setUniform("uRotation","Matrix4fv",!1,i.rotation),I.setUniform("uDepth","1f",h),I.setUniform("uBottomLeft","2fv",[c.left,c.bottom]),I.setUniform("uTopRight","2fv",[c.right,c.top]),I.setUniform("uRes","1f",n),I.setUniform("uBondRadius","1f",2.5*s.getBondRadius(e)),I.setUniform("uBondShade","1f",e.bondShade),I.setUniform("uAtomScale","1f",2.5*e.atomScale),I.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),I.setUniform("uMode","1i",0),U.render()),p.viewport(0,0,t,t);var y=s.getRect(e),w=s.getRect(i),x=r.mat4.invert(r.mat4.create(),a);A.bind(),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT),P.setUniform("uSceneDepth","1i",v.index),P.setUniform("uSceneNormal","1i",g.index),P.setUniform("uRandRotDepth","1i",m.index),P.setUniform("uAccumulator","1i",b.index),P.setUniform("uSceneBottomLeft","2fv",[y.left,y.bottom]),P.setUniform("uSceneTopRight","2fv",[y.right,y.top]),P.setUniform("uRotBottomLeft","2fv",[w.left,w.bottom]),P.setUniform("uRotTopRight","2fv",[w.right,w.top]),P.setUniform("uRes","1f",t),P.setUniform("uDepth","1f",h),P.setUniform("uRot","Matrix4fv",!1,a),P.setUniform("uInvRot","Matrix4fv",!1,x),P.setUniform("uSampleCount","1i",G),H.render(),b.activate(),b.bind(),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,0,0,t,t,0)}B.getAOProgress=function(){return G/1024},B.initialize=function(){e.width=e.height=t,(p=e.getContext("webgl")).enable(p.DEPTH_TEST),p.enable(p.CULL_FACE),p.clearColor(0,0,0,0),p.clearDepth(1),p.viewport(0,0,t,t),window.gl=p,i.getExtensions(p,["EXT_frag_depth","WEBGL_depth_texture"]),B.createTextures(),L=l(p,c.shaders.atom),I=l(p,c.shaders.bond),D=l(p,c.shaders["textured-quad"]),P=l(p,c.shaders.accumulator),N=l(p,c.shaders.ao),O=l(p,c.shaders.fxaa),F=l(p,c.shaders.dof);var n=[-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0],r=i.buildAttribs(p,{aPosition:3});r.aPosition.buffer.set(new Float32Array(n));var a=n.length/9;new i.Renderable(p,D,r,a),H=new i.Renderable(p,P,r,a),j=new i.Renderable(p,N,r,a),V=new i.Renderable(p,O,r,a),q=new i.Renderable(p,F,r,a),0},B.createTextures=function(){y=new i.Texture(p,0,null,n,n),m=new i.Texture(p,1,null,n,n,{internalFormat:p.DEPTH_COMPONENT,format:p.DEPTH_COMPONENT,type:p.UNSIGNED_SHORT}),E=new i.Framebuffer(p,[y],m),d=new i.Texture(p,2,null,t,t),g=new i.Texture(p,3,null,t,t),v=new i.Texture(p,4,null,t,t,{internalFormat:p.DEPTH_COMPONENT,format:p.DEPTH_COMPONENT,type:p.UNSIGNED_SHORT}),C=new i.Framebuffer(p,[d],v),R=new i.Framebuffer(p,[g],v),b=new i.Texture(p,5,null,t,t),w=new i.Texture(p,6,null,t,t),A=new i.Framebuffer(p,[w]),_=new i.Texture(p,7,null,t,t),M=new i.Framebuffer(p,[_]),x=new i.Texture(p,8,null,t,t),k=new i.Texture(p,9,null,t,t),T=new i.Framebuffer(p,[k]),S=new i.Texture(p,10,null,t,t),new i.Framebuffer(p,[S])},B.setResolution=function(r,i){n=i,t=r,e.width=e.height=t,p.viewport(0,0,t,t),B.createTextures()},B.setSystem=function(e,t){function n(e){for(var t=[],n=0;n<36;n++)t.push.apply(t,e);return t}f=e;for(var r=i.buildAttribs(p,{aImposter:3,aPosition:3,aRadius:1,aColor:3}),s=[],u=[],c=[],l=[],h=0;h<f.atoms.length;h++){s.push.apply(s,a.position);var d=f.atoms[h];u.push.apply(u,n([d.x,d.y,d.z])),c.push.apply(c,n([o[d.symbol].radius]));var g=o[d.symbol].color;l.push.apply(l,n([g[0],g[1],g[2]]))}r.aImposter.buffer.set(new Float32Array(s)),r.aPosition.buffer.set(new Float32Array(u)),r.aRadius.buffer.set(new Float32Array(c)),r.aColor.buffer.set(new Float32Array(l));var v=s.length/9;if(z=new i.Renderable(p,L,r,v),t.bonds&&(U=null,f.bonds.length>0)){r=i.buildAttribs(p,{aImposter:3,aPosA:3,aPosB:3,aRadA:1,aRadB:1,aColA:3,aColB:3}),s=[];var m=[],y=[],b=[],w=[],x=[],k=[];for(h=0;h<f.bonds.length;h++){var S=f.bonds[h];if(S.cutoff>t.bondThreshold)break;s.push.apply(s,a.position),m.push.apply(m,n([S.posA.x,S.posA.y,S.posA.z])),y.push.apply(y,n([S.posB.x,S.posB.y,S.posB.z])),b.push.apply(b,n([S.radA])),w.push.apply(w,n([S.radB])),x.push.apply(x,n([S.colA.r,S.colA.g,S.colA.b])),k.push.apply(k,n([S.colB.r,S.colB.g,S.colB.b]))}r.aImposter.buffer.set(new Float32Array(s)),r.aPosA.buffer.set(new Float32Array(m)),r.aPosB.buffer.set(new Float32Array(y)),r.aRadA.buffer.set(new Float32Array(b)),r.aRadB.buffer.set(new Float32Array(w)),r.aColA.buffer.set(new Float32Array(x)),r.aColB.buffer.set(new Float32Array(k));v=s.length/9;U=new i.Renderable(p,I,r,v)}},B.reset=function(){G=0,W=!1,$=!1,b.reset(),w.reset()},B.render=function(e){if(void 0!==f&&null!=z){if(h=2*u.getRadius(f),W)if($)for(var n=0;n<e.spf&&!(G>1024);n++)Y(e),G++;else!function(e){$=!0,p.viewport(0,0,t,t),R.bind(),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT);var n=s.getRect(e),i=r.mat4.create();r.mat4.ortho(i,n.left,n.right,n.bottom,n.top,0,h);var a=r.mat4.create();r.mat4.lookAt(a,[0,0,0],[0,0,-1],[0,1,0]);var o=r.mat4.create();r.mat4.translate(o,o,[0,0,-h/2]),r.mat4.multiply(o,o,e.rotation),L.setUniform("uProjection","Matrix4fv",!1,i),L.setUniform("uView","Matrix4fv",!1,a),L.setUniform("uModel","Matrix4fv",!1,o),L.setUniform("uBottomLeft","2fv",[n.left,n.bottom]),L.setUniform("uTopRight","2fv",[n.right,n.top]),L.setUniform("uAtomScale","1f",2.5*e.atomScale),L.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),L.setUniform("uRes","1f",t),L.setUniform("uDepth","1f",h),L.setUniform("uMode","1i",1),L.setUniform("uAtomShade","1f",e.atomShade),z.render(),e.bonds&&null!=U&&(R.bind(),I.setUniform("uProjection","Matrix4fv",!1,i),I.setUniform("uView","Matrix4fv",!1,a),I.setUniform("uModel","Matrix4fv",!1,o),I.setUniform("uRotation","Matrix4fv",!1,e.rotation),I.setUniform("uDepth","1f",h),I.setUniform("uBottomLeft","2fv",[n.left,n.bottom]),I.setUniform("uTopRight","2fv",[n.right,n.top]),I.setUniform("uRes","1f",t),I.setUniform("uBondRadius","1f",2.5*s.getBondRadius(e)),I.setUniform("uBondShade","1f",e.bondShade),I.setUniform("uAtomScale","1f",2.5*e.atomScale),I.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),I.setUniform("uMode","1i",1),U.render())}(e);else!function(e){W=!0,p.viewport(0,0,t,t),C.bind(),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT);var n=s.getRect(e),i=r.mat4.create();r.mat4.ortho(i,n.left,n.right,n.bottom,n.top,0,h);var a=r.mat4.create();r.mat4.lookAt(a,[0,0,0],[0,0,-1],[0,1,0]);var o=r.mat4.create();r.mat4.translate(o,o,[0,0,-h/2]),r.mat4.multiply(o,o,e.rotation),L.setUniform("uProjection","Matrix4fv",!1,i),L.setUniform("uView","Matrix4fv",!1,a),L.setUniform("uModel","Matrix4fv",!1,o),L.setUniform("uBottomLeft","2fv",[n.left,n.bottom]),L.setUniform("uTopRight","2fv",[n.right,n.top]),L.setUniform("uAtomScale","1f",2.5*e.atomScale),L.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),L.setUniform("uRes","1f",t),L.setUniform("uDepth","1f",h),L.setUniform("uMode","1i",0),L.setUniform("uAtomShade","1f",e.atomShade),z.render(),e.bonds&&null!=U&&(C.bind(),I.setUniform("uProjection","Matrix4fv",!1,i),I.setUniform("uView","Matrix4fv",!1,a),I.setUniform("uModel","Matrix4fv",!1,o),I.setUniform("uRotation","Matrix4fv",!1,e.rotation),I.setUniform("uDepth","1f",h),I.setUniform("uBottomLeft","2fv",[n.left,n.bottom]),I.setUniform("uTopRight","2fv",[n.right,n.top]),I.setUniform("uRes","1f",t),I.setUniform("uBondRadius","1f",2.5*s.getBondRadius(e)),I.setUniform("uBondShade","1f",e.bondShade),I.setUniform("uAtomScale","1f",2.5*e.atomScale),I.setUniform("uRelativeAtomScale","1f",e.relativeAtomScale),I.setUniform("uMode","1i",0),U.render())}(e);!function(e){p.viewport(0,0,t,t),e.fxaa>0||e.dofStrength>0?M.bind():p.bindFramebuffer(p.FRAMEBUFFER,null);if(p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT),N.setUniform("uSceneColor","1i",d.index),N.setUniform("uSceneDepth","1i",v.index),N.setUniform("uAccumulatorOut","1i",w.index),N.setUniform("uRes","1f",t),N.setUniform("uAO","1f",2*e.ao),N.setUniform("uBrightness","1f",2*e.brightness),N.setUniform("uOutlineStrength","1f",e.outline),j.render(),e.fxaa>0){e.dofStrength>0?T.bind():p.bindFramebuffer(p.FRAMEBUFFER,null);for(var n=0;n<e.fxaa;n++)p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT),0==n?O.setUniform("uTexture","1i",_.index):O.setUniform("uTexture","1i",x.index),O.setUniform("uRes","1f",t),V.render(),x.activate(),x.bind(),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,0,0,t,t,0)}e.dofStrength>0&&(p.bindFramebuffer(p.FRAMEBUFFER,null),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT),e.fxaa>0?F.setUniform("uColor","1i",x.index):F.setUniform("uColor","1i",_.index),F.setUniform("uDepth","1i",v.index),F.setUniform("uDOFPosition","1f",e.dofPosition),F.setUniform("uDOFStrength","1f",e.dofStrength),F.setUniform("uRes","1f",t),q.render())}(e)}},B.initialize()}},function(e,t){function n(e){var t=this;t.initialize=function(){t.buffer=e.createBuffer()},t.bind=function(){e.bindBuffer(e.ARRAY_BUFFER,t.buffer)},t.set=function(n){t.bind(),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)},t.initialize()}e.exports.buildAttribs=function(e,t){var r={};for(var i in t)r[i]={buffer:new n(e),size:t[i]};return r},e.exports.getExtensions=function(e,t){for(var n={},r=0;r<t.length;r++){var i=e.getExtension(t[r]);if(null===i)throw"Extension "+t[r]+" not available.";n[t[r]]=i}return n},e.exports.Framebuffer=function(e,t,n,r){var i=this;i.initialize=function(){if(i.fb=e.createFramebuffer(),i.bind(),t.length>1){for(var a=[],o=0;o<t.length;o++)a.push(r["COLOR_ATTACHMENT"+o+"_WEBGL"]);r.drawBuffersWEBGL(a);for(o=0;o<t.length;o++)e.framebufferTexture2D(e.FRAMEBUFFER,r["COLOR_ATTACHMENT"+o+"_WEBGL"],e.TEXTURE_2D,t[o].texture,0)}else e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t[0].texture,0);void 0!==n&&e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,n.texture,0)},i.bind=function(){e.bindFramebuffer(e.FRAMEBUFFER,i.fb)},i.initialize()},e.exports.Texture=function(e,t,n,r,i,a){(a=a||{}).target=a.target||e.TEXTURE_2D,a.mag=a.mag||e.NEAREST,a.min=a.min||e.NEAREST,a.wraps=a.wraps||e.CLAMP_TO_EDGE,a.wrapt=a.wrapt||e.CLAMP_TO_EDGE,a.internalFormat=a.internalFormat||e.RGBA,a.format=a.format||e.RGBA,a.type=a.type||e.UNSIGNED_BYTE;var o=this;o.initialize=function(){o.index=t,o.activate(),o.texture=e.createTexture(),o.bind(),e.texParameteri(a.target,e.TEXTURE_MAG_FILTER,a.mag),e.texParameteri(a.target,e.TEXTURE_MIN_FILTER,a.min),e.texParameteri(a.target,e.TEXTURE_WRAP_S,a.wraps),e.texParameteri(a.target,e.TEXTURE_WRAP_T,a.wrapt),e.texImage2D(a.target,0,a.internalFormat,r,i,0,a.format,a.type,n)},o.bind=function(){e.bindTexture(a.target,o.texture)},o.activate=function(){e.activeTexture(e.TEXTURE0+o.index)},o.reset=function(){o.activate(),o.bind(),e.texImage2D(a.target,0,a.internalFormat,r,i,0,a.format,a.type,n)},o.initialize()},e.exports.GLBuffer=n,e.exports.Renderable=function(e,t,n,r){var i=this;i.primitiveCount=r,i.initialize=function(){},i.render=function(){for(name in t.use(),n){var a=n[name].buffer,o=n[name].size;try{var s=t.attribs[name].location}catch(e){throw console.log("Could not find location for",name),e}a.bind(),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,o,e.FLOAT,!1,0,0)}for(name in e.drawArrays(e.TRIANGLES,0,3*r),i.buffers)e.disableVertexAttribArray(t.attributes[name].location)},i.initialize()},e.exports.InstancedRenderable=function(e,t,n,r,i){var a=this;a.initialize=function(){},a.render=function(){for(name in t.use(),n){var o=n[name].buffer,s=n[name].size;try{var u=t.attribs[name].location}catch(e){throw console.log("Could not find location for",name),e}o.bind(),e.enableVertexAttribArray(u),e.vertexAttribPointer(u,s,e.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(u,n[name].divisor)}for(name in i.drawArraysInstancedANGLE(e.TRIANGLES,0,36,r),a.buffers)e.disableVertexAttribArray(t.attributes[name].location)},a.initialize()},e.exports.Program=function(e,t,n){var r=this;r.initialize=function(){r.program=r.compileProgram(t,n),r.attribs=r.gatherAttribs(),r.uniforms=r.gatherUniforms()},r.use=function(){e.useProgram(r.program)},r.compileProgram=function(t,n){var i=r.compileShader(t,e.VERTEX_SHADER),a=r.compileShader(n,e.FRAGMENT_SHADER),o=e.createProgram();if(e.attachShader(o,i),e.attachShader(o,a),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(o)),"Failed to compile program.";return o},r.compileShader=function(t,n){var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(r),a=parseInt(i.split(":")[2]),o=t.split("\n");for(var s in o){var u=parseInt(s);console.log(u+"  "+o[s]),s==a-1&&console.warn(i)}throw typeString=n==e.VERTEX_SHADER?"vertex":"fragment","Failed to compile "+typeString+" shader."}return r},r.setUniform=function(t,n,i){var a=Array.prototype.slice.call(arguments,2);r.use();try{var o=r.uniforms[t].location}catch(e){throw console.log(t),e}e["uniform"+n].apply(e,[o].concat(a))},r.gatherUniforms=function(){for(var t={},n=e.getProgramParameter(r.program,e.ACTIVE_UNIFORMS),i=0;i<n;i++){var a=e.getActiveUniform(r.program,i);t[a.name]={name:a.name,location:e.getUniformLocation(r.program,a.name),type:a.type,size:a.size}}return t},r.gatherAttribs=function(){for(var t={},n=e.getProgramParameter(r.program,e.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var a=e.getActiveAttrib(r.program,i);t[a.name]={name:a.name,location:e.getAttribLocation(r.program,a.name),type:a.type,size:a.size}}return t},r.initialize()}},function(e,t){var n=-1;e.exports={position:[n,n,n,n,n,1,n,1,1,n,n,n,n,1,1,n,1,n,1,n,1,1,n,n,1,1,n,1,n,1,1,1,n,1,1,1,n,n,n,1,n,n,1,n,1,n,n,n,1,n,1,n,n,1,n,1,1,1,1,1,1,1,n,n,1,1,1,1,n,n,1,n,1,n,n,n,n,n,n,1,n,1,n,n,n,1,n,1,1,n,n,n,1,1,n,1,1,1,1,n,n,1,1,1,1,n,1,1],normal:[n,0,0,n,0,0,n,0,0,n,0,0,n,0,0,n,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,n,0,0,n,0,0,n,0,0,n,0,0,n,0,0,n,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,n,0,0,n,0,0,n,0,0,n,0,0,n,0,0,n,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},function(e,t,n){"use strict";var r={accumulator:"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uSceneDepth;\nuniform sampler2D uSceneNormal;\nuniform sampler2D uRandRotDepth;\nuniform sampler2D uAccumulator;\nuniform mat4 uRot;\nuniform mat4 uInvRot;\nuniform vec2 uSceneBottomLeft;\nuniform vec2 uSceneTopRight;\nuniform vec2 uRotBottomLeft;\nuniform vec2 uRotTopRight;\nuniform float uDepth;\nuniform float uRes;\nuniform int uSampleCount;\n\nvoid main() {\n\n    float dScene = texture2D(uSceneDepth, gl_FragCoord.xy/uRes).r;\n\n    vec3 r = vec3(uSceneBottomLeft + (gl_FragCoord.xy/uRes) * (uSceneTopRight - uSceneBottomLeft), 0.0);\n\n    r.z = -(dScene - 0.5) * uDepth;\n    r = vec3(uRot * vec4(r, 1));\n    float depth = -r.z/uDepth + 0.5;\n\n    vec2 p = (r.xy - uRotBottomLeft)/(uRotTopRight - uRotBottomLeft);\n\n    float dRandRot = texture2D(uRandRotDepth, p).r;\n\n    float ao = step(dRandRot, depth * 0.99);\n\n    vec3 normal = texture2D(uSceneNormal, gl_FragCoord.xy/uRes).rgb * 2.0 - 1.0;\n    vec3 dir = vec3(uInvRot * vec4(0, 0, 1, 0));\n    float mag = dot(dir, normal);\n    float sampled = step(0.0, mag);\n\n    ao *= sampled;\n\n    vec4 acc = texture2D(uAccumulator, gl_FragCoord.xy/uRes);\n\n    if (uSampleCount < 256) {\n        acc.r += ao/255.0;\n    } else if (uSampleCount < 512) {\n        acc.g += ao/255.0;\n    } else if (uSampleCount < 768) {\n        acc.b += ao/255.0;\n    } else {\n        acc.a += ao/255.0;\n    }\n        \n    gl_FragColor = acc;\n\n}\n",ao:"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uSceneColor;\nuniform sampler2D uSceneDepth;\nuniform sampler2D uAccumulatorOut;\nuniform float uRes;\nuniform float uAO;\nuniform float uBrightness;\nuniform float uOutlineStrength;\n\nvoid main() {\n    vec2 p = gl_FragCoord.xy/uRes;\n    vec4 sceneColor = texture2D(uSceneColor, p);\n    if (uOutlineStrength > 0.0) {\n        float depth = texture2D(uSceneDepth, p).r;\n        float r = 1.0/511.0;\n        float d0 = abs(texture2D(uSceneDepth, p + vec2(-r,  0)).r - depth);\n        float d1 = abs(texture2D(uSceneDepth, p + vec2( r,  0)).r - depth);\n        float d2 = abs(texture2D(uSceneDepth, p + vec2( 0, -r)).r - depth);\n        float d3 = abs(texture2D(uSceneDepth, p + vec2( 0,  r)).r - depth);\n        float d = max(d0, d1);\n        d = max(d, d2);\n        d = max(d, d3);\n        sceneColor.rgb *= pow(1.0 - d, uOutlineStrength * 32.0);\n        sceneColor.a = max(step(0.003, d), sceneColor.a);\n    }\n    vec4 dAccum = texture2D(uAccumulatorOut, p);\n    float shade = max(0.0, 1.0 - (dAccum.r + dAccum.g + dAccum.b + dAccum.a) * 0.25 * uAO);\n    shade = pow(shade, 2.0);\n    gl_FragColor = vec4(uBrightness * sceneColor.rgb * shade, sceneColor.a);\n}\n",atom:"#version 100\nprecision highp float;\n\nattribute vec3 aImposter;\nattribute vec3 aPosition;\nattribute float aRadius;\nattribute vec3 aColor;\n\nuniform mat4 uView;\nuniform mat4 uProjection;\nuniform mat4 uModel;\nuniform float uAtomScale;\nuniform float uRelativeAtomScale;\nuniform float uAtomShade;\n\nvarying vec3 vColor;\nvarying vec3 vPosition;\nvarying float vRadius;\n\nvoid main() {\n    vRadius = uAtomScale * (1.0 + (aRadius - 1.0) * uRelativeAtomScale);\n    gl_Position = uProjection * uView * uModel * vec4(vRadius * aImposter + aPosition, 1.0);\n    vColor = mix(aColor, vec3(1,1,1), uAtomShade);\n    vPosition = vec3(uModel * vec4(aPosition, 1));\n}\n\n\n// __split__\n\n\n#version 100\n#extension GL_EXT_frag_depth: enable\nprecision highp float;\n\nuniform vec2 uBottomLeft;\nuniform vec2 uTopRight;\nuniform float uRes;\nuniform float uDepth;\nuniform int uMode;\n\nvarying vec3 vPosition;\nvarying float vRadius;\nvarying vec3 vColor;\n\nvec2 res = vec2(uRes, uRes);\n\nfloat raySphereIntersect(vec3 r0, vec3 rd) {\n    float a = dot(rd, rd);\n    vec3 s0_r0 = r0 - vPosition;\n    float b = 2.0 * dot(rd, s0_r0);\n    float c = dot(s0_r0, s0_r0) - (vRadius * vRadius);\n    float disc = b*b - 4.0*a*c;\n    if (disc <= 0.0) {\n        return -1.0;\n    }\n    return (-b - sqrt(disc))/(2.0*a);\n}\n\nvoid main() {\n    vec3 r0 = vec3(uBottomLeft + (gl_FragCoord.xy/res) * (uTopRight - uBottomLeft), 0.0);\n    vec3 rd = vec3(0, 0, -1);\n    float t = raySphereIntersect(r0, rd);\n    if (t < 0.0) {\n        discard;\n    }\n    vec3 coord = r0 + rd * t;\n    vec3 normal = normalize(coord - vPosition);\n    if (uMode == 0) {\n        gl_FragColor = vec4(vColor, 1);\n    } else if (uMode == 1) {\n        gl_FragColor = vec4(normal * 0.5 + 0.5, 1.0);\n    }\n    gl_FragDepthEXT = -coord.z/uDepth;\n}\n",blur:"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uTexture;\nuniform float uRes;\nuniform int leftRight;\n\nvoid main() {\n    vec2 dir;\n    if (leftRight == 1) {\n        dir = vec2(1,0)/uRes;\n    } else {\n        dir = vec2(0,1)/uRes;\n    }\n    const int range = 16;\n    vec4 sample = vec4(0,0,0,0);\n    for (int i = -range; i <= range; i++) {\n        vec2 p = gl_FragCoord.xy/uRes + dir * float(i);\n        sample += texture2D(uTexture, p);\n    }\n    sample /= float(range) * 2.0 + 1.0;\n    gl_FragColor = sample;\n}\n",bond:"#version 100\nprecision highp float;\n\nattribute vec3 aImposter;\nattribute vec3 aPosA;\nattribute vec3 aPosB;\nattribute float aRadA;\nattribute float aRadB;\nattribute vec3 aColA;\nattribute vec3 aColB;\n\nuniform mat4 uView;\nuniform mat4 uProjection;\nuniform mat4 uModel;\nuniform mat4 uRotation;\nuniform float uBondRadius;\nuniform float uAtomScale;\nuniform float uRelativeAtomScale;\n\nvarying vec3 vNormal;\nvarying vec3 vPosA, vPosB;\nvarying float vRadA, vRadB;\nvarying vec3 vColA, vColB;\nvarying float vRadius;\n\nmat3 alignVector(vec3 a, vec3 b) {\n    vec3 v = cross(a, b);\n    float s = length(v);\n    float c = dot(a, b);\n    mat3 I = mat3(\n        1, 0, 0,\n        0, 1, 0,\n        0, 0, 1\n    );\n    mat3 vx = mat3(\n        0, v.z, -v.y,\n        -v.z, 0, v.x,\n        v.y, -v.x, 0\n    );\n    return I + vx + vx * vx * ((1.0 - c) / (s * s));\n}\n\nvoid main() {\n    vRadius = uBondRadius;\n    vec3 pos = vec3(aImposter);\n    // Scale the box in x and z to be bond-radius.\n    pos = pos * vec3(vRadius, 1, vRadius);\n    // Shift the origin-centered cube so that the bottom is at the origin.\n    pos = pos + vec3(0, 1, 0);\n    // Stretch the box in y so that it is the length of the bond.\n    pos = pos * vec3(1, length(aPosA - aPosB) * 0.5, 1);\n    // Find the rotation that aligns vec3(0, 1, 0) with vec3(uPosB - uPosA) and apply it.\n    vec3 a = normalize(vec3(-0.000001, 1.000001, 0.000001));\n    vec3 b = normalize(aPosB - aPosA);\n    mat3 R = alignVector(a, b);\n    pos = R * pos;\n    // Shift the cube so that the bottom is centered at the middle of atom A.\n    pos = pos + aPosA;\n\n    vec4 position = uModel * vec4(pos, 1);\n    gl_Position = uProjection * uView * position;\n    vPosA = aPosA;\n    vPosB = aPosB;\n    vRadA = uAtomScale * (1.0 + (aRadA - 1.0) * uRelativeAtomScale);\n    vRadB = uAtomScale * (1.0 + (aRadB - 1.0) * uRelativeAtomScale);\n    vColA = aColA;\n    vColB = aColB;\n}\n\n\n// __split__\n\n\n#version 100\n#extension GL_EXT_frag_depth: enable\nprecision highp float;\n\nuniform mat4 uRotation;\nuniform vec2 uBottomLeft;\nuniform vec2 uTopRight;\nuniform float uDepth;\nuniform float uRes;\nuniform float uBondShade;\nuniform int uMode;\n\nvarying vec3 vPosA, vPosB;\nvarying float vRadA, vRadB;\nvarying vec3 vColA, vColB;\nvarying float vRadius;\n\nmat3 alignVector(vec3 a, vec3 b) {\n    vec3 v = cross(a, b);\n    float s = length(v);\n    float c = dot(a, b);\n    mat3 I = mat3(\n        1, 0, 0,\n        0, 1, 0,\n        0, 0, 1\n    );\n    mat3 vx = mat3(\n        0, v.z, -v.y,\n        -v.z, 0, v.x,\n        v.y, -v.x, 0\n    );\n    return I + vx + vx * vx * ((1.0 - c) / (s * s));\n}\n\nvoid main() {\n\n    vec2 res = vec2(uRes, uRes);\n    vec3 r0 = vec3(uBottomLeft + (gl_FragCoord.xy/res) * (uTopRight - uBottomLeft), uDepth/2.0);\n    vec3 rd = vec3(0, 0, -1);\n\n    vec3 i = normalize(vPosB - vPosA);\n         i = vec3(uRotation * vec4(i, 0));\n    vec3 j = normalize(vec3(-0.000001, 1.000001, 0.000001));\n    mat3 R = alignVector(i, j);\n\n    vec3 r0p = r0 - vec3(uRotation * vec4(vPosA, 0));\n    r0p = R * r0p;\n    vec3 rdp = R * rd;\n\n    float a = dot(rdp.xz, rdp.xz);\n    float b = 2.0 * dot(rdp.xz, r0p.xz);\n    float c = dot(r0p.xz, r0p.xz) - vRadius*vRadius;\n    float disc = b*b - 4.0*a*c;\n    if (disc <= 0.0) {\n        discard;\n    }\n    float t = (-b - sqrt(disc))/(2.0*a);\n    if (t < 0.0) {\n        discard;\n    }\n\n    vec3 coord = r0p + rdp * t;\n    if (coord.y < 0.0 || coord.y > length(vPosA - vPosB)) {\n        discard;\n    }\n\n    vec3 color;\n    if (coord.y < vRadA + 0.5 * (length(vPosA - vPosB) - (vRadA + vRadB))) {\n        color = vColA;\n    } else {\n        color = vColB;\n    }\n\n    color = mix(color, vec3(1,1,1), uBondShade);\n\n    R = alignVector(j, i);\n    vec3 normal = normalize(R * vec3(coord.x, 0, coord.z));\n\n    coord = r0 + rd * t;\n    if (uMode == 0) {\n        gl_FragColor = vec4(color, 1);\n    } else if (uMode == 1) {\n        gl_FragColor = vec4(normal * 0.5 + 0.5, 1.0);\n    }\n    gl_FragDepthEXT = -(coord.z - uDepth/2.0)/uDepth;\n}\n",dof:"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uColor;\nuniform sampler2D uDepth;\nuniform float uRes;\nuniform float uDOFPosition;\nuniform float uDOFStrength;\nuniform int leftRight;\n\nvoid main() {\n\n    vec2 samples[64];\n    samples[0] = vec2(0.857612, 0.019885);\n    samples[1] = vec2(0.563809, -0.028071);\n    samples[2] = vec2(0.825599, -0.346856);\n    samples[3] = vec2(0.126584, -0.380959);\n    samples[4] = vec2(0.782948, 0.594322);\n    samples[5] = vec2(0.292148, -0.543265);\n    samples[6] = vec2(0.130700, 0.330220);\n    samples[7] = vec2(0.236088, 0.159604);\n    samples[8] = vec2(-0.305259, 0.810505);\n    samples[9] = vec2(0.269616, 0.923026);\n    samples[10] = vec2(0.484486, 0.371845);\n    samples[11] = vec2(-0.638057, 0.080447);\n    samples[12] = vec2(0.199629, 0.667280);\n    samples[13] = vec2(-0.861043, -0.370583);\n    samples[14] = vec2(-0.040652, -0.996174);\n    samples[15] = vec2(0.330458, -0.282111);\n    samples[16] = vec2(0.647795, -0.214354);\n    samples[17] = vec2(0.030422, -0.189908);\n    samples[18] = vec2(0.177430, -0.721124);\n    samples[19] = vec2(-0.461163, -0.327434);\n    samples[20] = vec2(-0.410012, -0.734504);\n    samples[21] = vec2(-0.616334, -0.626069);\n    samples[22] = vec2(0.590759, -0.726479);\n    samples[23] = vec2(-0.590794, 0.805365);\n    samples[24] = vec2(-0.924561, -0.163739);\n    samples[25] = vec2(-0.323028, 0.526960);\n    samples[26] = vec2(0.642128, 0.752577);\n    samples[27] = vec2(0.173625, -0.952386);\n    samples[28] = vec2(0.759014, 0.330311);\n    samples[29] = vec2(-0.360526, -0.032013);\n    samples[30] = vec2(-0.035320, 0.968156);\n    samples[31] = vec2(0.585478, -0.431068);\n    samples[32] = vec2(-0.244766, -0.906947);\n    samples[33] = vec2(-0.853096, 0.184615);\n    samples[34] = vec2(-0.089061, 0.104648);\n    samples[35] = vec2(-0.437613, 0.285308);\n    samples[36] = vec2(-0.654098, 0.379841);\n    samples[37] = vec2(-0.128663, 0.456572);\n    samples[38] = vec2(0.015980, -0.568170);\n    samples[39] = vec2(-0.043966, -0.771940);\n    samples[40] = vec2(0.346512, -0.071238);\n    samples[41] = vec2(-0.207921, -0.209121);\n    samples[42] = vec2(-0.624075, -0.189224);\n    samples[43] = vec2(-0.120618, 0.689339);\n    samples[44] = vec2(-0.664679, -0.410200);\n    samples[45] = vec2(0.371945, -0.880573);\n    samples[46] = vec2(-0.743251, 0.629998);\n    samples[47] = vec2(-0.191926, -0.413946);\n    samples[48] = vec2(0.449574, 0.833373);\n    samples[49] = vec2(0.299587, 0.449113);\n    samples[50] = vec2(-0.900432, 0.399319);\n    samples[51] = vec2(0.762613, -0.544796);\n    samples[52] = vec2(0.606462, 0.174233);\n    samples[53] = vec2(0.962185, -0.167019);\n    samples[54] = vec2(0.960990, 0.249552);\n    samples[55] = vec2(0.570397, 0.559146);\n    samples[56] = vec2(-0.537514, 0.555019);\n    samples[57] = vec2(0.108491, -0.003232);\n    samples[58] = vec2(-0.237693, -0.615428);\n    samples[59] = vec2(-0.217313, 0.261084);\n    samples[60] = vec2(-0.998966, 0.025692);\n    samples[61] = vec2(-0.418554, -0.527508);\n    samples[62] = vec2(-0.822629, -0.567797);\n    samples[63] = vec2(0.061945, 0.522105);\n\n    float invRes = 1.0/uRes;\n    vec2 coord = gl_FragCoord.xy * invRes;\n\n    float strength = uDOFStrength * uRes/768.0;\n\n    float depth = texture2D(uDepth, coord).r;\n    float range = uDOFPosition - depth;\n    float scale = abs(range);\n\n    vec4 sample = texture2D(uColor, coord);\n    float count = 1.0;\n    for(int i = 0; i < 64; i++) {\n        vec2 p = samples[i];\n        p = coord + scale * 64.0 * strength * p * invRes;\n        float d = texture2D(uDepth, p).r;\n        float r = uDOFPosition - d;\n        float s = abs(r);\n        sample += texture2D(uColor, p) * s;\n        count += s;\n    }\n\n    gl_FragColor = sample/count;\n}",fxaa:"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uTexture;\nuniform float uRes;\n\nvoid main() {\n    float FXAA_SPAN_MAX = 8.0;\n    float FXAA_REDUCE_MUL = 1.0/8.0;\n    float FXAA_REDUCE_MIN = 1.0/128.0;\n\n    vec2 texCoords = gl_FragCoord.xy/uRes;\n\n    vec4 rgbNW = texture2D(uTexture, texCoords + (vec2(-1.0, -1.0) / uRes));\n    vec4 rgbNE = texture2D(uTexture, texCoords + (vec2(1.0, -1.0) / uRes));\n    vec4 rgbSW = texture2D(uTexture, texCoords + (vec2(-1.0, 1.0) / uRes));\n    vec4 rgbSE = texture2D(uTexture, texCoords + (vec2(1.0, 1.0) / uRes));\n    vec4 rgbM  = texture2D(uTexture, texCoords);\n\n    vec4 luma = vec4(0.299, 0.587, 0.114, 1.0);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0/(min(abs(dir.x), abs(dir.y)) + dirReduce);\n\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX), max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX), dir * rcpDirMin)) / uRes;\n\n    vec4 rgbA = (1.0/2.0) * \n        (texture2D(uTexture, texCoords.xy + dir * (1.0/3.0 - 0.5)) + \n         texture2D(uTexture, texCoords.xy + dir * (2.0/3.0 - 0.5)));\n    vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * \n        (texture2D(uTexture, texCoords.xy + dir * (0.0/3.0 - 0.5)) +\n         texture2D(uTexture, texCoords.xy + dir * (3.0/3.0 - 0.5)));\n    float lumaB = dot(rgbB, luma);\n\n    if((lumaB < lumaMin) || (lumaB > lumaMax)){\n        gl_FragColor = rgbA;\n    } else {\n        gl_FragColor = rgbB;\n    }\n\n}","textured-quad":"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uTexture;\nuniform float uRes;\n\nvoid main() {\n    gl_FragColor = texture2D(uTexture, gl_FragCoord.xy/uRes);\n}\n"};e.exports={shaders:r}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(8);e.exports=function(e){if(arguments.length>1)throw"Error: The Speck Interactions module has changed!";if(0===arguments.length||"object"!==r(e))throw"Error: Arguments not provided to interactions";var t=void 0===e.scrollZoom||e.scrollZoom,n=e.container,a=e.getRotation,o=e.setRotation,s=e.getTranslation,u=e.setTranslation,c=e.getZoom,l=e.setZoom,h=e.refreshView,f={buttonDown:!1,shiftDown:!1,lastX:0,lastY:0};function p(e){0===e.button&&(f={buttonDown:!0,shiftDown:f.shiftDown,lastX:e.clientX,lastY:e.clientY})}function d(e){if(0===e.button){if(!f.buttonDown)return;f.buttonDown=!1}}function g(e){f.shiftDown=e.shiftKey}function v(e){if(f.buttonDown&&0!==e.buttons){e.preventDefault();var t=e.clientX-f.lastX,n=e.clientY-f.lastY;if(0!==t||0!==n){if(f.lastX=e.clientX,f.lastY=e.clientY,f.shiftDown){var r=s(),l=.001/c();u({x:r.x-t*l,y:r.y+n*l})}else{var p={rotation:new Float32Array(a())};i.rotate(p,t,n),o(p.rotation)}h()}}}function m(e){e.preventDefault(),l(c()*(e.deltaY<0?1/.9:.9)),h()}function y(){n.removeEventListener("mousedown",p),window.removeEventListener("mouseup",d),window.removeEventListener("keydown",g),window.removeEventListener("keyup",g),window.removeEventListener("mousemove",v),n.removeEventListener("wheel",m)}return n.addEventListener("mousedown",p),window.addEventListener("mouseup",d),window.addEventListener("keydown",g),window.addEventListener("keyup",g),window.addEventListener("mousemove",v),t&&n.addEventListener("wheel",m),y}},function(e,t){e.exports={default:{atomScale:.6,relativeAtomScale:1,bondScale:.5,ao:.75,aoRes:256,brightness:.5,outline:0,spf:32,bonds:!1,bondThreshold:1.2,bondShade:.5,atomShade:.5,dofStrength:0,dofPosition:.5,fxaa:1},stickball:{atomScale:.24,relativeAtomScale:.64,bondScale:.5,bonds:!0,bondThreshold:1.2},toon:{ao:0,spf:0,brightness:.5,outline:1},licorice:{atomScale:.1,relativeAtomScale:0,bondScale:1,bonds:!0,bondThreshold:1.2}}},function(e,t,n){"use strict";n.r(t);var r=n(11),i=n(20),a=n(1),o=n.n(a),s=n(0),u=n.n(s),c=n(24),l=n(52);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?d(e):t}(this,p(t).call(this,e))).renderNewSequences=n.renderNewSequences.bind(d(n)),n.containerRef=o.a.createRef(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.height,n=e.width,r=e.nodeFillColor,i=e.colorScheme,a=e.customColors,o=e.allowPanningAndZooming;this._fornaContainer=new c.FornaContainer(this.containerRef.current,{initialSize:[n,t],allowPanningAndZooming:o}),this._fornaContainer.addCustomColors(a),this._fornaContainer.changeColorScheme(i),this.renderNewSequences(),void 0!==r&&this._fornaContainer.setOutlineColor(r)}},{key:"componentDidUpdate",value:function(){this.renderNewSequences()}},{key:"renderNewSequences",value:function(){var e=this,t=this.props.sequences;this._fornaContainer&&(this._fornaContainer.clearNodes(),t.forEach((function(t){var n=Object.assign({},t.options,{sequence:t.sequence,structure:t.structure});e._fornaContainer.addRNA(t.structure,n)})))}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.sequences,r=t.colorScheme;return!l.a(n,e.sequences)||(this._fornaContainer.addCustomColors(e.customColors),this._fornaContainer.changeColorScheme(r),void 0!==e.nodeFillColor&&this._fornaContainer.setOutlineColor(e.nodeFillColor),!1)}},{key:"render",value:function(){return o.a.createElement("div",{id:this.props.id,ref:this.containerRef,style:{outline:"none"}})}}])&&f(n.prototype,r),i&&f(n,i),t}(a.Component);v.propTypes={id:u.a.string,height:u.a.number,width:u.a.number,sequences:u.a.arrayOf(u.a.exact({sequence:u.a.string.isRequired,structure:u.a.string.isRequired,options:u.a.exact({applyForce:u.a.bool,circularizeExternal:u.a.bool,labelInterval:u.a.number,name:u.a.string,avoidOthers:u.a.bool})})),nodeFillColor:u.a.string,colorScheme:u.a.oneOf(["sequence","structure","positions","custom"]),customColors:u.a.exact({domain:u.a.arrayOf(u.a.number),range:u.a.arrayOf(u.a.string),colorValues:u.a.objectOf(u.a.objectOf(u.a.oneOfType([u.a.string,u.a.number])))}),allowPanningAndZooming:u.a.bool,setProps:u.a.func},v.defaultProps={height:500,width:300,sequences:[],allowPanningAndZooming:!0,colorScheme:"sequence"};var m=n(12),y=n(25),b=n.n(y);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){function t(){return x(this,t),S(this,_(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=document.getElementById(this.props.id),t={genome:this.props.genome,locus:this.props.locus,reference:this.props.reference,minimumBases:this.props.minimumBases,tracks:this.props.tracks};return b.a.createBrowser(e,t)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.style;return o.a.createElement("div",{id:t,style:n})}}])&&k(n.prototype,r),i&&k(n,i),t}(a.Component);R.defaultProps={},R.propTypes={id:u.a.string,setProps:u.a.func,style:u.a.object,className:u.a.string,genome:u.a.string,reference:u.a.object,locus:u.a.string,minimumBases:u.a.number,tracks:u.a.array};R.defaultProps,R.propTypes;var E=n(13),A=n(14),T=n(15),M=n(16),L=n(17),I=n(18),P=n(19);n.d(t,"AlignmentChart",(function(){return r.a})),n.d(t,"Circos",(function(){return i.a})),n.d(t,"FornaContainer",(function(){return v})),n.d(t,"Ideogram",(function(){return m.a})),n.d(t,"Igv",(function(){return R})),n.d(t,"Molecule2dViewer",(function(){return E.a})),n.d(t,"Molecule3dViewer",(function(){return A.a})),n.d(t,"NeedlePlot",(function(){return T.a})),n.d(t,"NglMoleculeViewer",(function(){return M.a})),n.d(t,"OncoPrint",(function(){return L.a})),n.d(t,"SequenceViewer",(function(){return I.a})),n.d(t,"Speck",(function(){return P.a}))},,function(e,t){e.exports=window.ReactDOM},,,,,,,,,,,function(e,t,n){"use strict";var r=n(10);function i(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function a(e,t,n){for(var r=0,i=n.length;r<i;){if(e(t,n[r]))return!0;r+=1}return!1}var o=n(5);var s="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},u=n(3),c=Object.prototype.toString,l=function(){return"[object Arguments]"===c.call(arguments)?function(e){return"[object Arguments]"===c.call(e)}:function(e){return Object(o.a)("callee",e)}}(),h=!{toString:null}.propertyIsEnumerable("toString"),f=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],p=function(){return arguments.propertyIsEnumerable("length")}(),d=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},g="function"!=typeof Object.keys||p?Object(u.a)((function(e){if(Object(e)!==e)return[];var t,n,r=[],i=p&&l(e);for(t in e)!Object(o.a)(t,e)||i&&"length"===t||(r[r.length]=t);if(h)for(n=f.length-1;n>=0;)t=f[n],Object(o.a)(t,e)&&!d(r,t)&&(r[r.length]=t),n-=1;return r})):Object(u.a)((function(e){return Object(e)!==e?[]:Object.keys(e)})),v=Object(u.a)((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function m(e,t,n,r){var o=i(e);function s(e,t){return y(e,t,n.slice(),r.slice())}return!a((function(e,t){return!a(s,t,e)}),i(t),o)}function y(e,t,n,r){if(s(e,t))return!0;var i,a,u=v(e);if(u!==v(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(u){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(i=e.constructor,null==(a=String(i).match(/^function (\w*)/))?"":a[1]))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!s(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!s(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var c=n.length-1;c>=0;){if(n[c]===e)return r[c]===t;c-=1}switch(u){case"Map":return e.size===t.size&&m(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&m(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var l=g(e);if(l.length!==g(t).length)return!1;var h=n.concat([e]),f=r.concat([t]);for(c=l.length-1;c>=0;){var p=l[c];if(!Object(o.a)(p,t)||!y(t[p],e[p],h,f))return!1;c-=1}return!0}var b=Object(r.a)((function(e,t){return y(e,t,[],[])}));t.a=b}]);