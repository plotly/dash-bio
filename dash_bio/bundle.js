window.dash_bio=function(n){function t(t){for(var e,o,a=t[0],i=t[1],u=0,s=[];u<a.length;u++)o=a[u],r[o]&&s.push(r[o][0]),r[o]=0;for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e]);for(p&&p(t);s.length;)s.shift()()}var e={},r={9:0};function o(n){return a.p+""+({0:"async~alignment",1:"async~ideogram",2:"async~moleculeviewer3",3:"async~circos",4:"async~moleculeviewer2",5:"async~needle",6:"async~onco",7:"async~sequence",8:"async~speck"}[n]||n)+".js"}function a(t){if(e[t])return e[t].exports;var r=e[t]={i:t,l:!1,exports:{}};return n[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(n){var t=[],e=r[n];if(0!==e)if(e)t.push(e[2]);else{var i=new Promise(function(t,o){e=r[n]=[t,o]});t.push(e[2]=i);var u,s=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=o(n),u=function(t){l.onerror=l.onload=null,clearTimeout(c);var e=r[n];if(0!==e){if(e){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,i=new Error("Loading chunk "+n+" failed.\n("+o+": "+a+")");i.type=o,i.request=a,e[1](i)}r[n]=void 0}};var c=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,s.appendChild(l)}return Promise.all(t)},a.m=n,a.c=e,a.d=function(n,t,e){a.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},a.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.t=function(n,t){if(1&t&&(n=a(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)a.d(e,r,function(t){return n[t]}.bind(null,r));return e},a.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(t,"a",t),t},a.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},a.p="",a.oe=function(n){throw console.error(n),n};const i=function(){let n=document.currentScript;if(!n){n=Array.from(document.getElementsByTagName("script")).filter(function(n){return!n.async&&!n.text&&!n.textContent}).slice(-1)[0]}return n};var u;Object.defineProperty(a,"p",{get:(u=i().src.split("/").slice(0,-1).join("/")+"/",function(){return u})});const s=o;o=function(n){let t=function(n){return/\/_dash-component-suites\//.test(n.src)}(i()),e=s(n);if(!t)return e;const r=e.split("/"),o=r.slice(-1)[0].split(".");return o.splice(1,0,"v0_3_0m1572877586"),r.splice(-1,1,o.join(".")),r.join("/")};var l=window.webpackJsonpdash_bio=window.webpackJsonpdash_bio||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var f=0;f<l.length;f++)t(l[f]);var p=c;return a(a.s=31)}([function(n,t,e){n.exports=e(23)()},function(n,t){n.exports=window.React},function(n,t,e){"use strict";t.a={alignmentChart:function(){return e.e(0).then(e.bind(null,34))},circos:function(){return e.e(3).then(e.bind(null,35))},ideogram:function(){return Promise.all([e.e(0),e.e(1)]).then(e.bind(null,40))},molecule2dViewer:function(){return Promise.all([e.e(0),e.e(1),e.e(4)]).then(e.bind(null,36))},molecule3dViewer:function(){return Promise.all([e.e(0),e.e(2)]).then(e.bind(null,37))},needlePlot:function(){return Promise.all([e.e(0),e.e(5)]).then(e.bind(null,41))},oncoPrint:function(){return Promise.all([e.e(0),e.e(6)]).then(e.bind(null,38))},sequenceViewer:function(){return Promise.all([e.e(0),e.e(2),e.e(7)]).then(e.bind(null,39))},speck:function(){return e.e(8).then(e.bind(null,42))}}},function(n,t,e){"use strict";e.d(t,"a",function(){return o});var r=e(4);function o(n){return function t(e){return 0===arguments.length||Object(r.a)(e)?t:n.apply(this,arguments)}}},function(n,t,e){"use strict";function r(n){return null!=n&&"object"==typeof n&&!0===n["@@functional/placeholder"]}e.d(t,"a",function(){return r})},function(n,t,e){"use strict";function r(n,t){return Object.prototype.hasOwnProperty.call(t,n)}e.d(t,"a",function(){return r})},function(n,t){n.exports={},n.exports[0]=n.exports.Xx={symbol:"Xx",name:"unknown",mass:1,radius:1,color:[1,.078,.576],number:0},n.exports[1]=n.exports.H={symbol:"H",name:"hydrogen",mass:1.00794,radius:.31,color:[1,1,1],number:1},n.exports[2]=n.exports.He={symbol:"He",name:"helium",mass:4.002602,radius:.28,color:[.851,1,1],number:2},n.exports[3]=n.exports.Li={symbol:"Li",name:"lithium",mass:6.941,radius:1.28,color:[.8,.502,1],number:3},n.exports[4]=n.exports.Be={symbol:"Be",name:"beryllium",mass:9.012182,radius:.96,color:[.761,1,0],number:4},n.exports[5]=n.exports.B={symbol:"B",name:"boron",mass:10.811,radius:.84,color:[1,.71,.71],number:5},n.exports[6]=n.exports.C={symbol:"C",name:"carbon",mass:12.0107,radius:.73,color:[.565,.565,.565],number:6},n.exports[7]=n.exports.N={symbol:"N",name:"nitrogen",mass:14.0067,radius:.71,color:[.188,.314,.973],number:7},n.exports[8]=n.exports.O={symbol:"O",name:"oxygen",mass:15.9994,radius:.66,color:[1,.051,.051],number:8},n.exports[9]=n.exports.F={symbol:"F",name:"fluorine",mass:18.9984032,radius:.57,color:[.565,.878,.314],number:9},n.exports[10]=n.exports.Ne={symbol:"Ne",name:"neon",mass:20.1797,radius:.58,color:[.702,.89,.961],number:10},n.exports[11]=n.exports.Na={symbol:"Na",name:"sodium",mass:22.98976928,radius:1.66,color:[.671,.361,.949],number:11},n.exports[12]=n.exports.Mg={symbol:"Mg",name:"magnesium",mass:24.305,radius:1.41,color:[.541,1,0],number:12},n.exports[13]=n.exports.Al={symbol:"Al",name:"aluminum",mass:26.9815386,radius:1.21,color:[.749,.651,.651],number:13},n.exports[14]=n.exports.Si={symbol:"Si",name:"silicon",mass:28.0855,radius:1.11,color:[.941,.784,.627],number:14},n.exports[15]=n.exports.P={symbol:"P",name:"phosphorus",mass:30.973762,radius:1.07,color:[1,.502,0],number:15},n.exports[16]=n.exports.S={symbol:"S",name:"sulfur",mass:32.065,radius:1.05,color:[1,1,.188],number:16},n.exports[17]=n.exports.Cl={symbol:"Cl",name:"chlorine",mass:35.453,radius:1.02,color:[.122,.941,.122],number:17},n.exports[18]=n.exports.Ar={symbol:"Ar",name:"argon",mass:39.948,radius:1.06,color:[.502,.82,.89],number:18},n.exports[19]=n.exports.K={symbol:"K",name:"potassium",mass:39.0983,radius:2.03,color:[.561,.251,.831],number:19},n.exports[20]=n.exports.Ca={symbol:"Ca",name:"calcium",mass:40.078,radius:1.76,color:[.239,1,0],number:20},n.exports[21]=n.exports.Sc={symbol:"Sc",name:"scandium",mass:44.955912,radius:1.7,color:[.902,.902,.902],number:21},n.exports[22]=n.exports.Ti={symbol:"Ti",name:"titanium",mass:47.867,radius:1.6,color:[.749,.761,.78],number:22},n.exports[23]=n.exports.V={symbol:"V",name:"vanadium",mass:50.9415,radius:1.53,color:[.651,.651,.671],number:23},n.exports[24]=n.exports.Cr={symbol:"Cr",name:"chromium",mass:51.9961,radius:1.39,color:[.541,.6,.78],number:24},n.exports[25]=n.exports.Mn={symbol:"Mn",name:"manganese",mass:54.938045,radius:1.39,color:[.611,.478,.78],number:25},n.exports[26]=n.exports.Fe={symbol:"Fe",name:"iron",mass:55.845,radius:1.32,color:[.878,.4,.2],number:26},n.exports[27]=n.exports.Co={symbol:"Co",name:"cobalt",mass:58.6934,radius:1.26,color:[.941,.565,.627],number:27},n.exports[28]=n.exports.Ni={symbol:"Ni",name:"nickel",mass:58.933195,radius:1.24,color:[.314,.816,.314],number:28},n.exports[29]=n.exports.Cu={symbol:"Cu",name:"copper",mass:63.546,radius:1.32,color:[.784,.502,.2],number:29},n.exports[30]=n.exports.Zn={symbol:"Zn",name:"zinc",mass:65.38,radius:1.22,color:[.49,.502,.69],number:30},n.exports[31]=n.exports.Ga={symbol:"Ga",name:"gallium",mass:69.723,radius:1.22,color:[.761,.561,.561],number:31},n.exports[32]=n.exports.Ge={symbol:"Ge",name:"germanium",mass:72.64,radius:1.2,color:[.4,.561,.561],number:32},n.exports[33]=n.exports.As={symbol:"As",name:"arsenic",mass:74.9216,radius:1.19,color:[.741,.502,.89],number:33},n.exports[34]=n.exports.Se={symbol:"Se",name:"selenium",mass:78.96,radius:1.2,color:[1,.631,0],number:34},n.exports[35]=n.exports.Br={symbol:"Br",name:"bromine",mass:79.904,radius:1.2,color:[.651,.161,.161],number:35},n.exports[36]=n.exports.Kr={symbol:"Kr",name:"krypton",mass:83.798,radius:1.16,color:[.361,.722,.82],number:36},n.exports[37]=n.exports.Rb={symbol:"Rb",name:"rubidium",mass:85.4678,radius:2.2,color:[.439,.18,.69],number:37},n.exports[38]=n.exports.Sr={symbol:"Sr",name:"strontium",mass:87.62,radius:1.95,color:[0,1,0],number:38},n.exports[39]=n.exports.Y={symbol:"Y",name:"yttrium",mass:88.90585,radius:1.9,color:[.58,1,1],number:39},n.exports[40]=n.exports.Zr={symbol:"Zr",name:"zirconium",mass:91.224,radius:1.75,color:[.58,.878,.878],number:40},n.exports[41]=n.exports.Nb={symbol:"Nb",name:"niobium",mass:92.90638,radius:1.64,color:[.451,.761,.788],number:41},n.exports[42]=n.exports.Mo={symbol:"Mo",name:"molybdenum",mass:95.96,radius:1.54,color:[.329,.71,.71],number:42},n.exports[43]=n.exports.Tc={symbol:"Tc",name:"technetium",mass:98,radius:1.47,color:[.231,.62,.62],number:43},n.exports[44]=n.exports.Ru={symbol:"Ru",name:"ruthenium",mass:101.07,radius:1.46,color:[.141,.561,.561],number:44},n.exports[45]=n.exports.Rh={symbol:"Rh",name:"rhodium",mass:102.9055,radius:1.42,color:[.039,.49,.549],number:45},n.exports[46]=n.exports.Pd={symbol:"Pd",name:"palladium",mass:106.42,radius:1.39,color:[0,.412,.522],number:46},n.exports[47]=n.exports.Ag={symbol:"Ag",name:"silver",mass:107.8682,radius:1.45,color:[.753,.753,.753],number:47},n.exports[48]=n.exports.Cd={symbol:"Cd",name:"cadmium",mass:112.411,radius:1.44,color:[1,.851,.561],number:48},n.exports[49]=n.exports.In={symbol:"In",name:"indium",mass:114.818,radius:1.42,color:[.651,.459,.451],number:49},n.exports[50]=n.exports.Sn={symbol:"Sn",name:"tin",mass:118.71,radius:1.39,color:[.4,.502,.502],number:50},n.exports[51]=n.exports.Sb={symbol:"Sb",name:"antimony",mass:121.76,radius:1.39,color:[.62,.388,.71],number:51},n.exports[52]=n.exports.Te={symbol:"Te",name:"tellurium",mass:127.6,radius:1.38,color:[.831,.478,0],number:52},n.exports[53]=n.exports.I={symbol:"I",name:"iodine",mass:126.9047,radius:1.39,color:[.58,0,.58],number:53},n.exports[54]=n.exports.Xe={symbol:"Xe",name:"xenon",mass:131.293,radius:1.4,color:[.259,.62,.69],number:54},n.exports[55]=n.exports.Cs={symbol:"Cs",name:"cesium",mass:132.9054519,radius:2.44,color:[.341,.09,.561],number:55},n.exports[56]=n.exports.Ba={symbol:"Ba",name:"barium",mass:137.327,radius:2.15,color:[0,.788,0],number:56},n.exports[57]=n.exports.La={symbol:"La",name:"lanthanum",mass:138.90547,radius:2.07,color:[.439,.831,1],number:57},n.exports[58]=n.exports.Ce={symbol:"Ce",name:"cerium",mass:140.116,radius:2.04,color:[1,1,.78],number:58},n.exports[59]=n.exports.Pr={symbol:"Pr",name:"praseodymium",mass:140.90765,radius:2.03,color:[.851,1,.78],number:59},n.exports[60]=n.exports.Nd={symbol:"Nd",name:"neodymium",mass:144.242,radius:2.01,color:[.78,1,.78],number:60},n.exports[61]=n.exports.Pm={symbol:"Pm",name:"promethium",mass:145,radius:1.99,color:[.639,1,.78],number:61},n.exports[62]=n.exports.Sm={symbol:"Sm",name:"samarium",mass:150.36,radius:1.98,color:[.561,1,.78],number:62},n.exports[63]=n.exports.Eu={symbol:"Eu",name:"europium",mass:151.964,radius:1.98,color:[.38,1,.78],number:63},n.exports[64]=n.exports.Gd={symbol:"Gd",name:"gadolinium",mass:157.25,radius:1.96,color:[.271,1,.78],number:64},n.exports[65]=n.exports.Tb={symbol:"Tb",name:"terbium",mass:158.92535,radius:1.94,color:[.189,1,.78],number:65},n.exports[66]=n.exports.Dy={symbol:"Dy",name:"dysprosium",mass:162.5,radius:1.92,color:[.122,1,.78],number:66},n.exports[67]=n.exports.Ho={symbol:"Ho",name:"holmium",mass:164.93032,radius:1.92,color:[0,1,.612],number:67},n.exports[68]=n.exports.Er={symbol:"Er",name:"erbium",mass:167.259,radius:1.89,color:[0,.902,.459],number:68},n.exports[69]=n.exports.Tm={symbol:"Tm",name:"thulium",mass:168.93421,radius:1.9,color:[0,.831,.322],number:69},n.exports[70]=n.exports.Yb={symbol:"Yb",name:"ytterbium",mass:173.054,radius:1.87,color:[0,.749,.22],number:70},n.exports[71]=n.exports.Lu={symbol:"Lu",name:"lutetium",mass:174.9668,radius:1.87,color:[0,.671,.141],number:71},n.exports[72]=n.exports.Hf={symbol:"Hf",name:"hafnium",mass:178.49,radius:1.75,color:[.302,.761,1],number:72},n.exports[73]=n.exports.Ta={symbol:"Ta",name:"tantalum",mass:180.94788,radius:1.7,color:[.302,.651,1],number:73},n.exports[74]=n.exports.W={symbol:"W",name:"tungsten",mass:183.84,radius:1.62,color:[.129,.58,.839],number:74},n.exports[75]=n.exports.Re={symbol:"Re",name:"rhenium",mass:186.207,radius:1.51,color:[.149,.49,.671],number:75},n.exports[76]=n.exports.Os={symbol:"Os",name:"osmium",mass:190.23,radius:1.44,color:[.149,.4,.588],number:76},n.exports[77]=n.exports.Ir={symbol:"Ir",name:"iridium",mass:192.217,radius:1.41,color:[.09,.329,.529],number:77},n.exports[78]=n.exports.Pt={symbol:"Pt",name:"platinum",mass:195.084,radius:1.36,color:[.816,.816,.878],number:78},n.exports[79]=n.exports.Au={symbol:"Au",name:"gold",mass:196.966569,radius:1.36,color:[1,.82,.137],number:79},n.exports[80]=n.exports.Hg={symbol:"Hg",name:"mercury",mass:200.59,radius:1.32,color:[.722,.722,.816],number:80},n.exports[81]=n.exports.Tl={symbol:"Tl",name:"thallium",mass:204.3833,radius:1.45,color:[.651,.329,.302],number:81},n.exports[82]=n.exports.Pb={symbol:"Pb",name:"lead",mass:207.2,radius:1.46,color:[.341,.349,.38],number:82},n.exports[83]=n.exports.Bi={symbol:"Bi",name:"bismuth",mass:208.9804,radius:1.48,color:[.62,.31,.71],number:83},n.exports[84]=n.exports.Po={symbol:"Po",name:"polonium",mass:210,radius:1.4,color:[.671,.361,0],number:84},n.exports[85]=n.exports.At={symbol:"At",name:"astatine",mass:210,radius:1.5,color:[.459,.31,.271],number:85},n.exports[86]=n.exports.Rn={symbol:"Rn",name:"radon",mass:220,radius:1.5,color:[.259,.51,.588],number:86},n.exports[87]=n.exports.Fr={symbol:"Fr",name:"francium",mass:223,radius:2.6,color:[.259,0,.4],number:87},n.exports[88]=n.exports.Ra={symbol:"Ra",name:"radium",mass:226,radius:2.21,color:[0,.49,0],number:88},n.exports[89]=n.exports.Ac={symbol:"Ac",name:"actinium",mass:227,radius:2.15,color:[.439,.671,.98],number:89},n.exports[90]=n.exports.Th={symbol:"Th",name:"thorium",mass:231.03588,radius:2.06,color:[0,.729,1],number:90},n.exports[91]=n.exports.Pa={symbol:"Pa",name:"protactinium",mass:232.03806,radius:2,color:[0,.631,1],number:91},n.exports[92]=n.exports.U={symbol:"U",name:"uranium",mass:237,radius:1.96,color:[0,.561,1],number:92},n.exports[93]=n.exports.Np={symbol:"Np",name:"neptunium",mass:238.02891,radius:1.9,color:[0,.502,1],number:93},n.exports[94]=n.exports.Pu={symbol:"Pu",name:"plutonium",mass:243,radius:1.87,color:[0,.42,1],number:94},n.exports[95]=n.exports.Am={symbol:"Am",name:"americium",mass:244,radius:1.8,color:[.329,.361,.949],number:95},n.exports[96]=n.exports.Cm={symbol:"Cm",name:"curium",mass:247,radius:1.69,color:[.471,.361,.89],number:96},n.exports[97]=n.exports.Bk={symbol:"Bk",name:"berkelium",mass:247,radius:1.66,color:[.541,.31,.89],number:97},n.exports[98]=n.exports.Cf={symbol:"Cf",name:"californium",mass:251,radius:1.68,color:[.631,.212,.831],number:98},n.exports[99]=n.exports.Es={symbol:"Es",name:"einsteinium",mass:252,radius:1.65,color:[.702,.122,.831],number:99},n.exports[100]=n.exports.Fm={symbol:"Fm",name:"fermium",mass:257,radius:1.67,color:[.702,.122,.729],number:100},n.exports[101]=n.exports.Md={symbol:"Md",name:"mendelevium",mass:258,radius:1.73,color:[.702,.051,.651],number:101},n.exports[102]=n.exports.No={symbol:"No",name:"nobelium",mass:259,radius:1.76,color:[.741,.051,.529],number:102},n.exports[103]=n.exports.Lr={symbol:"Lr",name:"lawrencium",mass:262,radius:1.61,color:[.78,0,.4],number:103},n.exports[104]=n.exports.Rf={symbol:"Rf",name:"rutherfordium",mass:261,radius:1.57,color:[.8,0,.349],number:104},n.exports[105]=n.exports.Db={symbol:"Db",name:"dubnium",mass:262,radius:1.49,color:[.82,0,.31],number:105},n.exports[106]=n.exports.Sg={symbol:"Sg",name:"seaborgium",mass:266,radius:1.43,color:[.851,0,.271],number:106},n.exports[107]=n.exports.Bh={symbol:"Bh",name:"bohrium",mass:264,radius:1.41,color:[.878,0,.22],number:107},n.exports[108]=n.exports.Hs={symbol:"Hs",name:"hassium",mass:277,radius:1.34,color:[.902,0,.18],number:108},n.exports[109]=n.exports.Mt={symbol:"Mt",name:"meitnerium",mass:268,radius:1.29,color:[.922,0,.149],number:109},n.exports[110]=n.exports.Ds={symbol:"Ds",name:"Ds",mass:271,radius:1.28,color:[.922,0,.149],number:110},n.exports[111]=n.exports.Uuu={symbol:"Uuu",name:"Uuu",mass:272,radius:1.21,color:[.922,0,.149],number:111},n.exports[112]=n.exports.Uub={symbol:"Uub",name:"Uub",mass:285,radius:1.22,color:[.922,0,.149],number:112},n.exports[113]=n.exports.Uut={symbol:"Uut",name:"Uut",mass:284,radius:1.36,color:[.922,0,.149],number:113},n.exports[114]=n.exports.Uuq={symbol:"Uuq",name:"Uuq",mass:289,radius:1.43,color:[.922,0,.149],number:114},n.exports[115]=n.exports.Uup={symbol:"Uup",name:"Uup",mass:288,radius:1.62,color:[.922,0,.149],number:115},n.exports[116]=n.exports.Uuh={symbol:"Uuh",name:"Uuh",mass:292,radius:1.75,color:[.922,0,.149],number:116},n.exports[117]=n.exports.Uus={symbol:"Uus",name:"Uus",mass:294,radius:1.65,color:[.922,0,.149],number:117},n.exports[118]=n.exports.Uuo={symbol:"Uuo",name:"Uuo",mass:296,radius:1.57,color:[.922,0,.149],number:118}},function(n,t,e){!function(n){"use strict";var e={};e.exports=t,function(n){if(!t)var t=1e-6;if(!e)var e="undefined"!=typeof Float32Array?Float32Array:Array;if(!r)var r=Math.random;var o={setMatrixArrayType:function(n){e=n}};void 0!==n&&(n.glMatrix=o);var a=Math.PI/180;o.toRadian=function(n){return n*a};var i,u={};u.create=function(){var n=new e(2);return n[0]=0,n[1]=0,n},u.clone=function(n){var t=new e(2);return t[0]=n[0],t[1]=n[1],t},u.fromValues=function(n,t){var r=new e(2);return r[0]=n,r[1]=t,r},u.copy=function(n,t){return n[0]=t[0],n[1]=t[1],n},u.set=function(n,t,e){return n[0]=t,n[1]=e,n},u.add=function(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n},u.subtract=function(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n},u.sub=u.subtract,u.multiply=function(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n},u.mul=u.multiply,u.divide=function(n,t,e){return n[0]=t[0]/e[0],n[1]=t[1]/e[1],n},u.div=u.divide,u.min=function(n,t,e){return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n},u.max=function(n,t,e){return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n},u.scale=function(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n},u.scaleAndAdd=function(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n},u.distance=function(n,t){var e=t[0]-n[0],r=t[1]-n[1];return Math.sqrt(e*e+r*r)},u.dist=u.distance,u.squaredDistance=function(n,t){var e=t[0]-n[0],r=t[1]-n[1];return e*e+r*r},u.sqrDist=u.squaredDistance,u.length=function(n){var t=n[0],e=n[1];return Math.sqrt(t*t+e*e)},u.len=u.length,u.squaredLength=function(n){var t=n[0],e=n[1];return t*t+e*e},u.sqrLen=u.squaredLength,u.negate=function(n,t){return n[0]=-t[0],n[1]=-t[1],n},u.inverse=function(n,t){return n[0]=1/t[0],n[1]=1/t[1],n},u.normalize=function(n,t){var e=t[0],r=t[1],o=e*e+r*r;return o>0&&(o=1/Math.sqrt(o),n[0]=t[0]*o,n[1]=t[1]*o),n},u.dot=function(n,t){return n[0]*t[0]+n[1]*t[1]},u.cross=function(n,t,e){var r=t[0]*e[1]-t[1]*e[0];return n[0]=n[1]=0,n[2]=r,n},u.lerp=function(n,t,e,r){var o=t[0],a=t[1];return n[0]=o+r*(e[0]-o),n[1]=a+r*(e[1]-a),n},u.random=function(n,t){t=t||1;var e=2*r()*Math.PI;return n[0]=Math.cos(e)*t,n[1]=Math.sin(e)*t,n},u.transformMat2=function(n,t,e){var r=t[0],o=t[1];return n[0]=e[0]*r+e[2]*o,n[1]=e[1]*r+e[3]*o,n},u.transformMat2d=function(n,t,e){var r=t[0],o=t[1];return n[0]=e[0]*r+e[2]*o+e[4],n[1]=e[1]*r+e[3]*o+e[5],n},u.transformMat3=function(n,t,e){var r=t[0],o=t[1];return n[0]=e[0]*r+e[3]*o+e[6],n[1]=e[1]*r+e[4]*o+e[7],n},u.transformMat4=function(n,t,e){var r=t[0],o=t[1];return n[0]=e[0]*r+e[4]*o+e[12],n[1]=e[1]*r+e[5]*o+e[13],n},u.forEach=(i=u.create(),function(n,t,e,r,o,a){var u,s;for(t||(t=2),e||(e=0),s=r?Math.min(r*t+e,n.length):n.length,u=e;u<s;u+=t)i[0]=n[u],i[1]=n[u+1],o(i,i,a),n[u]=i[0],n[u+1]=i[1];return n}),u.str=function(n){return"vec2("+n[0]+", "+n[1]+")"},void 0!==n&&(n.vec2=u);var s={create:function(){var n=new e(3);return n[0]=0,n[1]=0,n[2]=0,n},clone:function(n){var t=new e(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},fromValues:function(n,t,r){var o=new e(3);return o[0]=n,o[1]=t,o[2]=r,o},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},set:function(n,t,e,r){return n[0]=t,n[1]=e,n[2]=r,n},add:function(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n},subtract:function(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}};s.sub=s.subtract,s.multiply=function(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n},s.mul=s.multiply,s.divide=function(n,t,e){return n[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n},s.div=s.divide,s.min=function(n,t,e){return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.min(t[2],e[2]),n},s.max=function(n,t,e){return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n},s.scale=function(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n},s.scaleAndAdd=function(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n[2]=t[2]+e[2]*r,n},s.distance=function(n,t){var e=t[0]-n[0],r=t[1]-n[1],o=t[2]-n[2];return Math.sqrt(e*e+r*r+o*o)},s.dist=s.distance,s.squaredDistance=function(n,t){var e=t[0]-n[0],r=t[1]-n[1],o=t[2]-n[2];return e*e+r*r+o*o},s.sqrDist=s.squaredDistance,s.length=function(n){var t=n[0],e=n[1],r=n[2];return Math.sqrt(t*t+e*e+r*r)},s.len=s.length,s.squaredLength=function(n){var t=n[0],e=n[1],r=n[2];return t*t+e*e+r*r},s.sqrLen=s.squaredLength,s.negate=function(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n},s.inverse=function(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n},s.normalize=function(n,t){var e=t[0],r=t[1],o=t[2],a=e*e+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),n[0]=t[0]*a,n[1]=t[1]*a,n[2]=t[2]*a),n},s.dot=function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]},s.cross=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=e[0],u=e[1],s=e[2];return n[0]=o*s-a*u,n[1]=a*i-r*s,n[2]=r*u-o*i,n},s.lerp=function(n,t,e,r){var o=t[0],a=t[1],i=t[2];return n[0]=o+r*(e[0]-o),n[1]=a+r*(e[1]-a),n[2]=i+r*(e[2]-i),n},s.random=function(n,t){t=t||1;var e=2*r()*Math.PI,o=2*r()-1,a=Math.sqrt(1-o*o)*t;return n[0]=Math.cos(e)*a,n[1]=Math.sin(e)*a,n[2]=o*t,n},s.transformMat4=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=e[3]*r+e[7]*o+e[11]*a+e[15];return i=i||1,n[0]=(e[0]*r+e[4]*o+e[8]*a+e[12])/i,n[1]=(e[1]*r+e[5]*o+e[9]*a+e[13])/i,n[2]=(e[2]*r+e[6]*o+e[10]*a+e[14])/i,n},s.transformMat3=function(n,t,e){var r=t[0],o=t[1],a=t[2];return n[0]=r*e[0]+o*e[3]+a*e[6],n[1]=r*e[1]+o*e[4]+a*e[7],n[2]=r*e[2]+o*e[5]+a*e[8],n},s.transformQuat=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=e[0],u=e[1],s=e[2],l=e[3],c=l*r+u*a-s*o,f=l*o+s*r-i*a,p=l*a+i*o-u*r,h=-i*r-u*o-s*a;return n[0]=c*l+h*-i+f*-s-p*-u,n[1]=f*l+h*-u+p*-i-c*-s,n[2]=p*l+h*-s+c*-u-f*-i,n},s.rotateX=function(n,t,e,r){var o=[],a=[];return o[0]=t[0]-e[0],o[1]=t[1]-e[1],o[2]=t[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),n[0]=a[0]+e[0],n[1]=a[1]+e[1],n[2]=a[2]+e[2],n},s.rotateY=function(n,t,e,r){var o=[],a=[];return o[0]=t[0]-e[0],o[1]=t[1]-e[1],o[2]=t[2]-e[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),n[0]=a[0]+e[0],n[1]=a[1]+e[1],n[2]=a[2]+e[2],n},s.rotateZ=function(n,t,e,r){var o=[],a=[];return o[0]=t[0]-e[0],o[1]=t[1]-e[1],o[2]=t[2]-e[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],n[0]=a[0]+e[0],n[1]=a[1]+e[1],n[2]=a[2]+e[2],n},s.forEach=function(){var n=s.create();return function(t,e,r,o,a,i){var u,s;for(e||(e=3),r||(r=0),s=o?Math.min(o*e+r,t.length):t.length,u=r;u<s;u+=e)n[0]=t[u],n[1]=t[u+1],n[2]=t[u+2],a(n,n,i),t[u]=n[0],t[u+1]=n[1],t[u+2]=n[2];return t}}(),s.angle=function(n,t){var e=s.fromValues(n[0],n[1],n[2]),r=s.fromValues(t[0],t[1],t[2]);s.normalize(e,e),s.normalize(r,r);var o=s.dot(e,r);return o>1?0:Math.acos(o)},s.str=function(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"},void 0!==n&&(n.vec3=s);var l={create:function(){var n=new e(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n},clone:function(n){var t=new e(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},fromValues:function(n,t,r,o){var a=new e(4);return a[0]=n,a[1]=t,a[2]=r,a[3]=o,a},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},set:function(n,t,e,r,o){return n[0]=t,n[1]=e,n[2]=r,n[3]=o,n},add:function(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n},subtract:function(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n}};l.sub=l.subtract,l.multiply=function(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n[3]=t[3]*e[3],n},l.mul=l.multiply,l.divide=function(n,t,e){return n[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n[3]=t[3]/e[3],n},l.div=l.divide,l.min=function(n,t,e){return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.min(t[2],e[2]),n[3]=Math.min(t[3],e[3]),n},l.max=function(n,t,e){return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n[3]=Math.max(t[3],e[3]),n},l.scale=function(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n},l.scaleAndAdd=function(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n[2]=t[2]+e[2]*r,n[3]=t[3]+e[3]*r,n},l.distance=function(n,t){var e=t[0]-n[0],r=t[1]-n[1],o=t[2]-n[2],a=t[3]-n[3];return Math.sqrt(e*e+r*r+o*o+a*a)},l.dist=l.distance,l.squaredDistance=function(n,t){var e=t[0]-n[0],r=t[1]-n[1],o=t[2]-n[2],a=t[3]-n[3];return e*e+r*r+o*o+a*a},l.sqrDist=l.squaredDistance,l.length=function(n){var t=n[0],e=n[1],r=n[2],o=n[3];return Math.sqrt(t*t+e*e+r*r+o*o)},l.len=l.length,l.squaredLength=function(n){var t=n[0],e=n[1],r=n[2],o=n[3];return t*t+e*e+r*r+o*o},l.sqrLen=l.squaredLength,l.negate=function(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n},l.inverse=function(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n[3]=1/t[3],n},l.normalize=function(n,t){var e=t[0],r=t[1],o=t[2],a=t[3],i=e*e+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i),n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n[3]=t[3]*i),n},l.dot=function(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]},l.lerp=function(n,t,e,r){var o=t[0],a=t[1],i=t[2],u=t[3];return n[0]=o+r*(e[0]-o),n[1]=a+r*(e[1]-a),n[2]=i+r*(e[2]-i),n[3]=u+r*(e[3]-u),n},l.random=function(n,t){return t=t||1,n[0]=r(),n[1]=r(),n[2]=r(),n[3]=r(),l.normalize(n,n),l.scale(n,n,t),n},l.transformMat4=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3];return n[0]=e[0]*r+e[4]*o+e[8]*a+e[12]*i,n[1]=e[1]*r+e[5]*o+e[9]*a+e[13]*i,n[2]=e[2]*r+e[6]*o+e[10]*a+e[14]*i,n[3]=e[3]*r+e[7]*o+e[11]*a+e[15]*i,n},l.transformQuat=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=e[0],u=e[1],s=e[2],l=e[3],c=l*r+u*a-s*o,f=l*o+s*r-i*a,p=l*a+i*o-u*r,h=-i*r-u*o-s*a;return n[0]=c*l+h*-i+f*-s-p*-u,n[1]=f*l+h*-u+p*-i-c*-s,n[2]=p*l+h*-s+c*-u-f*-i,n},l.forEach=function(){var n=l.create();return function(t,e,r,o,a,i){var u,s;for(e||(e=4),r||(r=0),s=o?Math.min(o*e+r,t.length):t.length,u=r;u<s;u+=e)n[0]=t[u],n[1]=t[u+1],n[2]=t[u+2],n[3]=t[u+3],a(n,n,i),t[u]=n[0],t[u+1]=n[1],t[u+2]=n[2],t[u+3]=n[3];return t}}(),l.str=function(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},void 0!==n&&(n.vec4=l);var c={create:function(){var n=new e(4);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n},clone:function(n){var t=new e(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},identity:function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n},transpose:function(n,t){if(n===t){var e=t[1];n[1]=t[2],n[2]=e}else n[0]=t[0],n[1]=t[2],n[2]=t[1],n[3]=t[3];return n},invert:function(n,t){var e=t[0],r=t[1],o=t[2],a=t[3],i=e*a-o*r;return i?(i=1/i,n[0]=a*i,n[1]=-r*i,n[2]=-o*i,n[3]=e*i,n):null},adjoint:function(n,t){var e=t[0];return n[0]=t[3],n[1]=-t[1],n[2]=-t[2],n[3]=e,n},determinant:function(n){return n[0]*n[3]-n[2]*n[1]},multiply:function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=e[0],s=e[1],l=e[2],c=e[3];return n[0]=r*u+a*s,n[1]=o*u+i*s,n[2]=r*l+a*c,n[3]=o*l+i*c,n}};c.mul=c.multiply,c.rotate=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(e),s=Math.cos(e);return n[0]=r*s+a*u,n[1]=o*s+i*u,n[2]=r*-u+a*s,n[3]=o*-u+i*s,n},c.scale=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=e[0],s=e[1];return n[0]=r*u,n[1]=o*u,n[2]=a*s,n[3]=i*s,n},c.str=function(n){return"mat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},c.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2))},c.LDU=function(n,t,e,r){return n[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-n[2]*e[1],[n,t,e]},void 0!==n&&(n.mat2=c);var f={create:function(){var n=new e(6);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n},clone:function(n){var t=new e(6);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},identity:function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n},invert:function(n,t){var e=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=e*a-r*o;return s?(s=1/s,n[0]=a*s,n[1]=-r*s,n[2]=-o*s,n[3]=e*s,n[4]=(o*u-a*i)*s,n[5]=(r*i-e*u)*s,n):null},determinant:function(n){return n[0]*n[3]-n[1]*n[2]},multiply:function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=e[0],c=e[1],f=e[2],p=e[3],h=e[4],d=e[5];return n[0]=r*l+a*c,n[1]=o*l+i*c,n[2]=r*f+a*p,n[3]=o*f+i*p,n[4]=r*h+a*d+u,n[5]=o*h+i*d+s,n}};f.mul=f.multiply,f.rotate=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=Math.sin(e),c=Math.cos(e);return n[0]=r*c+a*l,n[1]=o*c+i*l,n[2]=r*-l+a*c,n[3]=o*-l+i*c,n[4]=u,n[5]=s,n},f.scale=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=e[0],c=e[1];return n[0]=r*l,n[1]=o*l,n[2]=a*c,n[3]=i*c,n[4]=u,n[5]=s,n},f.translate=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=e[0],c=e[1];return n[0]=r,n[1]=o,n[2]=a,n[3]=i,n[4]=r*l+a*c+u,n[5]=o*l+i*c+s,n},f.str=function(n){return"mat2d("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")"},f.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+1)},void 0!==n&&(n.mat2d=f);var p={create:function(){var n=new e(9);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},fromMat4:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[4],n[4]=t[5],n[5]=t[6],n[6]=t[8],n[7]=t[9],n[8]=t[10],n},clone:function(n){var t=new e(9);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},identity:function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},transpose:function(n,t){if(n===t){var e=t[1],r=t[2],o=t[5];n[1]=t[3],n[2]=t[6],n[3]=e,n[5]=t[7],n[6]=r,n[7]=o}else n[0]=t[0],n[1]=t[3],n[2]=t[6],n[3]=t[1],n[4]=t[4],n[5]=t[7],n[6]=t[2],n[7]=t[5],n[8]=t[8];return n},invert:function(n,t){var e=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=c*i-u*l,p=-c*a+u*s,h=l*a-i*s,d=e*f+r*p+o*h;return d?(d=1/d,n[0]=f*d,n[1]=(-c*r+o*l)*d,n[2]=(u*r-o*i)*d,n[3]=p*d,n[4]=(c*e-o*s)*d,n[5]=(-u*e+o*a)*d,n[6]=h*d,n[7]=(-l*e+r*s)*d,n[8]=(i*e-r*a)*d,n):null},adjoint:function(n,t){var e=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8];return n[0]=i*c-u*l,n[1]=o*l-r*c,n[2]=r*u-o*i,n[3]=u*s-a*c,n[4]=e*c-o*s,n[5]=o*a-e*u,n[6]=a*l-i*s,n[7]=r*s-e*l,n[8]=e*i-r*a,n},determinant:function(n){var t=n[0],e=n[1],r=n[2],o=n[3],a=n[4],i=n[5],u=n[6],s=n[7],l=n[8];return t*(l*a-i*s)+e*(-l*o+i*u)+r*(s*o-a*u)},multiply:function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],p=e[0],h=e[1],d=e[2],m=e[3],v=e[4],g=e[5],y=e[6],b=e[7],x=e[8];return n[0]=p*r+h*i+d*l,n[1]=p*o+h*u+d*c,n[2]=p*a+h*s+d*f,n[3]=m*r+v*i+g*l,n[4]=m*o+v*u+g*c,n[5]=m*a+v*s+g*f,n[6]=y*r+b*i+x*l,n[7]=y*o+b*u+x*c,n[8]=y*a+b*s+x*f,n}};p.mul=p.multiply,p.translate=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],p=e[0],h=e[1];return n[0]=r,n[1]=o,n[2]=a,n[3]=i,n[4]=u,n[5]=s,n[6]=p*r+h*i+l,n[7]=p*o+h*u+c,n[8]=p*a+h*s+f,n},p.rotate=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],p=Math.sin(e),h=Math.cos(e);return n[0]=h*r+p*i,n[1]=h*o+p*u,n[2]=h*a+p*s,n[3]=h*i-p*r,n[4]=h*u-p*o,n[5]=h*s-p*a,n[6]=l,n[7]=c,n[8]=f,n},p.scale=function(n,t,e){var r=e[0],o=e[1];return n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=o*t[3],n[4]=o*t[4],n[5]=o*t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},p.fromMat2d=function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=0,n[3]=t[2],n[4]=t[3],n[5]=0,n[6]=t[4],n[7]=t[5],n[8]=1,n},p.fromQuat=function(n,t){var e=t[0],r=t[1],o=t[2],a=t[3],i=e+e,u=r+r,s=o+o,l=e*i,c=r*i,f=r*u,p=o*i,h=o*u,d=o*s,m=a*i,v=a*u,g=a*s;return n[0]=1-f-d,n[3]=c-g,n[6]=p+v,n[1]=c+g,n[4]=1-l-d,n[7]=h-m,n[2]=p-v,n[5]=h+m,n[8]=1-l-f,n},p.normalFromMat4=function(n,t){var e=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],p=t[10],h=t[11],d=t[12],m=t[13],v=t[14],g=t[15],y=e*u-r*i,b=e*s-o*i,x=e*l-a*i,M=r*s-o*u,w=r*l-a*u,k=o*l-a*s,_=c*m-f*d,S=c*v-p*d,A=c*g-h*d,T=f*v-p*m,E=f*g-h*m,R=p*g-h*v,P=y*R-b*E+x*T+M*A-w*S+k*_;return P?(P=1/P,n[0]=(u*R-s*E+l*T)*P,n[1]=(s*A-i*R-l*S)*P,n[2]=(i*E-u*A+l*_)*P,n[3]=(o*E-r*R-a*T)*P,n[4]=(e*R-o*A+a*S)*P,n[5]=(r*A-e*E-a*_)*P,n[6]=(m*k-v*w+g*M)*P,n[7]=(v*x-d*k-g*b)*P,n[8]=(d*w-m*x+g*y)*P,n):null},p.str=function(n){return"mat3("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+")"},p.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2))},void 0!==n&&(n.mat3=p);var h={create:function(){var n=new e(16);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},clone:function(n){var t=new e(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},copy:function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},identity:function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},transpose:function(n,t){if(n===t){var e=t[1],r=t[2],o=t[3],a=t[6],i=t[7],u=t[11];n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=e,n[6]=t[9],n[7]=t[13],n[8]=r,n[9]=a,n[11]=t[14],n[12]=o,n[13]=i,n[14]=u}else n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15];return n},invert:function(n,t){var e=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],p=t[10],h=t[11],d=t[12],m=t[13],v=t[14],g=t[15],y=e*u-r*i,b=e*s-o*i,x=e*l-a*i,M=r*s-o*u,w=r*l-a*u,k=o*l-a*s,_=c*m-f*d,S=c*v-p*d,A=c*g-h*d,T=f*v-p*m,E=f*g-h*m,R=p*g-h*v,P=y*R-b*E+x*T+M*A-w*S+k*_;return P?(P=1/P,n[0]=(u*R-s*E+l*T)*P,n[1]=(o*E-r*R-a*T)*P,n[2]=(m*k-v*w+g*M)*P,n[3]=(p*w-f*k-h*M)*P,n[4]=(s*A-i*R-l*S)*P,n[5]=(e*R-o*A+a*S)*P,n[6]=(v*x-d*k-g*b)*P,n[7]=(c*k-p*x+h*b)*P,n[8]=(i*E-u*A+l*_)*P,n[9]=(r*A-e*E-a*_)*P,n[10]=(d*w-m*x+g*y)*P,n[11]=(f*x-c*w-h*y)*P,n[12]=(u*S-i*T-s*_)*P,n[13]=(e*T-r*S+o*_)*P,n[14]=(m*b-d*M-v*y)*P,n[15]=(c*M-f*b+p*y)*P,n):null},adjoint:function(n,t){var e=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],p=t[10],h=t[11],d=t[12],m=t[13],v=t[14],g=t[15];return n[0]=u*(p*g-h*v)-f*(s*g-l*v)+m*(s*h-l*p),n[1]=-(r*(p*g-h*v)-f*(o*g-a*v)+m*(o*h-a*p)),n[2]=r*(s*g-l*v)-u*(o*g-a*v)+m*(o*l-a*s),n[3]=-(r*(s*h-l*p)-u*(o*h-a*p)+f*(o*l-a*s)),n[4]=-(i*(p*g-h*v)-c*(s*g-l*v)+d*(s*h-l*p)),n[5]=e*(p*g-h*v)-c*(o*g-a*v)+d*(o*h-a*p),n[6]=-(e*(s*g-l*v)-i*(o*g-a*v)+d*(o*l-a*s)),n[7]=e*(s*h-l*p)-i*(o*h-a*p)+c*(o*l-a*s),n[8]=i*(f*g-h*m)-c*(u*g-l*m)+d*(u*h-l*f),n[9]=-(e*(f*g-h*m)-c*(r*g-a*m)+d*(r*h-a*f)),n[10]=e*(u*g-l*m)-i*(r*g-a*m)+d*(r*l-a*u),n[11]=-(e*(u*h-l*f)-i*(r*h-a*f)+c*(r*l-a*u)),n[12]=-(i*(f*v-p*m)-c*(u*v-s*m)+d*(u*p-s*f)),n[13]=e*(f*v-p*m)-c*(r*v-o*m)+d*(r*p-o*f),n[14]=-(e*(u*v-s*m)-i*(r*v-o*m)+d*(r*s-o*u)),n[15]=e*(u*p-s*f)-i*(r*p-o*f)+c*(r*s-o*u),n},determinant:function(n){var t=n[0],e=n[1],r=n[2],o=n[3],a=n[4],i=n[5],u=n[6],s=n[7],l=n[8],c=n[9],f=n[10],p=n[11],h=n[12],d=n[13],m=n[14],v=n[15];return(t*i-e*a)*(f*v-p*m)-(t*u-r*a)*(c*v-p*d)+(t*s-o*a)*(c*m-f*d)+(e*u-r*i)*(l*v-p*h)-(e*s-o*i)*(l*m-f*h)+(r*s-o*u)*(l*d-c*h)},multiply:function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],p=t[9],h=t[10],d=t[11],m=t[12],v=t[13],g=t[14],y=t[15],b=e[0],x=e[1],M=e[2],w=e[3];return n[0]=b*r+x*u+M*f+w*m,n[1]=b*o+x*s+M*p+w*v,n[2]=b*a+x*l+M*h+w*g,n[3]=b*i+x*c+M*d+w*y,b=e[4],x=e[5],M=e[6],w=e[7],n[4]=b*r+x*u+M*f+w*m,n[5]=b*o+x*s+M*p+w*v,n[6]=b*a+x*l+M*h+w*g,n[7]=b*i+x*c+M*d+w*y,b=e[8],x=e[9],M=e[10],w=e[11],n[8]=b*r+x*u+M*f+w*m,n[9]=b*o+x*s+M*p+w*v,n[10]=b*a+x*l+M*h+w*g,n[11]=b*i+x*c+M*d+w*y,b=e[12],x=e[13],M=e[14],w=e[15],n[12]=b*r+x*u+M*f+w*m,n[13]=b*o+x*s+M*p+w*v,n[14]=b*a+x*l+M*h+w*g,n[15]=b*i+x*c+M*d+w*y,n}};h.mul=h.multiply,h.translate=function(n,t,e){var r,o,a,i,u,s,l,c,f,p,h,d,m=e[0],v=e[1],g=e[2];return t===n?(n[12]=t[0]*m+t[4]*v+t[8]*g+t[12],n[13]=t[1]*m+t[5]*v+t[9]*g+t[13],n[14]=t[2]*m+t[6]*v+t[10]*g+t[14],n[15]=t[3]*m+t[7]*v+t[11]*g+t[15]):(r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],p=t[9],h=t[10],d=t[11],n[0]=r,n[1]=o,n[2]=a,n[3]=i,n[4]=u,n[5]=s,n[6]=l,n[7]=c,n[8]=f,n[9]=p,n[10]=h,n[11]=d,n[12]=r*m+u*v+f*g+t[12],n[13]=o*m+s*v+p*g+t[13],n[14]=a*m+l*v+h*g+t[14],n[15]=i*m+c*v+d*g+t[15]),n},h.scale=function(n,t,e){var r=e[0],o=e[1],a=e[2];return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n[4]=t[4]*o,n[5]=t[5]*o,n[6]=t[6]*o,n[7]=t[7]*o,n[8]=t[8]*a,n[9]=t[9]*a,n[10]=t[10]*a,n[11]=t[11]*a,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},h.rotate=function(n,e,r,o){var a,i,u,s,l,c,f,p,h,d,m,v,g,y,b,x,M,w,k,_,S,A,T,E,R=o[0],P=o[1],N=o[2],O=Math.sqrt(R*R+P*P+N*N);return Math.abs(O)<t?null:(R*=O=1/O,P*=O,N*=O,a=Math.sin(r),u=1-(i=Math.cos(r)),s=e[0],l=e[1],c=e[2],f=e[3],p=e[4],h=e[5],d=e[6],m=e[7],v=e[8],g=e[9],y=e[10],b=e[11],x=R*R*u+i,M=P*R*u+N*a,w=N*R*u-P*a,k=R*P*u-N*a,_=P*P*u+i,S=N*P*u+R*a,A=R*N*u+P*a,T=P*N*u-R*a,E=N*N*u+i,n[0]=s*x+p*M+v*w,n[1]=l*x+h*M+g*w,n[2]=c*x+d*M+y*w,n[3]=f*x+m*M+b*w,n[4]=s*k+p*_+v*S,n[5]=l*k+h*_+g*S,n[6]=c*k+d*_+y*S,n[7]=f*k+m*_+b*S,n[8]=s*A+p*T+v*E,n[9]=l*A+h*T+g*E,n[10]=c*A+d*T+y*E,n[11]=f*A+m*T+b*E,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)},h.rotateX=function(n,t,e){var r=Math.sin(e),o=Math.cos(e),a=t[4],i=t[5],u=t[6],s=t[7],l=t[8],c=t[9],f=t[10],p=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=a*o+l*r,n[5]=i*o+c*r,n[6]=u*o+f*r,n[7]=s*o+p*r,n[8]=l*o-a*r,n[9]=c*o-i*r,n[10]=f*o-u*r,n[11]=p*o-s*r,n},h.rotateY=function(n,t,e){var r=Math.sin(e),o=Math.cos(e),a=t[0],i=t[1],u=t[2],s=t[3],l=t[8],c=t[9],f=t[10],p=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=a*o-l*r,n[1]=i*o-c*r,n[2]=u*o-f*r,n[3]=s*o-p*r,n[8]=a*r+l*o,n[9]=i*r+c*o,n[10]=u*r+f*o,n[11]=s*r+p*o,n},h.rotateZ=function(n,t,e){var r=Math.sin(e),o=Math.cos(e),a=t[0],i=t[1],u=t[2],s=t[3],l=t[4],c=t[5],f=t[6],p=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=a*o+l*r,n[1]=i*o+c*r,n[2]=u*o+f*r,n[3]=s*o+p*r,n[4]=l*o-a*r,n[5]=c*o-i*r,n[6]=f*o-u*r,n[7]=p*o-s*r,n},h.fromRotationTranslation=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=r+r,s=o+o,l=a+a,c=r*u,f=r*s,p=r*l,h=o*s,d=o*l,m=a*l,v=i*u,g=i*s,y=i*l;return n[0]=1-(h+m),n[1]=f+y,n[2]=p-g,n[3]=0,n[4]=f-y,n[5]=1-(c+m),n[6]=d+v,n[7]=0,n[8]=p+g,n[9]=d-v,n[10]=1-(c+h),n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},h.fromQuat=function(n,t){var e=t[0],r=t[1],o=t[2],a=t[3],i=e+e,u=r+r,s=o+o,l=e*i,c=r*i,f=r*u,p=o*i,h=o*u,d=o*s,m=a*i,v=a*u,g=a*s;return n[0]=1-f-d,n[1]=c+g,n[2]=p-v,n[3]=0,n[4]=c-g,n[5]=1-l-d,n[6]=h+m,n[7]=0,n[8]=p+v,n[9]=h-m,n[10]=1-l-f,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},h.frustum=function(n,t,e,r,o,a,i){var u=1/(e-t),s=1/(o-r),l=1/(a-i);return n[0]=2*a*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*a*s,n[6]=0,n[7]=0,n[8]=(e+t)*u,n[9]=(o+r)*s,n[10]=(i+a)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=i*a*2*l,n[15]=0,n},h.perspective=function(n,t,e,r,o){var a=1/Math.tan(t/2),i=1/(r-o);return n[0]=a/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(o+r)*i,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*o*r*i,n[15]=0,n},h.ortho=function(n,t,e,r,o,a,i){var u=1/(t-e),s=1/(r-o),l=1/(a-i);return n[0]=-2*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(t+e)*u,n[13]=(o+r)*s,n[14]=(i+a)*l,n[15]=1,n},h.lookAt=function(n,e,r,o){var a,i,u,s,l,c,f,p,d,m,v=e[0],g=e[1],y=e[2],b=o[0],x=o[1],M=o[2],w=r[0],k=r[1],_=r[2];return Math.abs(v-w)<t&&Math.abs(g-k)<t&&Math.abs(y-_)<t?h.identity(n):(f=v-w,p=g-k,d=y-_,a=x*(d*=m=1/Math.sqrt(f*f+p*p+d*d))-M*(p*=m),i=M*(f*=m)-b*d,u=b*p-x*f,(m=Math.sqrt(a*a+i*i+u*u))?(a*=m=1/m,i*=m,u*=m):(a=0,i=0,u=0),s=p*u-d*i,l=d*a-f*u,c=f*i-p*a,(m=Math.sqrt(s*s+l*l+c*c))?(s*=m=1/m,l*=m,c*=m):(s=0,l=0,c=0),n[0]=a,n[1]=s,n[2]=f,n[3]=0,n[4]=i,n[5]=l,n[6]=p,n[7]=0,n[8]=u,n[9]=c,n[10]=d,n[11]=0,n[12]=-(a*v+i*g+u*y),n[13]=-(s*v+l*g+c*y),n[14]=-(f*v+p*g+d*y),n[15]=1,n)},h.str=function(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"},h.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2)+Math.pow(n[9],2)+Math.pow(n[10],2)+Math.pow(n[11],2)+Math.pow(n[12],2)+Math.pow(n[13],2)+Math.pow(n[14],2)+Math.pow(n[15],2))},void 0!==n&&(n.mat4=h);var d,m,v,g,y={};y.create=function(){var n=new e(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n},y.rotationTo=(d=s.create(),m=s.fromValues(1,0,0),v=s.fromValues(0,1,0),function(n,t,e){var r=s.dot(t,e);return r<-.999999?(s.cross(d,m,t),s.length(d)<1e-6&&s.cross(d,v,t),s.normalize(d,d),y.setAxisAngle(n,d,Math.PI),n):r>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(s.cross(d,t,e),n[0]=d[0],n[1]=d[1],n[2]=d[2],n[3]=1+r,y.normalize(n,n))}),y.setAxes=(g=p.create(),function(n,t,e,r){return g[0]=e[0],g[3]=e[1],g[6]=e[2],g[1]=r[0],g[4]=r[1],g[7]=r[2],g[2]=-t[0],g[5]=-t[1],g[8]=-t[2],y.normalize(n,y.fromMat3(n,g))}),y.clone=l.clone,y.fromValues=l.fromValues,y.copy=l.copy,y.set=l.set,y.identity=function(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n},y.setAxisAngle=function(n,t,e){e*=.5;var r=Math.sin(e);return n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=Math.cos(e),n},y.add=l.add,y.multiply=function(n,t,e){var r=t[0],o=t[1],a=t[2],i=t[3],u=e[0],s=e[1],l=e[2],c=e[3];return n[0]=r*c+i*u+o*l-a*s,n[1]=o*c+i*s+a*u-r*l,n[2]=a*c+i*l+r*s-o*u,n[3]=i*c-r*u-o*s-a*l,n},y.mul=y.multiply,y.scale=l.scale,y.rotateX=function(n,t,e){e*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(e),s=Math.cos(e);return n[0]=r*s+i*u,n[1]=o*s+a*u,n[2]=a*s-o*u,n[3]=i*s-r*u,n},y.rotateY=function(n,t,e){e*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(e),s=Math.cos(e);return n[0]=r*s-a*u,n[1]=o*s+i*u,n[2]=a*s+r*u,n[3]=i*s-o*u,n},y.rotateZ=function(n,t,e){e*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(e),s=Math.cos(e);return n[0]=r*s+o*u,n[1]=o*s-r*u,n[2]=a*s+i*u,n[3]=i*s-a*u,n},y.calculateW=function(n,t){var e=t[0],r=t[1],o=t[2];return n[0]=e,n[1]=r,n[2]=o,n[3]=Math.sqrt(Math.abs(1-e*e-r*r-o*o)),n},y.dot=l.dot,y.lerp=l.lerp,y.slerp=function(n,t,e,r){var o,a,i,u,s,l=t[0],c=t[1],f=t[2],p=t[3],h=e[0],d=e[1],m=e[2],v=e[3];return(a=l*h+c*d+f*m+p*v)<0&&(a=-a,h=-h,d=-d,m=-m,v=-v),1-a>1e-6?(o=Math.acos(a),i=Math.sin(o),u=Math.sin((1-r)*o)/i,s=Math.sin(r*o)/i):(u=1-r,s=r),n[0]=u*l+s*h,n[1]=u*c+s*d,n[2]=u*f+s*m,n[3]=u*p+s*v,n},y.invert=function(n,t){var e=t[0],r=t[1],o=t[2],a=t[3],i=e*e+r*r+o*o+a*a,u=i?1/i:0;return n[0]=-e*u,n[1]=-r*u,n[2]=-o*u,n[3]=a*u,n},y.conjugate=function(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n},y.length=l.length,y.len=y.length,y.squaredLength=l.squaredLength,y.sqrLen=y.squaredLength,y.normalize=l.normalize,y.fromMat3=function(n,t){var e,r=t[0]+t[4]+t[8];if(r>0)e=Math.sqrt(r+1),n[3]=.5*e,e=.5/e,n[0]=(t[5]-t[7])*e,n[1]=(t[6]-t[2])*e,n[2]=(t[1]-t[3])*e;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;e=Math.sqrt(t[3*o+o]-t[3*a+a]-t[3*i+i]+1),n[o]=.5*e,e=.5/e,n[3]=(t[3*a+i]-t[3*i+a])*e,n[a]=(t[3*a+o]+t[3*o+a])*e,n[i]=(t[3*i+o]+t[3*o+i])*e}return n},y.str=function(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},void 0!==n&&(n.quat=y)}(e.exports)}()},function(n,t,e){"use strict";var r=e(7),o=e(6),a=e(20);function i(n,t,e){return Math.min(t,Math.max(n,e))}n.exports.new=function(){return{aspect:1,zoom:.125,translation:{x:0,y:0},atomScale:.6,relativeAtomScale:1,bondScale:.5,rotation:r.mat4.create(),ao:.75,aoRes:256,brightness:.5,outline:0,spf:32,bonds:!1,bondThreshold:1.2,bondShade:.5,atomShade:.5,resolution:768,dofStrength:0,dofPosition:.5,fxaa:1}},n.exports.center=function(n,t){for(var e=-1/0,a=1/0,i=-1/0,u=1/0,s=0;s<t.atoms.length;s++){var l=t.atoms[s],c=o[l.symbol].radius;c=2.5*n.atomScale*(1+(c-1)*n.relativeAtomScale);var f=r.vec4.fromValues(l.x,l.y,l.z,0);r.vec4.transformMat4(f,f,n.rotation),e=Math.max(e,f[0]+c),a=Math.min(a,f[0]-c),i=Math.max(i,f[1]+c),u=Math.min(u,f[1]-c)}var p=a+(e-a)/2,h=u+(i-u)/2;n.translation.x=p,n.translation.y=h;var d=Math.max(e-a,i-u);n.zoom=1/(1.01*d)},n.exports.override=function(n,t){for(var e in t)n[e]=t[e];l(n)},n.exports.clone=function(n){return s(u(n))};var u=n.exports.serialize=function(n){return JSON.stringify(n)},s=n.exports.deserialize=function(n){return(n=JSON.parse(n)).rotation=r.mat4.clone(n.rotation),n},l=n.exports.resolve=function(n){n.dofStrength=i(0,1,n.dofStrength),n.dofPosition=i(0,1,n.dofPosition),n.zoom=i(.001,2,n.zoom),n.atomScale=i(0,1,n.atomScale),n.relativeAtomScale=i(0,1,n.relativeAtomScale),n.bondScale=i(0,1,n.bondScale),n.bondShade=i(0,1,n.bondShade),n.atomShade=i(0,1,n.atomShade),n.ao=i(0,1,n.ao),n.brightness=i(0,1,n.brightness),n.outline=i(0,1,n.outline)};n.exports.translate=function(n,t,e){n.translation.x-=t/(n.resolution*n.zoom),n.translation.y+=e/(n.resolution*n.zoom),l(n)},n.exports.rotate=function(n,t,e){var o=r.mat4.create();r.mat4.rotateY(o,o,.005*t),r.mat4.rotateX(o,o,.005*e),r.mat4.multiply(n.rotation,o,n.rotation);const a=n.ao;n.ao=0,l(n),n.ao=a},n.exports.getRect=function(n){var t=1/n.zoom,e=t/n.aspect;return{bottom:-e/2+n.translation.y,top:e/2+n.translation.y,left:-t/2+n.translation.x,right:t/2+n.translation.x}},n.exports.getBondRadius=function(n){return n.bondScale*n.atomScale*(1+(a.MIN_ATOM_RADIUS-1)*n.relativeAtomScale)}},function(n,t,e){"use strict";e.d(t,"a",function(){return a});var r=e(3),o=e(4);function a(n){return function t(e,a){switch(arguments.length){case 0:return t;case 1:return Object(o.a)(e)?t:Object(r.a)(function(t){return n(e,t)});default:return Object(o.a)(e)&&Object(o.a)(a)?t:Object(o.a)(e)?Object(r.a)(function(t){return n(t,a)}):Object(o.a)(a)?Object(r.a)(function(t){return n(e,t)}):n(e,a)}}}},function(n,t,e){"use strict";e.d(t,"a",function(){return d}),e.d(t,"c",function(){return m}),e.d(t,"b",function(){return v});var r=e(0),o=e.n(r),a=e(1),i=e.n(a),u=e(2);function s(n){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function l(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function c(n,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function f(n){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function p(n,t){return(p=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}var h=Object(a.lazy)(u.a.alignmentChart),d=function(n){function t(){return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,f(t).apply(this,arguments))}var e,r,o;return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&p(n,t)}(t,a["Component"]),e=t,(r=[{key:"render",value:function(){return i.a.createElement(a.Suspense,{fallback:null},i.a.createElement(h,this.props))}}])&&l(e.prototype,r),o&&l(e,o),t}();d.propTypes={id:o.a.string,setProps:o.a.func,eventDatum:o.a.string,data:o.a.string,extension:o.a.string,colorscale:o.a.oneOfType([o.a.string,o.a.object]),opacity:o.a.oneOfType([o.a.number,o.a.string]),textcolor:o.a.string,textsize:o.a.oneOfType([o.a.number,o.a.string]),showlabel:o.a.bool,showid:o.a.bool,showconservation:o.a.bool,conservationcolor:o.a.string,conservationcolorscale:o.a.oneOfType([o.a.string,o.a.array]),conservationopacity:o.a.oneOfType([o.a.number,o.a.string]),conservationmethod:o.a.oneOf(["conservation","entropy"]),correctgap:o.a.bool,showgap:o.a.bool,gapcolor:o.a.string,gapcolorscale:o.a.oneOfType([o.a.string,o.a.array]),gapopacity:o.a.oneOfType([o.a.number,o.a.string]),groupbars:o.a.bool,showconsensus:o.a.bool,tilewidth:o.a.number,tileheight:o.a.number,overview:o.a.oneOf(["heatmap","slider","none"]),numtiles:o.a.number,scrollskip:o.a.number,tickstart:o.a.oneOfType([o.a.number,o.a.string]),ticksteps:o.a.oneOfType([o.a.number,o.a.string]),width:o.a.oneOfType([o.a.number,o.a.string]),height:o.a.oneOfType([o.a.number,o.a.string])},d.defaultProps={extension:"fasta",colorscale:"clustal2",opacity:null,textcolor:null,textsize:10,showlabel:!0,showid:!0,showconservation:!0,conservationcolor:null,conservationcolorscale:"Viridis",conservationopacity:null,conservationmethod:"entropy",correctgap:!0,showgap:!0,gapcolor:"grey",gapcolorscale:null,gapopacity:null,groupbars:!1,showconsensus:!0,tilewidth:16,tileheight:16,numtiles:null,overview:"heatmap",scrollskip:10,tickstart:null,ticksteps:null,width:null,height:900};var m=d.propTypes,v=d.defaultProps},function(n,t,e){"use strict";e.d(t,"a",function(){return d}),e.d(t,"b",function(){return m}),e.d(t,"c",function(){return v});var r=e(0),o=e.n(r),a=e(1),i=e.n(a),u=e(2);function s(n){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function l(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function c(n,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function f(n){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function p(n,t){return(p=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}var h=Object(a.lazy)(u.a.ideogram),d=function(n){function t(){return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,f(t).apply(this,arguments))}var e,r,o;return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&p(n,t)}(t,a["Component"]),e=t,(r=[{key:"render",value:function(){return i.a.createElement(a.Suspense,{fallback:null},i.a.createElement(h,this.props))}}])&&l(e.prototype,r),o&&l(e,o),t}();d.defaultProps={organism:"human",dataDir:"https://unpkg.com/ideogram@1.5.0/dist/data/bands/native/",annotationsColor:"#F00",annotationsLayout:"tracks",barWidth:3,chrHeight:400,chrMargin:10,chrWidth:10,ploidy:1,rotatable:!0,showBandLabels:!1,showChromosomeLabels:!0,showAnnotTooltip:!0,showFullyBanded:!0,showNonNuclearChromosomes:!1},d.propTypes={id:o.a.string.isRequired,style:o.a.object,setProps:o.a.func,className:o.a.string,annotationsLayout:o.a.oneOf(["tracks","histogram","overlay"]),annotations:o.a.arrayOf(o.a.shape({name:o.a.string,chr:o.a.string,start:o.a.number,stop:o.a.number})),annotationsPath:o.a.string,annotationsData:o.a.string,annotationTracks:o.a.arrayOf(o.a.object),annotationHeight:o.a.number,annotationsColor:o.a.string,histogramScaling:o.a.oneOf(["absolute","relative"]),barWidth:o.a.number,showAnnotTooltip:o.a.bool,assembly:o.a.string,brush:o.a.string,brushData:o.a.shape({start:o.a.string,end:o.a.string,extent:o.a.string}),container:o.a.string,chrHeight:o.a.number,chrMargin:o.a.number,chrWidth:o.a.number,chromosomes:o.a.oneOfType([o.a.arrayOf(o.a.string),o.a.object]),dataDir:o.a.string,organism:o.a.oneOfType([o.a.string,o.a.number]),localOrganism:o.a.object,homology:o.a.shape({chrOne:o.a.shape({organism:o.a.string.isRequired,start:o.a.arrayOf(o.a.number.isRequired),stop:o.a.arrayOf(o.a.number.isRequired)}),chrTwo:o.a.shape({organism:o.a.string.isRequired,start:o.a.arrayOf(o.a.number.isRequired),stop:o.a.arrayOf(o.a.number.isRequired)})}),perspective:o.a.oneOf(["comparative"]),fullChromosomeLabels:o.a.bool,resolution:o.a.number,filterable:o.a.bool,orientation:o.a.oneOf(["vertical","horizontal"]),ploidy:o.a.number,ploidyDesc:o.a.arrayOf(o.a.object),ancestors:o.a.object,rangeSet:o.a.arrayOf(o.a.object),rotatable:o.a.bool,rotated:o.a.bool,sex:o.a.oneOf(["male","female"]),showChromosomeLabels:o.a.bool,showBandLabels:o.a.bool,showFullyBanded:o.a.bool,showNonNuclearChromosomes:o.a.bool};var m=d.defaultProps,v=d.propTypes},function(n,t,e){"use strict";e.d(t,"a",function(){return d}),e.d(t,"b",function(){return m}),e.d(t,"c",function(){return v});var r=e(0),o=e.n(r),a=e(1),i=e.n(a),u=e(2);function s(n){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function l(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function c(n,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function f(n){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function p(n,t){return(p=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}var h=Object(a.lazy)(u.a.molecule2dViewer),d=function(n){function t(){return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,f(t).apply(this,arguments))}var e,r,o;return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&p(n,t)}(t,a["Component"]),e=t,(r=[{key:"render",value:function(){return i.a.createElement(a.Suspense,{fallback:null},i.a.createElement(h,this.props))}}])&&l(e.prototype,r),o&&l(e,o),t}();d.defaultProps={width:500,height:500,modelData:{nodes:[],links:[]}},d.propTypes={id:o.a.string,setProps:o.a.func,selectedAtomIds:o.a.arrayOf(o.a.number),width:o.a.number,height:o.a.number,modelData:o.a.shape({nodes:o.a.arrayOf(o.a.shape({id:o.a.number,atom:o.a.string})),links:o.a.arrayOf(o.a.shape({id:o.a.number,source:o.a.number|o.a.shape,target:o.a.number|o.a.shape,bond:o.a.number,strength:o.a.number,distance:o.a.number}))})};var m=d.defaultProps,v=d.propTypes},function(n,t,e){"use strict";e.d(t,"a",function(){return d}),e.d(t,"b",function(){return m}),e.d(t,"c",function(){return v});var r=e(0),o=e.n(r),a=e(1),i=e.n(a),u=e(2);function s(n){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function l(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function c(n,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function f(n){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function p(n,t){return(p=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}var h=Object(a.lazy)(u.a.molecule3dViewer),d=function(n){function t(){return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,f(t).apply(this,arguments))}var e,r,o;return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&p(n,t)}(t,a["Component"]),e=t,(r=[{key:"render",value:function(){return i.a.createElement(a.Suspense,{fallback:null},i.a.createElement(h,this.props))}}])&&l(e.prototype,r),o&&l(e,o),t}();d.defaultProps={selectionType:"atom",backgroundColor:"#FFFFFF",backgroundOpacity:0},d.propTypes={id:o.a.string,setProps:o.a.func,selectionType:o.a.oneOf(["atom","residue","chain"]),backgroundColor:o.a.string,backgroundOpacity:o.a.number,styles:o.a.arrayOf(o.a.shape({color:o.a.string,visualization_type:o.a.oneOf(["cartoon","sphere","stick"])})),modelData:o.a.shape({atoms:o.a.array,bonds:o.a.array}),atomLabelsShown:o.a.bool,selectedAtomIds:o.a.array,labels:o.a.array,onRenderNewData:o.a.func,onChangeSelection:o.a.func};var m=d.defaultProps,v=d.propTypes},function(n,t,e){"use strict";e.d(t,"a",function(){return d}),e.d(t,"b",function(){return m}),e.d(t,"c",function(){return v});var r=e(0),o=e.n(r),a=e(1),i=e.n(a),u=e(2);function s(n){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function l(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function c(n,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function f(n){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function p(n,t){return(p=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}var h=Object(a.lazy)(u.a.needlePlot),d=function(n){function t(){return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,f(t).apply(this,arguments))}var e,r,o;return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&p(n,t)}(t,a["Component"]),e=t,(r=[{key:"render",value:function(){return i.a.createElement(a.Suspense,{fallback:null},i.a.createElement(h,this.props))}}])&&l(e.prototype,r),o&&l(e,o),t}();d.propTypes={id:o.a.string,mutationData:o.a.shape({x:o.a.oneOfType([o.a.string,o.a.array]),y:o.a.oneOfType([o.a.string,o.a.array]),mutationGroups:o.a.arrayOf(o.a.string),domains:o.a.array}),xlabel:o.a.string,ylabel:o.a.string,rangeSlider:o.a.bool,needleStyle:o.a.shape({stemColor:o.a.string,stemThickness:o.a.number,stemConstHeight:o.a.bool,headSize:o.a.number,headColor:o.a.oneOfType([o.a.array,o.a.string]),headSymbol:o.a.oneOfType([o.a.array,o.a.string])}),domainStyle:o.a.shape({domainColor:o.a.array,displayMinorDomains:o.a.bool}),setProps:o.a.func},d.defaultProps={mutationData:{x:[],y:[],domains:[],mutationGroups:[]},rangeSlider:!1,needleStyle:{stemColor:"#444",stemThickness:.5,stemConstHeight:!1,headSize:5,headColor:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#e41a1c"],headSymbol:"circle"},domainStyle:{displayMinorDomains:!1,domainColor:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f","#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"]}};var m=d.defaultProps,v=d.propTypes},function(n,t,e){"use strict";e.d(t,"a",function(){return d}),e.d(t,"b",function(){return m}),e.d(t,"c",function(){return v});var r=e(0),o=e.n(r),a=e(1),i=e.n(a),u=e(2);function s(n){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function l(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function c(n,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function f(n){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function p(n,t){return(p=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}var h=Object(a.lazy)(u.a.oncoPrint),d=function(n){function t(){return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,f(t).apply(this,arguments))}var e,r,o;return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&p(n,t)}(t,a["Component"]),e=t,(r=[{key:"render",value:function(){return i.a.createElement(a.Suspense,{fallback:null},i.a.createElement(h,this.props))}}])&&l(e.prototype,r),o&&l(e,o),t}();d.propTypes={id:o.a.string,setProps:o.a.func,eventDatum:o.a.object,data:o.a.array,padding:o.a.number,colorscale:o.a.oneOfType([o.a.bool,o.a.object]),backgroundcolor:o.a.string,range:o.a.array,showlegend:o.a.bool,showoverview:o.a.bool,width:o.a.oneOfType([o.a.number,o.a.string]),height:o.a.oneOfType([o.a.number,o.a.string])},d.defaultProps={padding:.05,colorscale:null,backgroundcolor:"rgb(190, 190, 190)",range:[null,null],showlegend:!0,showoverview:!0,width:null,height:500};var m=d.defaultProps,v=d.propTypes},function(n,t,e){"use strict";e.d(t,"a",function(){return d}),e.d(t,"b",function(){return m}),e.d(t,"c",function(){return v});var r=e(0),o=e.n(r),a=e(1),i=e.n(a),u=e(2);function s(n){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function l(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function c(n,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function f(n){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function p(n,t){return(p=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}var h=Object(a.lazy)(u.a.sequenceViewer),d=function(n){function t(){return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,f(t).apply(this,arguments))}var e,r,o;return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&p(n,t)}(t,a["Component"]),e=t,(r=[{key:"render",value:function(){return i.a.createElement(a.Suspense,{fallback:null},i.a.createElement(h,this.props))}}])&&l(e.prototype,r),o&&l(e,o),t}();d.defaultProps={sequence:"-",showLineNumbers:!0,wrapAminoAcids:!0,charsPerLine:40,toolbar:!1,search:!0,title:"",sequenceMaxHeight:"400px",badge:!0,selection:[],coverage:[]},d.propTypes={id:o.a.string,sequence:o.a.string,showLineNumbers:o.a.bool,wrapAminoAcids:o.a.bool,charsPerLine:o.a.number,toolbar:o.a.bool,search:o.a.bool,title:o.a.string,sequenceMaxHeight:o.a.string,badge:o.a.bool,selection:function(n,t,e){if(void 0!==n[t]&&(void 0!==n[t][0]&&"number"!=typeof n[t][0]||void 0!==n[t][1]&&"number"!=typeof n[t][1]||void 0!==n[t][2]&&"string"!=typeof n[t][2]))return new Error("Invalid prop value. Selection should be an array with type [number, number, string].")},coverage:o.a.arrayOf(o.a.shape({start:o.a.number,end:o.a.number,color:o.a.string,bgcolor:o.a.string,tooltip:o.a.string,underscore:o.a.bool,onclick:o.a.func})),legend:o.a.arrayOf(o.a.shape({name:o.a.string,color:o.a.string,underscore:o.a.bool})),coverageClicked:o.a.number,mouseSelection:o.a.shape({start:o.a.number,end:o.a.number,selection:o.a.string}),subpartSelected:o.a.arrayOf(o.a.shape({start:o.a.number,end:o.a.number,sequence:o.a.string})),setProps:o.a.func};var m=d.defaultProps,v=d.propTypes},function(n,t,e){"use strict";e.d(t,"a",function(){return m}),e.d(t,"b",function(){return v}),e.d(t,"c",function(){return g});var r=e(0),o=e.n(r),a=e(1),i=e.n(a),u=e(2),s=e(19);function l(n){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function c(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function f(n,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function p(n){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function h(n,t){return(h=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}var d=Object(a.lazy)(u.a.speck),m=function(n){function t(){return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}var e,r,o;return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&h(n,t)}(t,a["Component"]),e=t,(r=[{key:"render",value:function(){return i.a.createElement(a.Suspense,{fallback:null},i.a.createElement(d,this.props))}}])&&c(e.prototype,r),o&&c(e,o),t}();m.defaultProps={view:s.speckView.new(),data:[]},m.propTypes={id:o.a.string,data:o.a.arrayOf(o.a.shape({symbol:o.a.string,x:o.a.number,y:o.a.number,z:o.a.number})),scrollZoom:o.a.bool,view:o.a.shape({aspect:o.a.number,zoom:o.a.number,translation:o.a.shape({x:o.a.number,y:o.a.number}),atomScale:o.a.number,relativeAtomScale:o.a.number,bondScale:o.a.number,rotation:o.a.shape({}),ao:o.a.number,aoRes:o.a.number,brightness:o.a.number,outline:o.a.number,spf:o.a.number,bonds:o.a.bool,bondThreshold:o.a.number,bondShade:o.a.number,atomShade:o.a.number,resolution:o.a.number,dofStrength:o.a.number,dofPosition:o.a.number,fxaa:o.a.number}),presetView:o.a.oneOf(["default","stickball","toon","licorice"]),setProps:o.a.func};var v=m.defaultProps,g=m.propTypes},function(n,t,e){"use strict";var r=e(0),o=e.n(r),a=e(1),i=e.n(a),u=e(2),s=["CHORDS","HEATMAP","HIGHLIGHT","HISTOGRAM","LINE","SCATTER","STACK","TEXT"];function l(n){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function c(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function f(n,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function p(n){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function h(n,t){return(h=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}e.d(t,"a",function(){return m}),e.d(t,"c",function(){return v}),e.d(t,"b",function(){return g});var d=Object(a.lazy)(u.a.circos),m=function(n){function t(){return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}var e,r,o;return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&h(n,t)}(t,a["Component"]),e=t,(r=[{key:"render",value:function(){return i.a.createElement(a.Suspense,{fallback:null},i.a.createElement(d,this.props))}}])&&c(e.prototype,r),o&&c(e,o),t}();m.defaultProps={config:{},size:800,tracks:[]},m.propTypes={enableDownloadSVG:o.a.bool,enableZoomPan:o.a.bool,id:o.a.string,style:o.a.object,eventDatum:o.a.object,selectEvent:o.a.object,setProps:o.a.func,layout:o.a.arrayOf(o.a.shape({len:o.a.number.isRequired,color:o.a.string.isRequired,label:o.a.string.isRequired,id:o.a.string.isRequired})).isRequired,config:o.a.object,size:o.a.number,tracks:o.a.arrayOf(o.a.shape({id:o.a.string,data:o.a.array.isRequired,config:o.a.object,type:o.a.oneOf(s),tooltipContent:o.a.oneOfType([o.a.string,o.a.shape({name:o.a.string.isRequired}),o.a.shape({source:o.a.string.isRequired,sourceID:o.a.string,target:o.a.string.isRequired,targetEnd:o.a.string.isRequired,targetID:o.a.string})]),color:o.a.oneOfType([o.a.string,o.a.shape({name:o.a.string.isRequired})])}))};var v=m.propTypes,g=m.defaultProps},function(n,t,e){const r=e(25),o=e(21),a=e(8),i=e(29),u=e(30);n.exports={speckRenderer:r,speckSystem:o,speckView:a,speckInteractions:i,speckPresetViews:u}},function(n,t,e){"use strict";for(var r=e(6),o=1/0,a=-1/0,i=0;i<=118;i++)o=Math.min(o,r[i].radius),a=Math.max(a,r[i].radius);n.exports.MIN_ATOM_RADIUS=o,n.exports.MAX_ATOM_RADIUS=a},function(n,t,e){"use strict";var r=e(7),o=e(6),a=e(20),i=(n.exports.new=function(){return{atoms:[],farAtom:void 0,bonds:[]}},n.exports.calculateBonds=function(n){var t=[],e=n.atoms.slice();e.sort(function(n,t){return n.z-t.z});for(var i=0;i<e.length;i++)for(var u=e[i],s=i+1;s<e.length&&e[s].z<e[i].z+5*a.MAX_ATOM_RADIUS;){var l=e[s],c=r.vec3.fromValues(u.x,u.y,u.z),f=r.vec3.fromValues(l.x,l.y,l.z),p=r.vec3.distance(c,f),h=o[u.symbol],d=o[l.symbol];p<2.5*(h.radius+d.radius)&&t.push({posA:{x:u.x,y:u.y,z:u.z},posB:{x:l.x,y:l.y,z:l.z},radA:h.radius,radB:d.radius,colA:{r:h.color[0],g:h.color[1],b:h.color[2]},colB:{r:d.color[0],g:d.color[1],b:d.color[2]},cutoff:p/(h.radius+d.radius)}),s++}t.sort(function(n,t){return n.cutoff-t.cutoff}),n.bonds=t},n.exports.addAtom=function(n,t,e,r,o){n.atoms.push({symbol:t,x:e,y:r,z:o})},n.exports.getCentroid=function(n){for(var t=0,e=0,r=0,o=0;o<n.atoms.length;o++)t+=n.atoms[o].x,e+=n.atoms[o].y,r+=n.atoms[o].z;return{x:t/n.atoms.length,y:e/n.atoms.length,z:r/n.atoms.length}}),u=(n.exports.center=function(n){for(var t=i(n),e=0;e<n.atoms.length;e++){var r=n.atoms[e];r.x-=t.x,r.y-=t.y,r.z-=t.z}},n.exports.getFarAtom=function(n){if(void 0!==n.farAtom)return n.farAtom;n.farAtom=n.atoms[0];for(var t=0,e=0;e<n.atoms.length;e++){var r=n.atoms[e],a=o[r.symbol].radius,i=2.5*Math.sqrt(a*a+a*a+a*a),u=Math.sqrt(r.x*r.x+r.y*r.y+r.z*r.z)+i;u>t&&(t=u,n.farAtom=r)}return n.farAtom});n.exports.getRadius=function(n){var t=u(n),e=a.MAX_ATOM_RADIUS,r=2.5*Math.sqrt(e*e+e*e+e*e);return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)+r}},function(n,t,e){n.exports=function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FornaContainer=function(n,t){function e(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function o(n){var t=n,r=n.prevNode;if(null!==r&&n.linked){var o=[-(t.x-r.x),-(t.y-r.y)],i=[-(o=[o[0]/e(o),o[1]/e(o)])[1],o[0]],u=[n.radius*o[0],n.radius*o[1]],s="M"+(u[0]+6*(o[0]+i[0])/2)+","+(u[1]+6*(o[1]+i[1])/2)+"L"+u[0]+","+u[1]+"L"+(u[0]+6*(o[0]-i[0])/2)+","+(u[1]+6*(o[1]-i[1])/2);a.default.select(this).attr("d",s)}}function c(n){return"basepair"==n.linkType||"backbone"==n.linkType||"pseudoknot"==n.linkType||"label_link"==n.linkType||"external"==n.linkType||"chain_chain"==n.linkType}function f(n,t,e){if(n.hasOwnProperty(t.num)){var r=parseFloat(n[t.num]);return isNaN(r)?n[t.num]:e(r)}return"white"}function p(){b=null,x=null}function h(n){var t=R.selectAll("g.gnode");return t.filter(function(n){return n.selected})}function d(n){var t=n.radius+16,e=n.x-t,r=n.x+t,o=n.y-t,a=n.y+t;return function(t,i,u,s,l){if(t.point&&t.point!==n){var c=n.x-t.point.x,f=n.y-t.point.y,p=Math.sqrt(c*c+f*f),h=n.radius+t.point.radius;h>p&&(p=(p-h)/p*.1,n.x-=c*=p,n.y-=f*=p,t.point.x+=c,t.point.y+=f)}return i>r||e>s||u>a||o>l}}function m(){if(!g.deaf&&!N){switch(a.default.event.keyCode){case 16:N=!0;break;case 17:O=!0;break;case 67:g.centerView()}(N||O)&&(S.call(g.zoomer).on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),T.selectAll("g.gnode").on("mousedown.drag",null)),O&&(A.select(".background").style("cursor","crosshair"),A.call(g.brusher))}}function v(){N=!1,O=!1,A.call(g.brusher).on("mousedown.brush",null).on("touchstart.brush",null).on("touchmove.brush",null).on("touchend.brush",null),A.select(".background").style("cursor","auto"),S.call(g.zoomer),T.selectAll("g.gnode").call(C)}var g=this;if(g.options={displayAllLinks:!1,labelInterval:10,applyForce:!0,initialSize:null,allowPanningAndZooming:!0,transitionDuration:500,resizeSvgOnResize:!0},arguments.length>1)for(var y in t)g.options.hasOwnProperty(y)&&(g.options[y]=t[y]);null!==g.options.initialSize?(g.options.svgW=g.options.initialSize[0],g.options.svgH=g.options.initialSize[1]):(g.options.svgW=800,g.options.svgH=800),a.default.scale.category20();var b=null,x=null,M=a.default.scale.linear().domain([0,g.options.svgW]).range([0,g.options.svgW]),w=a.default.scale.linear().domain([0,g.options.svgH]).range([0,g.options.svgH]),k=g.graph={nodes:[],links:[]};g.linkStrengths={pseudoknot:0,proteinChain:0,chainChain:0,intermolecule:10,external:0,other:10},g.displayParameters={displayBackground:"true",displayNumbering:"true",displayNodeOutline:"true",displayNodeLabel:"true",displayLinks:"true",displayPseudoknotLinks:"true",displayProteinLinks:"true"},g.colorScheme="structure",g.customColors={},g.animation=g.options.applyForce,g.deaf=!1,g.rnas={},g.extraLinks=[],Array.prototype.equals=function(n){if(!n)return!1;if(this.length!=n.length)return!1;for(var t=0,e=this.length;e>t;t++)if(this[t]instanceof Array&&n[t]instanceof Array){if(!this[t].equals(n[t]))return!1}else if(this[t]!=n[t])return!1;return!0},g.createInitialLayout=function(n,t){var e={sequence:"",name:"empty",positions:[],labelInterval:g.options.labelInterval,avoidOthers:!0,uids:[],circularizeExternal:!0};if(2==arguments.length)for(var r in t)e.hasOwnProperty(r)&&(e[r]=t[r]);var o=new u.RNAGraph(e.sequence,n,e.name);o.circularizeExternal=e.circularizeExternal;var a=o.recalculateElements();return 0===e.positions.length&&(e.positions=(0,s.simpleXyCoordinates)(a.pairtable)),a=a.elementsToJson().addUids(e.uids).addPositions("nucleotide",e.positions).addLabels(1,e.labelInterval).reinforceStems().reinforceLoops().connectFakeNodes().reassignLinkUids().breakNodesToFakeNodes()},g.addRNA=function(n,t){var e=g.createInitialLayout(n,t);if(1===arguments.length&&(t={}),"extraLinks"in t){var r=g.addExternalLinks(e,t.extraLinks);g.extraLinks=g.extraLinks.concat(r)}return"avoidOthers"in t?g.addRNAJSON(e,t.avoidOthers):g.addRNAJSON(e,!0),e},g.addExternalLinks=function(n,t){for(var e=[],r=0;r<t.length;r++){var o={linkType:"external",value:1,uid:generateUUID(),source:null,target:null};if("[object Array]"===Object.prototype.toString.call(t[r][0])){for(var a=0;a<n.nodes.length;a++)if("nucs"in n.nodes[a]&&n.nodes[a].nucs.equals(t[r][0])){o.source=n.nodes[a];break}}else for(var a=0;a<n.nodes.length;a++)n.nodes[a].num==t[r][0]&&(o.source=n.nodes[a]);if("[object Array]"===Object.prototype.toString.call(t[r][1]))for(var a=0;a<n.nodes.length;a++)"nucs"in n.nodes[a]&&n.nodes[a].nucs.equals(t[r][1])&&(o.target=n.nodes[a]);else for(var a=0;a<n.nodes.length;a++)n.nodes[a].num==t[r][1]&&(o.target=n.nodes[a]);null!=o.source&&null!=o.target?e.push(o):console.log("ERROR: source or target of new link not found:",o,t[r])}return e},g.addRNAJSON=function(n,t){var e,r;return t&&(e=g.graph.nodes.length>0?a.default.max(g.graph.nodes.map(function(n){return n.x})):0,r=a.default.min(n.nodes.map(function(n){return n.x})),n.nodes.forEach(function(n){n.x+=e-r+20,n.px+=e-r})),n.nodes.forEach(function(t){t.rna=n}),g.rnas[n.uid]=n,g.recalculateGraph(),g.update(),g.centerView(),n},g.transitionRNA=function(n,t){var e=g.options.transitionDuration,r=g.graph.nodes.filter(function(n){return"nucleotide"==n.nodeType}).map(function(n){return n.uid}),a={uids:r},i=g.createInitialLayout(n,a),u=R.selectAll("g.gnode").data(i.nodes,U),e=g.options.transitionDuration;0===e?u.attr("transform",function(n){return"translate("+[n.x,n.y]+")"}):u.transition().attr("transform",function(n){return"translate("+[n.x,n.y]+")"}).duration(e);var s=E.selectAll("line.link").data(i.links.filter(c),L),l=g.createNewNodes(u.enter()).attr("transform",function(n){return void 0!==n.x&&void 0!==n.y?"translate("+[0,0]+")":""});0===e?u.exit().remove():u.exit().transition().attr("transform",function(n){return void 0!==n.x&&void 0!==n.y?"translate("+[0,0]+")":""}),u.select("path").each(o),g.graph.nodes=u.data(),g.updateStyle(),g.centerView(e),s.exit().remove(),0===e?(s.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y}),g.createNewLinks(s.enter()),g.graph.links=s.data(),g.updateStyle()):s.transition().attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y}).duration(e).call(function(n,t){0===n.size()&&setTimeout(t,e);var r=0;n.each(function(){++r}).each("end",function(){--r||t.apply(this,arguments)})},function(){g.createNewLinks(s.enter()),g.graph.links=s.data(),g.updateStyle(),void 0!==t&&t()}),0===e?l.attr("transform",function(n){return void 0!==n.x&&void 0!==n.y?"translate("+[n.x,n.y]+")":""}):l.transition().attr("transform",function(n){return void 0!==n.x&&void 0!==n.y?"translate("+[n.x,n.y]+")":""})},g.recalculateGraph=function(){for(var n in g.graph.nodes=[],g.graph.links=[],g.rnas)g.graph.nodes=g.graph.nodes.concat(g.rnas[n].nodes),g.graph.links=g.graph.links.concat(g.rnas[n].links);for(var t={},e=0;e<g.graph.nodes.length;e++)t[g.graph.nodes[e].uid]=g.graph.nodes[e];for(g.graph.links.forEach(function(n){n.source=t[n.source.uid],n.target=t[n.target.uid]}),e=0;e<g.extraLinks.length;e++){if(g.extraLinks[e].target.uid in t||console.log("not there:",g.extraLinks[e]),g.extraLinks[e].source=t[g.extraLinks[e].source.uid],g.extraLinks[e].target=t[g.extraLinks[e].target.uid],"intermolecule"==g.extraLinks[e].linkType){fakeLinks=g.graph.links.filter(function(n){return(n.source==g.extraLinks[e].source||n.source==g.extraLinks[e].target||n.target==g.extraLinks[e].source||n.target==g.extraLinks[e].source)&&"fake"==n.linkType});for(var r=0;r<fakeLinks.length;r++){var o=g.graph.links.indexOf(fakeLinks[r]);g.graph.links.splice(o,1)}}k.links.push(g.extraLinks[e])}},g.addNodes=function(n){n.links.forEach(function(t){"number"==typeof t.source&&(t.source=n.nodes[t.source]),"number"==typeof t.target&&(t.target=n.nodes[t.target])}),g.graph.nodes.length>0?(maxX=a.default.max(g.graph.nodes.map(function(n){return n.x})),maxY=a.default.max(g.graph.nodes.map(function(n){return n.y}))):(maxX=0,maxY=0),n.nodes.forEach(function(n){n.rna.uid in g.rnas||(g.rnas[n.rna.uid]=n.rna),n.x+=maxX,n.px+=maxX}),r=new u.RNAGraph("",""),r.nodes=n.nodes,r.links=n.links,g.recalculateGraph(),g.update(),g.centerView()},g.addCustomColors=function(n){g.customColors=n},g.addCustomColorsText=function(n){var t=new l.ColorScheme(n);g.customColors=t.colorsJson,g.changeColorScheme("custom")},g.clearNodes=function(){g.graph.nodes=[],g.graph.links=[],g.rnas={},g.extraLinks=[],g.update()},g.toJSON=function(){var n={rnas:g.rnas,extraLinks:g.extraLinks},t=JSON.stringify(n,function(n,t){return"rna"==n?void 0:t},"\t");return t},g.fromJSON=function(n){var t,e;try{var o=JSON.parse(n);t=o.rnas,e=o.extraLinks}catch(n){throw n}for(var a in t)"rna"==t[a].type?(r=new u.RNAGraph,r.seq=t[a].seq,r.dotbracket=t[a].dotbracket,r.circular=t[a].circular,r.pairtable=t[a].pairtable,r.uid=t[a].uid,r.structName=t[a].structName,r.nodes=t[a].nodes,r.links=t[a].links,r.rnaLength=t[a].rnaLength,r.elements=t[a].elements,r.nucsToNodes=t[a].nucsToNodes,r.pseudoknotPairs=t[a].pseudoknotPairs):(r=new ProteinGraph,r.size=t[a].size,r.nodes=t[a].nodes,r.uid=t[a].uid),g.addRNAJSON(r,!1);e.forEach(function(n){g.extraLinks.push(n)}),g.recalculateGraph(),g.update()},g.setSize=function(){if(null==g.options.initialSize){var t=a.default.select(n).node().offsetHeight,e=a.default.select(n).node().offsetWidth;g.options.svgW=e,g.options.svgH=t,M.range([0,e]).domain([0,e]),w.range([0,t]).domain([0,t]),g.zoomer.x(M).y(w),g.brusher.x(M).y(w),g.centerView(),g.options.resizeSvgOnResize&&_.attr("width",e).attr("height",t)}},g.setOutlineColor=function(n){var t=R.selectAll("g.gnode").select("[node_type=nucleotide]");t.style("fill",n)},g.changeColorScheme=function(n){var t=R.selectAll("[node_type=protein]");t.classed("protein",!0).attr("r",function(n){return n.radius});var e=(R.selectAll("g.gnode"),R.selectAll("g.gnode").selectAll("circle"),R.selectAll("g.gnode").select("[node_type=nucleotide]"));if(g.colorScheme=n,"sequence"==n){var r=a.default.scale.ordinal().range(["#dbdb8d","#98df8a","#ff9896","#aec7e8","#aec7e8"]).domain(["A","C","G","U","T"]);e.style("fill",function(n){return r(n.name)})}else if("structure"==n){var r=a.default.scale.category10().domain(["s","m","i","e","t","h","x"]).range(["lightgreen","#ff9896","#dbdb8d","lightsalmon","lightcyan","lightblue","transparent"]);e.style("fill",function(n){return r(n.elemType)})}else if("positions"==n)e.style("fill",function(n){var t=a.default.scale.linear().range(["#98df8a","#dbdb8d","#ff9896"]).interpolate(a.default.interpolateLab).domain([1,1+(n.rna.rnaLength-1)/2,n.rna.rnaLength]);return t(n.num)});else if("custom"==n){if(void 0!==g.customColors&&"domain"in g.customColors&&"range"in g.customColors)var r=a.default.scale.linear().interpolate(a.default.interpolateLab).domain(g.customColors.domain).range(g.customColors.range);e.style("fill",function(n){if(void 0===g.customColors||!g.customColors.hasOwnProperty("colorValues"))return"white";if(g.customColors.colorValues.hasOwnProperty(n.structName)&&g.customColors.colorValues[n.structName].hasOwnProperty(n.num)){var t=g.customColors.colorValues[n.structName];return f(t,n,r)}if(g.customColors.colorValues.hasOwnProperty("")){var t=g.customColors.colorValues[""];return f(t,n,r)}return"white"})}},window.addEventListener("resize",g.setSize,!1),g.zoomer=a.default.behavior.zoom().scaleExtent([.1,10]).x(M).y(w).on("zoomstart",function(){var n=R.selectAll("g.gnode").selectAll(".outline_node");n.each(function(n){n.selected=!1,n.previouslySelected=!1}),n.classed("selected",!1)}).on("zoom",function(){T.attr("transform","translate("+a.default.event.translate+") scale("+a.default.event.scale+")")}),a.default.select(n).select("svg").remove();var _=a.default.select(n).attr("tabindex",1).on("keydown.brush",m).on("keyup.brush",v).each(function(){this.focus()}).append("svg:svg").attr("width",g.options.svgW).attr("height",g.options.svgH).attr("id","plotting-area");g.options.svg=_;var S=_.append("svg:g").on("mousemove",function(){b&&(mpos=a.default.mouse(T.node()),P.attr("x1",b.x).attr("y1",b.y).attr("x2",mpos[0]).attr("y2",mpos[1]))}).on("mousedown",function(){}).on("mouseup",function(){b&&P.attr("class","drag_line_hidden"),p()});g.options.allowPanningAndZooming&&S.call(g.zoomer);var A=S.append("g").datum(function(){return{selected:!1,previouslySelected:!1}}).attr("class","brush"),T=S.append("svg:g"),E=T.append("svg:g"),R=T.append("svg:g");g.brusher=a.default.svg.brush().x(M).y(w).on("brushstart",function(n){var t=R.selectAll("g.gnode").selectAll(".outline_node");t.each(function(n){n.previouslySelected=O&&n.selected})}).on("brush",function(){var n=R.selectAll("g.gnode").selectAll(".outline_node"),t=a.default.event.target.extent();n.classed("selected",function(n){return n.selected=g.options.applyForce&&n.previouslySelected^(t[0][0]<=n.x&&n.x<t[1][0]&&t[0][1]<=n.y&&n.y<t[1][1])})}).on("brushend",function(){a.default.event.target.clear(),a.default.select(this).call(a.default.event.target)}),A.call(g.brusher).on("mousedown.brush",null).on("touchstart.brush",null).on("touchmove.brush",null).on("touchend.brush",null),A.select(".background").style("cursor","auto"),g.getBoundingBoxTransform=function(){if(0===g.graph.nodes.length)return{translate:[0,0],scale:1};var n=a.default.min(g.graph.nodes.map(function(n){return n.x})),t=a.default.min(g.graph.nodes.map(function(n){return n.y})),e=a.default.max(g.graph.nodes.map(function(n){return n.x})),r=a.default.max(g.graph.nodes.map(function(n){return n.y})),o=e-n,i=r-t,u=g.options.svgW/(o+1),s=g.options.svgH/(i+1),l=.8*Math.min(u,s),c=o*l,f=i*l,p=-n*l+(g.options.svgW-c)/2,h=-t*l+(g.options.svgH-f)/2;return{translate:[p,h],scale:l}},g.centerView=function(n){0===arguments.length&&(n=0);var t=g.getBoundingBoxTransform();null!==t&&(T.transition().attr("transform","translate("+t.translate+") scale("+t.scale+")").duration(n),g.zoomer.translate(t.translate),g.zoomer.scale(t.scale))},g.force=a.default.layout.force().charge(function(n){return n.nodeType,-30}).chargeDistance(300).friction(.35).linkDistance(function(n){return 15*n.value}).linkStrength(function(n){return n.linkType in g.linkStrengths?g.linkStrengths[n.linkType]:g.linkStrengths.other}).gravity(0).nodes(g.graph.nodes).links(g.graph.links).chargeDistance(110).size([g.options.svgW,g.options.svgH]);var P=T.append("line").attr("class","drag_line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0),N=!1,O=!1;g.resumeForce=function(){g.animation&&g.force.resume()};var C=a.default.behavior.drag().on("dragstart",function(n){if(a.default.event.sourceEvent.stopPropagation(),!n.selected&&!O){var t=R.selectAll("g.gnode").selectAll(".outline_node");t.classed("selected",function(n){return n.selected=g.options.applyForce&&(n.previouslySelected=!1)})}a.default.select(this).select(".outline_node").classed("selected",function(t){return n.previouslySelected=n.selected,n.selected=g.options.applyForce&&!0}),h(n).each(function(n){n.fixed|=2})}).on("drag",function(n){h(n).each(function(n){n.x+=a.default.event.dx,n.y+=a.default.event.dy,n.px+=a.default.event.dx,n.py+=a.default.event.dy}),g.resumeForce(),a.default.event.sourceEvent.preventDefault()}).on("dragend",function(n){h(n).each(function(n){n.fixed&=-7})});a.default.select(n).on("keydown",m).on("keyup",v).on("contextmenu",function(){a.default.event.preventDefault()});var L=function(n){return n.uid},U=function(n){var t=n.uid;return t},D=function(n){var t=n.getPositions("nucleotide"),e=n.getPositions("label"),r=n.getUids();n.recalculateElements().elementsToJson().addPseudoknots().addPositions("nucleotide",t).addUids(r).addLabels(1,g.options.labelInterval).addPositions("label",e).reinforceStems().reinforceLoops().updateLinkUids()},z=function(n){N&&(n.linkType in{backbone:!0,fake:!0,fake_fake:!0,label_link:!0}||function(n){if(index=g.graph.links.indexOf(n),index>-1){if(n.source.rna==n.target.rna){var t=n.source.rna;t.addPseudoknots(),t.pairtable[n.source.num]=0,t.pairtable[n.target.num]=0,D(t)}else extraLinkIndex=g.extraLinks.indexOf(n),g.extraLinks.splice(extraLinkIndex,1);g.recalculateGraph()}g.update()}(n))};g.addLink=function(n){n.source.rna==n.target.rna?(r=n.source.rna,r.pairtable[n.source.num]=n.target.num,r.pairtable[n.target.num]=n.source.num,D(r)):(n.linkType="intermolecule",g.extraLinks.push(n)),g.recalculateGraph(),g.update()};var F=function(n){if(!a.default.event.defaultPrevented){if(!O){var t=R.selectAll("g.gnode").selectAll(".outline_node");t.classed("selected",function(n){return n.selected=g.options.applyForce&&(n.previouslySelected=!1)})}a.default.select(this).select("circle").classed("selected",n.selected=g.options.applyForce&&!n.previouslySelected)}},q=function(n){if(b){if((x=n)==b)return void p();var t={source:b,target:x,linkType:"basepair",value:1,uid:generateUUID()};for(i=0;i<g.graph.links.length;i++){if(!(g.graph.links[i].source!=b&&g.graph.links[i].target!=b&&g.graph.links[i].source!=x&&g.graph.links[i].target!=x||"basepair"!=g.graph.links[i].linkType&&"pseudoknot"!=g.graph.links[i].linkType))return;if((g.graph.links[i].source==x&&g.graph.links[i].target==b||g.graph.links[i].source==b&&g.graph.links[i].target==x)&&"backbone"==g.graph.links[i].linkType)return}if("middle"==x.nodeType||"middle"==b.nodeType||"label"==x.nodeType||"label"==b.nodeType)return;g.addLink(t)}},j=function(n){if(!n.selected&&!O){var t=R.selectAll("g.gnode").selectAll(".outline_node");t.classed("selected",function(n){return n.selected=n.previouslySelected=!1})}a.default.select(this).classed("selected",function(t){return n.previouslySelected=n.selected,n.selected=g.options.applyForce&&!0}),N&&(b=n,P.attr("class","drag_line").attr("x1",b.x).attr("y1",b.y).attr("x2",b.x).attr("y2",b.y))};g.startAnimation=function(){g.animation=!0,T.selectAll("g.gnode").call(C),g.force.start()},g.stopAnimation=function(){g.animation=!1,T.selectAll("g.gnode").on("mousedown.drag",null),g.force.stop()},g.setFriction=function(n){g.force.friction(n),g.resumeForce()},g.setCharge=function(n){g.force.charge(n),g.resumeForce()},g.setGravity=function(n){g.force.gravity(n),g.resumeForce()},g.setPseudoknotStrength=function(n){g.linkStrengths.pseudoknot=n,g.update()},g.displayBackground=function(n){g.displayParameters.displayBackground=n,g.updateStyle()},g.displayNumbering=function(n){g.displayParameters.displayNumbering=n,g.updateStyle()},g.displayNodeOutline=function(n){g.displayParameters.displayNodeOutline=n,g.updateStyle()},g.displayNodeLabel=function(n){g.displayParameters.displayNodeLabel=n,g.updateStyle()},g.displayLinks=function(n){g.displayParameters.displayLinks=n,g.updateStyle()},g.displayPseudoknotLinks=function(n){g.displayParameters.displayPseudoknotLinks=n,g.updateStyle()},g.displayProteinLinks=function(n){g.displayParameters.displayProteinLinks=n,g.updateStyle()},g.updateStyle=function(){R.selectAll("[node_type=label]").classed("transparent",!g.displayParameters.displayNumbering),R.selectAll("[label_type=label]").classed("transparent",!g.displayParameters.displayNumbering),E.selectAll("[linkType=label_link]").classed("transparent",!g.displayParameters.displayNumbering),_.selectAll("circle").classed("hidden_outline",!g.displayParameters.displayNodeOutline),R.selectAll("[label_type=nucleotide]").classed("transparent",!g.displayParameters.displayNodeLabel),_.selectAll("[link_type=real],[link_type=basepair],[link_type=backbone],[link_type=pseudoknot],[link_type=protein_chain],[link_type=chain_chain],[link_type=external]").classed("transparent",!g.displayParameters.displayLinks),_.selectAll("[link_type=pseudoknot]").classed("transparent",!g.displayParameters.displayPseudoknotLinks),_.selectAll("[link_type=protein_chain]").classed("transparent",!g.displayParameters.displayProteinLinks),E.selectAll("[link_type=fake]").classed("transparent",!g.options.displayAllLinks),E.selectAll("[link_type=fake_fake]").classed("transparent",!g.options.displayAllLinks)},g.createNewLinks=function(n){var t=n.append("svg:line");return t.append("svg:title").text(L),t.classed("link",!0).attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y}).attr("link_type",function(n){return n.linkType}).attr("class",function(n){return a.default.select(this).attr("class")+" "+n.linkType}).attr("pointer-events",function(n){return"fake"==n.linkType?"none":"all"}),t},g.createNewNodes=function(n){(n=n.append("g").classed("noselect",!0).classed("gnode",!0).attr("struct_name",function(n){return n.structName}).attr("transform",function(n){return void 0!==n.x&&void 0!==n.y?"translate("+[n.x,n.y]+")":""}).each(function(n){n.selected=n.previouslySelected=!1})).call(C).on("mousedown",j).on("mousedrag",function(n){}).on("mouseup",q).attr("num",function(n){return"n"+n.num}).attr("rnum",function(n){return"n"+(n.rna.rnaLength-n.num+1)}).on("click",F).transition().duration(750).ease("elastic");var t=n.filter(function(n){return"label"==n.nodeType||"protein"==n.nodeType}),e=n.filter(function(n){return"nucleotide"==n.nodeType});t.append("svg:circle").attr("class","outline_node").attr("r",function(n){return n.radius+1}),e.append("svg:circle").attr("class","outline_node").attr("r",function(n){return n.radius+1}),t.append("svg:circle").attr("class","node").classed("label",function(n){return"label"==n.nodeType}).attr("r",function(n){return"middle"==n.nodeType?0:n.radius}).attr("node_type",function(n){return n.nodeType}).attr("node_num",function(n){return n.num}),e.append("svg:circle").attr("class","node").attr("node_type",function(n){return n.nodeType}).attr("node_num",function(n){return n.num}).attr("r",function(n){return n.radius}).append("svg:title").text(function(n){return"nucleotide"==n.nodeType?n.structName+":"+n.num:""}),e.append("svg:path").attr("class","node").attr("node_type",function(n){return n.nodeType}).attr("node_num",function(n){return n.num}).append("svg:title").text(function(n){return"nucleotide"==n.nodeType?n.structName+":"+n.num:""});var r=n.append("text").text(function(n){return n.name}).attr("text-anchor","middle").attr("font-size",8).attr("font-weight","bold").attr("y",2.5).attr("class","node-label").attr("label_type",function(n){return n.nodeType});return r.append("svg:title").text(function(n){return"nucleotide"==n.nodeType?n.structName+":"+n.num:""}),n},g.update=function(){g.force.nodes(g.graph.nodes).links(g.graph.links),g.animation&&g.force.start();var n=E.selectAll("line.link").data(g.graph.links.filter(c),L);n.attr("class","").classed("link",!0).attr("link_type",function(n){return n.linkType}).attr("class",function(n){return a.default.select(this).attr("class")+" "+n.linkType});var t=n.enter();g.createNewLinks(t),n.exit().remove();var e=(a.default.scale.category10().domain([0,1,2,3,4,5,6,7,8,9]),R.selectAll("g.gnode").data(g.graph.nodes,U)),r=e.enter();g.createNewNodes(r),e.exit().remove();var i,u=g.graph.nodes.filter(function(n){return"nucleotide"==n.nodeType||"label"==n.nodeType});i=g.displayFakeLinks?n:E.selectAll("[link_type=real],[link_type=pseudoknot],[link_type=protein_chain],[link_type=chain_chain],[link_type=label_link],[link_type=backbone],[link_type=basepair],[link_type=intermolecule],[link_type=external]"),e.selectAll("path").each(o),i.on("click",z),g.force.on("tick",function(){for(var n=a.default.geom.quadtree(u),t=0,r=u.length;++t<r;)n.visit(d(u[t]));i.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y}),e.attr("transform",function(n){return"translate("+[n.x,n.y]+")"}),e.select("path").each(o)}),g.changeColorScheme(g.colorScheme),g.animation&&g.force.start(),g.updateStyle()},g.setSize()};var o=e(1),a=function(n){return n&&n.__esModule?n:{default:n}}(o);e(2);var u=e(6),s=e(8),l=e(7)},function(n,t,e){var r,o;!function(){function a(n){return n&&(n.ownerDocument||n.document||n).documentElement}function i(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function u(n,t){return t>n?-1:n>t?1:n>=t?0:NaN}function s(n){return null===n?NaN:+n}function l(n){return!isNaN(n)}function c(n){return{left:function(t,e,r,o){for(arguments.length<3&&(r=0),arguments.length<4&&(o=t.length);o>r;){var a=r+o>>>1;n(t[a],e)<0?r=a+1:o=a}return r},right:function(t,e,r,o){for(arguments.length<3&&(r=0),arguments.length<4&&(o=t.length);o>r;){var a=r+o>>>1;n(t[a],e)>0?o=a:r=a+1}return r}}}function f(n){return n.length}function p(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function h(){this._=Object.create(null)}function d(n){return(n+="")===da||n[0]===ma?ma+n:n}function m(n){return(n+="")[0]===ma?n.slice(1):n}function v(n){return d(n)in this._}function g(n){return(n=d(n))in this._&&delete this._[n]}function y(){var n=[];for(var t in this._)n.push(m(t));return n}function b(){var n=0;for(var t in this._)++n;return n}function x(){for(var n in this._)return!1;return!0}function M(){this._=Object.create(null)}function w(n){return n}function k(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function _(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=va.length;r>e;++e){var o=va[e]+t;if(o in n)return o}}function S(){}function A(){}function T(n){function t(){for(var t,r=e,o=-1,a=r.length;++o<a;)(t=r[o].on)&&t.apply(this,arguments);return n}var e=[],r=new h;return t.on=function(t,o){var a,i=r.get(t);return arguments.length<2?i&&i.on:(i&&(i.on=null,e=e.slice(0,a=e.indexOf(i)).concat(e.slice(a+1)),r.remove(t)),o&&e.push(r.set(t,{on:o})),n)},t}function E(){ra.event.preventDefault()}function R(){for(var n,t=ra.event;n=t.sourceEvent;)t=n;return t}function P(n){for(var t=new A,e=0,r=arguments.length;++e<r;)t[arguments[e]]=T(t);return t.of=function(e,r){return function(o){try{var a=o.sourceEvent=ra.event;o.target=n,ra.event=o,t[o.type].apply(e,r)}finally{ra.event=a}}},t}function N(n){return ya(n,wa),n}function O(n){return"function"==typeof n?n:function(){return ba(n,this)}}function C(n){return"function"==typeof n?n:function(){return xa(n,this)}}function L(n,t){return n=ra.ns.qualify(n),null==t?n.local?function(){this.removeAttributeNS(n.space,n.local)}:function(){this.removeAttribute(n)}:"function"==typeof t?n.local?function(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}:function(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}:n.local?function(){this.setAttributeNS(n.space,n.local,t)}:function(){this.setAttribute(n,t)}}function U(n){return n.trim().replace(/\s+/g," ")}function D(n){return new RegExp("(?:^|\\s+)"+ra.requote(n)+"(?:\\s+|$)","g")}function z(n){return(n+"").trim().split(/^|\s+/)}function F(n,t){var e=(n=z(n).map(q)).length;return"function"==typeof t?function(){for(var r=-1,o=t.apply(this,arguments);++r<e;)n[r](this,o)}:function(){for(var r=-1;++r<e;)n[r](this,t)}}function q(n){var t=D(n);return function(e,r){if(o=e.classList)return r?o.add(n):o.remove(n);var o=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(o)||e.setAttribute("class",U(o+" "+n))):e.setAttribute("class",U(o.replace(t," ")))}}function j(n,t,e){return null==t?function(){this.style.removeProperty(n)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}:function(){this.style.setProperty(n,t,e)}}function B(n,t){return null==t?function(){delete this[n]}:"function"==typeof t?function(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}:function(){this[n]=t}}function I(n){return"function"==typeof n?n:(n=ra.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var t=this.ownerDocument,e=this.namespaceURI;return e?t.createElementNS(e,n):t.createElement(n)}}function H(){var n=this.parentNode;n&&n.removeChild(this)}function V(n){return{__data__:n}}function X(n){return function(){return Ma(this,n)}}function G(n,t){for(var e=0,r=n.length;r>e;e++)for(var o,a=n[e],i=0,u=a.length;u>i;i++)(o=a[i])&&t(o,i,e);return n}function Y(n){return ya(n,_a),n}function W(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}var o="__on"+n,a=n.indexOf("."),i=Z;a>0&&(n=n.slice(0,a));var u=Sa.get(n);return u&&(n=u,i=J),a?t?function(){var a=i(t,aa(arguments));r.call(this),this.addEventListener(n,this[o]=a,a.$=e),a._=t}:r:t?S:function(){var t,e=new RegExp("^__on([^.]+)"+ra.requote(n)+"$");for(var r in this)if(t=r.match(e)){var o=this[r];this.removeEventListener(t[1],o,o.$),delete this[r]}}}function Z(n,t){return function(e){var r=ra.event;ra.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{ra.event=r}}}function J(n,t){var e=Z(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function $(n){var t=".dragsuppress-"+ ++Ta,e="click"+t,r=ra.select(i(n)).on("touchmove"+t,E).on("dragstart"+t,E).on("selectstart"+t,E);if(null==Aa&&(Aa=!("onselectstart"in n)&&_(n.style,"userSelect")),Aa){var o=a(n).style,u=o[Aa];o[Aa]="none"}return function(n){if(r.on(t,null),Aa&&(o[Aa]=u),n){var a=function(){r.on(e,null)};r.on(e,function(){E(),a()},!0),setTimeout(a,0)}}}function K(n,t){t.changedTouches&&(t=t.changedTouches[0]);var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();if(0>Ea){var o=i(n);if(o.scrollX||o.scrollY){var a=(e=ra.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ea=!(a.f||a.e),e.remove()}}return Ea?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}var u=n.getBoundingClientRect();return[t.clientX-u.left-n.clientLeft,t.clientY-u.top-n.clientTop]}function Q(){return ra.event.changedTouches[0].identifier}function nn(n){return n>0?1:0>n?-1:0}function tn(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function en(n){return n>1?0:-1>n?Na:Math.acos(n)}function rn(n){return n>1?La:-1>n?-La:Math.asin(n)}function on(n){return((n=Math.exp(n))+1/n)/2}function an(n){return(n=Math.sin(n/2))*n}function un(){}function sn(n,t,e){return this instanceof sn?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof sn?new sn(n.h,n.s,n.l):wn(""+n,kn,sn):new sn(n,t,e)}function ln(n,t,e){function r(n){return Math.round(255*function(n){return n>360?n-=360:0>n&&(n+=360),60>n?o+(a-o)*n/60:180>n?a:240>n?o+(a-o)*(240-n)/60:o}(n))}var o,a;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,o=2*(e=0>e?0:e>1?1:e)-(a=.5>=e?e*(1+t):e+t-e*t),new yn(r(n+120),r(n),r(n-120))}function cn(n,t,e){return this instanceof cn?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof cn?new cn(n.h,n.c,n.l):dn(n instanceof pn?n.l:(n=_n((n=ra.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new cn(n,t,e)}function fn(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new pn(e,Math.cos(n*=Ua)*t,Math.sin(n)*t)}function pn(n,t,e){return this instanceof pn?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof pn?new pn(n.l,n.a,n.b):n instanceof cn?fn(n.h,n.c,n.l):_n((n=yn(n)).r,n.g,n.b):new pn(n,t,e)}function hn(n,t,e){var r=(n+16)/116,o=r+t/500,a=r-e/200;return o=mn(o)*Va,r=mn(r)*Xa,a=mn(a)*Ga,new yn(gn(3.2404542*o-1.5371385*r-.4985314*a),gn(-.969266*o+1.8760108*r+.041556*a),gn(.0556434*o-.2040259*r+1.0572252*a))}function dn(n,t,e){return n>0?new cn(Math.atan2(e,t)*Da,Math.sqrt(t*t+e*e),n):new cn(NaN,NaN,n)}function mn(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function vn(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function gn(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function yn(n,t,e){return this instanceof yn?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof yn?new yn(n.r,n.g,n.b):wn(""+n,yn,ln):new yn(n,t,e)}function bn(n){return new yn(n>>16,n>>8&255,255&n)}function xn(n){return bn(n)+""}function Mn(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function wn(n,t,e){var r,o,a,i=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()))switch(o=r[2].split(","),r[1]){case"hsl":return e(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return t(An(o[0]),An(o[1]),An(o[2]))}return(a=Za.get(n))?t(a.r,a.g,a.b):(null==n||"#"!==n.charAt(0)||isNaN(a=parseInt(n.slice(1),16))||(4===n.length?(i=(3840&a)>>4,i|=i>>4,u=240&a,u|=u>>4,s=15&a,s|=s<<4):7===n.length&&(i=(16711680&a)>>16,u=(65280&a)>>8,s=255&a)),t(i,u,s))}function kn(n,t,e){var r,o,a=Math.min(n/=255,t/=255,e/=255),i=Math.max(n,t,e),u=i-a,s=(i+a)/2;return u?(o=.5>s?u/(i+a):u/(2-i-a),r=n==i?(t-e)/u+(e>t?6:0):t==i?(e-n)/u+2:(n-t)/u+4,r*=60):(r=NaN,o=s>0&&1>s?0:r),new sn(r,o,s)}function _n(n,t,e){n=Sn(n),t=Sn(t),e=Sn(e);var r=vn((.4124564*n+.3575761*t+.1804375*e)/Va),o=vn((.2126729*n+.7151522*t+.072175*e)/Xa),a=vn((.0193339*n+.119192*t+.9503041*e)/Ga);return pn(116*o-16,500*(r-o),200*(o-a))}function Sn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function An(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function Tn(n){return"function"==typeof n?n:function(){return n}}function En(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Rn(t,e,n,r)}}function Rn(n,t,e,r){function o(){var n,t=s.status;if(!t&&function(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}(s)||t>=200&&300>t||304===t){try{n=e.call(a,s)}catch(n){return void i.error.call(a,n)}i.load.call(a,n)}else i.error.call(a,s)}var a={},i=ra.dispatch("beforesend","progress","load","error"),u={},s=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(n)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=o:s.onreadystatechange=function(){s.readyState>3&&o()},s.onprogress=function(n){var t=ra.event;ra.event=n;try{i.progress.call(a,s)}finally{ra.event=t}},a.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?u[n]:(null==t?delete u[n]:u[n]=t+"",a)},a.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",a):t},a.responseType=function(n){return arguments.length?(l=n,a):l},a.response=function(n){return e=n,a},["get","post"].forEach(function(n){a[n]=function(){return a.send.apply(a,[n].concat(aa(arguments)))}}),a.send=function(e,r,o){if(2===arguments.length&&"function"==typeof r&&(o=r,r=null),s.open(e,n,!0),null==t||"accept"in u||(u.accept=t+",*/*"),s.setRequestHeader)for(var c in u)s.setRequestHeader(c,u[c]);return null!=t&&s.overrideMimeType&&s.overrideMimeType(t),null!=l&&(s.responseType=l),null!=o&&a.on("error",o).on("load",function(n){o(null,n)}),i.beforesend.call(a,s),s.send(null==r?null:r),a},a.abort=function(){return s.abort(),a},ra.rebind(a,i,"on"),null==r?a:a.get(function(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}(r))}function Pn(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var o=e+t,a={c:n,t:o,n:null};return $a?$a.n=a:Ja=a,$a=a,Ka||(Qa=clearTimeout(Qa),Ka=1,ni(Nn)),a}function Nn(){var n=On(),t=Cn()-n;t>24?(isFinite(t)&&(clearTimeout(Qa),Qa=setTimeout(Nn,t)),Ka=0):(Ka=1,ni(Nn))}function On(){for(var n=Date.now(),t=Ja;t;)n>=t.t&&t.c(n-t.t)&&(t.c=null),t=t.n;return n}function Cn(){for(var n,t=Ja,e=1/0;t;)t.c?(t.t<e&&(e=t.t),t=(n=t).n):t=n?n.n=t.n:Ja=t.n;return $a=n,e}function Ln(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Un(n){return n+""}function Dn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function zn(n,t,e){function r(t){var e=n(t),r=a(e,1);return r-t>t-e?e:r}function o(e){return t(e=n(new ai(e-1)),1),e}function a(n,e){return t(n=new ai(+n),e),n}function i(n,r,a){var i=o(n),u=[];if(a>1)for(;r>i;)e(i)%a||u.push(new Date(+i)),t(i,1);else for(;r>i;)u.push(new Date(+i)),t(i,1);return u}n.floor=n,n.round=r,n.ceil=o,n.offset=a,n.range=i;var u=n.utc=Fn(n);return u.floor=u,u.round=Fn(r),u.ceil=Fn(o),u.offset=Fn(a),u.range=function(n,t,e){try{ai=Dn;var r=new Dn;return r._=n,i(r,t,e)}finally{ai=Date}},n}function Fn(n){return function(t,e){try{ai=Dn;var r=new Dn;return r._=t,n(r,e)._}finally{ai=Date}}}function qn(n,t,e){var r=0>n?"-":"",o=(r?-n:n)+"",a=o.length;return r+(e>a?new Array(e-a+1).join(t)+o:o)}function jn(n){return new RegExp("^(?:"+n.map(ra.requote).join("|")+")","i")}function Bn(n){for(var t=new h,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function In(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Hn(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function Vn(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Xn(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Gn(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e,e+2));return r?(n.y=function(n){return n+(n>68?1900:2e3)}(+r[0]),e+r[0].length):-1}function Yn(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Wn(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Zn(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function Jn(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function $n(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function Kn(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function Qn(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function nt(n,t,e){si.lastIndex=0;var r=si.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function tt(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=ha(t)/60|0,o=ha(t)%60;return e+qn(r,"0",2)+qn(o,"0",2)}function et(n,t,e){li.lastIndex=0;var r=li.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function rt(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ot(){}function at(n,t,e){var r=e.s=n+t,o=r-n,a=r-o;e.t=n-a+(t-o)}function it(n,t){n&&hi.hasOwnProperty(n.type)&&hi[n.type](n,t)}function ut(n,t,e){var r,o=-1,a=n.length-e;for(t.lineStart();++o<a;)r=n[o],t.point(r[0],r[1],r[2]);t.lineEnd()}function st(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)ut(n[e],t,1);t.polygonEnd()}function lt(){function n(n,t){t=t*Ua/2+Na/4;var e=(n*=Ua)-r,i=e>=0?1:-1,u=i*e,s=Math.cos(t),l=Math.sin(t),c=a*l,f=o*s+c*Math.cos(u),p=c*i*Math.sin(u);mi.add(Math.atan2(p,f)),r=n,o=s,a=l}var t,e,r,o,a;vi.point=function(i,u){vi.point=n,r=(t=i)*Ua,o=Math.cos(u=(e=u)*Ua/2+Na/4),a=Math.sin(u)},vi.lineEnd=function(){n(t,e)}}function ct(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function ft(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function pt(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function ht(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function dt(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function mt(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function vt(n){return[Math.atan2(n[1],n[0]),rn(n[2])]}function gt(n,t){return ha(n[0]-t[0])<Ra&&ha(n[1]-t[1])<Ra}function yt(n,t){n*=Ua;var e=Math.cos(t*=Ua);bt(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function bt(n,t,e){bi+=(n-bi)/++gi,xi+=(t-xi)/gi,Mi+=(e-Mi)/gi}function xt(){function n(n,o){n*=Ua;var a=Math.cos(o*=Ua),i=a*Math.cos(n),u=a*Math.sin(n),s=Math.sin(o),l=Math.atan2(Math.sqrt((l=e*s-r*u)*l+(l=r*i-t*s)*l+(l=t*u-e*i)*l),t*i+e*u+r*s);yi+=l,wi+=l*(t+(t=i)),ki+=l*(e+(e=u)),_i+=l*(r+(r=s)),bt(t,e,r)}var t,e,r;Ei.point=function(o,a){o*=Ua;var i=Math.cos(a*=Ua);t=i*Math.cos(o),e=i*Math.sin(o),r=Math.sin(a),Ei.point=n,bt(t,e,r)}}function Mt(){Ei.point=yt}function wt(){function n(n,t){n*=Ua;var e=Math.cos(t*=Ua),i=e*Math.cos(n),u=e*Math.sin(n),s=Math.sin(t),l=o*s-a*u,c=a*i-r*s,f=r*u-o*i,p=Math.sqrt(l*l+c*c+f*f),h=r*i+o*u+a*s,d=p&&-en(h)/p,m=Math.atan2(p,h);Si+=d*l,Ai+=d*c,Ti+=d*f,yi+=m,wi+=m*(r+(r=i)),ki+=m*(o+(o=u)),_i+=m*(a+(a=s)),bt(r,o,a)}var t,e,r,o,a;Ei.point=function(i,u){t=i,e=u,Ei.point=n,i*=Ua;var s=Math.cos(u*=Ua);r=s*Math.cos(i),o=s*Math.sin(i),a=Math.sin(u),bt(r,o,a)},Ei.lineEnd=function(){n(t,e),Ei.lineEnd=Mt,Ei.point=yt}}function kt(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return(e=t.invert(e,r))&&n.invert(e[0],e[1])}),e}function _t(){return!0}function St(n,t,e,r,o){var a=[],i=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(gt(e,r)){o.lineStart();for(var u=0;t>u;++u)o.point((e=n[u])[0],e[1]);return void o.lineEnd()}var s=new Tt(e,n,null,!0),l=new Tt(e,null,s,!1);s.o=l,a.push(s),i.push(l),s=new Tt(r,n,null,!1),l=new Tt(r,null,s,!0),s.o=l,a.push(s),i.push(l)}}),i.sort(t),At(a),At(i),a.length){for(var u=0,s=e,l=i.length;l>u;++u)i[u].e=s=!s;for(var c,f,p=a[0];;){for(var h=p,d=!0;h.v;)if((h=h.n)===p)return;c=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(var u=0,l=c.length;l>u;++u)o.point((f=c[u])[0],f[1]);else r(h.x,h.n.x,1,o);h=h.n}else{if(d)for(var u=(c=h.p.z).length-1;u>=0;--u)o.point((f=c[u])[0],f[1]);else r(h.x,h.p.x,-1,o);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);o.lineEnd()}}}function At(n){if(t=n.length){for(var t,e,r=0,o=n[0];++r<t;)o.n=e=n[r],e.p=o,o=e;o.n=e=n[0],e.p=o}}function Tt(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Et(n,t,e,r){return function(o,a){function i(t,e){var r=o(t,e);n(t=r[0],e=r[1])&&a.point(t,e)}function u(n,t){var e=o(n,t);v.point(e[0],e[1])}function s(){y.point=u,v.lineStart()}function l(){y.point=i,v.lineEnd()}function c(n,t){m.push([n,t]);var e=o(n,t);x.point(e[0],e[1])}function f(){x.lineStart(),m=[]}function p(){c(m[0][0],m[0][1]),x.lineEnd();var n,t=x.clean(),e=b.buffer(),r=e.length;if(m.pop(),d.push(m),m=null,r)if(1&t){var o,r=(n=e[0]).length-1,i=-1;if(r>0){for(M||(a.polygonStart(),M=!0),a.lineStart();++i<r;)a.point((o=n[i])[0],o[1]);a.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),h.push(e.filter(Rt))}var h,d,m,v=t(a),g=o.invert(r[0],r[1]),y={point:i,lineStart:s,lineEnd:l,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=p,h=[],d=[]},polygonEnd:function(){y.point=i,y.lineStart=s,y.lineEnd=l,h=ra.merge(h);var n=function(n,t){var e=n[0],r=n[1],o=[Math.sin(e),-Math.cos(e),0],a=0,i=0;mi.reset();for(var u=0,s=t.length;s>u;++u){var l=t[u],c=l.length;if(c)for(var f=l[0],p=f[0],h=f[1]/2+Na/4,d=Math.sin(h),m=Math.cos(h),v=1;;){v===c&&(v=0);var g=(n=l[v])[0],y=n[1]/2+Na/4,b=Math.sin(y),x=Math.cos(y),M=g-p,w=M>=0?1:-1,k=w*M,_=k>Na,S=d*b;if(mi.add(Math.atan2(S*w*Math.sin(k),m*x+S*Math.cos(k))),a+=_?M+w*Oa:M,_^p>=e^g>=e){var A=pt(ct(f),ct(n));mt(A);var T=pt(o,A);mt(T);var E=(_^M>=0?-1:1)*rn(T[2]);(r>E||r===E&&(A[0]||A[1]))&&(i+=_^M>=0?1:-1)}if(!v++)break;p=g,d=b,m=x,f=n}}return(-Ra>a||Ra>a&&0>mi)^1&i}(g,d);h.length?(M||(a.polygonStart(),M=!0),St(h,Nt,n,e,a)):n&&(M||(a.polygonStart(),M=!0),a.lineStart(),e(null,null,1,a),a.lineEnd()),M&&(a.polygonEnd(),M=!1),h=d=null},sphere:function(){a.polygonStart(),a.lineStart(),e(null,null,1,a),a.lineEnd(),a.polygonEnd()}},b=Pt(),x=t(b),M=!1;return y}}function Rt(n){return n.length>1}function Pt(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:S,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Nt(n,t){return((n=n.x)[0]<0?n[1]-La-Ra:La-n[1])-((t=t.x)[0]<0?t[1]-La-Ra:La-t[1])}function Ot(n,t,e,r){return function(o){var a,i=o.a,u=o.b,s=i.x,l=i.y,c=u.x,f=u.y,p=0,h=1,d=c-s,m=f-l;if(a=n-s,d||!(a>0)){if(a/=d,0>d){if(p>a)return;h>a&&(h=a)}else if(d>0){if(a>h)return;a>p&&(p=a)}if(a=e-s,d||!(0>a)){if(a/=d,0>d){if(a>h)return;a>p&&(p=a)}else if(d>0){if(p>a)return;h>a&&(h=a)}if(a=t-l,m||!(a>0)){if(a/=m,0>m){if(p>a)return;h>a&&(h=a)}else if(m>0){if(a>h)return;a>p&&(p=a)}if(a=r-l,m||!(0>a)){if(a/=m,0>m){if(a>h)return;a>p&&(p=a)}else if(m>0){if(p>a)return;h>a&&(h=a)}return p>0&&(o.a={x:s+p*d,y:l+p*m}),1>h&&(o.b={x:s+h*d,y:l+h*m}),o}}}}}}function Ct(n,t,e,r){function o(r,o){return ha(r[0]-n)<Ra?o>0?0:3:ha(r[0]-e)<Ra?o>0?2:1:ha(r[1]-t)<Ra?o>0?1:0:o>0?3:2}function a(n,t){return i(n.x,t.x)}function i(n,t){var e=o(n,1),r=o(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(u){function s(a,u,s,l){var c=0,f=0;if(null==a||(c=o(a,s))!==(f=o(u,s))||i(a,u)<0^s>0)do{l.point(0===c||3===c?n:e,c>1?r:t)}while((c=(c+s+4)%4)!==f);else l.point(u[0],u[1])}function l(o,a){return o>=n&&e>=o&&a>=t&&r>=a}function c(n,t){l(n,t)&&u.point(n,t)}function f(n,t){n=Math.max(-Pi,Math.min(Pi,n)),t=Math.max(-Pi,Math.min(Pi,t));var e=l(n,t);if(h&&d.push([n,t]),M)m=n,v=t,g=e,M=!1,e&&(u.lineStart(),u.point(n,t));else if(e&&x)u.point(n,t);else{var r={a:{x:y,y:b},b:{x:n,y:t}};S(r)?(x||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),e||u.lineEnd(),w=!1):e&&(u.lineStart(),u.point(n,t),w=!1)}y=n,b=t,x=e}var p,h,d,m,v,g,y,b,x,M,w,k=u,_=Pt(),S=Ot(n,t,e,r),A={point:c,lineStart:function(){A.point=f,h&&h.push(d=[]),M=!0,x=!1,y=b=NaN},lineEnd:function(){p&&(f(m,v),g&&x&&_.rejoin(),p.push(_.buffer())),A.point=c,x&&u.lineEnd()},polygonStart:function(){u=_,p=[],h=[],w=!0},polygonEnd:function(){u=k,p=ra.merge(p);var t=function(n){for(var t=0,e=h.length,r=n[1],o=0;e>o;++o)for(var a,i=1,u=h[o],s=u.length,l=u[0];s>i;++i)a=u[i],l[1]<=r?a[1]>r&&tn(l,a,n)>0&&++t:a[1]<=r&&tn(l,a,n)<0&&--t,l=a;return 0!==t}([n,r]),e=w&&t,o=p.length;(e||o)&&(u.polygonStart(),e&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),o&&St(p,a,t,s,u),u.polygonEnd()),p=h=d=null}};return A}}function Lt(n){var t=0,e=Na/3,r=Wt(n),o=r(t,e);return o.parallels=function(n){return arguments.length?r(t=n[0]*Na/180,e=n[1]*Na/180):[t/Na*180,e/Na*180]},o}function Ut(n,t){function e(n,t){var e=Math.sqrt(a-2*o*Math.sin(t))/o;return[e*Math.sin(n*=o),i-e*Math.cos(n)]}var r=Math.sin(n),o=(r+Math.sin(t))/2,a=1+r*(2*o-r),i=Math.sqrt(a)/o;return e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/o,rn((a-(n*n+e*e)*o*o)/(2*o))]},e}function Dt(){function n(n,t){Oi+=o*n-r*t,r=n,o=t}var t,e,r,o;zi.point=function(a,i){zi.point=n,t=r=a,e=o=i},zi.lineEnd=function(){n(t,e)}}function zt(){function n(n,t){i.push("M",n,",",t,a)}function t(n,t){i.push("M",n,",",t),u.point=e}function e(n,t){i.push("L",n,",",t)}function r(){u.point=n}function o(){i.push("Z")}var a=Ft(4.5),i=[],u={point:n,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=o},polygonEnd:function(){u.lineEnd=r,u.point=n},pointRadius:function(n){return a=Ft(n),u},result:function(){if(i.length){var n=i.join("");return i=[],n}}};return u}function Ft(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function qt(n,t){bi+=n,xi+=t,++Mi}function jt(){function n(n,r){var o=n-t,a=r-e,i=Math.sqrt(o*o+a*a);wi+=i*(t+n)/2,ki+=i*(e+r)/2,_i+=i,qt(t=n,e=r)}var t,e;qi.point=function(r,o){qi.point=n,qt(t=r,e=o)}}function Bt(){qi.point=qt}function It(){function n(n,t){var e=n-r,a=t-o,i=Math.sqrt(e*e+a*a);wi+=i*(r+n)/2,ki+=i*(o+t)/2,_i+=i,Si+=(i=o*n-r*t)*(r+n),Ai+=i*(o+t),Ti+=3*i,qt(r=n,o=t)}var t,e,r,o;qi.point=function(a,i){qi.point=n,qt(t=r=a,e=o=i)},qi.lineEnd=function(){n(t,e)}}function Ht(n){function t(t,e){n.moveTo(t+i,e),n.arc(t,e,i,0,Oa)}function e(t,e){n.moveTo(t,e),u.point=r}function r(t,e){n.lineTo(t,e)}function o(){u.point=t}function a(){n.closePath()}var i=4.5,u={point:t,lineStart:function(){u.point=e},lineEnd:o,polygonStart:function(){u.lineEnd=a},polygonEnd:function(){u.lineEnd=o,u.point=t},pointRadius:function(n){return i=n,u},result:S};return u}function Vt(n){function t(n){return(u?r:e)(n)}function e(t){return Gt(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){y=NaN,k.point=a,t.lineStart()}function a(e,r){var a=ct([e,r]),i=n(e,r);o(y,b,g,x,M,w,y=i[0],b=i[1],g=e,x=a[0],M=a[1],w=a[2],u,t),t.point(y,b)}function i(){k.point=e,t.lineEnd()}function s(){r(),k.point=l,k.lineEnd=c}function l(n,t){a(f=n,t),p=y,h=b,d=x,m=M,v=w,k.point=a}function c(){o(y,b,g,x,M,w,p,h,f,d,m,v,u,t),k.lineEnd=i,i()}var f,p,h,d,m,v,g,y,b,x,M,w,k={point:e,lineStart:r,lineEnd:i,polygonStart:function(){t.polygonStart(),k.lineStart=s},polygonEnd:function(){t.polygonEnd(),k.lineStart=r}};return k}function o(t,e,r,u,s,l,c,f,p,h,d,m,v,g){var y=c-t,b=f-e,x=y*y+b*b;if(x>4*a&&v--){var M=u+h,w=s+d,k=l+m,_=Math.sqrt(M*M+w*w+k*k),S=Math.asin(k/=_),A=ha(ha(k)-1)<Ra||ha(r-p)<Ra?(r+p)/2:Math.atan2(w,M),T=n(A,S),E=T[0],R=T[1],P=E-t,N=R-e,O=b*P-y*N;(O*O/x>a||ha((y*P+b*N)/x-.5)>.3||i>u*h+s*d+l*m)&&(o(t,e,r,u,s,l,E,R,A,M/=_,w/=_,k,v,g),g.point(E,R),o(E,R,A,M,w,k,c,f,p,h,d,m,v,g))}}var a=.5,i=Math.cos(30*Ua),u=16;return t.precision=function(n){return arguments.length?(u=(a=n*n)>0&&16,t):Math.sqrt(a)},t}function Xt(n){this.stream=n}function Gt(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function Yt(n){return Wt(function(){return n})()}function Wt(n){function t(n){return[(n=u(n[0]*Ua,n[1]*Ua))[0]*p+s,l-n[1]*p]}function e(n){return(n=u.invert((n[0]-s)/p,(l-n[1])/p))&&[n[0]*Da,n[1]*Da]}function r(){u=kt(i=Kt(g,y,b),a);var n=a(m,v);return s=h-n[0]*p,l=d+n[1]*p,o()}function o(){return c&&(c.valid=!1,c=null),t}var a,i,u,s,l,c,f=Vt(function(n,t){return[(n=a(n,t))[0]*p+s,l-n[1]*p]}),p=150,h=480,d=250,m=0,v=0,g=0,y=0,b=0,x=Ri,M=w,k=null,_=null;return t.stream=function(n){return c&&(c.valid=!1),(c=Zt(x(i,f(M(n))))).valid=!0,c},t.clipAngle=function(n){return arguments.length?(x=null==n?(k=n,Ri):function(n){function t(n,t){return Math.cos(n)*Math.cos(t)>o}function e(n,t,e){var r=ct(n),a=ct(t),i=[1,0,0],u=pt(r,a),s=ft(u,u),l=u[0],c=s-l*l;if(!c)return!e&&n;var f=o*s/c,p=-o*l/c,h=pt(i,u),d=dt(i,f),m=dt(u,p);ht(d,m);var v=h,g=ft(d,v),y=ft(v,v),b=g*g-y*(ft(d,d)-1);if(!(0>b)){var x=Math.sqrt(b),M=dt(v,(-g-x)/y);if(ht(M,d),M=vt(M),!e)return M;var w,k=n[0],_=t[0],S=n[1],A=t[1];k>_&&(w=k,k=_,_=w);var T=_-k,E=ha(T-Na)<Ra,R=E||Ra>T;if(!E&&S>A&&(w=S,S=A,A=w),R?E?S+A>0^M[1]<(ha(M[0]-k)<Ra?S:A):S<=M[1]&&M[1]<=A:T>Na^(k<=M[0]&&M[0]<=_)){var P=dt(v,(-g+x)/y);return ht(P,d),[M,vt(P)]}}}function r(t,e){var r=a?n:Na-n,o=0;return-r>t?o|=1:t>r&&(o|=2),-r>e?o|=4:e>r&&(o|=8),o}var o=Math.cos(n),a=o>0,i=ha(o)>Ra;return Et(t,function(n){var o,u,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,p){var h,d=[f,p],m=t(f,p),v=a?m?0:r(f,p):m?r(f+(0>f?Na:-Na),p):0;if(!o&&(l=s=m)&&n.lineStart(),m!==s&&(h=e(o,d),(gt(o,h)||gt(d,h))&&(d[0]+=Ra,d[1]+=Ra,m=t(d[0],d[1]))),m!==s)c=0,m?(n.lineStart(),h=e(d,o),n.point(h[0],h[1])):(h=e(o,d),n.point(h[0],h[1]),n.lineEnd()),o=h;else if(i&&o&&a^m){var g;v&u||!(g=e(d,o,!0))||(c=0,a?(n.lineStart(),n.point(g[0][0],g[0][1]),n.point(g[1][0],g[1][1]),n.lineEnd()):(n.point(g[1][0],g[1][1]),n.lineEnd(),n.lineStart(),n.point(g[0][0],g[0][1])))}!m||o&&gt(o,d)||n.point(d[0],d[1]),o=d,s=m,u=v},lineEnd:function(){s&&n.lineEnd(),o=null},clean:function(){return c|(l&&s)<<1}}},ee(n,6*Ua),a?[0,-n]:[-Na,n-Na])}((k=+n)*Ua),o()):k},t.clipExtent=function(n){return arguments.length?(_=n,M=n?Ct(n[0][0],n[0][1],n[1][0],n[1][1]):w,o()):_},t.scale=function(n){return arguments.length?(p=+n,r()):p},t.translate=function(n){return arguments.length?(h=+n[0],d=+n[1],r()):[h,d]},t.center=function(n){return arguments.length?(m=n[0]%360*Ua,v=n[1]%360*Ua,r()):[m*Da,v*Da]},t.rotate=function(n){return arguments.length?(g=n[0]%360*Ua,y=n[1]%360*Ua,b=n.length>2?n[2]%360*Ua:0,r()):[g*Da,y*Da,b*Da]},ra.rebind(t,f,"precision"),function(){return a=n.apply(this,arguments),t.invert=a.invert&&e,r()}}function Zt(n){return Gt(n,function(t,e){n.point(t*Ua,e*Ua)})}function Jt(n,t){return[n,t]}function $t(n,t){return[n>Na?n-Oa:-Na>n?n+Oa:n,t]}function Kt(n,t,e){return n?t||e?kt(ne(n),te(t,e)):ne(n):t||e?te(t,e):$t}function Qt(n){return function(t,e){return[(t+=n)>Na?t-Oa:-Na>t?t+Oa:t,e]}}function ne(n){var t=Qt(n);return t.invert=Qt(-n),t}function te(n,t){function e(n,t){var e=Math.cos(t),u=Math.cos(n)*e,s=Math.sin(n)*e,l=Math.sin(t),c=l*r+u*o;return[Math.atan2(s*a-c*i,u*r-l*o),rn(c*a+s*i)]}var r=Math.cos(n),o=Math.sin(n),a=Math.cos(t),i=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),u=Math.cos(n)*e,s=Math.sin(n)*e,l=Math.sin(t),c=l*a-s*i;return[Math.atan2(s*a+l*i,u*r+c*o),rn(c*r-u*o)]},e}function ee(n,t){var e=Math.cos(n),r=Math.sin(n);return function(o,a,i,u){var s=i*t;null!=o?(o=re(e,o),a=re(e,a),(i>0?a>o:o>a)&&(o+=i*Oa)):(o=n+i*Oa,a=n-.5*s);for(var l,c=o;i>0?c>a:a>c;c-=s)u.point((l=vt([e,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function re(n,t){var e=ct(t);e[0]-=n,mt(e);var r=en(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ra)%(2*Math.PI)}function oe(n,t,e){var r=ra.range(n,t-Ra,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function ae(n,t,e){var r=ra.range(n,t-Ra,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function ie(n){return n.source}function ue(n){return n.target}function se(n,t){function e(t,e){var r=Math.cos(t),o=Math.cos(e),a=n(r*o);return[a*o*Math.sin(t),a*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),o=t(r),a=Math.sin(o),i=Math.cos(o);return[Math.atan2(n*a,r*i),Math.asin(r&&e*a/r)]},e}function le(n,t){function e(n,t){i>0?-La+Ra>t&&(t=-La+Ra):t>La-Ra&&(t=La-Ra);var e=i/Math.pow(o(t),a);return[e*Math.sin(a*n),i-e*Math.cos(a*n)]}var r=Math.cos(n),o=function(n){return Math.tan(Na/4+n/2)},a=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(o(t)/o(n)),i=r*Math.pow(o(n),a)/a;return a?(e.invert=function(n,t){var e=i-t,r=nn(a)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/a,2*Math.atan(Math.pow(i/r,1/a))-La]},e):fe}function ce(n,t){function e(n,t){var e=a-t;return[e*Math.sin(o*n),a-e*Math.cos(o*n)]}var r=Math.cos(n),o=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),a=r/o+n;return ha(o)<Ra?Jt:(e.invert=function(n,t){var e=a-t;return[Math.atan2(n,e)/o,a-nn(o)*Math.sqrt(n*n+e*e)]},e)}function fe(n,t){return[n,Math.log(Math.tan(Na/4+t/2))]}function pe(n){var t,e=Yt(n),r=e.scale,o=e.translate,a=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=o.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var i=a.apply(e,arguments);if(i===e){if(t=null==n){var u=Na*r(),s=o();a([[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]])}}else t&&(i=null);return i},e.clipExtent(null)}function he(n,t){return[Math.log(Math.tan(Na/4+t/2)),-n]}function de(n){return n[0]}function me(n){return n[1]}function ve(n){for(var t=n.length,e=[0,1],r=2,o=2;t>o;o++){for(;r>1&&tn(n[e[r-2]],n[e[r-1]],n[o])<=0;)--r;e[r++]=o}return e.slice(0,r)}function ge(n,t){return n[0]-t[0]||n[1]-t[1]}function ye(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function be(n,t,e,r){var o=n[0],a=e[0],i=t[0]-o,u=r[0]-a,s=n[1],l=e[1],c=t[1]-s,f=r[1]-l,p=(u*(s-l)-f*(o-a))/(f*i-u*c);return[o+p*i,s+p*c]}function xe(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Me(){je(this),this.edge=this.site=this.circle=null}function we(n){var t=Qi.pop()||new Me;return t.site=n,t}function ke(n){Oe(n),Ji.remove(n),Qi.push(n),je(n)}function _e(n){var t=n.circle,e=t.x,r=t.cy,o={x:e,y:r},a=n.P,i=n.N,u=[n];ke(n);for(var s=a;s.circle&&ha(e-s.circle.x)<Ra&&ha(r-s.circle.cy)<Ra;)a=s.P,u.unshift(s),ke(s),s=a;u.unshift(s),Oe(s);for(var l=i;l.circle&&ha(e-l.circle.x)<Ra&&ha(r-l.circle.cy)<Ra;)i=l.N,u.push(l),ke(l),l=i;u.push(l),Oe(l);var c,f=u.length;for(c=1;f>c;++c)l=u[c],s=u[c-1],ze(l.edge,s.site,l.site,o);s=u[0],(l=u[f-1]).edge=Ue(s.site,l.site,null,o),Ne(s),Ne(l)}function Se(n){for(var t,e,r,o,a=n.x,i=n.y,u=Ji._;u;)if((r=Ae(u,i)-a)>Ra)u=u.L;else{if(!((o=a-Te(u,i))>Ra)){r>-Ra?(t=u.P,e=u):o>-Ra?(t=u,e=u.N):t=e=u;break}if(!u.R){t=u;break}u=u.R}var s=we(n);if(Ji.insert(t,s),t||e){if(t===e)return Oe(t),e=we(t.site),Ji.insert(s,e),s.edge=e.edge=Ue(t.site,s.site),Ne(t),void Ne(e);if(!e)return void(s.edge=Ue(t.site,s.site));Oe(t),Oe(e);var l=t.site,c=l.x,f=l.y,p=n.x-c,h=n.y-f,d=e.site,m=d.x-c,v=d.y-f,g=2*(p*v-h*m),y=p*p+h*h,b=m*m+v*v,x={x:(v*y-h*b)/g+c,y:(p*b-m*y)/g+f};ze(e.edge,l,d,x),s.edge=Ue(l,n,null,x),e.edge=Ue(n,d,null,x),Ne(t),Ne(e)}}function Ae(n,t){var e=n.site,r=e.x,o=e.y,a=o-t;if(!a)return r;var i=n.P;if(!i)return-1/0;var u=(e=i.site).x,s=e.y,l=s-t;if(!l)return u;var c=u-r,f=1/a-1/l,p=c/l;return f?(-p+Math.sqrt(p*p-2*f*(c*c/(-2*l)-s+l/2+o-a/2)))/f+r:(r+u)/2}function Te(n,t){var e=n.N;if(e)return Ae(e,t);var r=n.site;return r.y===t?r.x:1/0}function Ee(n){this.site=n,this.edges=[]}function Re(n,t){return t.angle-n.angle}function Pe(){je(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ne(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,o=n.site,a=e.site;if(r!==a){var i=o.x,u=o.y,s=r.x-i,l=r.y-u,c=a.x-i,f=a.y-u,p=2*(s*f-l*c);if(!(p>=-Pa)){var h=s*s+l*l,d=c*c+f*f,m=(f*h-l*d)/p,v=(s*d-c*h)/p,f=v+u,g=nu.pop()||new Pe;g.arc=n,g.site=o,g.x=m+i,g.y=f+Math.sqrt(m*m+v*v),g.cy=f,n.circle=g;for(var y=null,b=Ki._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Ki.insert(y,g),y||($i=g)}}}}function Oe(n){var t=n.circle;t&&(t.P||($i=t.N),Ki.remove(t),nu.push(t),je(t),n.circle=null)}function Ce(n,t){var e=n.b;if(e)return!0;var r,o,a=n.a,i=t[0][0],u=t[1][0],s=t[0][1],l=t[1][1],c=n.l,f=n.r,p=c.x,h=c.y,d=f.x,m=f.y,v=(p+d)/2,g=(h+m)/2;if(m===h){if(i>v||v>=u)return;if(p>d){if(a){if(a.y>=l)return}else a={x:v,y:s};e={x:v,y:l}}else{if(a){if(a.y<s)return}else a={x:v,y:l};e={x:v,y:s}}}else if(o=g-(r=(p-d)/(m-h))*v,-1>r||r>1)if(p>d){if(a){if(a.y>=l)return}else a={x:(s-o)/r,y:s};e={x:(l-o)/r,y:l}}else{if(a){if(a.y<s)return}else a={x:(l-o)/r,y:l};e={x:(s-o)/r,y:s}}else if(m>h){if(a){if(a.x>=u)return}else a={x:i,y:r*i+o};e={x:u,y:r*u+o}}else{if(a){if(a.x<i)return}else a={x:u,y:r*u+o};e={x:i,y:r*i+o}}return n.a=a,n.b=e,!0}function Le(n,t){this.l=n,this.r=t,this.a=this.b=null}function Ue(n,t,e,r){var o=new Le(n,t);return Wi.push(o),e&&ze(o,n,t,e),r&&ze(o,t,n,r),Zi[n.i].edges.push(new Fe(o,n,t)),Zi[t.i].edges.push(new Fe(o,t,n)),o}function De(n,t,e){var r=new Le(n,null);return r.a=t,r.b=e,Wi.push(r),r}function ze(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function Fe(n,t,e){var r=n.a,o=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(o.x-r.x,r.y-o.y):Math.atan2(r.x-o.x,o.y-r.y)}function qe(){this._=null}function je(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function Be(n,t){var e=t,r=t.R,o=e.U;o?o.L===e?o.L=r:o.R=r:n._=r,r.U=o,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function Ie(n,t){var e=t,r=t.L,o=e.U;o?o.L===e?o.L=r:o.R=r:n._=r,r.U=o,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function He(n){for(;n.L;)n=n.L;return n}function Ve(n,t){var e,r,o,a=n.sort(Xe).pop();for(Wi=[],Zi=new Array(n.length),Ji=new qe,Ki=new qe;;)if(o=$i,a&&(!o||a.y<o.y||a.y===o.y&&a.x<o.x))(a.x!==e||a.y!==r)&&(Zi[a.i]=new Ee(a),Se(a),e=a.x,r=a.y),a=n.pop();else{if(!o)break;_e(o.arc)}t&&(function(n){for(var t,e=Wi,r=Ot(n[0][0],n[0][1],n[1][0],n[1][1]),o=e.length;o--;)(!Ce(t=e[o],n)||!r(t)||ha(t.a.x-t.b.x)<Ra&&ha(t.a.y-t.b.y)<Ra)&&(t.a=t.b=null,e.splice(o,1))}(t),function(n){for(var t,e,r,o,a,i,u,s,l,c,f=n[0][0],p=n[1][0],h=n[0][1],d=n[1][1],m=Zi,v=m.length;v--;)if((a=m[v])&&a.prepare())for(u=a.edges,s=u.length,i=0;s>i;)c=u[i].end(),r=c.x,o=c.y,l=u[++i%s].start(),t=l.x,e=l.y,(ha(r-t)>Ra||ha(o-e)>Ra)&&(u.splice(i,0,new Fe(De(a.site,c,ha(r-f)<Ra&&d-o>Ra?{x:f,y:ha(t-f)<Ra?e:d}:ha(o-d)<Ra&&p-r>Ra?{x:ha(e-d)<Ra?t:p,y:d}:ha(r-p)<Ra&&o-h>Ra?{x:p,y:ha(t-p)<Ra?e:h}:ha(o-h)<Ra&&r-f>Ra?{x:ha(e-h)<Ra?t:f,y:h}:null),a.site,null)),++s)}(t));var i={cells:Zi,edges:Wi};return Ji=Ki=Wi=Zi=null,i}function Xe(n,t){return t.y-n.y||t.x-n.x}function Ge(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function Ye(n){return n.x}function We(n){return n.y}function Ze(n,t){n=ra.rgb(n),t=ra.rgb(t);var e=n.r,r=n.g,o=n.b,a=t.r-e,i=t.g-r,u=t.b-o;return function(n){return"#"+Mn(Math.round(e+a*n))+Mn(Math.round(r+i*n))+Mn(Math.round(o+u*n))}}function Je(n,t){var e,r={},o={};for(e in n)e in t?r[e]=Qe(n[e],t[e]):o[e]=n[e];for(e in t)e in n||(o[e]=t[e]);return function(n){for(e in r)o[e]=r[e](n);return o}}function $e(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function Ke(n,t){var e,r,o,a=eu.lastIndex=ru.lastIndex=0,i=-1,u=[],s=[];for(n+="",t+="";(e=eu.exec(n))&&(r=ru.exec(t));)(o=r.index)>a&&(o=t.slice(a,o),u[i]?u[i]+=o:u[++i]=o),(e=e[0])===(r=r[0])?u[i]?u[i]+=r:u[++i]=r:(u[++i]=null,s.push({i:i,x:$e(e,r)})),a=ru.lastIndex;return a<t.length&&(o=t.slice(a),u[i]?u[i]+=o:u[++i]=o),u.length<2?s[0]?(t=s[0].x,function(n){return t(n)+""}):function(){return t}:(t=s.length,function(n){for(var e,r=0;t>r;++r)u[(e=s[r]).i]=e.x(n);return u.join("")})}function Qe(n,t){for(var e,r=ra.interpolators.length;--r>=0&&!(e=ra.interpolators[r](n,t)););return e}function nr(n,t){var e,r=[],o=[],a=n.length,i=t.length,u=Math.min(n.length,t.length);for(e=0;u>e;++e)r.push(Qe(n[e],t[e]));for(;a>e;++e)o[e]=n[e];for(;i>e;++e)o[e]=t[e];return function(n){for(e=0;u>e;++e)o[e]=r[e](n);return o}}function tr(n){return function(t){return 1-n(1-t)}}function er(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function rr(n){return n*n}function or(n){return n*n*n}function ar(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function ir(n){return 1-Math.cos(n*La)}function ur(n){return Math.pow(2,10*(n-1))}function sr(n){return 1-Math.sqrt(1-n*n)}function lr(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function cr(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function fr(n){var t=[n.a,n.b],e=[n.c,n.d],r=hr(t),o=pr(t,e),a=hr(function(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}(e,t,-o))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,o*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Da,this.translate=[n.e,n.f],this.scale=[r,a],this.skew=a?Math.atan2(o,a)*Da:0}function pr(n,t){return n[0]*t[0]+n[1]*t[1]}function hr(n){var t=Math.sqrt(pr(n,n));return t&&(n[0]/=t,n[1]/=t),t}function dr(n){return n.length?n.pop()+",":""}function mr(n,t){var e=[],r=[];return n=ra.transform(n),t=ra.transform(t),function(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var o=e.push("translate(",null,",",null,")");r.push({i:o-4,x:$e(n[0],t[0])},{i:o-2,x:$e(n[1],t[1])})}else(t[0]||t[1])&&e.push("translate("+t+")")}(n.translate,t.translate,e,r),function(n,t,e,r){n!==t?(n-t>180?t+=360:t-n>180&&(n+=360),r.push({i:e.push(dr(e)+"rotate(",null,")")-2,x:$e(n,t)})):t&&e.push(dr(e)+"rotate("+t+")")}(n.rotate,t.rotate,e,r),function(n,t,e,r){n!==t?r.push({i:e.push(dr(e)+"skewX(",null,")")-2,x:$e(n,t)}):t&&e.push(dr(e)+"skewX("+t+")")}(n.skew,t.skew,e,r),function(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var o=e.push(dr(e)+"scale(",null,",",null,")");r.push({i:o-4,x:$e(n[0],t[0])},{i:o-2,x:$e(n[1],t[1])})}else(1!==t[0]||1!==t[1])&&e.push(dr(e)+"scale("+t+")")}(n.scale,t.scale,e,r),n=t=null,function(n){for(var t,o=-1,a=r.length;++o<a;)e[(t=r[o]).i]=t.x(n);return e.join("")}}function vr(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function gr(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function yr(n){for(var t=n.source,e=n.target,r=function(n,t){if(n===t)return n;for(var e=br(n),r=br(t),o=e.pop(),a=r.pop(),i=null;o===a;)i=o,o=e.pop(),a=r.pop();return i}(t,e),o=[t];t!==r;)t=t.parent,o.push(t);for(var a=o.length;e!==r;)o.splice(a,0,e),e=e.parent;return o}function br(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function xr(n){n.fixed|=2}function Mr(n){n.fixed&=-7}function wr(n){n.fixed|=4,n.px=n.x,n.py=n.y}function kr(n){n.fixed&=-5}function _r(n,t){return ra.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=Pr,n}function Sr(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(o=n.children)&&(r=o.length))for(var r,o;--r>=0;)e.push(o[r])}function Ar(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(a=n.children)&&(o=a.length))for(var o,a,i=-1;++i<o;)e.push(a[i]);for(;null!=(n=r.pop());)t(n)}function Tr(n){return n.children}function Er(n){return n.value}function Rr(n,t){return t.value-n.value}function Pr(n){return ra.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function Nr(n){return n.x}function Or(n){return n.y}function Cr(n,t,e){n.y0=t,n.y=e}function Lr(n){return ra.range(n.length)}function Ur(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function Dr(n){for(var t,e=1,r=0,o=n[0][1],a=n.length;a>e;++e)(t=n[e][1])>o&&(r=e,o=t);return r}function zr(n){return n.reduce(Fr,0)}function Fr(n,t){return n+t[1]}function qr(n,t){return jr(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function jr(n,t){for(var e=-1,r=+n[0],o=(n[1]-r)/t,a=[];++e<=t;)a[e]=o*e+r;return a}function Br(n){return[ra.min(n),ra.max(n)]}function Ir(n,t){return n.value-t.value}function Hr(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function Vr(n,t){n._pack_next=t,t._pack_prev=n}function Xr(n,t){var e=t.x-n.x,r=t.y-n.y,o=n.r+t.r;return.999*o*o>e*e+r*r}function Gr(n){function t(n){c=Math.min(n.x-n.r,c),f=Math.max(n.x+n.r,f),p=Math.min(n.y-n.r,p),h=Math.max(n.y+n.r,h)}if((e=n.children)&&(l=e.length)){var e,r,o,a,i,u,s,l,c=1/0,f=-1/0,p=1/0,h=-1/0;if(e.forEach(Yr),(r=e[0]).x=-r.r,r.y=0,t(r),l>1&&((o=e[1]).x=o.r,o.y=0,t(o),l>2))for(a=e[2],Zr(r,o,a),t(a),Hr(r,a),r._pack_prev=a,Hr(a,o),o=r._pack_next,i=3;l>i;i++){Zr(r,o,a=e[i]);var d=0,m=1,v=1;for(u=o._pack_next;u!==o;u=u._pack_next,m++)if(Xr(u,a)){d=1;break}if(1==d)for(s=r._pack_prev;s!==u._pack_prev&&!Xr(s,a);s=s._pack_prev,v++);d?(v>m||m==v&&o.r<r.r?Vr(r,o=u):Vr(r=s,o),i--):(Hr(r,a),o=a,t(a))}var g=(c+f)/2,y=(p+h)/2,b=0;for(i=0;l>i;i++)(a=e[i]).x-=g,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));n.r=b,e.forEach(Wr)}}function Yr(n){n._pack_next=n._pack_prev=n}function Wr(n){delete n._pack_next,delete n._pack_prev}function Zr(n,t,e){var r=n.r+e.r,o=t.x-n.x,a=t.y-n.y;if(r&&(o||a)){var i=t.r+e.r,u=o*o+a*a,s=.5+((r*=r)-(i*=i))/(2*u),l=Math.sqrt(Math.max(0,2*i*(r+u)-(r-=u)*r-i*i))/(2*u);e.x=n.x+s*o+l*a,e.y=n.y+s*a-l*o}else e.x=n.x+r,e.y=n.y}function Jr(n,t){return n.parent==t.parent?1:2}function $r(n){var t=n.children;return t.length?t[0]:n.t}function Kr(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Qr(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function no(n,t,e){return n.a.parent===t.parent?n.a:e}function to(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function eo(n,t){var e=n.x+t[3],r=n.y+t[0],o=n.dx-t[1]-t[3],a=n.dy-t[0]-t[2];return 0>o&&(e+=o/2,o=0),0>a&&(r+=a/2,a=0),{x:e,y:r,dx:o,dy:a}}function ro(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function oo(n){return n.rangeExtent?n.rangeExtent():ro(n.range())}function ao(n,t,e,r){var o=e(n[0],n[1]),a=r(t[0],t[1]);return function(n){return a(o(n))}}function io(n,t){var e,r=0,o=n.length-1,a=n[r],i=n[o];return a>i&&(e=r,r=o,o=e,e=a,a=i,i=e),n[r]=t.floor(a),n[o]=t.ceil(i),n}function uo(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:du}function so(n,t,e,r){var o=[],a=[],i=0,u=Math.min(n.length,t.length)-1;for(n[u]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++i<=u;)o.push(e(n[i-1],n[i])),a.push(r(t[i-1],t[i]));return function(t){var e=ra.bisect(n,t,1,u)-1;return a[e](o[e](t))}}function lo(n,t){return ra.rebind(n,t,"range","rangeRound","interpolate","clamp")}function co(n,t){return io(n,uo(fo(n,t)[2])),io(n,uo(fo(n,t)[2])),n}function fo(n,t){null==t&&(t=10);var e=ro(n),r=e[1]-e[0],o=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*o;return.15>=a?o*=10:.35>=a?o*=5:.75>=a&&(o*=2),e[0]=Math.ceil(e[0]/o)*o,e[1]=Math.floor(e[1]/o)*o+.5*o,e[2]=o,e}function po(n,t){return ra.range.apply(ra,fo(n,t))}function ho(n,t,e){var r=fo(n,t);if(e){var o=ei.exec(e);if(o.shift(),"s"===o[8]){var a=ra.formatPrefix(Math.max(ha(r[0]),ha(r[1])));return o[7]||(o[7]="."+mo(a.scale(r[2]))),o[8]="f",e=ra.format(o.join("")),function(n){return e(a.scale(n))+a.symbol}}o[7]||(o[7]="."+function(n,t){var e=mo(t[2]);return n in mu?Math.abs(e-mo(Math.max(ha(t[0]),ha(t[1]))))+ +("e"!==n):e-2*("%"===n)}(o[8],r)),e=o.join("")}else e=",."+mo(r[2])+"f";return ra.format(e)}function mo(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function vo(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function go(){return 0}function yo(n){return n.innerRadius}function bo(n){return n.outerRadius}function xo(n){return n.startAngle}function Mo(n){return n.endAngle}function wo(n){return n&&n.padAngle}function ko(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function _o(n,t,e,r,o){var a=n[0]-t[0],i=n[1]-t[1],u=(o?r:-r)/Math.sqrt(a*a+i*i),s=u*i,l=-u*a,c=n[0]+s,f=n[1]+l,p=t[0]+s,h=t[1]+l,d=(c+p)/2,m=(f+h)/2,v=p-c,g=h-f,y=v*v+g*g,b=e-r,x=c*h-p*f,M=(0>g?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),w=(x*g-v*M)/y,k=(-x*v-g*M)/y,_=(x*g+v*M)/y,S=(-x*v+g*M)/y,A=w-d,T=k-m,E=_-d,R=S-m;return A*A+T*T>E*E+R*R&&(w=_,k=S),[[w-s,k-l],[w*e/b,k*e/b]]}function So(n){function t(t){function i(){l.push("M",a(n(c),u))}for(var s,l=[],c=[],f=-1,p=t.length,h=Tn(e),d=Tn(r);++f<p;)o.call(this,s=t[f],f)?c.push([+h.call(this,s,f),+d.call(this,s,f)]):c.length&&(i(),c=[]);return c.length&&i(),l.length?l.join(""):null}var e=de,r=me,o=_t,a=Ao,i=a.key,u=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(i="function"==typeof n?a=n:(a=ku.get(n)||Ao).key,t):i},t.tension=function(n){return arguments.length?(u=n,t):u},t}function Ao(n){return n.length>1?n.join("L"):n+"Z"}function To(n){return n.join("L")+"Z"}function Eo(n){for(var t=0,e=n.length,r=n[0],o=[r[0],",",r[1]];++t<e;)o.push("V",(r=n[t])[1],"H",r[0]);return o.join("")}function Ro(n){for(var t=0,e=n.length,r=n[0],o=[r[0],",",r[1]];++t<e;)o.push("H",(r=n[t])[0],"V",r[1]);return o.join("")}function Po(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return Ao(n);var e=n.length!=t.length,r="",o=n[0],a=n[1],i=t[0],u=i,s=1;if(e&&(r+="Q"+(a[0]-2*i[0]/3)+","+(a[1]-2*i[1]/3)+","+a[0]+","+a[1],o=n[1],s=2),t.length>1){u=t[1],a=n[s],s++,r+="C"+(o[0]+i[0])+","+(o[1]+i[1])+","+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1];for(var l=2;l<t.length;l++,s++)a=n[s],u=t[l],r+="S"+(a[0]-u[0])+","+(a[1]-u[1])+","+a[0]+","+a[1]}if(e){var c=n[s];r+="Q"+(a[0]+2*u[0]/3)+","+(a[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function No(n,t){for(var e,r=[],o=(1-t)/2,a=n[0],i=n[1],u=1,s=n.length;++u<s;)e=a,a=i,i=n[u],r.push([o*(i[0]-e[0]),o*(i[1]-e[1])]);return r}function Oo(n){if(n.length<3)return Ao(n);var t=1,e=n.length,r=n[0],o=r[0],a=r[1],i=[o,o,o,(r=n[1])[0]],u=[a,a,a,r[1]],s=[o,",",a,"L",Co(Au,i),",",Co(Au,u)];for(n.push(n[e-1]);++t<=e;)r=n[t],i.shift(),i.push(r[0]),u.shift(),u.push(r[1]),Lo(s,i,u);return n.pop(),s.push("L",r),s.join("")}function Co(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Lo(n,t,e){n.push("C",Co(_u,t),",",Co(_u,e),",",Co(Su,t),",",Co(Su,e),",",Co(Au,t),",",Co(Au,e))}function Uo(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Do(n){for(var t,e,r,o,a=[],i=function(n){for(var t=0,e=n.length-1,r=[],o=n[0],a=n[1],i=r[0]=Uo(o,a);++t<e;)r[t]=(i+(i=Uo(o=a,a=n[t+1])))/2;return r[t]=i,r}(n),u=-1,s=n.length-1;++u<s;)t=Uo(n[u],n[u+1]),ha(t)<Ra?i[u]=i[u+1]=0:(e=i[u]/t,r=i[u+1]/t,(o=e*e+r*r)>9&&(o=3*t/Math.sqrt(o),i[u]=o*e,i[u+1]=o*r));for(u=-1;++u<=s;)o=(n[Math.min(s,u+1)][0]-n[Math.max(0,u-1)][0])/(6*(1+i[u]*i[u])),a.push([o||0,i[u]*o||0]);return a}function zo(n){for(var t,e,r,o=-1,a=n.length;++o<a;)t=n[o],e=t[0],r=t[1]-La,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Fo(n){function t(t){function s(){m.push("M",u(n(g),f),c,l(n(v.reverse()),f),"Z")}for(var p,h,d,m=[],v=[],g=[],y=-1,b=t.length,x=Tn(e),M=Tn(o),w=e===r?function(){return h}:Tn(r),k=o===a?function(){return d}:Tn(a);++y<b;)i.call(this,p=t[y],y)?(v.push([h=+x.call(this,p,y),d=+M.call(this,p,y)]),g.push([+w.call(this,p,y),+k.call(this,p,y)])):v.length&&(s(),v=[],g=[]);return v.length&&s(),m.length?m.join(""):null}var e=de,r=de,o=0,a=me,i=_t,u=Ao,s=u.key,l=u,c="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(o=a=n,t):a},t.y0=function(n){return arguments.length?(o=n,t):o},t.y1=function(n){return arguments.length?(a=n,t):a},t.defined=function(n){return arguments.length?(i=n,t):i},t.interpolate=function(n){return arguments.length?(s="function"==typeof n?u=n:(u=ku.get(n)||Ao).key,l=u.reverse||u,c=u.closed?"M":"L",t):s},t.tension=function(n){return arguments.length?(f=n,t):f},t}function qo(n){return n.radius}function jo(n){return[n.x,n.y]}function Bo(){return 64}function Io(){return"circle"}function Ho(n){var t=Math.sqrt(n/Na);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Vo(n){return function(){var t,e,r;(t=this[n])&&(r=t[e=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[e]:delete this[n],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Xo(n,t,e){return ya(n,Cu),n.namespace=t,n.id=e,n}function Go(n,t,e,r){var o=n.id,a=n.namespace;return G(n,"function"==typeof e?function(n,i,u){n[a][o].tween.set(t,r(e.call(n,n.__data__,i,u)))}:(e=r(e),function(n){n[a][o].tween.set(t,e)}))}function Yo(n){return null==n&&(n=""),function(){this.textContent=n}}function Wo(n){return null==n?"__transition__":"__transition_"+n+"__"}function Zo(n,t,e,r,o){function a(e){var o=p.active,a=p[o];for(var h in a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[o],a.event&&a.event.interrupt.call(n,n.__data__,a.index)),p)if(r>+h){var m=p[h];m.timer.c=null,m.timer.t=NaN,--p.count,delete p[h]}s.c=i,Pn(function(){return s.c&&i(e||1)&&(s.c=null,s.t=NaN),1},0,u),p.active=r,d.event&&d.event.start.call(n,n.__data__,t),f=[],d.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&f.push(r)}),c=d.ease,l=d.duration}function i(o){for(var a=o/l,i=c(a),u=f.length;u>0;)f[--u].call(n,i);return a>=1?(d.event&&d.event.end.call(n,n.__data__,t),--p.count?delete p[r]:delete n[e],1):void 0}var u,s,l,c,f,p=n[e]||(n[e]={active:0,count:0}),d=p[r];d||(u=o.time,s=Pn(function(n){var t=d.delay;return s.t=t+u,n>=t?a(n-t):void(s.c=a)},0,u),d=p[r]={tween:new h,time:u,timer:s,delay:o.delay,duration:o.duration,ease:o.ease,index:t},o=null,++p.count)}function Jo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function $o(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function Ko(n){return n.toISOString()}function Qo(n,t,e){function r(t){return n(t)}function o(n,e){var r=n[1]-n[0],o=r/e,a=ra.bisect(Iu,o);return a==Iu.length?[t.year,fo(n.map(function(n){return n/31536e6}),e)[2]]:a?t[o/Iu[a-1]<Iu[a]/o?a-1:a]:[Xu,fo(n,e)[2]]}return r.invert=function(t){return na(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(na)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,na(+e+1),t).length}var a=r.domain(),i=ro(a),u=null==n?o(i,10):"number"==typeof n&&o(i,n);return u&&(n=u[0],t=u[1]),r.domain(io(a,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=na(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=na(+t+1);return t}}:n))},r.ticks=function(n,t){var e=ro(r.domain()),a=null==n?o(e,10):"number"==typeof n?o(e,n):!n.range&&[{range:n},t];return a&&(n=a[0],t=a[1]),n.range(e[0],na(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Qo(n.copy(),t,e)},lo(r,n)}function na(n){return new Date(n)}function ta(n){return JSON.parse(n.responseText)}function ea(n){var t=ia.createRange();return t.selectNode(ia.body),t.createContextualFragment(n.responseText)}var ra={version:"3.5.13"},oa=[].slice,aa=function(n){return oa.call(n)},ia=this.document;if(ia)try{aa(ia.documentElement.childNodes)[0].nodeType}catch(n){aa=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),ia)try{ia.createElement("DIV").style.setProperty("opacity",0,"")}catch(n){var ua=this.Element.prototype,sa=ua.setAttribute,la=ua.setAttributeNS,ca=this.CSSStyleDeclaration.prototype,fa=ca.setProperty;ua.setAttribute=function(n,t){sa.call(this,n,t+"")},ua.setAttributeNS=function(n,t,e){la.call(this,n,t,e+"")},ca.setProperty=function(n,t,e){fa.call(this,n,t+"",e)}}ra.ascending=u,ra.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:NaN},ra.min=function(n,t){var e,r,o=-1,a=n.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=n[o])&&r>=r){e=r;break}for(;++o<a;)null!=(r=n[o])&&e>r&&(e=r)}else{for(;++o<a;)if(null!=(r=t.call(n,n[o],o))&&r>=r){e=r;break}for(;++o<a;)null!=(r=t.call(n,n[o],o))&&e>r&&(e=r)}return e},ra.max=function(n,t){var e,r,o=-1,a=n.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=n[o])&&r>=r){e=r;break}for(;++o<a;)null!=(r=n[o])&&r>e&&(e=r)}else{for(;++o<a;)if(null!=(r=t.call(n,n[o],o))&&r>=r){e=r;break}for(;++o<a;)null!=(r=t.call(n,n[o],o))&&r>e&&(e=r)}return e},ra.extent=function(n,t){var e,r,o,a=-1,i=n.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=n[a])&&r>=r){e=o=r;break}for(;++a<i;)null!=(r=n[a])&&(e>r&&(e=r),r>o&&(o=r))}else{for(;++a<i;)if(null!=(r=t.call(n,n[a],a))&&r>=r){e=o=r;break}for(;++a<i;)null!=(r=t.call(n,n[a],a))&&(e>r&&(e=r),r>o&&(o=r))}return[e,o]},ra.sum=function(n,t){var e,r=0,o=n.length,a=-1;if(1===arguments.length)for(;++a<o;)l(e=+n[a])&&(r+=e);else for(;++a<o;)l(e=+t.call(n,n[a],a))&&(r+=e);return r},ra.mean=function(n,t){var e,r=0,o=n.length,a=-1,i=o;if(1===arguments.length)for(;++a<o;)l(e=s(n[a]))?r+=e:--i;else for(;++a<o;)l(e=s(t.call(n,n[a],a)))?r+=e:--i;return i?r/i:void 0},ra.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),o=+n[r-1],a=e-r;return a?o+a*(n[r]-o):o},ra.median=function(n,t){var e,r=[],o=n.length,a=-1;if(1===arguments.length)for(;++a<o;)l(e=s(n[a]))&&r.push(e);else for(;++a<o;)l(e=s(t.call(n,n[a],a)))&&r.push(e);return r.length?ra.quantile(r.sort(u),.5):void 0},ra.variance=function(n,t){var e,r,o=n.length,a=0,i=0,u=-1,c=0;if(1===arguments.length)for(;++u<o;)l(e=s(n[u]))&&(a+=(r=e-a)/++c,i+=r*(e-a));else for(;++u<o;)l(e=s(t.call(n,n[u],u)))&&(a+=(r=e-a)/++c,i+=r*(e-a));return c>1?i/(c-1):void 0},ra.deviation=function(){var n=ra.variance.apply(this,arguments);return n?Math.sqrt(n):n};var pa=c(u);ra.bisectLeft=pa.left,ra.bisect=ra.bisectRight=pa.right,ra.bisector=function(n){return c(1===n.length?function(t,e){return u(n(t),e)}:n)},ra.shuffle=function(n,t,e){(a=arguments.length)<3&&(e=n.length,2>a&&(t=0));for(var r,o,a=e-t;a;)o=Math.random()*a--|0,r=n[a+t],n[a+t]=n[o+t],n[o+t]=r;return n},ra.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},ra.pairs=function(n){for(var t=0,e=n.length-1,r=n[0],o=new Array(0>e?0:e);e>t;)o[t]=[r,r=n[++t]];return o},ra.zip=function(){if(!(r=arguments.length))return[];for(var n=-1,t=ra.min(arguments,f),e=new Array(t);++n<t;)for(var r,o=-1,a=e[n]=new Array(r);++o<r;)a[o]=arguments[o][n];return e},ra.transpose=function(n){return ra.zip.apply(ra,n)},ra.keys=function(n){var t=[];for(var e in n)t.push(e);return t},ra.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},ra.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},ra.merge=function(n){for(var t,e,r,o=n.length,a=-1,i=0;++a<o;)i+=n[a].length;for(e=new Array(i);--o>=0;)for(r=n[o],t=r.length;--t>=0;)e[--i]=r[t];return e};var ha=Math.abs;ra.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e==1/0)throw new Error("infinite range");var r,o=[],a=function(n){for(var t=1;n*t%1;)t*=10;return t}(ha(e)),i=-1;if(n*=a,t*=a,0>(e*=a))for(;(r=n+e*++i)>t;)o.push(r/a);else for(;(r=n+e*++i)<t;)o.push(r/a);return o},ra.map=function(n,t){var e=new h;if(n instanceof h)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,o=-1,a=n.length;if(1===arguments.length)for(;++o<a;)e.set(o,n[o]);else for(;++o<a;)e.set(t.call(n,r=n[o],o),r)}else for(var i in n)e.set(i,n[i]);return e};var da="__proto__",ma="\0";p(h,{has:v,get:function(n){return this._[d(n)]},set:function(n,t){return this._[d(n)]=t},remove:g,keys:y,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:m(t),value:this._[t]});return n},size:b,empty:x,forEach:function(n){for(var t in this._)n.call(this,m(t),this._[t])}}),ra.nest=function(){function n(a,i,u){if(u>=o.length)return e?e.call(r,i):t?i.sort(t):i;for(var s,l,c,f,p=-1,d=i.length,m=o[u++],v=new h;++p<d;)(f=v.get(s=m(l=i[p])))?f.push(l):v.set(s,[l]);return a?(l=a(),c=function(t,e){l.set(t,n(a,e,u))}):(l={},c=function(t,e){l[t]=n(a,e,u)}),v.forEach(c),l}var t,e,r={},o=[],a=[];return r.map=function(t,e){return n(e,t,0)},r.entries=function(t){return function n(t,e){if(e>=o.length)return t;var r=[],i=a[e++];return t.forEach(function(t,o){r.push({key:t,values:n(o,e)})}),i?r.sort(function(n,t){return i(n.key,t.key)}):r}(n(ra.map,t,0),0)},r.key=function(n){return o.push(n),r},r.sortKeys=function(n){return a[o.length-1]=n,r},r.sortValues=function(n){return t=n,r},r.rollup=function(n){return e=n,r},r},ra.set=function(n){var t=new M;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},p(M,{has:v,add:function(n){return this._[d(n+="")]=!0,n},remove:g,values:y,size:b,empty:x,forEach:function(n){for(var t in this._)n.call(this,m(t))}}),ra.behavior={},ra.rebind=function(n,t){for(var e,r=1,o=arguments.length;++r<o;)n[e=arguments[r]]=k(n,t,t[e]);return n};var va=["webkit","ms","moz","Moz","o","O"];ra.dispatch=function(){for(var n=new A,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=T(n);return n},A.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},ra.event=null,ra.requote=function(n){return n.replace(ga,"\\$&")};var ga=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ya={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},ba=function(n,t){return t.querySelector(n)},xa=function(n,t){return t.querySelectorAll(n)},Ma=function(n,t){var e=n.matches||n[_(n,"matchesSelector")];return(Ma=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(ba=function(n,t){return Sizzle(n,t)[0]||null},xa=Sizzle,Ma=Sizzle.matchesSelector),ra.selection=function(){return ra.select(ia.documentElement)};var wa=ra.selection.prototype=[];wa.select=function(n){var t,e,r,o,a=[];n=O(n);for(var i=-1,u=this.length;++i<u;){a.push(t=[]),t.parentNode=(r=this[i]).parentNode;for(var s=-1,l=r.length;++s<l;)(o=r[s])?(t.push(e=n.call(o,o.__data__,s,i)),e&&"__data__"in o&&(e.__data__=o.__data__)):t.push(null)}return N(a)},wa.selectAll=function(n){var t,e,r=[];n=C(n);for(var o=-1,a=this.length;++o<a;)for(var i=this[o],u=-1,s=i.length;++u<s;)(e=i[u])&&(r.push(t=aa(n.call(e,e.__data__,u,o))),t.parentNode=e);return N(r)};var ka={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ra.ns={prefix:ka,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),ka.hasOwnProperty(e)?{space:ka[e],local:n}:n}},wa.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return(n=ra.ns.qualify(n)).local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(L(t,n[t]));return this}return this.each(L(n,t))},wa.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=z(n)).length,o=-1;if(t=e.classList){for(;++o<r;)if(!t.contains(n[o]))return!1}else for(t=e.getAttribute("class");++o<r;)if(!D(n[o]).test(t))return!1;return!0}for(t in n)this.each(F(t,n[t]));return this}return this.each(F(n,t))},wa.style=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){for(e in 2>r&&(t=""),n)this.each(j(e,n[e],t));return this}if(2>r){var o=this.node();return i(o).getComputedStyle(o,null).getPropertyValue(n)}e=""}return this.each(j(n,t,e))},wa.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(B(t,n[t]));return this}return this.each(B(n,t))},wa.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},wa.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},wa.append=function(n){return n=I(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},wa.insert=function(n,t){return n=I(n),t=O(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},wa.remove=function(){return this.each(H)},wa.data=function(n,t){function e(n,e){var r,o,a,i=n.length,c=e.length,f=Math.min(i,c),p=new Array(c),d=new Array(c),m=new Array(i);if(t){var v,g=new h,y=new Array(i);for(r=-1;++r<i;)(o=n[r])&&(g.has(v=t.call(o,o.__data__,r))?m[r]=o:g.set(v,o),y[r]=v);for(r=-1;++r<c;)(o=g.get(v=t.call(e,a=e[r],r)))?!0!==o&&(p[r]=o,o.__data__=a):d[r]=V(a),g.set(v,!0);for(r=-1;++r<i;)r in y&&!0!==g.get(y[r])&&(m[r]=n[r])}else{for(r=-1;++r<f;)o=n[r],a=e[r],o?(o.__data__=a,p[r]=o):d[r]=V(a);for(;c>r;++r)d[r]=V(e[r]);for(;i>r;++r)m[r]=n[r]}d.update=p,d.parentNode=p.parentNode=m.parentNode=n.parentNode,u.push(d),s.push(p),l.push(m)}var r,o,a=-1,i=this.length;if(!arguments.length){for(n=new Array(i=(r=this[0]).length);++a<i;)(o=r[a])&&(n[a]=o.__data__);return n}var u=Y([]),s=N([]),l=N([]);if("function"==typeof n)for(;++a<i;)e(r=this[a],n.call(r,r.parentNode.__data__,a));else for(;++a<i;)e(r=this[a],n);return s.enter=function(){return u},s.exit=function(){return l},s},wa.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},wa.filter=function(n){var t,e,r,o=[];"function"!=typeof n&&(n=X(n));for(var a=0,i=this.length;i>a;a++){o.push(t=[]),t.parentNode=(e=this[a]).parentNode;for(var u=0,s=e.length;s>u;u++)(r=e[u])&&n.call(r,r.__data__,u,a)&&t.push(r)}return N(o)},wa.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],o=r.length-1,a=r[o];--o>=0;)(e=r[o])&&(a&&a!==e.nextSibling&&a.parentNode.insertBefore(e,a),a=e);return this},wa.sort=function(n){n=function(n){return arguments.length||(n=u),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},wa.each=function(n){return G(this,function(t,e,r){n.call(t,t.__data__,e,r)})},wa.call=function(n){var t=aa(arguments);return n.apply(t[0]=this,t),this},wa.empty=function(){return!this.node()},wa.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,o=e.length;o>r;r++){var a=e[r];if(a)return a}return null},wa.size=function(){var n=0;return G(this,function(){++n}),n};var _a=[];ra.selection.enter=Y,ra.selection.enter.prototype=_a,_a.append=wa.append,_a.empty=wa.empty,_a.node=wa.node,_a.call=wa.call,_a.size=wa.size,_a.select=function(n){for(var t,e,r,o,a,i=[],u=-1,s=this.length;++u<s;){r=(o=this[u]).update,i.push(t=[]),t.parentNode=o.parentNode;for(var l=-1,c=o.length;++l<c;)(a=o[l])?(t.push(r[l]=e=n.call(o.parentNode,a.__data__,l,u)),e.__data__=a.__data__):t.push(null)}return N(i)},_a.insert=function(n,t){return arguments.length<2&&(t=function(n){var t,e;return function(r,o,a){var i,u=n[a].update,s=u.length;for(a!=e&&(e=a,t=0),o>=t&&(t=o+1);!(i=u[t])&&++t<s;);return i}}(this)),wa.insert.call(this,n,t)},ra.select=function(n){var t;return"string"==typeof n?(t=[ba(n,ia)]).parentNode=ia.documentElement:(t=[n]).parentNode=a(n),N([t])},ra.selectAll=function(n){var t;return"string"==typeof n?(t=aa(xa(n,ia))).parentNode=ia.documentElement:(t=aa(n)).parentNode=null,N([t])},wa.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){for(e in 2>r&&(t=!1),n)this.each(W(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(W(n,t,e))};var Sa=ra.map({mouseenter:"mouseover",mouseleave:"mouseout"});ia&&Sa.forEach(function(n){"on"+n in ia&&Sa.remove(n)});var Aa,Ta=0;ra.mouse=function(n){return K(n,R())};var Ea=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ra.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=R().changedTouches),t)for(var r,o=0,a=t.length;a>o;++o)if((r=t[o]).identifier===e)return K(n,r)},ra.behavior.drag=function(){function n(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function t(n,t,o,a,i){return function(){var u,s=this,l=ra.event.target,c=s.parentNode,f=e.of(s,arguments),p=0,h=n(),d=".drag"+(null==h?"":"-"+h),m=ra.select(o(l)).on(a+d,function(){var n,e,r=t(c,h);r&&(n=r[0]-g[0],e=r[1]-g[1],p|=n|e,g=r,f({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:n,dy:e}))}).on(i+d,function(){t(c,h)&&(m.on(a+d,null).on(i+d,null),v(p),f({type:"dragend"}))}),v=$(l),g=t(c,h);u=r?[(u=r.apply(s,arguments)).x-g[0],u.y-g[1]]:[0,0],f({type:"dragstart"})}}var e=P(n,"drag","dragstart","dragend"),r=null,o=t(S,ra.mouse,i,"mousemove","mouseup"),a=t(Q,ra.touch,w,"touchmove","touchend");return n.origin=function(t){return arguments.length?(r=t,n):r},ra.rebind(n,e,"on")},ra.touches=function(n,t){return arguments.length<2&&(t=R().touches),t?aa(t).map(function(t){var e=K(n,t);return e.identifier=t.identifier,e}):[]};var Ra=1e-6,Pa=Ra*Ra,Na=Math.PI,Oa=2*Na,Ca=Oa-Ra,La=Na/2,Ua=Na/180,Da=180/Na,za=Math.SQRT2;ra.interpolateZoom=function(n,t){var e,r,o=n[0],a=n[1],i=n[2],u=t[0],s=t[1],l=t[2],c=u-o,f=s-a,p=c*c+f*f;if(Pa>p)r=Math.log(l/i)/za,e=function(n){return[o+n*c,a+n*f,i*Math.exp(za*n*r)]};else{var h=Math.sqrt(p),d=(l*l-i*i+4*p)/(2*i*2*h),m=(l*l-i*i-4*p)/(2*l*2*h),v=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(m*m+1)-m);r=(g-v)/za,e=function(n){var t=n*r,e=on(v),u=i/(2*h)*(e*function(n){return((n=Math.exp(2*n))-1)/(n+1)}(za*t+v)-function(n){return((n=Math.exp(n))-1/n)/2}(v));return[o+u*c,a+u*f,i*e/on(za*t+v)]}}return e.duration=1e3*r,e},ra.behavior.zoom=function(){function n(n){n.on(R,c).on(qa+".zoom",p).on("dblclick.zoom",h).on(C,f)}function t(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function e(n){k.k=Math.max(S[0],Math.min(S[1],n))}function r(n,t){t=function(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function o(t,o,a,i){t.__chart__={x:k.x,y:k.y,k:k.k},e(Math.pow(2,i)),r(m=o,a),t=ra.select(t),A>0&&(t=t.transition().duration(A)),t.call(n.event)}function a(){x&&x.domain(b.range().map(function(n){return(n-k.x)/k.k}).map(b.invert)),w&&w.domain(M.range().map(function(n){return(n-k.y)/k.k}).map(M.invert))}function u(n){T++||n({type:"zoomstart"})}function s(n){a(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function l(n){--T||(n({type:"zoomend"}),m=null)}function c(){var n=this,e=L.of(n,arguments),o=0,a=ra.select(i(n)).on(N,function(){o=1,r(ra.mouse(n),c),s(e)}).on(O,function(){a.on(N,null).on(O,null),f(o),l(e)}),c=t(ra.mouse(n)),f=$(n);Ou.call(n),u(e)}function f(){function n(){var n=ra.touches(d);return h=k.k,n.forEach(function(n){n.identifier in v&&(v[n.identifier]=t(n))}),n}function a(){var t=ra.event.target;ra.select(t).on(x,i).on(M,p),w.push(t);for(var e=ra.event.changedTouches,r=0,a=e.length;a>r;++r)v[e[r].identifier]=null;var u=n(),s=Date.now();if(1===u.length){if(500>s-y){var l=u[0];o(d,l,v[l.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),E()}y=s}else if(u.length>1){var l=u[0],c=u[1],f=l[0]-c[0],h=l[1]-c[1];g=f*f+h*h}}function i(){var n,t,o,a,i=ra.touches(d);Ou.call(d);for(var u=0,l=i.length;l>u;++u,a=null)if(o=i[u],a=v[o.identifier]){if(t)break;n=o,t=a}if(a){var c=(c=o[0]-n[0])*c+(c=o[1]-n[1])*c,f=g&&Math.sqrt(c/g);n=[(n[0]+o[0])/2,(n[1]+o[1])/2],t=[(t[0]+a[0])/2,(t[1]+a[1])/2],e(f*h)}y=null,r(n,t),s(m)}function p(){if(ra.event.touches.length){for(var t=ra.event.changedTouches,e=0,r=t.length;r>e;++e)delete v[t[e].identifier];for(var o in v)return void n()}ra.selectAll(w).on(b,null),_.on(R,c).on(C,f),S(),l(m)}var h,d=this,m=L.of(d,arguments),v={},g=0,b=".zoom-"+ra.event.changedTouches[0].identifier,x="touchmove"+b,M="touchend"+b,w=[],_=ra.select(d),S=$(d);a(),u(m),_.on(R,null).on(C,a)}function p(){var n=L.of(this,arguments);g?clearTimeout(g):(Ou.call(this),d=t(m=v||ra.mouse(this)),u(n)),g=setTimeout(function(){g=null,l(n)},50),E(),e(Math.pow(2,.002*Fa())*k.k),r(m,d),s(n)}function h(){var n=ra.mouse(this),e=Math.log(k.k)/Math.LN2;o(this,n,t(n),ra.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var d,m,v,g,y,b,x,M,w,k={x:0,y:0,k:1},_=[960,500],S=ja,A=250,T=0,R="mousedown.zoom",N="mousemove.zoom",O="mouseup.zoom",C="touchstart.zoom",L=P(n,"zoomstart","zoom","zoomend");return qa||(qa="onwheel"in ia?(Fa=function(){return-ra.event.deltaY*(ra.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ia?(Fa=function(){return ra.event.wheelDelta},"mousewheel"):(Fa=function(){return-ra.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=L.of(this,arguments),t=k;Pu?ra.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},u(n)}).tween("zoom:zoom",function(){var e=_[0],r=_[1],o=m?m[0]:e/2,a=m?m[1]:r/2,i=ra.interpolateZoom([(o-k.x)/k.k,(a-k.y)/k.k,e/k.k],[(o-t.x)/t.k,(a-t.y)/t.k,e/t.k]);return function(t){var r=i(t),u=e/r[2];this.__chart__=k={x:o-r[0]*u,y:a-r[1]*u,k:u},s(n)}}).each("interrupt.zoom",function(){l(n)}).each("end.zoom",function(){l(n)}):(this.__chart__=k,u(n),s(n),l(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},a(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:null},e(+t),a(),n):k.k},n.scaleExtent=function(t){return arguments.length?(S=null==t?ja:[+t[0],+t[1]],n):S},n.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],n):v},n.size=function(t){return arguments.length?(_=t&&[+t[0],+t[1]],n):_},n.duration=function(t){return arguments.length?(A=+t,n):A},n.x=function(t){return arguments.length?(x=t,b=t.copy(),k={x:0,y:0,k:1},n):x},n.y=function(t){return arguments.length?(w=t,M=t.copy(),k={x:0,y:0,k:1},n):w},ra.rebind(n,L,"on")};var Fa,qa,ja=[0,1/0];ra.color=un,un.prototype.toString=function(){return this.rgb()+""},ra.hsl=sn;var Ba=sn.prototype=new un;Ba.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new sn(this.h,this.s,this.l/n)},Ba.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new sn(this.h,this.s,n*this.l)},Ba.rgb=function(){return ln(this.h,this.s,this.l)},ra.hcl=cn;var Ia=cn.prototype=new un;Ia.brighter=function(n){return new cn(this.h,this.c,Math.min(100,this.l+Ha*(arguments.length?n:1)))},Ia.darker=function(n){return new cn(this.h,this.c,Math.max(0,this.l-Ha*(arguments.length?n:1)))},Ia.rgb=function(){return fn(this.h,this.c,this.l).rgb()},ra.lab=pn;var Ha=18,Va=.95047,Xa=1,Ga=1.08883,Ya=pn.prototype=new un;Ya.brighter=function(n){return new pn(Math.min(100,this.l+Ha*(arguments.length?n:1)),this.a,this.b)},Ya.darker=function(n){return new pn(Math.max(0,this.l-Ha*(arguments.length?n:1)),this.a,this.b)},Ya.rgb=function(){return hn(this.l,this.a,this.b)},ra.rgb=yn;var Wa=yn.prototype=new un;Wa.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,o=30;return t||e||r?(t&&o>t&&(t=o),e&&o>e&&(e=o),r&&o>r&&(r=o),new yn(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new yn(o,o,o)},Wa.darker=function(n){return new yn((n=Math.pow(.7,arguments.length?n:1))*this.r,n*this.g,n*this.b)},Wa.hsl=function(){return kn(this.r,this.g,this.b)},Wa.toString=function(){return"#"+Mn(this.r)+Mn(this.g)+Mn(this.b)};var Za=ra.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Za.forEach(function(n,t){Za.set(n,bn(t))}),ra.functor=Tn,ra.xhr=En(w),ra.dsv=function(n,t){function e(n,e,a){arguments.length<3&&(a=e,e=null);var i=Rn(n,t,null==e?r:o(e),a);return i.row=function(n){return arguments.length?i.response(null==(e=n)?r:o(n)):e},i}function r(n){return e.parse(n.responseText)}function o(n){return function(t){return e.parse(t.responseText,n)}}function a(t){return t.map(i).join(n)}function i(n){return u.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var u=new RegExp('["'+n+"\n]"),s=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var o=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(o(n),e)}:o})},e.parseRows=function(n,t){function e(){if(c>=l)return i;if(o)return o=!1,a;var t=c;if(34===n.charCodeAt(t)){for(var e=t;e++<l;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}c=e+2;var r=n.charCodeAt(e+1);return 13===r?(o=!0,10===n.charCodeAt(e+2)&&++c):10===r&&(o=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;l>c;){var r=n.charCodeAt(c++),u=1;if(10===r)o=!0;else if(13===r)o=!0,10===n.charCodeAt(c)&&(++c,++u);else if(r!==s)continue;return n.slice(t,c-u)}return n.slice(t)}for(var r,o,a={},i={},u=[],l=n.length,c=0,f=0;(r=e())!==i;){for(var p=[];r!==a&&r!==i;)p.push(r),r=e();t&&null==(p=t(p,f++))||u.push(p)}return u},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new M,o=[];return t.forEach(function(n){for(var t in n)r.has(t)||o.push(r.add(t))}),[o.map(i).join(n)].concat(t.map(function(t){return o.map(function(n){return i(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(a).join("\n")},e},ra.csv=ra.dsv(",","text/csv"),ra.tsv=ra.dsv("\t","text/tab-separated-values");var Ja,$a,Ka,Qa,ni=this[_(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};ra.timer=function(){Pn.apply(this,arguments)},ra.timer.flush=function(){On(),Cn()},ra.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var ti=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(n,t){var e=Math.pow(10,3*ha(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}});ra.formatPrefix=function(n,t){var e=0;return(n=+n)&&(0>n&&(n*=-1),t&&(n=ra.round(n,Ln(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),ti[8+e/3]};var ei=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ri=ra.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=ra.round(n,Ln(n,t))).toFixed(Math.max(0,Math.min(20,Ln(n*(1+1e-15),t))))}}),oi=ra.time={},ai=Date;Dn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ii.setUTCDate.apply(this._,arguments)},setDay:function(){ii.setUTCDay.apply(this._,arguments)},setFullYear:function(){ii.setUTCFullYear.apply(this._,arguments)},setHours:function(){ii.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ii.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ii.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ii.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ii.setUTCSeconds.apply(this._,arguments)},setTime:function(){ii.setTime.apply(this._,arguments)}};var ii=Date.prototype;oi.year=zn(function(n){return(n=oi.day(n)).setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),oi.years=oi.year.range,oi.years.utc=oi.year.utc.range,oi.day=zn(function(n){var t=new ai(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),oi.days=oi.day.range,oi.days.utc=oi.day.utc.range,oi.dayOfYear=function(n){var t=oi.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=oi[n]=zn(function(n){return(n=oi.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=oi.year(n).getDay();return Math.floor((oi.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});oi[n+"s"]=e.range,oi[n+"s"].utc=e.utc.range,oi[n+"OfYear"]=function(n){var e=oi.year(n).getDay();return Math.floor((oi.dayOfYear(n)+(e+t)%7)/7)}}),oi.week=oi.sunday,oi.weeks=oi.sunday.range,oi.weeks.utc=oi.sunday.utc.range,oi.weekOfYear=oi.sundayOfYear;var ui={"-":"",_:" ",0:"0"},si=/^\s*\d+/,li=/^%/;ra.locale=function(n){return{numberFormat:function(n){var t=n.decimal,e=n.thousands,r=n.grouping,o=n.currency,a=r&&e?function(n,t){for(var o=n.length,a=[],i=0,u=r[0],s=0;o>0&&u>0&&(s+u+1>t&&(u=Math.max(1,t-s)),a.push(n.substring(o-=u,o+u)),!((s+=u+1)>t));)u=r[i=(i+1)%r.length];return a.reverse().join(e)}:w;return function(n){var e=ei.exec(n),r=e[1]||" ",i=e[2]||">",u=e[3]||"-",s=e[4]||"",l=e[5],c=+e[6],f=e[7],p=e[8],h=e[9],d=1,m="",v="",g=!1,y=!0;switch(p&&(p=+p.substring(1)),(l||"0"===r&&"="===i)&&(l=r="0",i="="),h){case"n":f=!0,h="g";break;case"%":d=100,v="%",h="f";break;case"p":d=100,v="%",h="r";break;case"b":case"o":case"x":case"X":"#"===s&&(m="0"+h.toLowerCase());case"c":y=!1;case"d":g=!0,p=0;break;case"s":d=-1,h="r"}"$"===s&&(m=o[0],v=o[1]),"r"!=h||p||(h="g"),null!=p&&("g"==h?p=Math.max(1,Math.min(21,p)):("e"==h||"f"==h)&&(p=Math.max(0,Math.min(20,p)))),h=ri.get(h)||Un;var b=l&&f;return function(n){var e=v;if(g&&n%1)return"";var o=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===u?"":u;if(0>d){var s=ra.formatPrefix(n,p);n=s.scale(n),e=s.symbol+v}else n*=d;var x,M,w=(n=h(n,p)).lastIndexOf(".");if(0>w){var k=y?n.lastIndexOf("e"):-1;0>k?(x=n,M=""):(x=n.substring(0,k),M=n.substring(k))}else x=n.substring(0,w),M=t+n.substring(w+1);!l&&f&&(x=a(x,1/0));var _=m.length+x.length+M.length+(b?0:o.length),S=c>_?new Array(_=c-_+1).join(r):"";return b&&(x=a(S+x,S.length?c-M.length:1/0)),o+=m,n=x+M,("<"===i?o+n+S:">"===i?S+o+n:"^"===i?S.substring(0,_>>=1)+o+n+S.substring(_):o+(b?n:S+n))+e}}}(n),timeFormat:function(n){function t(n){function t(t){for(var e,o,a,i=[],u=-1,s=0;++u<r;)37===n.charCodeAt(u)&&(i.push(n.slice(s,u)),null!=(o=ui[e=n.charAt(++u)])&&(e=n.charAt(++u)),(a=x[e])&&(e=a(t,null==o?"e"===e?" ":"0":o)),i.push(e),s=u+1);return i.push(n.slice(s,u)),i.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},o=e(r,n,t,0);if(o!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&ai!==Dn,i=new(a?Dn:ai);return"j"in r?i.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),i.setFullYear(r.y,0,1),i.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(i.getDay()+5)%7:r.w+7*r.U-(i.getDay()+6)%7)):i.setFullYear(r.y,r.m,r.d),i.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),a?i._:i},t.toString=function(){return n},t}function e(n,t,e,r){for(var o,a,i,u=0,s=t.length,l=e.length;s>u;){if(r>=l)return-1;if(37===(o=t.charCodeAt(u++))){if(i=t.charAt(u++),!(a=M[i in ui?t.charAt(u++):i])||(r=a(n,e,r))<0)return-1}else if(o!=e.charCodeAt(r++))return-1}return r}var r=n.dateTime,o=n.date,a=n.time,i=n.periods,u=n.days,s=n.shortDays,l=n.months,c=n.shortMonths;t.utc=function(n){function e(n){try{var t=new(ai=Dn);return t._=n,r(t)}finally{ai=Date}}var r=t(n);return e.parse=function(n){try{ai=Dn;var t=r.parse(n);return t&&t._}finally{ai=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=rt;var f=ra.map(),p=jn(u),h=Bn(u),d=jn(s),m=Bn(s),v=jn(l),g=Bn(l),y=jn(c),b=Bn(c);i.forEach(function(n,t){f.set(n.toLowerCase(),t)});var x={a:function(n){return s[n.getDay()]},A:function(n){return u[n.getDay()]},b:function(n){return c[n.getMonth()]},B:function(n){return l[n.getMonth()]},c:t(r),d:function(n,t){return qn(n.getDate(),t,2)},e:function(n,t){return qn(n.getDate(),t,2)},H:function(n,t){return qn(n.getHours(),t,2)},I:function(n,t){return qn(n.getHours()%12||12,t,2)},j:function(n,t){return qn(1+oi.dayOfYear(n),t,3)},L:function(n,t){return qn(n.getMilliseconds(),t,3)},m:function(n,t){return qn(n.getMonth()+1,t,2)},M:function(n,t){return qn(n.getMinutes(),t,2)},p:function(n){return i[+(n.getHours()>=12)]},S:function(n,t){return qn(n.getSeconds(),t,2)},U:function(n,t){return qn(oi.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return qn(oi.mondayOfYear(n),t,2)},x:t(o),X:t(a),y:function(n,t){return qn(n.getFullYear()%100,t,2)},Y:function(n,t){return qn(n.getFullYear()%1e4,t,4)},Z:tt,"%":function(){return"%"}},M={a:function(n,t,e){d.lastIndex=0;var r=d.exec(t.slice(e));return r?(n.w=m.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(n,t,e){p.lastIndex=0;var r=p.exec(t.slice(e));return r?(n.w=h.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(n,t,e){y.lastIndex=0;var r=y.exec(t.slice(e));return r?(n.m=b.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(n,t,e){v.lastIndex=0;var r=v.exec(t.slice(e));return r?(n.m=g.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(n,t,r){return e(n,x.c.toString(),t,r)},d:Zn,e:Zn,H:$n,I:$n,j:Jn,L:nt,m:Wn,M:Kn,p:function(n,t,e){var r=f.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)},S:Qn,U:Hn,w:In,W:Vn,x:function(n,t,r){return e(n,x.x.toString(),t,r)},X:function(n,t,r){return e(n,x.X.toString(),t,r)},y:Gn,Y:Xn,Z:Yn,"%":et};return t}(n)}};var ci=ra.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ra.format=ci.numberFormat,ra.geo={},ot.prototype={s:0,t:0,add:function(n){at(n,this.t,fi),at(fi.s,this.s,this),this.s?this.t+=fi.t:this.s=fi.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var fi=new ot;ra.geo.stream=function(n,t){n&&pi.hasOwnProperty(n.type)?pi[n.type](n,t):it(n,t)};var pi={Feature:function(n,t){it(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,o=e.length;++r<o;)it(e[r].geometry,t)}},hi={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,o=e.length;++r<o;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){ut(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,o=e.length;++r<o;)ut(e[r],t,0)},Polygon:function(n,t){st(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,o=e.length;++r<o;)st(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,o=e.length;++r<o;)it(e[r],t)}};ra.geo.area=function(n){return di=0,ra.geo.stream(n,vi),di};var di,mi=new ot,vi={sphere:function(){di+=4*Na},point:S,lineStart:S,lineEnd:S,polygonStart:function(){mi.reset(),vi.lineStart=lt},polygonEnd:function(){var n=2*mi;di+=0>n?4*Na+n:n,vi.lineStart=vi.lineEnd=vi.point=S}};ra.geo.bounds=function(){function n(n,t){b.push(x=[c=n,p=n]),f>t&&(f=t),t>h&&(h=t)}function t(t,e){var r=ct([t*Ua,e*Ua]);if(g){var o=pt(g,r),a=[o[1],-o[0],0],i=pt(a,o);mt(i),i=vt(i);var s=t-d,l=s>0?1:-1,m=i[0]*Da*l,v=ha(s)>180;if(v^(m>l*d&&l*t>m)){var y=i[1]*Da;y>h&&(h=y)}else if(v^((m=(m+360)%360-180)>l*d&&l*t>m)){var y=-i[1]*Da;f>y&&(f=y)}else f>e&&(f=e),e>h&&(h=e);v?d>t?u(c,t)>u(c,p)&&(p=t):u(t,p)>u(c,p)&&(c=t):p>=c?(c>t&&(c=t),t>p&&(p=t)):t>d?u(c,t)>u(c,p)&&(p=t):u(t,p)>u(c,p)&&(c=t)}else n(t,e);g=r,d=t}function e(){M.point=t}function r(){x[0]=c,x[1]=p,M.point=n,g=null}function o(n,e){if(g){var r=n-d;y+=ha(r)>180?r+(r>0?360:-360):r}else m=n,v=e;vi.point(n,e),t(n,e)}function a(){vi.lineStart()}function i(){o(m,v),vi.lineEnd(),ha(y)>Ra&&(c=-(p=180)),x[0]=c,x[1]=p,g=null}function u(n,t){return(t-=n)<0?t+360:t}function s(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var c,f,p,h,d,m,v,g,y,b,x,M={point:n,lineStart:e,lineEnd:r,polygonStart:function(){M.point=o,M.lineStart=a,M.lineEnd=i,y=0,vi.polygonStart()},polygonEnd:function(){vi.polygonEnd(),M.point=n,M.lineStart=e,M.lineEnd=r,0>mi?(c=-(p=180),f=-(h=90)):y>Ra?h=90:-Ra>y&&(f=-90),x[0]=c,x[1]=p}};return function(n){h=p=-(c=f=1/0),b=[],ra.geo.stream(n,M);var t=b.length;if(t){b.sort(s);for(var e=1,r=b[0],o=[r];t>e;++e)l((i=b[e])[0],r)||l(i[1],r)?(u(r[0],i[1])>u(r[0],r[1])&&(r[1]=i[1]),u(i[0],r[1])>u(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(var a,i,d=-1/0,t=o.length-1,e=0,r=o[t];t>=e;r=i,++e)i=o[e],(a=u(r[1],i[0]))>d&&(d=a,c=i[0],p=r[1])}return b=x=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[p,h]]}}(),ra.geo.centroid=function(n){gi=yi=bi=xi=Mi=wi=ki=_i=Si=Ai=Ti=0,ra.geo.stream(n,Ei);var t=Si,e=Ai,r=Ti,o=t*t+e*e+r*r;return Pa>o&&(t=wi,e=ki,r=_i,Ra>yi&&(t=bi,e=xi,r=Mi),Pa>(o=t*t+e*e+r*r))?[NaN,NaN]:[Math.atan2(e,t)*Da,rn(r/Math.sqrt(o))*Da]};var gi,yi,bi,xi,Mi,wi,ki,_i,Si,Ai,Ti,Ei={sphere:S,point:yt,lineStart:xt,lineEnd:Mt,polygonStart:function(){Ei.lineStart=wt},polygonEnd:function(){Ei.lineStart=xt}},Ri=Et(_t,function(n){var t,e=NaN,r=NaN,o=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(a,i){var u=a>0?Na:-Na,s=ha(a-e);ha(s-Na)<Ra?(n.point(e,r=(r+i)/2>0?La:-La),n.point(o,r),n.lineEnd(),n.lineStart(),n.point(u,r),n.point(a,r),t=0):o!==u&&s>=Na&&(ha(e-o)<Ra&&(e-=o*Ra),ha(a-u)<Ra&&(a-=u*Ra),r=function(n,t,e,r){var o,a,i=Math.sin(n-e);return ha(i)>Ra?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(e)-Math.sin(r)*(o=Math.cos(t))*Math.sin(n))/(o*a*i)):(t+r)/2}(e,r,a,i),n.point(o,r),n.lineEnd(),n.lineStart(),n.point(u,r),t=0),n.point(e=a,r=i),o=u},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}},function(n,t,e,r){var o;if(null==n)o=e*La,r.point(-Na,o),r.point(0,o),r.point(Na,o),r.point(Na,0),r.point(Na,-o),r.point(0,-o),r.point(-Na,-o),r.point(-Na,0),r.point(-Na,o);else if(ha(n[0]-t[0])>Ra){var a=n[0]<t[0]?Na:-Na;o=e*a/2,r.point(-a,o),r.point(0,o),r.point(a,o)}else r.point(t[0],t[1])},[-Na,-Na/2]),Pi=1e9;ra.geo.clipExtent=function(){var n,t,e,r,o,a,i={stream:function(n){return o&&(o.valid=!1),(o=a(n)).valid=!0,o},extent:function(u){return arguments.length?(a=Ct(n=+u[0][0],t=+u[0][1],e=+u[1][0],r=+u[1][1]),o&&(o.valid=!1,o=null),i):[[n,t],[e,r]]}};return i.extent([[0,0],[960,500]])},(ra.geo.conicEqualArea=function(){return Lt(Ut)}).raw=Ut,ra.geo.albers=function(){return ra.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ra.geo.albersUsa=function(){function n(n){var a=n[0],i=n[1];return t=null,e(a,i),t||(r(a,i),t)||o(a,i),t}var t,e,r,o,a=ra.geo.albers(),i=ra.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=ra.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=a.scale(),e=a.translate(),r=(n[0]-e[0])/t,o=(n[1]-e[1])/t;return(o>=.12&&.234>o&&r>=-.425&&-.214>r?i:o>=.166&&.234>o&&r>=-.214&&-.115>r?u:a).invert(n)},n.stream=function(n){var t=a.stream(n),e=i.stream(n),r=u.stream(n);return{point:function(n,o){t.point(n,o),e.point(n,o),r.point(n,o)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(a.precision(t),i.precision(t),u.precision(t),n):a.precision()},n.scale=function(t){return arguments.length?(a.scale(t),i.scale(.35*t),u.scale(t),n.translate(a.translate())):a.scale()},n.translate=function(t){if(!arguments.length)return a.translate();var l=a.scale(),c=+t[0],f=+t[1];return e=a.translate(t).clipExtent([[c-.455*l,f-.238*l],[c+.455*l,f+.238*l]]).stream(s).point,r=i.translate([c-.307*l,f+.201*l]).clipExtent([[c-.425*l+Ra,f+.12*l+Ra],[c-.214*l-Ra,f+.234*l-Ra]]).stream(s).point,o=u.translate([c-.205*l,f+.212*l]).clipExtent([[c-.214*l+Ra,f+.166*l+Ra],[c-.115*l-Ra,f+.234*l-Ra]]).stream(s).point,n},n.scale(1070)};var Ni,Oi,Ci,Li,Ui,Di,zi={point:S,lineStart:S,lineEnd:S,polygonStart:function(){Oi=0,zi.lineStart=Dt},polygonEnd:function(){zi.lineStart=zi.lineEnd=zi.point=S,Ni+=ha(Oi/2)}},Fi={point:function(n,t){Ci>n&&(Ci=n),n>Ui&&(Ui=n),Li>t&&(Li=t),t>Di&&(Di=t)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S},qi={point:qt,lineStart:jt,lineEnd:Bt,polygonStart:function(){qi.lineStart=It},polygonEnd:function(){qi.point=qt,qi.lineStart=jt,qi.lineEnd=Bt}};ra.geo.path=function(){function n(n){return n&&("function"==typeof u&&a.pointRadius(+u.apply(this,arguments)),i&&i.valid||(i=o(a)),ra.geo.stream(n,i)),a.result()}function t(){return i=null,n}var e,r,o,a,i,u=4.5;return n.area=function(n){return Ni=0,ra.geo.stream(n,o(zi)),Ni},n.centroid=function(n){return bi=xi=Mi=wi=ki=_i=Si=Ai=Ti=0,ra.geo.stream(n,o(qi)),Ti?[Si/Ti,Ai/Ti]:_i?[wi/_i,ki/_i]:Mi?[bi/Mi,xi/Mi]:[NaN,NaN]},n.bounds=function(n){return Ui=Di=-(Ci=Li=1/0),ra.geo.stream(n,o(Fi)),[[Ci,Li],[Ui,Di]]},n.projection=function(n){return arguments.length?(o=(e=n)?n.stream||function(n){var t=Vt(function(t,e){return n([t*Da,e*Da])});return function(n){return Zt(t(n))}}(n):w,t()):e},n.context=function(n){return arguments.length?(a=null==(r=n)?new zt:new Ht(n),"function"!=typeof u&&a.pointRadius(u),t()):r},n.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(a.pointRadius(+t),+t),n):u},n.projection(ra.geo.albersUsa()).context(null)},ra.geo.transform=function(n){return{stream:function(t){var e=new Xt(t);for(var r in n)e[r]=n[r];return e}}},Xt.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ra.geo.projection=Yt,ra.geo.projectionMutator=Wt,(ra.geo.equirectangular=function(){return Yt(Jt)}).raw=Jt.invert=Jt,ra.geo.rotation=function(n){function t(t){return(t=n(t[0]*Ua,t[1]*Ua))[0]*=Da,t[1]*=Da,t}return n=Kt(n[0]%360*Ua,n[1]*Ua,n.length>2?n[2]*Ua:0),t.invert=function(t){return(t=n.invert(t[0]*Ua,t[1]*Ua))[0]*=Da,t[1]*=Da,t},t},$t.invert=Jt,ra.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=Kt(-n[0]*Ua,-n[1]*Ua,0).invert,o=[];return e(null,null,1,{point:function(n,e){o.push(n=t(n,e)),n[0]*=Da,n[1]*=Da}}),{type:"Polygon",coordinates:[o]}}var t,e,r=[0,0],o=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=ee((t=+r)*Ua,o*Ua),n):t},n.precision=function(r){return arguments.length?(e=ee(t*Ua,(o=+r)*Ua),n):o},n.angle(90)},ra.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Ua,o=n[1]*Ua,a=t[1]*Ua,i=Math.sin(r),u=Math.cos(r),s=Math.sin(o),l=Math.cos(o),c=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((e=f*i)*e+(e=l*c-s*f*u)*e),s*c+l*f*u)},ra.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return ra.range(Math.ceil(a/v)*v,o,v).map(p).concat(ra.range(Math.ceil(l/g)*g,s,g).map(h)).concat(ra.range(Math.ceil(r/d)*d,e,d).filter(function(n){return ha(n%v)>Ra}).map(c)).concat(ra.range(Math.ceil(u/m)*m,i,m).filter(function(n){return ha(n%g)>Ra}).map(f))}var e,r,o,a,i,u,s,l,c,f,p,h,d=10,m=d,v=90,g=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[p(a).concat(h(s).slice(1),p(o).reverse().slice(1),h(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(a=+t[0][0],o=+t[1][0],l=+t[0][1],s=+t[1][1],a>o&&(t=a,a=o,o=t),l>s&&(t=l,l=s,s=t),n.precision(y)):[[a,l],[o,s]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],u=+t[0][1],i=+t[1][1],r>e&&(t=r,r=e,e=t),u>i&&(t=u,u=i,i=t),n.precision(y)):[[r,u],[e,i]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(v=+t[0],g=+t[1],n):[v,g]},n.minorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.precision=function(t){return arguments.length?(y=+t,c=oe(u,i,90),f=ae(r,e,y),p=oe(l,s,90),h=ae(a,o,y),n):y},n.majorExtent([[-180,-90+Ra],[180,90-Ra]]).minorExtent([[-180,-80-Ra],[180,80+Ra]])},ra.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||o.apply(this,arguments)]}}var t,e,r=ie,o=ue;return n.distance=function(){return ra.geo.distance(t||r.apply(this,arguments),e||o.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(o=t,e="function"==typeof t?null:t,n):o},n.precision=function(){return arguments.length?n:0},n},ra.geo.interpolate=function(n,t){return function(n,t,e,r){var o=Math.cos(t),a=Math.sin(t),i=Math.cos(r),u=Math.sin(r),s=o*Math.cos(n),l=o*Math.sin(n),c=i*Math.cos(e),f=i*Math.sin(e),p=2*Math.asin(Math.sqrt(an(r-t)+o*i*an(e-n))),h=1/Math.sin(p),d=p?function(n){var t=Math.sin(n*=p)*h,e=Math.sin(p-n)*h,r=e*s+t*c,o=e*l+t*f,i=e*a+t*u;return[Math.atan2(o,r)*Da,Math.atan2(i,Math.sqrt(r*r+o*o))*Da]}:function(){return[n*Da,t*Da]};return d.distance=p,d}(n[0]*Ua,n[1]*Ua,t[0]*Ua,t[1]*Ua)},ra.geo.length=function(n){return ji=0,ra.geo.stream(n,Bi),ji};var ji,Bi={sphere:S,point:S,lineStart:function(){function n(n,o){var a=Math.sin(o*=Ua),i=Math.cos(o),u=ha((n*=Ua)-t),s=Math.cos(u);ji+=Math.atan2(Math.sqrt((u=i*Math.sin(u))*u+(u=r*a-e*i*s)*u),e*a+r*i*s),t=n,e=a,r=i}var t,e,r;Bi.point=function(o,a){t=o*Ua,e=Math.sin(a*=Ua),r=Math.cos(a),Bi.point=n},Bi.lineEnd=function(){Bi.point=Bi.lineEnd=S}},lineEnd:S,polygonStart:S,polygonEnd:S},Ii=se(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(ra.geo.azimuthalEqualArea=function(){return Yt(Ii)}).raw=Ii;var Hi=se(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},w);(ra.geo.azimuthalEquidistant=function(){return Yt(Hi)}).raw=Hi,(ra.geo.conicConformal=function(){return Lt(le)}).raw=le,(ra.geo.conicEquidistant=function(){return Lt(ce)}).raw=ce;var Vi=se(function(n){return 1/n},Math.atan);(ra.geo.gnomonic=function(){return Yt(Vi)}).raw=Vi,fe.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-La]},(ra.geo.mercator=function(){return pe(fe)}).raw=fe;var Xi=se(function(){return 1},Math.asin);(ra.geo.orthographic=function(){return Yt(Xi)}).raw=Xi;var Gi=se(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(ra.geo.stereographic=function(){return Yt(Gi)}).raw=Gi,he.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-La]},(ra.geo.transverseMercator=function(){var n=pe(he),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):[(n=t())[1],-n[0]]},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):[(n=e())[0],n[1],n[2]-90]},e([0,0,90])}).raw=he,ra.geom={},ra.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,o=Tn(e),a=Tn(r),i=n.length,u=[],s=[];for(t=0;i>t;t++)u.push([+o.call(this,n[t],t),+a.call(this,n[t],t),t]);for(u.sort(ge),t=0;i>t;t++)s.push([u[t][0],-u[t][1]]);var l=ve(u),c=ve(s),f=c[0]===l[0],p=c[c.length-1]===l[l.length-1],h=[];for(t=l.length-1;t>=0;--t)h.push(n[u[l[t]][2]]);for(t=+f;t<c.length-p;++t)h.push(n[u[c[t]][2]]);return h}var e=de,r=me;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},ra.geom.polygon=function(n){return ya(n,Yi),n};var Yi=ra.geom.polygon.prototype=[];Yi.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],o=0;++t<e;)n=r,r=this[t],o+=n[1]*r[0]-n[0]*r[1];return.5*o},Yi.centroid=function(n){var t,e,r=-1,o=this.length,a=0,i=0,u=this[o-1];for(arguments.length||(n=-1/(6*this.area()));++r<o;)t=u,u=this[r],e=t[0]*u[1]-u[0]*t[1],a+=(t[0]+u[0])*e,i+=(t[1]+u[1])*e;return[a*n,i*n]},Yi.clip=function(n){for(var t,e,r,o,a,i,u=xe(n),s=-1,l=this.length-xe(this),c=this[l-1];++s<l;){for(t=n.slice(),n.length=0,o=this[s],a=t[(r=t.length-u)-1],e=-1;++e<r;)ye(i=t[e],c,o)?(ye(a,c,o)||n.push(be(a,i,c,o)),n.push(i)):ye(a,c,o)&&n.push(be(a,i,c,o)),a=i;u&&n.push(n[0]),c=o}return n};var Wi,Zi,Ji,$i,Ki,Qi=[],nu=[];Ee.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)(n=t[e].edge).b&&n.a||t.splice(e,1);return t.sort(Re),t.length},Fe.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},qe.prototype={insert:function(n,t){var e,r,o;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=He(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(o=r.R)&&o.C?(e.C=o.C=!1,r.C=!0,n=r):(n===e.R&&(Be(this,e),e=(n=e).U),e.C=!1,r.C=!0,Ie(this,r)):(o=r.L)&&o.C?(e.C=o.C=!1,r.C=!0,n=r):(n===e.L&&(Ie(this,e),e=(n=e).U),e.C=!1,r.C=!0,Be(this,r)),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,o=n.U,a=n.L,i=n.R;if(e=a?i?He(i):a:i,o?o.L===n?o.L=e:o.R=e:this._=e,a&&i?(r=e.C,e.C=n.C,e.L=a,a.U=e,e!==i?(o=e.U,e.U=n.U,n=e.R,o.L=n,e.R=i,i.U=e):(e.U=o,o=e,n=e.R)):(r=n.C,n=e),n&&(n.U=o),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===o.L){if((t=o.R).C&&(t.C=!1,o.C=!0,Be(this,o),t=o.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ie(this,t),t=o.R),t.C=o.C,o.C=t.R.C=!1,Be(this,o),n=this._;break}}else if((t=o.L).C&&(t.C=!1,o.C=!0,Ie(this,o),t=o.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Be(this,t),t=o.L),t.C=o.C,o.C=t.L.C=!1,Ie(this,o),n=this._;break}t.C=!0,n=o,o=o.U}while(!n.C);n&&(n.C=!1)}}},ra.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=u[0][0],o=u[0][1],a=u[1][0],i=u[1][1];return Ve(e(n),u).cells.forEach(function(e,u){var s=e.edges,l=e.site,c=t[u]=s.length?s.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=a&&l.y>=o&&l.y<=i?[[r,i],[a,i],[a,o],[r,o]]:[];c.point=n[u]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(a(n,t)/Ra)*Ra,y:Math.round(i(n,t)/Ra)*Ra,i:t}})}var r=de,o=me,a=r,i=o,u=tu;return n?t(n):(t.links=function(n){return Ve(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return Ve(e(n)).cells.forEach(function(e,r){for(var o,a=e.site,i=e.edges.sort(Re),u=-1,s=i.length,l=i[s-1].edge,c=l.l===a?l.r:l.l;++u<s;)o=c,l=i[u].edge,c=l.l===a?l.r:l.l,r<o.i&&r<c.i&&Ge(a,o,c)<0&&t.push([n[r],n[o.i],n[c.i]])}),t},t.x=function(n){return arguments.length?(a=Tn(r=n),t):r},t.y=function(n){return arguments.length?(i=Tn(o=n),t):o},t.clipExtent=function(n){return arguments.length?(u=null==n?tu:n,t):u===tu?null:u},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):u===tu?null:u&&u[1]},t)};var tu=[[-1e6,-1e6],[1e6,1e6]];ra.geom.delaunay=function(n){return ra.geom.voronoi().triangles(n)},ra.geom.quadtree=function(n,t,e,r,o){function a(n){function a(n,t,e,r,o,a,i,u){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var s=n.x,c=n.y;if(null!=s)if(ha(s-e)+ha(c-r)<.01)l(n,t,e,r,o,a,i,u);else{var f=n.point;n.x=n.y=n.point=null,l(n,f,s,c,o,a,i,u),l(n,t,e,r,o,a,i,u)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,o,a,i,u)}function l(n,t,e,r,o,i,u,s){var l=.5*(o+u),c=.5*(i+s),f=e>=l,p=r>=c,h=p<<1|f;n.leaf=!1,n=n.nodes[h]||(n.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),f?o=l:u=l,p?i=c:s=c,a(n,t,e,r,o,i,u,s)}var c,f,p,h,d,m,v,g,y,b=Tn(u),x=Tn(s);if(null!=t)m=t,v=e,g=r,y=o;else if(g=y=-(m=v=1/0),f=[],p=[],d=n.length,i)for(h=0;d>h;++h)(c=n[h]).x<m&&(m=c.x),c.y<v&&(v=c.y),c.x>g&&(g=c.x),c.y>y&&(y=c.y),f.push(c.x),p.push(c.y);else for(h=0;d>h;++h){var M=+b(c=n[h],h),w=+x(c,h);m>M&&(m=M),v>w&&(v=w),M>g&&(g=M),w>y&&(y=w),f.push(M),p.push(w)}var k=g-m,_=y-v;k>_?y=v+k:g=m+_;var S={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(n){a(S,n,+b(n,++h),+x(n,h),m,v,g,y)},visit:function(n){!function n(t,e,r,o,a,i){if(!t(e,r,o,a,i)){var u=.5*(r+a),s=.5*(o+i),l=e.nodes;l[0]&&n(t,l[0],r,o,u,s),l[1]&&n(t,l[1],u,o,a,s),l[2]&&n(t,l[2],r,s,u,i),l[3]&&n(t,l[3],u,s,a,i)}}(n,S,m,v,g,y)},find:function(n){return function(n,t,e,r,o,a,i){var u,s=1/0;return function n(l,c,f,p,h){if(!(c>a||f>i||r>p||o>h)){if(d=l.point){var d,m=t-l.x,v=e-l.y,g=m*m+v*v;if(s>g){var y=Math.sqrt(s=g);r=t-y,o=e-y,a=t+y,i=e+y,u=d}}for(var b=l.nodes,x=.5*(c+p),M=.5*(f+h),w=t>=x,k=e>=M,_=k<<1|w,S=_+4;S>_;++_)if(l=b[3&_])switch(3&_){case 0:n(l,c,f,x,M);break;case 1:n(l,x,f,p,M);break;case 2:n(l,c,M,x,h);break;case 3:n(l,x,M,p,h)}}}(n,r,o,a,i),u}(S,n[0],n[1],m,v,g,y)}};if(h=-1,null==t){for(;++h<d;)a(S,n[h],f[h],p[h],m,v,g,y);--h}else n.forEach(S.add);return f=p=n=c=null,S}var i,u=de,s=me;return(i=arguments.length)?(u=Ye,s=We,3===i&&(o=e,r=t,e=t=0),a(n)):(a.x=function(n){return arguments.length?(u=n,a):u},a.y=function(n){return arguments.length?(s=n,a):s},a.extent=function(n){return arguments.length?(null==n?t=e=r=o=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],o=+n[1][1]),a):null==t?null:[[t,e],[r,o]]},a.size=function(n){return arguments.length?(null==n?t=e=r=o=null:(t=e=0,r=+n[0],o=+n[1]),a):null==t?null:[r-t,o-e]},a)},ra.interpolateRgb=Ze,ra.interpolateObject=Je,ra.interpolateNumber=$e,ra.interpolateString=Ke;var eu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ru=new RegExp(eu.source,"g");ra.interpolate=Qe,ra.interpolators=[function(n,t){var e=typeof t;return("string"===e?Za.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?Ze:Ke:t instanceof un?Ze:Array.isArray(t)?nr:"object"===e&&isNaN(t)?Je:$e)(n,t)}],ra.interpolateArray=nr;var ou=function(){return w},au=ra.map({linear:ou,poly:function(n){return function(t){return Math.pow(t,n)}},quad:function(){return rr},cubic:function(){return or},sin:function(){return ir},exp:function(){return ur},circle:function(){return sr},elastic:function(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/Oa*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Oa/t)}},back:function(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}},bounce:function(){return lr}}),iu=ra.map({in:w,out:tr,"in-out":er,"out-in":function(n){return er(tr(n))}});ra.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=au.get(e)||ou,function(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}((r=iu.get(r)||w)(e.apply(null,oa.call(arguments,1))))},ra.interpolateHcl=function(n,t){n=ra.hcl(n),t=ra.hcl(t);var e=n.h,r=n.c,o=n.l,a=t.h-e,i=t.c-r,u=t.l-o;return isNaN(i)&&(i=0,r=isNaN(r)?t.c:r),isNaN(a)?(a=0,e=isNaN(e)?t.h:e):a>180?a-=360:-180>a&&(a+=360),function(n){return fn(e+a*n,r+i*n,o+u*n)+""}},ra.interpolateHsl=function(n,t){n=ra.hsl(n),t=ra.hsl(t);var e=n.h,r=n.s,o=n.l,a=t.h-e,i=t.s-r,u=t.l-o;return isNaN(i)&&(i=0,r=isNaN(r)?t.s:r),isNaN(a)?(a=0,e=isNaN(e)?t.h:e):a>180?a-=360:-180>a&&(a+=360),function(n){return ln(e+a*n,r+i*n,o+u*n)+""}},ra.interpolateLab=function(n,t){n=ra.lab(n),t=ra.lab(t);var e=n.l,r=n.a,o=n.b,a=t.l-e,i=t.a-r,u=t.b-o;return function(n){return hn(e+a*n,r+i*n,o+u*n)+""}},ra.interpolateRound=cr,ra.transform=function(n){var t=ia.createElementNS(ra.ns.prefix.svg,"g");return(ra.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new fr(e?e.matrix:uu)})(n)},fr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var uu={a:1,b:0,c:0,d:1,e:0,f:0};ra.interpolateTransform=mr,ra.layout={},ra.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(yr(n[e]));return t}},ra.layout.chord=function(){function n(){var n,l,f,p,h,d={},m=[],v=ra.range(a),g=[];for(e=[],r=[],n=0,p=-1;++p<a;){for(l=0,h=-1;++h<a;)l+=o[p][h];m.push(l),g.push(ra.range(a)),n+=l}for(i&&v.sort(function(n,t){return i(m[n],m[t])}),u&&g.forEach(function(n,t){n.sort(function(n,e){return u(o[t][n],o[t][e])})}),n=(Oa-c*a)/n,l=0,p=-1;++p<a;){for(f=l,h=-1;++h<a;){var y=v[p],b=g[y][h],x=o[y][b],M=l,w=l+=x*n;d[y+"-"+b]={index:y,subindex:b,startAngle:M,endAngle:w,value:x}}r[y]={index:y,startAngle:f,endAngle:l,value:m[y]},l+=c}for(p=-1;++p<a;)for(h=p-1;++h<a;){var k=d[p+"-"+h],_=d[h+"-"+p];(k.value||_.value)&&e.push(k.value<_.value?{source:_,target:k}:{source:k,target:_})}s&&t()}function t(){e.sort(function(n,t){return s((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,o,a,i,u,s,l={},c=0;return l.matrix=function(n){return arguments.length?(a=(o=n)&&o.length,e=r=null,l):o},l.padding=function(n){return arguments.length?(c=n,e=r=null,l):c},l.sortGroups=function(n){return arguments.length?(i=n,e=r=null,l):i},l.sortSubgroups=function(n){return arguments.length?(u=n,e=null,l):u},l.sortChords=function(n){return arguments.length?(s=n,e&&t(),l):s},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},ra.layout.force=function(){function n(n){return function(t,e,r,o){if(t.point!==n){var a=t.cx-n.x,i=t.cy-n.y,u=o-e,s=a*a+i*i;if(s>u*u/g){if(m>s){var l=t.charge/s;n.px-=a*l,n.py-=i*l}return!0}if(t.point&&s&&m>s){var l=t.pointCharge/s;n.px-=a*l,n.py-=i*l}}return!t.charge}}function t(n){n.px=ra.event.x,n.py=ra.event.y,s.resume()}var e,r,o,a,i,u,s={},l=ra.dispatch("start","tick","end"),c=[1,1],f=.9,p=su,h=lu,d=-30,m=cu,v=.1,g=.64,y=[],b=[];return s.tick=function(){if((o*=.99)<.005)return e=null,l.end({type:"end",alpha:o=0}),!0;var t,r,s,p,h,m,g,x,M,w=y.length,k=b.length;for(r=0;k>r;++r)s=b[r],p=s.source,h=s.target,x=h.x-p.x,M=h.y-p.y,(m=x*x+M*M)&&(m=o*i[r]*((m=Math.sqrt(m))-a[r])/m,x*=m,M*=m,h.x-=x*(g=p.weight+h.weight?p.weight/(p.weight+h.weight):.5),h.y-=M*g,p.x+=x*(g=1-g),p.y+=M*g);if((g=o*v)&&(x=c[0]/2,M=c[1]/2,r=-1,g))for(;++r<w;)(s=y[r]).x+=(x-s.x)*g,s.y+=(M-s.y)*g;if(d)for(function n(t,e,r){var o=0,a=0;if(t.charge=0,!t.leaf)for(var i,u=t.nodes,s=u.length,l=-1;++l<s;)null!=(i=u[l])&&(n(i,e,r),t.charge+=i.charge,o+=i.charge*i.cx,a+=i.charge*i.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=e*r[t.point.index];t.charge+=t.pointCharge=c,o+=c*t.point.x,a+=c*t.point.y}t.cx=o/t.charge,t.cy=a/t.charge}(t=ra.geom.quadtree(y),o,u),r=-1;++r<w;)(s=y[r]).fixed||t.visit(n(s));for(r=-1;++r<w;)(s=y[r]).fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*f,s.y-=(s.py-(s.py=s.y))*f);l.tick({type:"tick",alpha:o})},s.nodes=function(n){return arguments.length?(y=n,s):y},s.links=function(n){return arguments.length?(b=n,s):b},s.size=function(n){return arguments.length?(c=n,s):c},s.linkDistance=function(n){return arguments.length?(p="function"==typeof n?n:+n,s):p},s.distance=s.linkDistance,s.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,s):h},s.friction=function(n){return arguments.length?(f=+n,s):f},s.charge=function(n){return arguments.length?(d="function"==typeof n?n:+n,s):d},s.chargeDistance=function(n){return arguments.length?(m=n*n,s):Math.sqrt(m)},s.gravity=function(n){return arguments.length?(v=+n,s):v},s.theta=function(n){return arguments.length?(g=n*n,s):Math.sqrt(g)},s.alpha=function(n){return arguments.length?(n=+n,o?n>0?o=n:(e.c=null,e.t=NaN,e=null,l.end({type:"end",alpha:o=0})):n>0&&(l.start({type:"start",alpha:o=n}),e=Pn(s.tick)),s):o},s.start=function(){function n(n,r){if(!e){for(e=new Array(o),s=0;o>s;++s)e[s]=[];for(s=0;l>s;++s){var a=b[s];e[a.source.index].push(a.target),e[a.target.index].push(a.source)}}for(var i,u=e[t],s=-1,c=u.length;++s<c;)if(!isNaN(i=u[s][n]))return i;return Math.random()*r}var t,e,r,o=y.length,l=b.length,f=c[0],m=c[1];for(t=0;o>t;++t)(r=y[t]).index=t,r.weight=0;for(t=0;l>t;++t)"number"==typeof(r=b[t]).source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(t=0;o>t;++t)r=y[t],isNaN(r.x)&&(r.x=n("x",f)),isNaN(r.y)&&(r.y=n("y",m)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof p)for(t=0;l>t;++t)a[t]=+p.call(this,b[t],t);else for(t=0;l>t;++t)a[t]=p;if(i=[],"function"==typeof h)for(t=0;l>t;++t)i[t]=+h.call(this,b[t],t);else for(t=0;l>t;++t)i[t]=h;if(u=[],"function"==typeof d)for(t=0;o>t;++t)u[t]=+d.call(this,y[t],t);else for(t=0;o>t;++t)u[t]=d;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return r||(r=ra.behavior.drag().origin(w).on("dragstart.force",xr).on("drag.force",t).on("dragend.force",Mr)),arguments.length?void this.on("mouseover.force",wr).on("mouseout.force",kr).call(r):r},ra.rebind(s,l,"on")};var su=20,lu=1,cu=1/0;ra.layout.hierarchy=function(){function n(o){var a,i=[o],u=[];for(o.depth=0;null!=(a=i.pop());)if(u.push(a),(l=e.call(n,a,a.depth))&&(s=l.length)){for(var s,l,c;--s>=0;)i.push(c=l[s]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=l}else r&&(a.value=+r.call(n,a,a.depth)||0),delete a.children;return Ar(o,function(n){var e,o;t&&(e=n.children)&&e.sort(t),r&&(o=n.parent)&&(o.value+=n.value)}),u}var t=Rr,e=Tr,r=Er;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Sr(t,function(n){n.children&&(n.value=0)}),Ar(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},ra.layout.partition=function(){function n(n,r){var o=t.call(this,n,r);return function n(t,e,r,o){var a=t.children;if(t.x=e,t.y=t.depth*o,t.dx=r,t.dy=o,a&&(i=a.length)){var i,u,s,l=-1;for(r=t.value?r/t.value:0;++l<i;)n(u=a[l],e,s=u.value*r,o),e+=s}}(o[0],0,e[0],e[1]/function n(t){var e=t.children,r=0;if(e&&(o=e.length))for(var o,a=-1;++a<o;)r=Math.max(r,n(e[a]));return 1+r}(o[0])),o}var t=ra.layout.hierarchy(),e=[1,1];return n.size=function(t){return arguments.length?(e=t,n):e},_r(n,t)},ra.layout.pie=function(){function n(i){var u,s=i.length,l=i.map(function(e,r){return+t.call(n,e,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof o?o.apply(this,arguments):o)-c,p=Math.min(Math.abs(f)/s,+("function"==typeof a?a.apply(this,arguments):a)),h=p*(0>f?-1:1),d=ra.sum(l),m=d?(f-s*h)/d:0,v=ra.range(s),g=[];return null!=e&&v.sort(e===fu?function(n,t){return l[t]-l[n]}:function(n,t){return e(i[n],i[t])}),v.forEach(function(n){g[n]={data:i[n],value:u=l[n],startAngle:c,endAngle:c+=u*m+h,padAngle:p}}),g}var t=Number,e=fu,r=0,o=Oa,a=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(o=t,n):o},n.padAngle=function(t){return arguments.length?(a=t,n):a},n};var fu={};ra.layout.stack=function(){function n(u,s){if(!(p=u.length))return u;var l=u.map(function(e,r){return t.call(n,e,r)}),c=l.map(function(t){return t.map(function(t,e){return[a.call(n,t,e),i.call(n,t,e)]})}),f=e.call(n,c,s);l=ra.permute(l,f),c=ra.permute(c,f);var p,h,d,m,v=r.call(n,c,s),g=l[0].length;for(d=0;g>d;++d)for(o.call(n,l[0][d],m=v[d],c[0][d][1]),h=1;p>h;++h)o.call(n,l[h][d],m+=c[h-1][d][1],c[h][d][1]);return u}var t=w,e=Lr,r=Ur,o=Cr,a=Nr,i=Or;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:pu.get(t)||Lr,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:hu.get(t)||Ur,n):r},n.x=function(t){return arguments.length?(a=t,n):a},n.y=function(t){return arguments.length?(i=t,n):i},n.out=function(t){return arguments.length?(o=t,n):o},n};var pu=ra.map({"inside-out":function(n){var t,e,r=n.length,o=n.map(Dr),a=n.map(zr),i=ra.range(r).sort(function(n,t){return o[n]-o[t]}),u=0,s=0,l=[],c=[];for(t=0;r>t;++t)e=i[t],s>u?(u+=a[e],l.push(e)):(s+=a[e],c.push(e));return c.reverse().concat(l)},reverse:function(n){return ra.range(n.length).reverse()},default:Lr}),hu=ra.map({silhouette:function(n){var t,e,r,o=n.length,a=n[0].length,i=[],u=0,s=[];for(e=0;a>e;++e){for(t=0,r=0;o>t;t++)r+=n[t][e][1];r>u&&(u=r),i.push(r)}for(e=0;a>e;++e)s[e]=(u-i[e])/2;return s},wiggle:function(n){var t,e,r,o,a,i,u,s,l,c=n.length,f=n[0],p=f.length,h=[];for(h[0]=s=l=0,e=1;p>e;++e){for(t=0,o=0;c>t;++t)o+=n[t][e][1];for(t=0,a=0,u=f[e][0]-f[e-1][0];c>t;++t){for(r=0,i=(n[t][e][1]-n[t][e-1][1])/(2*u);t>r;++r)i+=(n[r][e][1]-n[r][e-1][1])/u;a+=i*n[t][e][1]}h[e]=s-=o?a/o*u:0,l>s&&(l=s)}for(e=0;p>e;++e)h[e]-=l;return h},expand:function(n){var t,e,r,o=n.length,a=n[0].length,i=1/o,u=[];for(e=0;a>e;++e){for(t=0,r=0;o>t;t++)r+=n[t][e][1];if(r)for(t=0;o>t;t++)n[t][e][1]/=r;else for(t=0;o>t;t++)n[t][e][1]=i}for(e=0;a>e;++e)u[e]=0;return u},zero:Ur});ra.layout.histogram=function(){function n(n,a){for(var i,u,s=[],l=n.map(e,this),c=r.call(this,l,a),f=o.call(this,c,l,a),a=-1,p=l.length,h=f.length-1,d=t?1:1/p;++a<h;)(i=s[a]=[]).dx=f[a+1]-(i.x=f[a]),i.y=0;if(h>0)for(a=-1;++a<p;)(u=l[a])>=c[0]&&u<=c[1]&&((i=s[ra.bisect(f,u,1,h)-1]).y+=d,i.push(n[a]));return s}var t=!0,e=Number,r=Br,o=qr;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=Tn(t),n):r},n.bins=function(t){return arguments.length?(o="number"==typeof t?function(n){return jr(n,t)}:Tn(t),n):o},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},ra.layout.pack=function(){function n(n,a){var i=e.call(this,n,a),u=i[0],s=o[0],l=o[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(u.x=u.y=0,Ar(u,function(n){n.r=+c(n.value)}),Ar(u,Gr),r){var f=r*(t?1:Math.max(2*u.r/s,2*u.r/l))/2;Ar(u,function(n){n.r+=f}),Ar(u,Gr),Ar(u,function(n){n.r-=f})}return function n(t,e,r,o){var a=t.children;if(t.x=e+=o*t.x,t.y=r+=o*t.y,t.r*=o,a)for(var i=-1,u=a.length;++i<u;)n(a[i],e,r,o)}(u,s/2,l/2,t?1:1/Math.max(2*u.r/s,2*u.r/l)),i}var t,e=ra.layout.hierarchy().sort(Ir),r=0,o=[1,1];return n.size=function(t){return arguments.length?(o=t,n):o},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},_r(n,e)},ra.layout.tree=function(){function n(n,s){var l=o.call(this,n,s),c=l[0],f=function(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var o,a=t.children,i=0,u=a.length;u>i;++i)r.push((a[i]=o={_:a[i],parent:t,children:(o=a[i].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=o);return e.children[0]}(c);if(Ar(f,t),f.parent.m=-f.z,Sr(f,e),u)Sr(c,r);else{var p=c,h=c,d=c;Sr(c,function(n){n.x<p.x&&(p=n),n.x>h.x&&(h=n),n.depth>d.depth&&(d=n)});var m=a(p,h)/2-p.x,v=i[0]/(h.x+a(h,p)/2+m),g=i[1]/(d.depth||1);Sr(c,function(n){n.x=(n.x+m)*v,n.y=n.depth*g})}return l}function t(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){!function(n){for(var t,e=0,r=0,o=n.children,a=o.length;--a>=0;)(t=o[a]).z+=e,t.m+=e,e+=t.s+(r+=t.c)}(n);var o=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-o):n.z=o}else r&&(n.z=r.z+a(n._,r._));n.parent.A=function(n,t,e){if(t){for(var r,o=n,i=n,u=t,s=o.parent.children[0],l=o.m,c=i.m,f=u.m,p=s.m;u=Kr(u),o=$r(o),u&&o;)s=$r(s),(i=Kr(i)).a=n,(r=u.z+f-o.z-l+a(u._,o._))>0&&(Qr(no(u,n,e),n,r),l+=r,c+=r),f+=u.m,l+=o.m,p+=s.m,c+=i.m;u&&!Kr(i)&&(i.t=u,i.m+=f-c),o&&!$r(s)&&(s.t=o,s.m+=l-p,e=n)}return e}(n,r,n.parent.A||e[0])}function e(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function r(n){n.x*=i[0],n.y=n.depth*i[1]}var o=ra.layout.hierarchy().sort(null).value(null),a=Jr,i=[1,1],u=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(u=null==(i=t)?r:null,n):u?null:i},n.nodeSize=function(t){return arguments.length?(u=null==(i=t)?null:r,n):u?i:null},_r(n,o)},ra.layout.cluster=function(){function n(n,a){var i,u=t.call(this,n,a),s=u[0],l=0;Ar(s,function(n){var t=n.children;t&&t.length?(n.x=function(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}(t),n.y=function(n){return 1+ra.max(n,function(n){return n.y})}(t)):(n.x=i?l+=e(n,i):0,n.y=0,i=n)});var c=function n(t){var e=t.children;return e&&e.length?n(e[0]):t}(s),f=function n(t){var e,r=t.children;return r&&(e=r.length)?n(r[e-1]):t}(s),p=c.x-e(c,f)/2,h=f.x+e(f,c)/2;return Ar(s,o?function(n){n.x=(n.x-s.x)*r[0],n.y=(s.y-n.y)*r[1]}:function(n){n.x=(n.x-p)/(h-p)*r[0],n.y=(1-(s.y?n.y/s.y:1))*r[1]}),u}var t=ra.layout.hierarchy().sort(null).value(null),e=Jr,r=[1,1],o=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(o=null==(r=t),n):o?null:r},n.nodeSize=function(t){return arguments.length?(o=null!=(r=t),n):o?r:null},_r(n,t)},ra.layout.treemap=function(){function n(n,t){for(var e,r,o=-1,a=n.length;++o<a;)r=(e=n[o]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var a=e.children;if(a&&a.length){var i,u,s,l=f(e),c=[],p=a.slice(),d=1/0,m="slice"===h?l.dx:"dice"===h?l.dy:"slice-dice"===h?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(p,l.dx*l.dy/e.value),c.area=0;(s=p.length)>0;)c.push(i=p[s-1]),c.area+=i.area,"squarify"!==h||(u=r(c,m))<=d?(p.pop(),d=u):(c.area-=c.pop().area,o(c,m,l,!1),m=Math.min(l.dx,l.dy),c.length=c.area=0,d=1/0);c.length&&(o(c,m,l,!0),c.length=c.area=0),a.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var a,i=f(t),u=r.slice(),s=[];for(n(u,i.dx*i.dy/t.value),s.area=0;a=u.pop();)s.push(a),s.area+=a.area,null!=a.z&&(o(s,a.z?i.dx:i.dy,i,!u.length),s.length=s.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,o=0,a=1/0,i=-1,u=n.length;++i<u;)(e=n[i].area)&&(a>e&&(a=e),e>o&&(o=e));return t*=t,(r*=r)?Math.max(t*o*d/r,r/(t*a*d)):1/0}function o(n,t,e,r){var o,a=-1,i=n.length,u=e.x,l=e.y,c=t?s(n.area/t):0;if(t==e.dx){for((r||c>e.dy)&&(c=e.dy);++a<i;)(o=n[a]).x=u,o.y=l,o.dy=c,u+=o.dx=Math.min(e.x+e.dx-u,c?s(o.area/c):0);o.z=!0,o.dx+=e.x+e.dx-u,e.y+=c,e.dy-=c}else{for((r||c>e.dx)&&(c=e.dx);++a<i;)(o=n[a]).x=u,o.y=l,o.dx=c,l+=o.dy=Math.min(e.y+e.dy-l,c?s(o.area/c):0);o.z=!1,o.dy+=e.y+e.dy-l,e.x+=c,e.dx-=c}}function a(r){var o=i||u(r),a=o[0];return a.x=a.y=0,a.value?(a.dx=l[0],a.dy=l[1]):a.dx=a.dy=0,i&&u.revalue(a),n([a],a.dx*a.dy/a.value),(i?e:t)(a),p&&(i=o),o}var i,u=ra.layout.hierarchy(),s=Math.round,l=[1,1],c=null,f=to,p=!1,h="squarify",d=.5*(1+Math.sqrt(5));return a.size=function(n){return arguments.length?(l=n,a):l},a.padding=function(n){function t(t){return eo(t,n)}return arguments.length?(f=null==(c=n)?to:"function"==(e=typeof n)?function(t){var e=n.call(a,t,t.depth);return null==e?to(t):eo(t,"number"==typeof e?[e,e,e,e]:e)}:"number"===e?(n=[n,n,n,n],t):t,a):c;var e},a.round=function(n){return arguments.length?(s=n?Math.round:Number,a):s!=Number},a.sticky=function(n){return arguments.length?(p=n,i=null,a):p},a.ratio=function(n){return arguments.length?(d=n,a):d},a.mode=function(n){return arguments.length?(h=n+"",a):h},_r(a,u)},ra.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,o;do{e=2*Math.random()-1,r=2*Math.random()-1,o=e*e+r*r}while(!o||o>1);return n+t*e*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var n=ra.random.normal.apply(ra,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=ra.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},ra.scale={};var du={floor:w,ceil:w};ra.scale.linear=function(){return function n(t,e,r,o){function a(){var n=Math.min(t.length,e.length)>2?so:ao,a=o?gr:vr;return u=n(t,e,a,r),s=n(e,t,a,Qe),i}function i(n){return u(n)}var u,s;return i.invert=function(n){return s(n)},i.domain=function(n){return arguments.length?(t=n.map(Number),a()):t},i.range=function(n){return arguments.length?(e=n,a()):e},i.rangeRound=function(n){return i.range(n).interpolate(cr)},i.clamp=function(n){return arguments.length?(o=n,a()):o},i.interpolate=function(n){return arguments.length?(r=n,a()):r},i.ticks=function(n){return po(t,n)},i.tickFormat=function(n,e){return ho(t,n,e)},i.nice=function(n){return co(t,n),a()},i.copy=function(){return n(t,e,r,o)},a()}([0,1],[0,1],Qe,!1)};var mu={s:1,g:1,p:1,r:1,e:1};ra.scale.log=function(){return function n(t,e,r,o){function a(n){return(r?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(e)}function i(n){return r?Math.pow(e,n):-Math.pow(e,-n)}function u(n){return t(a(n))}return u.invert=function(n){return i(t.invert(n))},u.domain=function(n){return arguments.length?(r=n[0]>=0,t.domain((o=n.map(Number)).map(a)),u):o},u.base=function(n){return arguments.length?(e=+n,t.domain(o.map(a)),u):e},u.nice=function(){var n=io(o.map(a),r?Math:gu);return t.domain(n),o=n.map(i),u},u.ticks=function(){var n=ro(o),t=[],u=n[0],s=n[1],l=Math.floor(a(u)),c=Math.ceil(a(s)),f=e%1?2:e;if(isFinite(c-l)){if(r){for(;c>l;l++)for(var p=1;f>p;p++)t.push(i(l)*p);t.push(i(l))}else for(t.push(i(l));l++<c;)for(var p=f-1;p>0;p--)t.push(i(l)*p);for(l=0;t[l]<u;l++);for(c=t.length;t[c-1]>s;c--);t=t.slice(l,c)}return t},u.tickFormat=function(n,t){if(!arguments.length)return vu;arguments.length<2?t=vu:"function"!=typeof t&&(t=ra.format(t));var r=Math.max(1,e*n/u.ticks().length);return function(n){var o=n/i(Math.round(a(n)));return e-.5>o*e&&(o*=e),r>=o?t(n):""}},u.copy=function(){return n(t.copy(),e,r,o)},lo(u,t)}(ra.scale.linear().domain([0,1]),10,!0,[1,10])};var vu=ra.format(".0e"),gu={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};ra.scale.pow=function(){return function n(t,e,r){function o(n){return t(a(n))}var a=vo(e),i=vo(1/e);return o.invert=function(n){return i(t.invert(n))},o.domain=function(n){return arguments.length?(t.domain((r=n.map(Number)).map(a)),o):r},o.ticks=function(n){return po(r,n)},o.tickFormat=function(n,t){return ho(r,n,t)},o.nice=function(n){return o.domain(co(r,n))},o.exponent=function(n){return arguments.length?(a=vo(e=n),i=vo(1/e),t.domain(r.map(a)),o):e},o.copy=function(){return n(t.copy(),e,r)},lo(o,t)}(ra.scale.linear(),1,[0,1])},ra.scale.sqrt=function(){return ra.scale.pow().exponent(.5)},ra.scale.ordinal=function(){return function n(t,e){function r(n){return i[((a.get(n)||("range"===e.t?a.set(n,t.push(n)):NaN))-1)%i.length]}function o(n,e){return ra.range(t.length).map(function(t){return n+e*t})}var a,i,u;return r.domain=function(n){if(!arguments.length)return t;t=[],a=new h;for(var o,i=-1,u=n.length;++i<u;)a.has(o=n[i])||a.set(o,t.push(o));return r[e.t].apply(r,e.a)},r.range=function(n){return arguments.length?(i=n,u=0,e={t:"range",a:arguments},r):i},r.rangePoints=function(n,a){arguments.length<2&&(a=0);var s=n[0],l=n[1],c=t.length<2?(s=(s+l)/2,0):(l-s)/(t.length-1+a);return i=o(s+c*a/2,c),u=0,e={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(n,a){arguments.length<2&&(a=0);var s=n[0],l=n[1],c=t.length<2?(s=l=Math.round((s+l)/2),0):(l-s)/(t.length-1+a)|0;return i=o(s+Math.round(c*a/2+(l-s-(t.length-1+a)*c)/2),c),u=0,e={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(n,a,s){arguments.length<2&&(a=0),arguments.length<3&&(s=a);var l=n[1]<n[0],c=n[l-0],f=n[1-l],p=(f-c)/(t.length-a+2*s);return i=o(c+p*s,p),l&&i.reverse(),u=p*(1-a),e={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(n,a,s){arguments.length<2&&(a=0),arguments.length<3&&(s=a);var l=n[1]<n[0],c=n[l-0],f=n[1-l],p=Math.floor((f-c)/(t.length-a+2*s));return i=o(c+Math.round((f-c-(t.length-a)*p)/2),p),l&&i.reverse(),u=Math.round(p*(1-a)),e={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return u},r.rangeExtent=function(){return ro(e.a[0])},r.copy=function(){return n(t,e)},r.domain(t)}([],{t:"range",a:[[]]})},ra.scale.category10=function(){return ra.scale.ordinal().range(yu)},ra.scale.category20=function(){return ra.scale.ordinal().range(bu)},ra.scale.category20b=function(){return ra.scale.ordinal().range(xu)},ra.scale.category20c=function(){return ra.scale.ordinal().range(Mu)};var yu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xn),bu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xn),xu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xn),Mu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xn);ra.scale.quantile=function(){return function n(t,e){function r(){var n=0,r=e.length;for(a=[];++n<r;)a[n-1]=ra.quantile(t,n/r);return o}function o(n){return isNaN(n=+n)?void 0:e[ra.bisect(a,n)]}var a;return o.domain=function(n){return arguments.length?(t=n.map(s).filter(l).sort(u),r()):t},o.range=function(n){return arguments.length?(e=n,r()):e},o.quantiles=function(){return a},o.invertExtent=function(n){return 0>(n=e.indexOf(n))?[NaN,NaN]:[n>0?a[n-1]:t[0],n<a.length?a[n]:t[t.length-1]]},o.copy=function(){return n(t,e)},r()}([],[])},ra.scale.quantize=function(){return function n(t,e,r){function o(n){return r[Math.max(0,Math.min(u,Math.floor(i*(n-t))))]}function a(){return i=r.length/(e-t),u=r.length-1,o}var i,u;return o.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],a()):[t,e]},o.range=function(n){return arguments.length?(r=n,a()):r},o.invertExtent=function(n){return[n=0>(n=r.indexOf(n))?NaN:n/i+t,n+1/i]},o.copy=function(){return n(t,e,r)},a()}(0,1,[0,1])},ra.scale.threshold=function(){return function n(t,e){function r(n){return n>=n?e[ra.bisect(t,n)]:void 0}return r.domain=function(n){return arguments.length?(t=n,r):t},r.range=function(n){return arguments.length?(e=n,r):e},r.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},r.copy=function(){return n(t,e)},r}([.5],[0,1])},ra.scale.identity=function(){return function n(t){function e(n){return+n}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(n){return po(t,n)},e.tickFormat=function(n,e){return ho(t,n,e)},e.copy=function(){return n(t)},e}([0,1])},ra.svg={},ra.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=i.apply(this,arguments)-La,f=u.apply(this,arguments)-La,p=Math.abs(f-c),h=c>f?0:1;if(n>l&&(d=l,l=n,n=d),p>=Ca)return t(l,h)+(n?t(n,1-h):"")+"Z";var d,m,v,g,y,b,x,M,w,k,_,S,A=0,T=0,E=[];if((g=(+s.apply(this,arguments)||0)/2)&&(v=a===wu?Math.sqrt(n*n+l*l):+a.apply(this,arguments),h||(T*=-1),l&&(T=rn(v/l*Math.sin(g))),n&&(A=rn(v/n*Math.sin(g)))),l){y=l*Math.cos(c+T),b=l*Math.sin(c+T),x=l*Math.cos(f-T),M=l*Math.sin(f-T);var R=Math.abs(f-c-2*T)<=Na?0:1;if(T&&ko(y,b,x,M)===h^R){var P=(c+f)/2;y=l*Math.cos(P),b=l*Math.sin(P),x=M=null}}else y=b=0;if(n){w=n*Math.cos(f-A),k=n*Math.sin(f-A),_=n*Math.cos(c+A),S=n*Math.sin(c+A);var N=Math.abs(c-f+2*A)<=Na?0:1;if(A&&ko(w,k,_,S)===1-h^N){var O=(c+f)/2;w=n*Math.cos(O),k=n*Math.sin(O),_=S=null}}else w=k=0;if(p>Ra&&(d=Math.min(Math.abs(l-n)/2,+o.apply(this,arguments)))>.001){m=l>n^h?0:1;var C=d,L=d;if(Na>p){var U=null==_?[w,k]:null==x?[y,b]:be([y,b],[_,S],[x,M],[w,k]),D=y-U[0],z=b-U[1],F=x-U[0],q=M-U[1],j=1/Math.sin(Math.acos((D*F+z*q)/(Math.sqrt(D*D+z*z)*Math.sqrt(F*F+q*q)))/2),B=Math.sqrt(U[0]*U[0]+U[1]*U[1]);L=Math.min(d,(n-B)/(j-1)),C=Math.min(d,(l-B)/(j+1))}if(null!=x){var I=_o(null==_?[w,k]:[_,S],[y,b],l,C,h),H=_o([x,M],[w,k],l,C,h);d===C?E.push("M",I[0],"A",C,",",C," 0 0,",m," ",I[1],"A",l,",",l," 0 ",1-h^ko(I[1][0],I[1][1],H[1][0],H[1][1]),",",h," ",H[1],"A",C,",",C," 0 0,",m," ",H[0]):E.push("M",I[0],"A",C,",",C," 0 1,",m," ",H[0])}else E.push("M",y,",",b);if(null!=_){var V=_o([y,b],[_,S],n,-L,h),X=_o([w,k],null==x?[y,b]:[x,M],n,-L,h);d===L?E.push("L",X[0],"A",L,",",L," 0 0,",m," ",X[1],"A",n,",",n," 0 ",h^ko(X[1][0],X[1][1],V[1][0],V[1][1]),",",1-h," ",V[1],"A",L,",",L," 0 0,",m," ",V[0]):E.push("L",X[0],"A",L,",",L," 0 0,",m," ",V[0])}else E.push("L",w,",",k)}else E.push("M",y,",",b),null!=x&&E.push("A",l,",",l," 0 ",R,",",h," ",x,",",M),E.push("L",w,",",k),null!=_&&E.push("A",n,",",n," 0 ",N,",",1-h," ",_,",",S);return E.push("Z"),E.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=yo,r=bo,o=go,a=wu,i=xo,u=Mo,s=wo;return n.innerRadius=function(t){return arguments.length?(e=Tn(t),n):e},n.outerRadius=function(t){return arguments.length?(r=Tn(t),n):r},n.cornerRadius=function(t){return arguments.length?(o=Tn(t),n):o},n.padRadius=function(t){return arguments.length?(a=t==wu?wu:Tn(t),n):a},n.startAngle=function(t){return arguments.length?(i=Tn(t),n):i},n.endAngle=function(t){return arguments.length?(u=Tn(t),n):u},n.padAngle=function(t){return arguments.length?(s=Tn(t),n):s},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+i.apply(this,arguments)+ +u.apply(this,arguments))/2-La;return[Math.cos(t)*n,Math.sin(t)*n]},n};var wu="auto";ra.svg.line=function(){return So(w)};var ku=ra.map({linear:Ao,"linear-closed":To,step:function(n){for(var t=0,e=n.length,r=n[0],o=[r[0],",",r[1]];++t<e;)o.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&o.push("H",r[0]),o.join("")},"step-before":Eo,"step-after":Ro,basis:Oo,"basis-open":function(n){if(n.length<4)return Ao(n);for(var t,e=[],r=-1,o=n.length,a=[0],i=[0];++r<3;)t=n[r],a.push(t[0]),i.push(t[1]);for(e.push(Co(Au,a)+","+Co(Au,i)),--r;++r<o;)t=n[r],a.shift(),a.push(t[0]),i.shift(),i.push(t[1]),Lo(e,a,i);return e.join("")},"basis-closed":function(n){for(var t,e,r=-1,o=n.length,a=o+4,i=[],u=[];++r<4;)e=n[r%o],i.push(e[0]),u.push(e[1]);for(t=[Co(Au,i),",",Co(Au,u)],--r;++r<a;)e=n[r%o],i.shift(),i.push(e[0]),u.shift(),u.push(e[1]),Lo(t,i,u);return t.join("")},bundle:function(n,t){var e=n.length-1;if(e)for(var r,o,a=n[0][0],i=n[0][1],u=n[e][0]-a,s=n[e][1]-i,l=-1;++l<=e;)r=n[l],o=l/e,r[0]=t*r[0]+(1-t)*(a+o*u),r[1]=t*r[1]+(1-t)*(i+o*s);return Oo(n)},cardinal:function(n,t){return n.length<3?Ao(n):n[0]+Po(n,No(n,t))},"cardinal-open":function(n,t){return n.length<4?Ao(n):n[1]+Po(n.slice(1,-1),No(n,t))},"cardinal-closed":function(n,t){return n.length<3?To(n):n[0]+Po((n.push(n[0]),n),No([n[n.length-2]].concat(n,[n[1]]),t))},monotone:function(n){return n.length<3?Ao(n):n[0]+Po(n,Do(n))}});ku.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var _u=[0,2/3,1/3,0],Su=[0,1/3,2/3,0],Au=[0,1/6,2/3,1/6];ra.svg.line.radial=function(){var n=So(zo);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},Eo.reverse=Ro,Ro.reverse=Eo,ra.svg.area=function(){return Fo(w)},ra.svg.area.radial=function(){var n=Fo(zo);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},ra.svg.chord=function(){function n(n,i){var u=t(this,o,n,i),s=t(this,a,n,i);return"M"+u.p0+e(u.r,u.p1,u.a1-u.a0)+(function(n,t){return n.a0==t.a0&&n.a1==t.a1}(u,s)?r(u.r,u.p1,u.r,u.p0):r(u.r,u.p1,s.r,s.p0)+e(s.r,s.p1,s.a1-s.a0)+r(s.r,s.p1,u.r,u.p0))+"Z"}function t(n,t,e,r){var o=t.call(n,e,r),a=i.call(n,o,r),l=u.call(n,o,r)-La,c=s.call(n,o,r)-La;return{r:a,a0:l,a1:c,p0:[a*Math.cos(l),a*Math.sin(l)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function e(n,t,e){return"A"+n+","+n+" 0 "+ +(e>Na)+",1 "+t}function r(n,t,e,r){return"Q 0,0 "+r}var o=ie,a=ue,i=qo,u=xo,s=Mo;return n.radius=function(t){return arguments.length?(i=Tn(t),n):i},n.source=function(t){return arguments.length?(o=Tn(t),n):o},n.target=function(t){return arguments.length?(a=Tn(t),n):a},n.startAngle=function(t){return arguments.length?(u=Tn(t),n):u},n.endAngle=function(t){return arguments.length?(s=Tn(t),n):s},n},ra.svg.diagonal=function(){function n(n,o){var a=t.call(this,n,o),i=e.call(this,n,o),u=(a.y+i.y)/2,s=[a,{x:a.x,y:u},{x:i.x,y:u},i];return"M"+(s=s.map(r))[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var t=ie,e=ue,r=jo;return n.source=function(e){return arguments.length?(t=Tn(e),n):t},n.target=function(t){return arguments.length?(e=Tn(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},ra.svg.diagonal.radial=function(){var n=ra.svg.diagonal(),t=jo,e=n.projection;return n.projection=function(n){return arguments.length?e(function(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-La;return[e*Math.cos(r),e*Math.sin(r)]}}(t=n)):t},n},ra.svg.symbol=function(){function n(n,r){return(Tu.get(t.call(this,n,r))||Ho)(e.call(this,n,r))}var t=Io,e=Bo;return n.type=function(e){return arguments.length?(t=Tn(e),n):t},n.size=function(t){return arguments.length?(e=Tn(t),n):e},n};var Tu=ra.map({circle:Ho,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Ru)),e=t*Ru;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/Eu),e=t*Eu/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/Eu),e=t*Eu/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});ra.svg.symbolTypes=Tu.keys();var Eu=Math.sqrt(3),Ru=Math.tan(30*Ua);wa.transition=function(n){for(var t,e,r=Pu||++Lu,o=Wo(n),a=[],i=Nu||{time:Date.now(),ease:ar,delay:0,duration:250},u=-1,s=this.length;++u<s;){a.push(t=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(e=l[c])&&Zo(e,c,o,r,i),t.push(e)}return Xo(a,o,r)},wa.interrupt=function(n){return this.each(null==n?Ou:Vo(Wo(n)))};var Pu,Nu,Ou=Vo(Wo()),Cu=[],Lu=0;Cu.call=wa.call,Cu.empty=wa.empty,Cu.node=wa.node,Cu.size=wa.size,ra.transition=function(n,t){return n&&n.transition?Pu?n.transition(t):n:ra.selection().transition(n)},ra.transition.prototype=Cu,Cu.select=function(n){var t,e,r,o=this.id,a=this.namespace,i=[];n=O(n);for(var u=-1,s=this.length;++u<s;){i.push(t=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(r=l[c])&&(e=n.call(r,r.__data__,c,u))?("__data__"in r&&(e.__data__=r.__data__),Zo(e,c,a,o,r[a][o]),t.push(e)):t.push(null)}return Xo(i,a,o)},Cu.selectAll=function(n){var t,e,r,o,a,i=this.id,u=this.namespace,s=[];n=C(n);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],p=-1,h=f.length;++p<h;)if(r=f[p]){a=r[u][i],e=n.call(r,r.__data__,p,l),s.push(t=[]);for(var d=-1,m=e.length;++d<m;)(o=e[d])&&Zo(o,d,u,i,a),t.push(o)}return Xo(s,u,i)},Cu.filter=function(n){var t,e,r=[];"function"!=typeof n&&(n=X(n));for(var o=0,a=this.length;a>o;o++){r.push(t=[]);for(var i=this[o],u=0,s=i.length;s>u;u++)(e=i[u])&&n.call(e,e.__data__,u,o)&&t.push(e)}return Xo(r,this.namespace,this.id)},Cu.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):G(this,null==t?function(t){t[r][e].tween.remove(n)}:function(o){o[r][e].tween.set(n,t)})},Cu.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?mr:Qe,a=ra.ns.qualify(n);return Go(this,"attr."+n,t,a.local?function(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}:function(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})})},Cu.attrTween=function(n,t){var e=ra.ns.qualify(n);return this.tween("attr."+n,e.local?function(n,r){var o=t.call(this,n,r,this.getAttributeNS(e.space,e.local));return o&&function(n){this.setAttributeNS(e.space,e.local,o(n))}}:function(n,r){var o=t.call(this,n,r,this.getAttribute(e));return o&&function(n){this.setAttribute(e,o(n))}})},Cu.style=function(n,t,e){function r(){this.style.removeProperty(n)}var o=arguments.length;if(3>o){if("string"!=typeof n){for(e in 2>o&&(t=""),n)this.style(e,n[e],t);return this}e=""}return Go(this,"style."+n,t,function(t){return null==t?r:(t+="",function(){var r,o=i(this).getComputedStyle(this,null).getPropertyValue(n);return o!==t&&(r=Qe(o,t),function(t){this.style.setProperty(n,r(t),e)})})})},Cu.styleTween=function(n,t,e){return arguments.length<3&&(e=""),this.tween("style."+n,function(r,o){var a=t.call(this,r,o,i(this).getComputedStyle(this,null).getPropertyValue(n));return a&&function(t){this.style.setProperty(n,a(t),e)}})},Cu.text=function(n){return Go(this,"text",n,Yo)},Cu.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Cu.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=ra.ease.apply(ra,arguments)),G(this,function(r){r[e][t].ease=n}))},Cu.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:G(this,"function"==typeof n?function(r,o,a){r[e][t].delay=+n.call(r,r.__data__,o,a)}:(n=+n,function(r){r[e][t].delay=n}))},Cu.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:G(this,"function"==typeof n?function(r,o,a){r[e][t].duration=Math.max(1,n.call(r,r.__data__,o,a))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Cu.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var o=Nu,a=Pu;try{Pu=e,G(this,function(t,o,a){Nu=t[r][e],n.call(t,t.__data__,o,a)})}finally{Nu=o,Pu=a}}else G(this,function(o){var a=o[r][e];(a.event||(a.event=ra.dispatch("start","end","interrupt"))).on(n,t)});return this},Cu.transition=function(){for(var n,t,e,r=this.id,o=++Lu,a=this.namespace,i=[],u=0,s=this.length;s>u;u++){i.push(n=[]);for(var l=this[u],c=0,f=l.length;f>c;c++)(t=l[c])&&(e=t[a][r],Zo(t,c,a,o,{time:e.time,ease:e.ease,delay:e.delay+e.duration,duration:e.duration})),n.push(t)}return Xo(i,a,o)},ra.svg.axis=function(){function n(n){n.each(function(){var n,l=ra.select(this),c=this.__chart__||e,f=this.__chart__=e.copy(),p=null==s?f.ticks?f.ticks.apply(f,u):f.domain():s,h=null==t?f.tickFormat?f.tickFormat.apply(f,u):w:t,d=l.selectAll(".tick").data(p,f),m=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ra),v=ra.transition(d.exit()).style("opacity",Ra).remove(),g=ra.transition(d.order()).style("opacity",1),y=Math.max(o,0)+i,b=oo(f),x=l.selectAll(".domain").data([0]),M=(x.enter().append("path").attr("class","domain"),ra.transition(x));m.append("line"),m.append("text");var k,_,S,A,T=m.select("line"),E=g.select("line"),R=d.select("text").text(h),P=m.select("text"),N=g.select("text"),O="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=Jo,k="x",S="y",_="x2",A="y2",R.attr("dy",0>O?"0em":".71em").style("text-anchor","middle"),M.attr("d","M"+b[0]+","+O*a+"V0H"+b[1]+"V"+O*a)):(n=$o,k="y",S="x",_="y2",A="x2",R.attr("dy",".32em").style("text-anchor",0>O?"end":"start"),M.attr("d","M"+O*a+","+b[0]+"H0V"+b[1]+"H"+O*a)),T.attr(A,O*o),P.attr(S,O*y),E.attr(_,0).attr(A,O*o),N.attr(k,0).attr(S,O*y),f.rangeBand){var C=f,L=C.rangeBand()/2;c=f=function(n){return C(n)+L}}else c.rangeBand?c=f:v.call(n,f,c);m.call(n,c,f),g.call(n,f,f)})}var t,e=ra.scale.linear(),r=Uu,o=6,a=6,i=3,u=[10],s=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Du?t+"":Uu,n):r},n.ticks=function(){return arguments.length?(u=aa(arguments),n):u},n.tickValues=function(t){return arguments.length?(s=t,n):s},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(o=+t,a=+arguments[e-1],n):o},n.innerTickSize=function(t){return arguments.length?(o=+t,n):o},n.outerTickSize=function(t){return arguments.length?(a=+t,n):a},n.tickPadding=function(t){return arguments.length?(i=+t,n):i},n.tickSubdivide=function(){return arguments.length&&n},n};var Uu="bottom",Du={top:1,right:1,bottom:1,left:1};ra.svg.brush=function(){function n(a){a.each(function(){var a=ra.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),i=a.selectAll(".background").data([0]);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=a.selectAll(".resize").data(m,w);u.exit().remove(),u.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return zu[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",n.empty()?"none":null);var s,f=ra.transition(a),p=ra.transition(i);l&&(s=oo(l),p.attr("x",s[0]).attr("width",s[1]-s[0]),e(f)),c&&(s=oo(c),p.attr("y",s[0]).attr("height",s[1]-s[0]),r(f)),t(f)})}function t(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+p[+/^s/.test(n)]+")"})}function e(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function r(n){n.select(".extent").attr("y",p[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1]-p[0])}function o(){function o(){var n=ra.mouse(b),o=!1;y&&(n[0]+=y[0],n[1]+=y[1]),A||(ra.event.altKey?(g||(g=[(f[0]+f[1])/2,(p[0]+p[1])/2]),R[0]=f[+(n[0]<g[0])],R[1]=p[+(n[1]<g[1])]):g=null),_&&m(n,l,0)&&(e(w),o=!0),S&&m(n,c,1)&&(r(w),o=!0),o&&(t(w),M({type:"brush",mode:A?"move":"resize"}))}function m(n,t,e){var r,o,i=oo(t),s=i[0],l=i[1],c=R[e],m=e?p:f,v=m[1]-m[0];return A&&(s-=c,l-=v+c),r=(e?d:h)?Math.max(s,Math.min(l,n[e])):n[e],A?o=(r+=c)+v:(g&&(c=Math.max(s,Math.min(l,2*g[e]-r))),r>c?(o=r,r=c):o=c),m[0]!=r||m[1]!=o?(e?u=null:a=null,m[0]=r,m[1]=o,!0):void 0}function v(){o(),w.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),ra.select("body").style("cursor",null),P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),T(),M({type:"brushend"})}var g,y,b=this,x=ra.select(ra.event.target),M=s.of(b,arguments),w=ra.select(b),k=x.datum(),_=!/^(n|s)$/.test(k)&&l,S=!/^(e|w)$/.test(k)&&c,A=x.classed("extent"),T=$(b),R=ra.mouse(b),P=ra.select(i(b)).on("keydown.brush",function(){32==ra.event.keyCode&&(A||(g=null,R[0]-=f[1],R[1]-=p[1],A=2),E())}).on("keyup.brush",function(){32==ra.event.keyCode&&2==A&&(R[0]+=f[1],R[1]+=p[1],A=0,E())});if(ra.event.changedTouches?P.on("touchmove.brush",o).on("touchend.brush",v):P.on("mousemove.brush",o).on("mouseup.brush",v),w.interrupt().selectAll("*").interrupt(),A)R[0]=f[0]-R[0],R[1]=p[0]-R[1];else if(k){var N=+/w$/.test(k),O=+/^n/.test(k);y=[f[1-N]-R[0],p[1-O]-R[1]],R[0]=f[N],R[1]=p[O]}else ra.event.altKey&&(g=R.slice());w.style("pointer-events","none").selectAll(".resize").style("display",null),ra.select("body").style("cursor",x.style("cursor")),M({type:"brushstart"}),o()}var a,u,s=P(n,"brushstart","brush","brushend"),l=null,c=null,f=[0,0],p=[0,0],h=!0,d=!0,m=Fu[0];return n.event=function(n){n.each(function(){var n=s.of(this,arguments),t={x:f,y:p,i:a,j:u},e=this.__chart__||t;this.__chart__=t,Pu?ra.select(this).transition().each("start.brush",function(){a=e.i,u=e.j,f=e.x,p=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=nr(f,t.x),r=nr(p,t.y);return a=u=null,function(o){f=t.x=e(o),p=t.y=r(o),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,u=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(m=Fu[!(l=t)<<1|!c],n):l},n.y=function(t){return arguments.length?(m=Fu[!l<<1|!(c=t)],n):c},n.clamp=function(t){return arguments.length?(l&&c?(h=!!t[0],d=!!t[1]):l?h=!!t:c&&(d=!!t),n):l&&c?[h,d]:l?h:c?d:null},n.extent=function(t){var e,r,o,i,s;return arguments.length?(l&&(e=t[0],r=t[1],c&&(e=e[0],r=r[0]),a=[e,r],l.invert&&(e=l(e),r=l(r)),e>r&&(s=e,e=r,r=s),(e!=f[0]||r!=f[1])&&(f=[e,r])),c&&(o=t[0],i=t[1],l&&(o=o[1],i=i[1]),u=[o,i],c.invert&&(o=c(o),i=c(i)),o>i&&(s=o,o=i,i=s),(o!=p[0]||i!=p[1])&&(p=[o,i])),n):(l&&(a?(e=a[0],r=a[1]):(e=f[0],r=f[1],l.invert&&(e=l.invert(e),r=l.invert(r)),e>r&&(s=e,e=r,r=s))),c&&(u?(o=u[0],i=u[1]):(o=p[0],i=p[1],c.invert&&(o=c.invert(o),i=c.invert(i)),o>i&&(s=o,o=i,i=s))),l&&c?[[e,o],[r,i]]:l?[e,r]:c&&[o,i])},n.clear=function(){return n.empty()||(f=[0,0],p=[0,0],a=u=null),n},n.empty=function(){return!!l&&f[0]==f[1]||!!c&&p[0]==p[1]},ra.rebind(n,s,"on")};var zu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Fu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],qu=oi.format=ci.timeFormat,ju=qu.utc,Bu=ju("%Y-%m-%dT%H:%M:%S.%LZ");qu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ko:Bu,Ko.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Ko.toString=Bu.toString,oi.second=zn(function(n){return new ai(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),oi.seconds=oi.second.range,oi.seconds.utc=oi.second.utc.range,oi.minute=zn(function(n){return new ai(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),oi.minutes=oi.minute.range,oi.minutes.utc=oi.minute.utc.range,oi.hour=zn(function(n){var t=n.getTimezoneOffset()/60;return new ai(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),oi.hours=oi.hour.range,oi.hours.utc=oi.hour.utc.range,oi.month=zn(function(n){return(n=oi.day(n)).setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),oi.months=oi.month.range,oi.months.utc=oi.month.utc.range;var Iu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Hu=[[oi.second,1],[oi.second,5],[oi.second,15],[oi.second,30],[oi.minute,1],[oi.minute,5],[oi.minute,15],[oi.minute,30],[oi.hour,1],[oi.hour,3],[oi.hour,6],[oi.hour,12],[oi.day,1],[oi.day,2],[oi.week,1],[oi.month,1],[oi.month,3],[oi.year,1]],Vu=qu.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",_t]]),Xu={range:function(n,t,e){return ra.range(Math.ceil(n/e)*e,+t,e).map(na)},floor:w,ceil:w};Hu.year=oi.year,oi.scale=function(){return Qo(ra.scale.linear(),Hu,Vu)};var Gu=Hu.map(function(n){return[n[0].utc,n[1]]}),Yu=ju.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",_t]]);Gu.year=oi.year.utc,oi.scale.utc=function(){return Qo(ra.scale.linear(),Gu,Yu)},ra.text=En(function(n){return n.responseText}),ra.json=function(n,t){return Rn(n,"application/json",ta,t)},ra.html=function(n,t){return Rn(n,"text/html",ea,t)},ra.xml=En(function(n){return n.responseXML}),this.d3=ra,void 0===(o="function"==typeof(r=ra)?r.call(t,e,t,n):r)||(n.exports=o)}()},function(n,t,e){var r=e(3);"string"==typeof r&&(r=[[n.id,r,""]]),e(5)(r,{}),r.locals&&(n.exports=r.locals)},function(n,t,e){(n.exports=e(4)()).push([n.id,"svg {\n  display: block;\n  min-width: 100%;\n  width: 100%;\n  min-height: 100%;\n}\n\ncircle.node {\n  stroke: #ccc;\n  stroke-width: 1px;\n  opacity: 1;\n  fill: white;\n}\n\npolygon.node {\n  stroke: #ccc;\n  stroke-width: 1px;\n  opacity: 1;\n  fill: white;\n}\n\ncircle.node.label {\n    stroke: transparent;\n    stroke-width: 0;\n    fill: white;\n    display: inline;\n}\n\ncircle.outline_node {\n    stroke-width: 1px;\n    fill: red;\n}\n\ncircle.protein {\n    fill: gray;\n    fill-opacity: 0.5;\n    stroke-width: 4;\n}\n\ncircle.hidden_outline {\n    stroke-width: 0px;\n}\n\n\nline.link {\n  stroke: #999;\n  stroke-opacity: 0.8;\n  stroke-width: 2;\n}\n\nline.pseudoknot {\n    stroke: red;\n}\n\nline.basepair {\n  stroke: red;\n}\n\nline.intermolecule {\n  stroke: blue;\n}\n\nline.chain_chain {\n  stroke-dasharray: 3,3;\n}\n\nline.fake {\n  stroke: green;\n}\n\n.transparent {\n    fill: transparent;\n    stroke-width: 0;\n    stroke-opacity: 0;\n    opacity: 0;\n    visibility: hidden;\n}\n\n.drag_line {\n  stroke: #999;\n  stroke-width: 2;\n  pointer-events: none;\n}\n\n.drag_line_hidden {\n  stroke: #999;\n  stroke-width: 0;\n  pointer-events: none;\n}\n\n.d3-tip {\n    line-height: 1;\n    font-weight: bold;\n    padding: 6px;\n    background: rgba(0, 0, 0, 0.6);\n    color: #fff;\n    border-radius: 4px;\n    pointer-events: none;\n          }\n\ntext.node-label {\n    font-weight: bold;\n    font-family: Tahoma, Geneva, sans-serif;\n    color: rgb(100,100,100);\n    pointer-events: none;\n}\n\ntext {\n    pointer-events: none;\n}\n\ng.gnode {\n\n}\n\ncircle.outline_node.selected {\n    visibility: visible;\n}\n\ncircle.outline_node {\n    visibility: hidden;\n}\n\n.brush .extent {\n  fill-opacity: .1;\n  stroke: #fff;\n  shape-rendering: crispEdges;\n}\n\n.noselect {\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n",""])},function(n,t){n.exports=function(){var n=[];return n.toString=function(){for(var n=[],t=0;t<this.length;t++){var e=this[t];e[2]?n.push("@media "+e[2]+"{"+e[1]+"}"):n.push(e[1])}return n.join("")},n.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<t.length;o++){var i=t[o];"number"==typeof i[0]&&r[i[0]]||(e&&!i[2]?i[2]=e:e&&(i[2]="("+i[2]+") and ("+e+")"),n.push(i))}},n}},function(n,t,e){function r(n,t){for(var e=0;e<n.length;e++){var r=n[e],o=f[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(l(r.parts[a],t))}else{for(var i=[],a=0;a<r.parts.length;a++)i.push(l(r.parts[a],t));f[r.id]={id:r.id,refs:1,parts:i}}}}function o(n){for(var t=[],e={},r=0;r<n.length;r++){var o=n[r],a=o[0],i=o[1],u=o[2],s=o[3],l={css:i,media:u,sourceMap:s};e[a]?e[a].parts.push(l):t.push(e[a]={id:a,parts:[l]})}return t}function a(n,t){var e=d(),r=g[g.length-1];if("top"===n.insertAt)r?r.nextSibling?e.insertBefore(t,r.nextSibling):e.appendChild(t):e.insertBefore(t,e.firstChild),g.push(t);else{if("bottom"!==n.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");e.appendChild(t)}}function i(n){n.parentNode.removeChild(n);var t=g.indexOf(n);t>=0&&g.splice(t,1)}function u(n){var t=document.createElement("style");return t.type="text/css",a(n,t),t}function s(n){var t=document.createElement("link");return t.rel="stylesheet",a(n,t),t}function l(n,t){var e,r,o;if(t.singleton){var a=v++;e=m||(m=u(t)),r=c.bind(null,e,a,!1),o=c.bind(null,e,a,!0)}else n.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(e=s(t),r=function(n,t){var e=t.css,r=(t.media,t.sourceMap);r&&(e+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([e],{type:"text/css"}),a=n.href;n.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}.bind(null,e),o=function(){i(e),e.href&&URL.revokeObjectURL(e.href)}):(e=u(t),r=function(n,t){var e=t.css,r=t.media;if(t.sourceMap,r&&n.setAttribute("media",r),n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}.bind(null,e),o=function(){i(e)});return r(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap)return;r(n=t)}else o()}}function c(n,t,e,r){var o=e?"":r.css;if(n.styleSheet)n.styleSheet.cssText=y(t,o);else{var a=document.createTextNode(o),i=n.childNodes;i[t]&&n.removeChild(i[t]),i.length?n.insertBefore(a,i[t]):n.appendChild(a)}}var f={},p=function(n){var t;return function(){return void 0===t&&(t=n.apply(this,arguments)),t}},h=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=p(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,v=0,g=[];n.exports=function(n,t){void 0===(t=t||{}).singleton&&(t.singleton=h()),void 0===t.insertAt&&(t.insertAt="bottom");var e=o(n);return r(e,t),function(n){for(var a=[],i=0;i<e.length;i++){var u=e[i],s=f[u.id];s.refs--,a.push(s)}if(n){var l=o(n);r(l,t)}for(var i=0;i<a.length;i++){var s=a[i];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete f[s.id]}}}};var y=function(){var n=[];return function(t,e){return n[t]=e,n.filter(Boolean).join("\n")}}()},function(n,t,e){"use strict";function r(){var n=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?e:3&e|8).toString(16)});return t}function o(n,t,e){var o=this;o.type="protein",o.size=t,o.nodes=[{name:"P",num:1,radius:3*Math.sqrt(t),rna:o,nodeType:"protein",structName:n,elemType:"p",size:t,uid:r()}],o.links=[],o.uid=r(),o.addUids=function(n){for(var t=0;t<n.length;t++)o.nodes[t].uid=n[t];return o},o.getUids=function(){uids=[];for(var n=0;n<o.dotbracket.length;n++)uids.push(o.nodes[n].uid);return uids}}function a(n,t,e,o){var a=this;a.type="rna",a.circularizeExternal=!1,0===arguments.length?(a.seq="",a.dotbracket="",a.structName=""):(a.seq=n,a.dotbracket=t,a.structName=e),arguments.length<4&&(o=1),a.circular=!1,a.dotbracket.length>0&&"*"==a.dotbracket[a.dotbracket.length-1]&&(a.dotbracket=a.dotbracket.slice(0,a.dotbracket.length-1),a.circular=!0),a.uid=r(),a.elements=[],a.pseudoknotPairs=[],a.nucsToNodes={},a.addUids=function(n){for(var t=a.nodes.filter(function(n){return"nucleotide"==n.nodeType}),e=0;e<n.length&&e<t.length;e++)t[e].uid=n[e];return a},a.computePairtable=function(){a.pairtable=i.rnaUtilities.dotbracketToPairtable(a.dotbracket)},a.removeBreaks=function(n){for(var t=[],e=-1;(e=n.indexOf("&"))>=0;)t.push(e),n=n.substring(0,e)+"oo"+n.substring(e+1,n.length);return{targetString:n,breaks:t}};var s=a.removeBreaks(a.dotbracket);a.dotbracket=s.targetString,a.dotBracketBreaks=s.breaks,s=a.removeBreaks(a.seq),a.seq=s.targetString,a.seqBreaks=s.breaks,a.calculateStartNumberArray=function(){a.startNumberArray=[];for(var n=0;n<a.dotbracket.length;n++)a.startNumberArray.push(o),"o"==a.dotbracket[n]&&(o=-n)},a.calculateStartNumberArray(),a.rnaLength=a.dotbracket.length,(0,i.arraysEqual)(a.dotBracketBreaks,a.seqBreaks)||(console.log("WARNING: Sequence and structure breaks not equal"),console.log("WARNING: Using the breaks in the structure")),a.computePairtable(),a.addPositions=function(n,t){for(var e=a.nodes.filter(function(t){return t.nodeType==n}),r=0;r<e.length;r++)e[r].x=t[r][0],e[r].px=t[r][0],e[r].y=t[r][1],e[r].py=t[r][1];return a},a.breakNodesToFakeNodes=function(){for(var n=a.nodes.filter(function(n){return"nucleotide"==n.nodeType}),t=0;t<n.length;t++)"o"==a.dotbracket[t]&&(n[t].nodeType="middle");for(var t=0;t<a.elements.length;t++){for(var e=!1,r=0;r<a.elements[t][2].length;r++)a.dotBracketBreaks.indexOf(a.elements[t][2][r])>=0&&(e=!0);e?a.elements[t][2].map(function(n){0!=n&&(a.nodes[n-1].elemType="e")}):a.elements[t][2].map(function(n){0!=n&&(a.nodes[n-1].elemType=a.elements[t][0])})}return a},a.getPositions=function(n){for(var t=[],e=a.nodes.filter(function(t){return t.nodeType==n}),r=0;r<e.length;r++)t.push([e[r].x,e[r].y]);return t},a.getUids=function(){for(var n=[],t=0;t<a.dotbracket.length;t++)n.push(a.nodes[t].uid);return n},a.reinforceStems=function(){for(var n=a.pairtable,t=a.elements.filter(function(n){return"s"==n[0]&&n[2].length>=4}),e=0;e<t.length;e++)for(var r=t[e][2],o=r.slice(0,r.length/2),i=0;i<o.length-1;i++)a.addFakeNode([o[i],o[i+1],n[o[i+1]],n[o[i]]]);return a},a.reinforceLoops=function(){for(var n=function(n){return 0!==n&&n<=a.dotbracket.length},t=0;t<a.elements.length;t++)if("s"!=a.elements[t][0]&&(a.circularizeExternal||"e"!=a.elements[t][0])){var e=a.elements[t][2].filter(n);if("e"==a.elements[t][0]){var o={name:"",num:-3,radius:0,rna:a,nodeType:"middle",elemType:"f",nucs:[],x:a.nodes[a.rnaLength-1].x,y:a.nodes[a.rnaLength-1].y,px:a.nodes[a.rnaLength-1].px,py:a.nodes[a.rnaLength-1].py,uid:r()},i={name:"",num:-2,radius:0,rna:a,nodeType:"middle",elemType:"f",nucs:[],x:a.nodes[0].x,y:a.nodes[0].y,px:a.nodes[0].px,py:a.nodes[0].py,uid:r()};e.push(a.nodes.length+1),e.push(a.nodes.length+2),a.nodes.push(o),a.nodes.push(i)}a.addFakeNode(e)}return a},a.updateLinkUids=function(){for(var n=0;n<a.links.length;n++)a.links[n].uid=a.links[n].source.uid+a.links[n].target.uid;return a},a.addFakeNode=function(n){for(var t=6.283/(2*n.length),e=18/(2*Math.tan(t)),o="",i=0;i<n.length;i++)o+=a.nodes[n[i]-1].uid;var u={name:"",num:-1,radius:e,rna:a,nodeType:"middle",elemType:"f",nucs:n,uid:o};a.nodes.push(u);var s=0,l=0,c=0;t=3.14159*(n.length-2)/(2*n.length),e=.5/Math.cos(t);for(var f=0;f<n.length;f++)if(!(0===n[f]||n[f]>a.dotbracket.length)){a.links.push({source:a.nodes[n[f]-1],target:a.nodes[a.nodes.length-1],linkType:"fake",value:e,uid:r()}),n.length>4&&a.links.push({source:a.nodes[n[f]-1],target:a.nodes[n[(f+Math.floor(n.length/2))%n.length]-1],linkType:"fake",value:2*e,uid:r()});var p=3.14159*(n.length-2)/n.length,h=2*Math.cos(1.570795-p/2);a.links.push({source:a.nodes[n[f]-1],target:a.nodes[n[(f+2)%n.length]-1],linkType:"fake",value:h});var d=a.nodes[n[f]-1];"x"in d&&(s+=d.x,l+=d.y,c+=1)}return c>0&&(u.x=s/c,u.y=l/c,u.px=u.x,u.py=u.y),a},a.connectFakeNodes=function(){for(var n={},t=a.nodes.filter(function(n){return"middle"==n.nodeType}),e=new Set,r=1;r<=a.nodes.length;r++)n[r]=[];for(var r=0;r<t.length;r++)for(var o=t[r],i=0;i<o.nucs.length;i++){for(var u=o.nucs[i],s=0;s<n[u].length;s++)if(!e.has(JSON.stringify([n[u][s].uid,o.uid].sort()))){var l=n[u][s].radius+o.radius;a.links.push({source:n[u][s],target:o,value:l/18,linkType:"fake_fake"}),e.add(JSON.stringify([n[u][s].uid,o.uid].sort()))}n[u].push(o)}return a},a.addExtraLinks=function(n){if(void 0===n)return a;for(var t=0;t<n.length;t++){var e=a.getNodeFromNucleotides(n[t].from),o=a.getNodeFromNucleotides(n[t].to),i={source:e,target:o,linkType:"extra",extraLinkType:n[t].linkType,uid:r()};a.links.push(i)}return a},a.elementsToJson=function(){var n=a.pairtable;a.elements,a.nodes=[],a.links=[];var t={};a.elements.sort();for(var e=0;e<a.elements.length;e++)for(var o=a.elements[e][2],i=0;i<o.length;i++)t[o[i]]=a.elements[e][0];for(var e=1;e<=n[0];e++){var u=a.seq[e-1];(a.dotBracketBreaks.indexOf(e-1)>=0||a.dotBracketBreaks.indexOf(e-2)>=0)&&(u=""),a.nodes.push({name:u,num:e+a.startNumberArray[e-1]-1,radius:5,rna:a,nodeType:"nucleotide",structName:a.structName,elemType:t[e],uid:r(),linked:!1})}for(var e=0;e<a.nodes.length;e++)a.nodes[e].prevNode=0===e?null:a.nodes[e-1],e==a.nodes.length-1?a.nodes[e].nextNode=null:a.nodes[e].nextNode=a.nodes[e+1];for(var e=1;e<=n[0];e++)0!==n[e]&&a.links.push({source:a.nodes[e-1],target:a.nodes[n[e]-1],linkType:"basepair",value:1,uid:r()}),e>1&&-1===a.dotBracketBreaks.indexOf(e-1)&&-1==a.dotBracketBreaks.indexOf(e-2)&&-1==a.dotBracketBreaks.indexOf(e-3)&&(a.links.push({source:a.nodes[e-2],target:a.nodes[e-1],linkType:"backbone",value:1,uid:r()}),a.nodes[e-1].linked=!0);for(var e=0;e<a.pseudoknotPairs.length;e++)a.links.push({source:a.nodes[a.pseudoknotPairs[e][0]-1],target:a.nodes[a.pseudoknotPairs[e][1]-1],linkType:"pseudoknot",value:1,uid:r()});return a.circular&&a.links.push({source:a.nodes[0],target:a.nodes[a.rnaLength-1],linkType:"backbone",value:1,uid:r()}),a},a.ptToElements=function(n,t,e,r){var o=[],i=[e-1],s=[r+1];if(e>r)return[];for(;0===n[e];e++)i.push(e);for(;0===n[r];r--)s.push(r);if(e>r){if(i.push(e),0===t)return[["e",t,i.sort(u)]];for(var l=!1,c=[],f=[],p=0;p<i.length;p++)l?f.push(i[p]):c.push(i[p]),a.dotBracketBreaks.indexOf(i[p])>=0&&(l=!0);return[["h",t,i.sort(u)]]}if(n[e]!=r){var h=i,p=e;for(h.push(p);r>=p;){for(o=o.concat(a.ptToElements(n,t,p,n[p])),h.push(n[p]),p=n[p]+1;0===n[p]&&r>=p;p++)h.push(p);h.push(p)}return h.pop(),(h=h.concat(s)).length>0&&(0===t?o.push(["e",t,h.sort(u)]):o.push(["m",t,h.sort(u)])),o}if(n[e]===r){i.push(e),s.push(r);var d=i.concat(s);d.length>4&&(0===t?o.push(["e",t,i.concat(s).sort(u)]):o.push(["i",t,i.concat(s).sort(u)]))}for(var m=[];n[e]===r&&r>e;)m.push(e),m.push(r),e+=1,r-=1,t+=1;return i=[e-1],s=[r+1],o.push(["s",t,m.sort(u)]),o.concat(a.ptToElements(n,t,e,r))},a.addLabels=function(n,t){if(0===arguments.length&&(n=1,t=10),1===arguments.length&&(t=10),0===t)return a;0>=t&&console.log("The label interval entered in invalid:",t);for(var e=1;e<=a.pairtable[0];e++)if(e%t==0){var o,i,u,s,l=a.nodes[e-1];1==a.rnaLength?(s=[l.x-15,l.y],u=[l.x-15,l.y]):(o=1==e?a.nodes[a.rnaLength-1]:a.nodes[e-2],i=e==a.rnaLength?a.nodes[0]:a.nodes[e],0!==a.pairtable[i.num]&&0!==a.pairtable[o.num]&&0!==a.pairtable[l.num]&&(o=i=a.nodes[a.pairtable[l.num]-1]),0===a.pairtable[l.num]||0!==a.pairtable[i.num]&&0!==a.pairtable[o.num]?(s=[i.x-l.x,i.y-l.y],u=[o.x-l.x,o.y-l.y]):(s=[l.x-i.x,l.y-i.y],u=[l.x-o.x,l.y-o.y]));var c=[s[0]+u[0],s[1]+u[1]],f=Math.sqrt(c[0]*c[0]+c[1]*c[1]),p=[c[0]/f,c[1]/f],h=[-15*p[0],-15*p[1]],d=a.nodes[e-1].x+h[0],m=a.nodes[e-1].y+h[1],v={name:e+a.startNumberArray[e-1]-1,num:-1,radius:6,rna:a,nodeType:"label",structName:a.structName,elemType:"l",x:d,y:m,px:d,py:m,uid:r()},g={source:a.nodes[e-1],target:v,value:1,linkType:"label_link",uid:r()};a.nodes.push(v),a.links.push(g)}return a},a.recalculateElements=function(){if(a.removePseudoknots(),a.elements=a.ptToElements(a.pairtable,0,1,a.dotbracket.length),a.circular&&(externalLoop=a.elements.filter(function(n){return"e"==n[0]||void 0}),externalLoop.length>0)){eloop=externalLoop[0],nucs=eloop[2].sort(u),prev=nucs[0],hloop=!0,numGreater=0;for(var n=1;n<nucs.length;n++)nucs[n]-prev>1&&(numGreater+=1),prev=nucs[n];1==numGreater?eloop[0]="h":2==numGreater?eloop[0]="i":eloop[0]="m"}return a},a.reassignLinkUids=function(){for(var n=0;n<a.links.length;n++)a.links[n].uid=a.links[n].source.uid+a.links[n].target.uid;return a},a.removePseudoknots=function(){return a.pairtable.length>1&&(a.pseudoknotPairs=a.pseudoknotPairs.concat(i.rnaUtilities.removePseudoknotsFromPairtable(a.pairtable))),a},a.addPseudoknots=function(){for(var n=a.pairtable,t=a.pseudoknotPairs,e=0;e<t.length;e++)n[t[e][0]]=t[e][1],n[t[e][1]]=t[e][0];return a.pseudoknotPairs=[],a},a.addName=function(n){return void 0===n?(a.name="",a):(a.name=n,a)},a.rnaLength>0&&a.recalculateElements()}Object.defineProperty(t,"__esModule",{value:!0}),t.ProteinGraph=o,t.RNAGraph=a,t.moleculesToJson=function(n){for(var t={},e=[],i=[],u=0;u<n.molecules.length;u++){var s,l=n.molecules[u];"rna"==l.type?((s=new a(l.seq,l.ss,l.header)).circularizeExternal=!0,s.elementsToJson().addPositions("nucleotide",l.positions).addLabels().reinforceStems().reinforceLoops()):"protein"==l.type&&(s=new o(l.header,l.size)),s.addUids(l.uids);for(var c=0;c<s.nodes.length;c++)t[s.nodes[c].uid]=s.nodes[c];e.push(s)}for(var u=0;u<n.extraLinks.length;u++)link=n.extraLinks[u],link.source=t[link.source],link.target=t[link.target],link.uid=r(),i.push(link);return{graphs:e,extraLinks:i}};var i=e(7),u=function(n,t){return n-t};void 0===String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")})},function(n,t,e){n.exports=function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){n.exports=e(1)},function(n,t){"use strict";function e(){var n=this;n.bracketLeft="([{<ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n.bracketRight=")]}>abcdefghijklmnopqrstuvwxyz".split(""),n.inverseBrackets=function(n){for(var t={},e=0;e<n.length;e++)t[n[e]]=e;return t},n.maximumMatching=function(n){for(var t=n[0],e=new Array(t+1),r=0;t>=r;r++){e[r]=new Array(t+1);for(var o=r;t>=o;o++)e[r][o]=0}for(var a=0,r=t-0-1;r>0;r--)for(var o=r+0+1;t>=o;o++){a=e[r][o-1];for(var i=o-0-1;i>=r;i--)n[i]===o&&(a=Math.max(a,(i>r?e[r][i-1]:0)+1+(o-i-1>0?e[i+1][o-1]:0)));e[r][o]=a}return a=e[1][t],e},n.backtrackMaximumMatching=function(t,e){var r=Array.apply(null,Array(t.length)).map(function(){return 0});return n.mmBt(t,r,e,1,t.length-1),r},n.mmBt=function(t,e,r,o,a){var i=t[o][a];if(!(0>a-o-1)){if(t[o][a-1]==i)return void n.mmBt(t,e,r,o,a-1);for(var u=a-0-1;u>=o;u--)if(r[a]===u){var s=u>o?t[o][u-1]:0,l=a-u-1>0?t[u+1][a-1]:0;if(s+l+1==i)return e[u]=a,e[a]=u,u>o&&n.mmBt(t,e,r,o,u-1),void n.mmBt(t,e,r,u+1,a-1)}console.log("FAILED!!!"+o+","+a+": backtracking failed!")}},n.dotbracketToPairtable=function(t){var e=Array.apply(null,new Array(t.length+1)).map(Number.prototype.valueOf,0);e[0]=t.length;for(var r={},o=0;o<n.bracketLeft.length;o++)r[o]=[];for(var a=n.inverseBrackets(n.bracketLeft),i=n.inverseBrackets(n.bracketRight),o=0;o<t.length;o++){var u=t[o],s=o+1;if("."==u||"o"==u)e[s]=0;else if(u in a)r[a[u]].push(s);else{if(!(u in i))throw"Unknown symbol in dotbracket string";var l=r[i[u]].pop();e[s]=l,e[l]=s}}for(var c in r)if(r[c].length>0)throw"Unmatched base at position "+r[c][0];return e},n.insertIntoStack=function(n,t,e){for(var r=0;n[r].length>0&&n[r][n[r].length-1]<e;)r+=1;return n[r].push(e),r},n.deleteFromStack=function(n,t){for(var e=0;0===n[e].length||n[e][n[e].length-1]!=t;)e+=1;return n[e].pop(),e},n.pairtableToDotbracket=function(t){for(var e={},r=0;r<t[0];r++)e[r]=[];for(var o={},a="",r=1;r<t[0]+1;r++){if(0!==t[r]&&t[r]in o)throw"Invalid pairtable contains duplicate entries";o[t[r]]=!0,a+=0===t[r]?".":t[r]>r?n.bracketLeft[n.insertIntoStack(e,r,t[r])]:n.bracketRight[n.deleteFromStack(e,r)]}return a},n.findUnmatched=function(t,e,r){for(var o=[],a=[],i=e,u=r,s=e;r>=s;s++)0!==t[s]&&(t[s]<e||t[s]>r)&&a.push([s,t[s]]);for(var s=i;u>=s;s++){for(;0===t[s]&&u>=s;)s++;for(r=t[s];t[s]===r;)s++,r--;o=o.concat(n.findUnmatched(t,s,r))}return a.length>0&&o.push(a),o},n.removePseudoknotsFromPairtable=function(t){for(var e=n.maximumMatching(t),r=n.backtrackMaximumMatching(e,t),o=[],a=1;a<t.length;a++)t[a]<a||r[a]!=t[a]&&(o.push([a,t[a]]),t[t[a]]=0,t[a]=0);return o},n.ptToElements=function(t,e,o,a,i){var u=[],s=[o-1],l=[a+1];if(arguments.length<5&&(i=[]),o>a)return[];for(;0===t[o];o++)s.push(o);for(;0===t[a];a--)l.push(a);if(o>a){if(s.push(o),0===e)return[["e",e,s.sort(r)]];for(var c=!1,f=[],p=[],h=0;h<s.length;h++)c?p.push(s[h]):f.push(s[h]),i.indexOf(s[h])>=0&&(c=!0);return[["h",e,s.sort(r)]]}if(t[o]!=a){var d=s,h=o;for(d.push(h);a>=h;){for(u=u.concat(n.ptToElements(t,e,h,t[h],i)),d.push(t[h]),h=t[h]+1;0===t[h]&&a>=h;h++)d.push(h);d.push(h)}return d.pop(),(d=d.concat(l)).length>0&&(0===e?u.push(["e",e,d.sort(r)]):u.push(["m",e,d.sort(r)])),u}if(t[o]===a){s.push(o),l.push(a);var m=s.concat(l);m.length>4&&(0===e?u.push(["e",e,s.concat(l).sort(r)]):u.push(["i",e,s.concat(l).sort(r)]))}for(var v=[];t[o]===a&&a>o;)v.push(o),v.push(a),o+=1,a-=1,e+=1;return s=[o-1],l=[a+1],u.push(["s",e,v.sort(r)]),u.concat(n.ptToElements(t,e,o,a,i))}}Object.defineProperty(t,"__esModule",{value:!0}),t.arraysEqual=function(n,t){if(n===t)return!0;if(null===n||null===t)return!1;if(n.length!=t.length)return!1;for(var e=0;e<n.length;++e)if(n[e]!==t[e])return!1;return!0},t.RNAUtilities=e,t.ColorScheme=function(n){var t=this;return t.colorsText=n,t.parseRange=function(n){for(var t=n.split(","),e=[],r=0;r<t.length;r++){var o=t[r].split("-");if(1==o.length)e.push(parseInt(o[0]));else if(2==o.length)for(var a=parseInt(o[0]),i=parseInt(o[1]),u=a;i>=u;u++)e.push(u);else console.log("Malformed range (too many dashes):",n)}return e},t.parseColorText=function(n){for(var e=n.split("\n"),r="",o=1,a={colorValues:{"":{}},range:["white","steelblue"]},i=[],u=0;u<e.length;u++)if(">"!=e[u][0])for(var s=e[u].trim().split(/[\s]+/),l=0;l<s.length;l++)if(isNaN(s[l])){if(0===s[l].search("range")){var c=s[l].split("="),f=c[1].split(":");a.range=[f[0],f[1]];continue}if(0==s[l].search("domain")){var p=s[l].split("="),f=p[1].split(":");a.domain=[f[0],f[1]];continue}for(var h=s[l].split(":"),d=t.parseRange(h[0]),m=h[1],v=0;v<d.length;v++)isNaN(m)?a.colorValues[r][d[v]]=m:(a.colorValues[r][d[v]]=+m,i.push(Number(m)))}else a.colorValues[r][o]=Number(s[l]),o+=1,i.push(Number(s[l]));else r=e[u].trim().slice(1),o=1,a.colorValues[r]={};return"domain"in a||(a.domain=[Math.min.apply(null,i),Math.max.apply(null,i)]),t.colorsJson=a,t},t.normalizeColors=function(){var n;for(var e in t.colorsJson){var r=Number.MAX_VALUE,o=Number.MIN_VALUE;for(var a in t.colorsJson.colorValues[e])"number"==typeof(n=t.colorsJson.colorValues[e][a])&&(r>n&&(r=n),n>o&&(o=n));for(a in t.colorsJson.colorValues[e])"number"==typeof(n=t.colorsJson.colorValues[e][a])&&(t.colorsJson.colorValues[e][a]=(n-r)/(o-r))}return t},t.parseColorText(t.colorsText),t};var r=function(n,t){return n-t};t.rnaUtilities=new e}])},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleXyCoordinates=function(n){var t,e,r,o=[],a=[];e=n[0];var i=Array.apply(null,new Array(e+5)).map(Number.prototype.valueOf,0),u=Array.apply(null,new Array(16+Math.floor(e/5))).map(Number.prototype.valueOf,0),s=Array.apply(null,new Array(16+Math.floor(e/5))).map(Number.prototype.valueOf,0),l=0,c=0,f=Math.PI/2;(function n(t,e,r){var o,a,p,h,d,m,v,g,y,b,x,M,w=2,k=0,_=0,S=Array.apply(null,new Array(3+2*Math.floor((e-t)/5))).map(Number.prototype.valueOf,0);for(o=t-1,e++;t!=e;)if((a=r[t])&&0!=t){w+=2,p=t,h=a,S[++k]=p,S[++k]=h,t=a+1,d=p,m=h,g=0;do{p++,h--,g++}while(r[p]==h&&r[p]>p);if(v=g-2,g>=2&&(i[d+1+v]+=f,i[m-1-v]+=f,i[d]+=f,i[m]+=f,g>2))for(;v>=1;v--)i[d+v]=Math.PI,i[m-v]=Math.PI;s[++c]=g,h>=p&&n(p,h,r)}else t++,w++,_++;for(M=Math.PI*(w-2)/w,S[++k]=e,y=0>o?0:o,b=1;k>=b;b++){for(x=S[b]-y,v=0;x>=v;v++)i[y+v]+=M;if(b>k)break;y=S[++b]}u[++l]=_})(0,e+1,n),u[l]-=2,r=0,o[0]=100,a[0]=100;var p=[];for(p.push([o[0],a[0]]),t=1;e>t;t++)o[t]=o[t-1]+15*Math.cos(r),a[t]=a[t-1]+15*Math.sin(r),p.push([o[t],a[t]]),r+=Math.PI-i[t+1];return p}}])},function(n,t,e){"use strict";var r=e(24);function o(){}n.exports=function(){function n(n,t,e,o,a,i){if(i!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return n}n.isRequired=n;var e={array:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:t,element:n,instanceOf:t,node:n,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return e.checkPropTypes=o,e.PropTypes=e,e}},function(n,t,e){"use strict";n.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(n,t,e){"use strict";var r=e(7),o=e(26),a=e(27),i=e(6),u=e(8),s=e(21),l=e(28);function c(n,t){return t=t.split("// __split__"),new o.Program(n,t[0],t[1])}n.exports=function(n,t,e){var f,p,h,d,m,v,g,y,b,x,M,w,k,_,S,A,T,E,R,P,N,O,C,L,U,D,z,F=this,q=null,j=null,B=null,I=null,H=null,V=null,X=0,G=!1,Y=!1;function W(n){h.viewport(0,0,e,e);var o=u.clone(n);o.zoom=1/f,o.translation.x=0,o.translation.y=0;for(var a=r.mat4.create(),i=0;i<3;i++){var s=r.vec3.random(r.vec3.create(),1);r.mat4.rotate(a,a,10*Math.random(),s)}o.rotation=r.mat4.multiply(r.mat4.create(),a,o.rotation),T.bind(),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var l=u.getRect(o),c=r.mat4.create();r.mat4.ortho(c,l.left,l.right,l.bottom,l.top,0,f);var p=r.mat4.create();r.mat4.lookAt(p,[0,0,0],[0,0,-1],[0,1,0]);var d=r.mat4.create();r.mat4.translate(d,d,[0,0,-f/2]),r.mat4.multiply(d,d,o.rotation),N.setUniform("uProjection","Matrix4fv",!1,c),N.setUniform("uView","Matrix4fv",!1,p),N.setUniform("uModel","Matrix4fv",!1,d),N.setUniform("uBottomLeft","2fv",[l.left,l.bottom]),N.setUniform("uTopRight","2fv",[l.right,l.top]),N.setUniform("uAtomScale","1f",2.5*o.atomScale),N.setUniform("uRelativeAtomScale","1f",n.relativeAtomScale),N.setUniform("uRes","1f",e),N.setUniform("uDepth","1f",f),N.setUniform("uMode","1i",0),N.setUniform("uAtomShade","1f",n.atomShade),q.render(),n.bonds&&null!=j&&(O.setUniform("uProjection","Matrix4fv",!1,c),O.setUniform("uView","Matrix4fv",!1,p),O.setUniform("uModel","Matrix4fv",!1,d),O.setUniform("uRotation","Matrix4fv",!1,o.rotation),O.setUniform("uDepth","1f",f),O.setUniform("uBottomLeft","2fv",[l.left,l.bottom]),O.setUniform("uTopRight","2fv",[l.right,l.top]),O.setUniform("uRes","1f",e),O.setUniform("uBondRadius","1f",2.5*u.getBondRadius(n)),O.setUniform("uBondShade","1f",n.bondShade),O.setUniform("uAtomScale","1f",2.5*n.atomScale),O.setUniform("uRelativeAtomScale","1f",n.relativeAtomScale),O.setUniform("uMode","1i",0),j.render()),h.viewport(0,0,t,t);var y=u.getRect(n),x=u.getRect(o),M=r.mat4.invert(r.mat4.create(),a);E.bind(),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),C.setUniform("uSceneDepth","1i",v.index),C.setUniform("uSceneNormal","1i",m.index),C.setUniform("uRandRotDepth","1i",g.index),C.setUniform("uAccumulator","1i",b.index),C.setUniform("uSceneBottomLeft","2fv",[y.left,y.bottom]),C.setUniform("uSceneTopRight","2fv",[y.right,y.top]),C.setUniform("uRotBottomLeft","2fv",[x.left,x.bottom]),C.setUniform("uRotTopRight","2fv",[x.right,x.top]),C.setUniform("uRes","1f",t),C.setUniform("uDepth","1f",f),C.setUniform("uRot","Matrix4fv",!1,a),C.setUniform("uInvRot","Matrix4fv",!1,M),C.setUniform("uSampleCount","1i",X),B.render(),b.activate(),b.bind(),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGBA,0,0,t,t,0)}F.getAOProgress=function(){return X/1024},F.initialize=function(){n.width=n.height=t,(h=n.getContext("webgl")).enable(h.DEPTH_TEST),h.enable(h.CULL_FACE),h.clearColor(0,0,0,0),h.clearDepth(1),h.viewport(0,0,t,t),window.gl=h,o.getExtensions(h,["EXT_frag_depth","WEBGL_depth_texture"]),F.createTextures(),N=c(h,l.shaders.atom),O=c(h,l.shaders.bond),z=c(h,l.shaders["textured-quad"]),C=c(h,l.shaders.accumulator),L=c(h,l.shaders.ao),U=c(h,l.shaders.fxaa),D=c(h,l.shaders.dof);var e=[-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0],r=o.buildAttribs(h,{aPosition:3});r.aPosition.buffer.set(new Float32Array(e));var a=e.length/9;new o.Renderable(h,z,r,a),B=new o.Renderable(h,C,r,a),I=new o.Renderable(h,L,r,a),V=new o.Renderable(h,U,r,a),H=new o.Renderable(h,D,r,a),0},F.createTextures=function(){y=new o.Texture(h,0,null,e,e),g=new o.Texture(h,1,null,e,e,{internalFormat:h.DEPTH_COMPONENT,format:h.DEPTH_COMPONENT,type:h.UNSIGNED_SHORT}),T=new o.Framebuffer(h,[y],g),d=new o.Texture(h,2,null,t,t),m=new o.Texture(h,3,null,t,t),v=new o.Texture(h,4,null,t,t,{internalFormat:h.DEPTH_COMPONENT,format:h.DEPTH_COMPONENT,type:h.UNSIGNED_SHORT}),S=new o.Framebuffer(h,[d],v),A=new o.Framebuffer(h,[m],v),b=new o.Texture(h,5,null,t,t),x=new o.Texture(h,6,null,t,t),E=new o.Framebuffer(h,[x]),_=new o.Texture(h,7,null,t,t),P=new o.Framebuffer(h,[_]),M=new o.Texture(h,8,null,t,t),w=new o.Texture(h,9,null,t,t),R=new o.Framebuffer(h,[w]),k=new o.Texture(h,10,null,t,t),new o.Framebuffer(h,[k])},F.setResolution=function(r,o){e=o,t=r,n.width=n.height=t,h.viewport(0,0,t,t),F.createTextures()},F.setSystem=function(n,t){function e(n){for(var t=[],e=0;e<36;e++)t.push.apply(t,n);return t}p=n;for(var r=o.buildAttribs(h,{aImposter:3,aPosition:3,aRadius:1,aColor:3}),u=[],s=[],l=[],c=[],f=0;f<p.atoms.length;f++){u.push.apply(u,a.position);var d=p.atoms[f];s.push.apply(s,e([d.x,d.y,d.z])),l.push.apply(l,e([i[d.symbol].radius]));var m=i[d.symbol].color;c.push.apply(c,e([m[0],m[1],m[2]]))}r.aImposter.buffer.set(new Float32Array(u)),r.aPosition.buffer.set(new Float32Array(s)),r.aRadius.buffer.set(new Float32Array(l)),r.aColor.buffer.set(new Float32Array(c));var v=u.length/9;if(q=new o.Renderable(h,N,r,v),t.bonds&&(j=null,p.bonds.length>0)){r=o.buildAttribs(h,{aImposter:3,aPosA:3,aPosB:3,aRadA:1,aRadB:1,aColA:3,aColB:3}),u=[];var g=[],y=[],b=[],x=[],M=[],w=[];for(f=0;f<p.bonds.length;f++){var k=p.bonds[f];if(k.cutoff>t.bondThreshold)break;u.push.apply(u,a.position),g.push.apply(g,e([k.posA.x,k.posA.y,k.posA.z])),y.push.apply(y,e([k.posB.x,k.posB.y,k.posB.z])),b.push.apply(b,e([k.radA])),x.push.apply(x,e([k.radB])),M.push.apply(M,e([k.colA.r,k.colA.g,k.colA.b])),w.push.apply(w,e([k.colB.r,k.colB.g,k.colB.b]))}r.aImposter.buffer.set(new Float32Array(u)),r.aPosA.buffer.set(new Float32Array(g)),r.aPosB.buffer.set(new Float32Array(y)),r.aRadA.buffer.set(new Float32Array(b)),r.aRadB.buffer.set(new Float32Array(x)),r.aColA.buffer.set(new Float32Array(M)),r.aColB.buffer.set(new Float32Array(w));v=u.length/9;j=new o.Renderable(h,O,r,v)}},F.reset=function(){X=0,G=!1,Y=!1,b.reset(),x.reset()},F.render=function(n){if(void 0!==p&&null!=q){if(f=2*s.getRadius(p),G)if(Y)for(var e=0;e<n.spf&&!(X>1024);e++)W(n),X++;else!function(n){Y=!0,h.viewport(0,0,t,t),A.bind(),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var e=u.getRect(n),o=r.mat4.create();r.mat4.ortho(o,e.left,e.right,e.bottom,e.top,0,f);var a=r.mat4.create();r.mat4.lookAt(a,[0,0,0],[0,0,-1],[0,1,0]);var i=r.mat4.create();r.mat4.translate(i,i,[0,0,-f/2]),r.mat4.multiply(i,i,n.rotation),N.setUniform("uProjection","Matrix4fv",!1,o),N.setUniform("uView","Matrix4fv",!1,a),N.setUniform("uModel","Matrix4fv",!1,i),N.setUniform("uBottomLeft","2fv",[e.left,e.bottom]),N.setUniform("uTopRight","2fv",[e.right,e.top]),N.setUniform("uAtomScale","1f",2.5*n.atomScale),N.setUniform("uRelativeAtomScale","1f",n.relativeAtomScale),N.setUniform("uRes","1f",t),N.setUniform("uDepth","1f",f),N.setUniform("uMode","1i",1),N.setUniform("uAtomShade","1f",n.atomShade),q.render(),n.bonds&&null!=j&&(A.bind(),O.setUniform("uProjection","Matrix4fv",!1,o),O.setUniform("uView","Matrix4fv",!1,a),O.setUniform("uModel","Matrix4fv",!1,i),O.setUniform("uRotation","Matrix4fv",!1,n.rotation),O.setUniform("uDepth","1f",f),O.setUniform("uBottomLeft","2fv",[e.left,e.bottom]),O.setUniform("uTopRight","2fv",[e.right,e.top]),O.setUniform("uRes","1f",t),O.setUniform("uBondRadius","1f",2.5*u.getBondRadius(n)),O.setUniform("uBondShade","1f",n.bondShade),O.setUniform("uAtomScale","1f",2.5*n.atomScale),O.setUniform("uRelativeAtomScale","1f",n.relativeAtomScale),O.setUniform("uMode","1i",1),j.render())}(n);else!function(n){G=!0,h.viewport(0,0,t,t),S.bind(),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);var e=u.getRect(n),o=r.mat4.create();r.mat4.ortho(o,e.left,e.right,e.bottom,e.top,0,f);var a=r.mat4.create();r.mat4.lookAt(a,[0,0,0],[0,0,-1],[0,1,0]);var i=r.mat4.create();r.mat4.translate(i,i,[0,0,-f/2]),r.mat4.multiply(i,i,n.rotation),N.setUniform("uProjection","Matrix4fv",!1,o),N.setUniform("uView","Matrix4fv",!1,a),N.setUniform("uModel","Matrix4fv",!1,i),N.setUniform("uBottomLeft","2fv",[e.left,e.bottom]),N.setUniform("uTopRight","2fv",[e.right,e.top]),N.setUniform("uAtomScale","1f",2.5*n.atomScale),N.setUniform("uRelativeAtomScale","1f",n.relativeAtomScale),N.setUniform("uRes","1f",t),N.setUniform("uDepth","1f",f),N.setUniform("uMode","1i",0),N.setUniform("uAtomShade","1f",n.atomShade),q.render(),n.bonds&&null!=j&&(S.bind(),O.setUniform("uProjection","Matrix4fv",!1,o),O.setUniform("uView","Matrix4fv",!1,a),O.setUniform("uModel","Matrix4fv",!1,i),O.setUniform("uRotation","Matrix4fv",!1,n.rotation),O.setUniform("uDepth","1f",f),O.setUniform("uBottomLeft","2fv",[e.left,e.bottom]),O.setUniform("uTopRight","2fv",[e.right,e.top]),O.setUniform("uRes","1f",t),O.setUniform("uBondRadius","1f",2.5*u.getBondRadius(n)),O.setUniform("uBondShade","1f",n.bondShade),O.setUniform("uAtomScale","1f",2.5*n.atomScale),O.setUniform("uRelativeAtomScale","1f",n.relativeAtomScale),O.setUniform("uMode","1i",0),j.render())}(n);!function(n){h.viewport(0,0,t,t),n.fxaa>0||n.dofStrength>0?P.bind():h.bindFramebuffer(h.FRAMEBUFFER,null);if(h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),L.setUniform("uSceneColor","1i",d.index),L.setUniform("uSceneDepth","1i",v.index),L.setUniform("uAccumulatorOut","1i",x.index),L.setUniform("uRes","1f",t),L.setUniform("uAO","1f",2*n.ao),L.setUniform("uBrightness","1f",2*n.brightness),L.setUniform("uOutlineStrength","1f",n.outline),I.render(),n.fxaa>0){n.dofStrength>0?R.bind():h.bindFramebuffer(h.FRAMEBUFFER,null);for(var e=0;e<n.fxaa;e++)h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),0==e?U.setUniform("uTexture","1i",_.index):U.setUniform("uTexture","1i",M.index),U.setUniform("uRes","1f",t),V.render(),M.activate(),M.bind(),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGBA,0,0,t,t,0)}n.dofStrength>0&&(h.bindFramebuffer(h.FRAMEBUFFER,null),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),n.fxaa>0?D.setUniform("uColor","1i",M.index):D.setUniform("uColor","1i",_.index),D.setUniform("uDepth","1i",v.index),D.setUniform("uDOFPosition","1f",n.dofPosition),D.setUniform("uDOFStrength","1f",n.dofStrength),D.setUniform("uRes","1f",t),H.render())}(n)}},F.initialize()}},function(n,t){function e(n){var t=this;t.initialize=function(){t.buffer=n.createBuffer()},t.bind=function(){n.bindBuffer(n.ARRAY_BUFFER,t.buffer)},t.set=function(e){t.bind(),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)},t.initialize()}n.exports.buildAttribs=function(n,t){var r={};for(var o in t)r[o]={buffer:new e(n),size:t[o]};return r},n.exports.getExtensions=function(n,t){for(var e={},r=0;r<t.length;r++){var o=n.getExtension(t[r]);if(null===o)throw"Extension "+t[r]+" not available.";e[t[r]]=o}return e},n.exports.Framebuffer=function(n,t,e,r){var o=this;o.initialize=function(){if(o.fb=n.createFramebuffer(),o.bind(),t.length>1){for(var a=[],i=0;i<t.length;i++)a.push(r["COLOR_ATTACHMENT"+i+"_WEBGL"]);for(r.drawBuffersWEBGL(a),i=0;i<t.length;i++)n.framebufferTexture2D(n.FRAMEBUFFER,r["COLOR_ATTACHMENT"+i+"_WEBGL"],n.TEXTURE_2D,t[i].texture,0)}else n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t[0].texture,0);void 0!==e&&n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,e.texture,0)},o.bind=function(){n.bindFramebuffer(n.FRAMEBUFFER,o.fb)},o.initialize()},n.exports.Texture=function(n,t,e,r,o,a){(a=a||{}).target=a.target||n.TEXTURE_2D,a.mag=a.mag||n.NEAREST,a.min=a.min||n.NEAREST,a.wraps=a.wraps||n.CLAMP_TO_EDGE,a.wrapt=a.wrapt||n.CLAMP_TO_EDGE,a.internalFormat=a.internalFormat||n.RGBA,a.format=a.format||n.RGBA,a.type=a.type||n.UNSIGNED_BYTE;var i=this;i.initialize=function(){i.index=t,i.activate(),i.texture=n.createTexture(),i.bind(),n.texParameteri(a.target,n.TEXTURE_MAG_FILTER,a.mag),n.texParameteri(a.target,n.TEXTURE_MIN_FILTER,a.min),n.texParameteri(a.target,n.TEXTURE_WRAP_S,a.wraps),n.texParameteri(a.target,n.TEXTURE_WRAP_T,a.wrapt),n.texImage2D(a.target,0,a.internalFormat,r,o,0,a.format,a.type,e)},i.bind=function(){n.bindTexture(a.target,i.texture)},i.activate=function(){n.activeTexture(n.TEXTURE0+i.index)},i.reset=function(){i.activate(),i.bind(),n.texImage2D(a.target,0,a.internalFormat,r,o,0,a.format,a.type,e)},i.initialize()},n.exports.GLBuffer=e,n.exports.Renderable=function(n,t,e,r){var o=this;o.primitiveCount=r,o.initialize=function(){},o.render=function(){for(name in t.use(),e){var a=e[name].buffer,i=e[name].size;try{var u=t.attribs[name].location}catch(n){throw console.log("Could not find location for",name),n}a.bind(),n.enableVertexAttribArray(u),n.vertexAttribPointer(u,i,n.FLOAT,!1,0,0)}for(name in n.drawArrays(n.TRIANGLES,0,3*r),o.buffers)n.disableVertexAttribArray(t.attributes[name].location)},o.initialize()},n.exports.InstancedRenderable=function(n,t,e,r,o){var a=this;a.initialize=function(){},a.render=function(){for(name in t.use(),e){var i=e[name].buffer,u=e[name].size;try{var s=t.attribs[name].location}catch(n){throw console.log("Could not find location for",name),n}i.bind(),n.enableVertexAttribArray(s),n.vertexAttribPointer(s,u,n.FLOAT,!1,0,0),o.vertexAttribDivisorANGLE(s,e[name].divisor)}for(name in o.drawArraysInstancedANGLE(n.TRIANGLES,0,36,r),a.buffers)n.disableVertexAttribArray(t.attributes[name].location)},a.initialize()},n.exports.Program=function(n,t,e){var r=this;r.initialize=function(){r.program=r.compileProgram(t,e),r.attribs=r.gatherAttribs(),r.uniforms=r.gatherUniforms()},r.use=function(){n.useProgram(r.program)},r.compileProgram=function(t,e){var o=r.compileShader(t,n.VERTEX_SHADER),a=r.compileShader(e,n.FRAGMENT_SHADER),i=n.createProgram();if(n.attachShader(i,o),n.attachShader(i,a),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))throw console.log(n.getProgramInfoLog(i)),"Failed to compile program.";return i},r.compileShader=function(t,e){var r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var o=n.getShaderInfoLog(r),a=parseInt(o.split(":")[2]),i=t.split("\n");for(var u in i){var s=parseInt(u);console.log(s+"  "+i[u]),u==a-1&&console.warn(o)}throw typeString=e==n.VERTEX_SHADER?"vertex":"fragment","Failed to compile "+typeString+" shader."}return r},r.setUniform=function(t,e,o){var a=Array.prototype.slice.call(arguments,2);r.use();try{var i=r.uniforms[t].location}catch(n){throw console.log(t),n}n["uniform"+e].apply(n,[i].concat(a))},r.gatherUniforms=function(){for(var t={},e=n.getProgramParameter(r.program,n.ACTIVE_UNIFORMS),o=0;o<e;o++){var a=n.getActiveUniform(r.program,o);t[a.name]={name:a.name,location:n.getUniformLocation(r.program,a.name),type:a.type,size:a.size}}return t},r.gatherAttribs=function(){for(var t={},e=n.getProgramParameter(r.program,n.ACTIVE_ATTRIBUTES),o=0;o<e;o++){var a=n.getActiveAttrib(r.program,o);t[a.name]={name:a.name,location:n.getAttribLocation(r.program,a.name),type:a.type,size:a.size}}return t},r.initialize()}},function(n,t){var e=-1;n.exports={position:[e,e,e,e,e,1,e,1,1,e,e,e,e,1,1,e,1,e,1,e,1,1,e,e,1,1,e,1,e,1,1,1,e,1,1,1,e,e,e,1,e,e,1,e,1,e,e,e,1,e,1,e,e,1,e,1,1,1,1,1,1,1,e,e,1,1,1,1,e,e,1,e,1,e,e,e,e,e,e,1,e,1,e,e,e,1,e,1,1,e,e,e,1,1,e,1,1,1,1,e,e,1,1,1,1,e,1,1],normal:[e,0,0,e,0,0,e,0,0,e,0,0,e,0,0,e,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,e,0,0,e,0,0,e,0,0,e,0,0,e,0,0,e,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,e,0,0,e,0,0,e,0,0,e,0,0,e,0,0,e,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},function(n,t,e){"use strict";var r={accumulator:"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uSceneDepth;\nuniform sampler2D uSceneNormal;\nuniform sampler2D uRandRotDepth;\nuniform sampler2D uAccumulator;\nuniform mat4 uRot;\nuniform mat4 uInvRot;\nuniform vec2 uSceneBottomLeft;\nuniform vec2 uSceneTopRight;\nuniform vec2 uRotBottomLeft;\nuniform vec2 uRotTopRight;\nuniform float uDepth;\nuniform float uRes;\nuniform int uSampleCount;\n\nvoid main() {\n\n    float dScene = texture2D(uSceneDepth, gl_FragCoord.xy/uRes).r;\n\n    vec3 r = vec3(uSceneBottomLeft + (gl_FragCoord.xy/uRes) * (uSceneTopRight - uSceneBottomLeft), 0.0);\n\n    r.z = -(dScene - 0.5) * uDepth;\n    r = vec3(uRot * vec4(r, 1));\n    float depth = -r.z/uDepth + 0.5;\n\n    vec2 p = (r.xy - uRotBottomLeft)/(uRotTopRight - uRotBottomLeft);\n\n    float dRandRot = texture2D(uRandRotDepth, p).r;\n\n    float ao = step(dRandRot, depth * 0.99);\n\n    vec3 normal = texture2D(uSceneNormal, gl_FragCoord.xy/uRes).rgb * 2.0 - 1.0;\n    vec3 dir = vec3(uInvRot * vec4(0, 0, 1, 0));\n    float mag = dot(dir, normal);\n    float sampled = step(0.0, mag);\n\n    ao *= sampled;\n\n    vec4 acc = texture2D(uAccumulator, gl_FragCoord.xy/uRes);\n\n    if (uSampleCount < 256) {\n        acc.r += ao/255.0;\n    } else if (uSampleCount < 512) {\n        acc.g += ao/255.0;\n    } else if (uSampleCount < 768) {\n        acc.b += ao/255.0;\n    } else {\n        acc.a += ao/255.0;\n    }\n        \n    gl_FragColor = acc;\n\n}\n",ao:"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uSceneColor;\nuniform sampler2D uSceneDepth;\nuniform sampler2D uAccumulatorOut;\nuniform float uRes;\nuniform float uAO;\nuniform float uBrightness;\nuniform float uOutlineStrength;\n\nvoid main() {\n    vec2 p = gl_FragCoord.xy/uRes;\n    vec4 sceneColor = texture2D(uSceneColor, p);\n    if (uOutlineStrength > 0.0) {\n        float depth = texture2D(uSceneDepth, p).r;\n        float r = 1.0/511.0;\n        float d0 = abs(texture2D(uSceneDepth, p + vec2(-r,  0)).r - depth);\n        float d1 = abs(texture2D(uSceneDepth, p + vec2( r,  0)).r - depth);\n        float d2 = abs(texture2D(uSceneDepth, p + vec2( 0, -r)).r - depth);\n        float d3 = abs(texture2D(uSceneDepth, p + vec2( 0,  r)).r - depth);\n        float d = max(d0, d1);\n        d = max(d, d2);\n        d = max(d, d3);\n        sceneColor.rgb *= pow(1.0 - d, uOutlineStrength * 32.0);\n        sceneColor.a = max(step(0.003, d), sceneColor.a);\n    }\n    vec4 dAccum = texture2D(uAccumulatorOut, p);\n    float shade = max(0.0, 1.0 - (dAccum.r + dAccum.g + dAccum.b + dAccum.a) * 0.25 * uAO);\n    shade = pow(shade, 2.0);\n    gl_FragColor = vec4(uBrightness * sceneColor.rgb * shade, sceneColor.a);\n}\n",atom:"#version 100\nprecision highp float;\n\nattribute vec3 aImposter;\nattribute vec3 aPosition;\nattribute float aRadius;\nattribute vec3 aColor;\n\nuniform mat4 uView;\nuniform mat4 uProjection;\nuniform mat4 uModel;\nuniform float uAtomScale;\nuniform float uRelativeAtomScale;\nuniform float uAtomShade;\n\nvarying vec3 vColor;\nvarying vec3 vPosition;\nvarying float vRadius;\n\nvoid main() {\n    vRadius = uAtomScale * (1.0 + (aRadius - 1.0) * uRelativeAtomScale);\n    gl_Position = uProjection * uView * uModel * vec4(vRadius * aImposter + aPosition, 1.0);\n    vColor = mix(aColor, vec3(1,1,1), uAtomShade);\n    vPosition = vec3(uModel * vec4(aPosition, 1));\n}\n\n\n// __split__\n\n\n#version 100\n#extension GL_EXT_frag_depth: enable\nprecision highp float;\n\nuniform vec2 uBottomLeft;\nuniform vec2 uTopRight;\nuniform float uRes;\nuniform float uDepth;\nuniform int uMode;\n\nvarying vec3 vPosition;\nvarying float vRadius;\nvarying vec3 vColor;\n\nvec2 res = vec2(uRes, uRes);\n\nfloat raySphereIntersect(vec3 r0, vec3 rd) {\n    float a = dot(rd, rd);\n    vec3 s0_r0 = r0 - vPosition;\n    float b = 2.0 * dot(rd, s0_r0);\n    float c = dot(s0_r0, s0_r0) - (vRadius * vRadius);\n    float disc = b*b - 4.0*a*c;\n    if (disc <= 0.0) {\n        return -1.0;\n    }\n    return (-b - sqrt(disc))/(2.0*a);\n}\n\nvoid main() {\n    vec3 r0 = vec3(uBottomLeft + (gl_FragCoord.xy/res) * (uTopRight - uBottomLeft), 0.0);\n    vec3 rd = vec3(0, 0, -1);\n    float t = raySphereIntersect(r0, rd);\n    if (t < 0.0) {\n        discard;\n    }\n    vec3 coord = r0 + rd * t;\n    vec3 normal = normalize(coord - vPosition);\n    if (uMode == 0) {\n        gl_FragColor = vec4(vColor, 1);\n    } else if (uMode == 1) {\n        gl_FragColor = vec4(normal * 0.5 + 0.5, 1.0);\n    }\n    gl_FragDepthEXT = -coord.z/uDepth;\n}\n",blur:"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uTexture;\nuniform float uRes;\nuniform int leftRight;\n\nvoid main() {\n    vec2 dir;\n    if (leftRight == 1) {\n        dir = vec2(1,0)/uRes;\n    } else {\n        dir = vec2(0,1)/uRes;\n    }\n    const int range = 16;\n    vec4 sample = vec4(0,0,0,0);\n    for (int i = -range; i <= range; i++) {\n        vec2 p = gl_FragCoord.xy/uRes + dir * float(i);\n        sample += texture2D(uTexture, p);\n    }\n    sample /= float(range) * 2.0 + 1.0;\n    gl_FragColor = sample;\n}\n",bond:"#version 100\nprecision highp float;\n\nattribute vec3 aImposter;\nattribute vec3 aPosA;\nattribute vec3 aPosB;\nattribute float aRadA;\nattribute float aRadB;\nattribute vec3 aColA;\nattribute vec3 aColB;\n\nuniform mat4 uView;\nuniform mat4 uProjection;\nuniform mat4 uModel;\nuniform mat4 uRotation;\nuniform float uBondRadius;\nuniform float uAtomScale;\nuniform float uRelativeAtomScale;\n\nvarying vec3 vNormal;\nvarying vec3 vPosA, vPosB;\nvarying float vRadA, vRadB;\nvarying vec3 vColA, vColB;\nvarying float vRadius;\n\nmat3 alignVector(vec3 a, vec3 b) {\n    vec3 v = cross(a, b);\n    float s = length(v);\n    float c = dot(a, b);\n    mat3 I = mat3(\n        1, 0, 0,\n        0, 1, 0,\n        0, 0, 1\n    );\n    mat3 vx = mat3(\n        0, v.z, -v.y,\n        -v.z, 0, v.x,\n        v.y, -v.x, 0\n    );\n    return I + vx + vx * vx * ((1.0 - c) / (s * s));\n}\n\nvoid main() {\n    vRadius = uBondRadius;\n    vec3 pos = vec3(aImposter);\n    // Scale the box in x and z to be bond-radius.\n    pos = pos * vec3(vRadius, 1, vRadius);\n    // Shift the origin-centered cube so that the bottom is at the origin.\n    pos = pos + vec3(0, 1, 0);\n    // Stretch the box in y so that it is the length of the bond.\n    pos = pos * vec3(1, length(aPosA - aPosB) * 0.5, 1);\n    // Find the rotation that aligns vec3(0, 1, 0) with vec3(uPosB - uPosA) and apply it.\n    vec3 a = normalize(vec3(-0.000001, 1.000001, 0.000001));\n    vec3 b = normalize(aPosB - aPosA);\n    mat3 R = alignVector(a, b);\n    pos = R * pos;\n    // Shift the cube so that the bottom is centered at the middle of atom A.\n    pos = pos + aPosA;\n\n    vec4 position = uModel * vec4(pos, 1);\n    gl_Position = uProjection * uView * position;\n    vPosA = aPosA;\n    vPosB = aPosB;\n    vRadA = uAtomScale * (1.0 + (aRadA - 1.0) * uRelativeAtomScale);\n    vRadB = uAtomScale * (1.0 + (aRadB - 1.0) * uRelativeAtomScale);\n    vColA = aColA;\n    vColB = aColB;\n}\n\n\n// __split__\n\n\n#version 100\n#extension GL_EXT_frag_depth: enable\nprecision highp float;\n\nuniform mat4 uRotation;\nuniform vec2 uBottomLeft;\nuniform vec2 uTopRight;\nuniform float uDepth;\nuniform float uRes;\nuniform float uBondShade;\nuniform int uMode;\n\nvarying vec3 vPosA, vPosB;\nvarying float vRadA, vRadB;\nvarying vec3 vColA, vColB;\nvarying float vRadius;\n\nmat3 alignVector(vec3 a, vec3 b) {\n    vec3 v = cross(a, b);\n    float s = length(v);\n    float c = dot(a, b);\n    mat3 I = mat3(\n        1, 0, 0,\n        0, 1, 0,\n        0, 0, 1\n    );\n    mat3 vx = mat3(\n        0, v.z, -v.y,\n        -v.z, 0, v.x,\n        v.y, -v.x, 0\n    );\n    return I + vx + vx * vx * ((1.0 - c) / (s * s));\n}\n\nvoid main() {\n\n    vec2 res = vec2(uRes, uRes);\n    vec3 r0 = vec3(uBottomLeft + (gl_FragCoord.xy/res) * (uTopRight - uBottomLeft), uDepth/2.0);\n    vec3 rd = vec3(0, 0, -1);\n\n    vec3 i = normalize(vPosB - vPosA);\n         i = vec3(uRotation * vec4(i, 0));\n    vec3 j = normalize(vec3(-0.000001, 1.000001, 0.000001));\n    mat3 R = alignVector(i, j);\n\n    vec3 r0p = r0 - vec3(uRotation * vec4(vPosA, 0));\n    r0p = R * r0p;\n    vec3 rdp = R * rd;\n\n    float a = dot(rdp.xz, rdp.xz);\n    float b = 2.0 * dot(rdp.xz, r0p.xz);\n    float c = dot(r0p.xz, r0p.xz) - vRadius*vRadius;\n    float disc = b*b - 4.0*a*c;\n    if (disc <= 0.0) {\n        discard;\n    }\n    float t = (-b - sqrt(disc))/(2.0*a);\n    if (t < 0.0) {\n        discard;\n    }\n\n    vec3 coord = r0p + rdp * t;\n    if (coord.y < 0.0 || coord.y > length(vPosA - vPosB)) {\n        discard;\n    }\n\n    vec3 color;\n    if (coord.y < vRadA + 0.5 * (length(vPosA - vPosB) - (vRadA + vRadB))) {\n        color = vColA;\n    } else {\n        color = vColB;\n    }\n\n    color = mix(color, vec3(1,1,1), uBondShade);\n\n    R = alignVector(j, i);\n    vec3 normal = normalize(R * vec3(coord.x, 0, coord.z));\n\n    coord = r0 + rd * t;\n    if (uMode == 0) {\n        gl_FragColor = vec4(color, 1);\n    } else if (uMode == 1) {\n        gl_FragColor = vec4(normal * 0.5 + 0.5, 1.0);\n    }\n    gl_FragDepthEXT = -(coord.z - uDepth/2.0)/uDepth;\n}\n",dof:"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uColor;\nuniform sampler2D uDepth;\nuniform float uRes;\nuniform float uDOFPosition;\nuniform float uDOFStrength;\nuniform int leftRight;\n\nvoid main() {\n\n    vec2 samples[64];\n    samples[0] = vec2(0.857612, 0.019885);\n    samples[1] = vec2(0.563809, -0.028071);\n    samples[2] = vec2(0.825599, -0.346856);\n    samples[3] = vec2(0.126584, -0.380959);\n    samples[4] = vec2(0.782948, 0.594322);\n    samples[5] = vec2(0.292148, -0.543265);\n    samples[6] = vec2(0.130700, 0.330220);\n    samples[7] = vec2(0.236088, 0.159604);\n    samples[8] = vec2(-0.305259, 0.810505);\n    samples[9] = vec2(0.269616, 0.923026);\n    samples[10] = vec2(0.484486, 0.371845);\n    samples[11] = vec2(-0.638057, 0.080447);\n    samples[12] = vec2(0.199629, 0.667280);\n    samples[13] = vec2(-0.861043, -0.370583);\n    samples[14] = vec2(-0.040652, -0.996174);\n    samples[15] = vec2(0.330458, -0.282111);\n    samples[16] = vec2(0.647795, -0.214354);\n    samples[17] = vec2(0.030422, -0.189908);\n    samples[18] = vec2(0.177430, -0.721124);\n    samples[19] = vec2(-0.461163, -0.327434);\n    samples[20] = vec2(-0.410012, -0.734504);\n    samples[21] = vec2(-0.616334, -0.626069);\n    samples[22] = vec2(0.590759, -0.726479);\n    samples[23] = vec2(-0.590794, 0.805365);\n    samples[24] = vec2(-0.924561, -0.163739);\n    samples[25] = vec2(-0.323028, 0.526960);\n    samples[26] = vec2(0.642128, 0.752577);\n    samples[27] = vec2(0.173625, -0.952386);\n    samples[28] = vec2(0.759014, 0.330311);\n    samples[29] = vec2(-0.360526, -0.032013);\n    samples[30] = vec2(-0.035320, 0.968156);\n    samples[31] = vec2(0.585478, -0.431068);\n    samples[32] = vec2(-0.244766, -0.906947);\n    samples[33] = vec2(-0.853096, 0.184615);\n    samples[34] = vec2(-0.089061, 0.104648);\n    samples[35] = vec2(-0.437613, 0.285308);\n    samples[36] = vec2(-0.654098, 0.379841);\n    samples[37] = vec2(-0.128663, 0.456572);\n    samples[38] = vec2(0.015980, -0.568170);\n    samples[39] = vec2(-0.043966, -0.771940);\n    samples[40] = vec2(0.346512, -0.071238);\n    samples[41] = vec2(-0.207921, -0.209121);\n    samples[42] = vec2(-0.624075, -0.189224);\n    samples[43] = vec2(-0.120618, 0.689339);\n    samples[44] = vec2(-0.664679, -0.410200);\n    samples[45] = vec2(0.371945, -0.880573);\n    samples[46] = vec2(-0.743251, 0.629998);\n    samples[47] = vec2(-0.191926, -0.413946);\n    samples[48] = vec2(0.449574, 0.833373);\n    samples[49] = vec2(0.299587, 0.449113);\n    samples[50] = vec2(-0.900432, 0.399319);\n    samples[51] = vec2(0.762613, -0.544796);\n    samples[52] = vec2(0.606462, 0.174233);\n    samples[53] = vec2(0.962185, -0.167019);\n    samples[54] = vec2(0.960990, 0.249552);\n    samples[55] = vec2(0.570397, 0.559146);\n    samples[56] = vec2(-0.537514, 0.555019);\n    samples[57] = vec2(0.108491, -0.003232);\n    samples[58] = vec2(-0.237693, -0.615428);\n    samples[59] = vec2(-0.217313, 0.261084);\n    samples[60] = vec2(-0.998966, 0.025692);\n    samples[61] = vec2(-0.418554, -0.527508);\n    samples[62] = vec2(-0.822629, -0.567797);\n    samples[63] = vec2(0.061945, 0.522105);\n\n    float invRes = 1.0/uRes;\n    vec2 coord = gl_FragCoord.xy * invRes;\n\n    float strength = uDOFStrength * uRes/768.0;\n\n    float depth = texture2D(uDepth, coord).r;\n    float range = uDOFPosition - depth;\n    float scale = abs(range);\n\n    vec4 sample = texture2D(uColor, coord);\n    float count = 1.0;\n    for(int i = 0; i < 64; i++) {\n        vec2 p = samples[i];\n        p = coord + scale * 64.0 * strength * p * invRes;\n        float d = texture2D(uDepth, p).r;\n        float r = uDOFPosition - d;\n        float s = abs(r);\n        sample += texture2D(uColor, p) * s;\n        count += s;\n    }\n\n    gl_FragColor = sample/count;\n}",fxaa:"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uTexture;\nuniform float uRes;\n\nvoid main() {\n    float FXAA_SPAN_MAX = 8.0;\n    float FXAA_REDUCE_MUL = 1.0/8.0;\n    float FXAA_REDUCE_MIN = 1.0/128.0;\n\n    vec2 texCoords = gl_FragCoord.xy/uRes;\n\n    vec4 rgbNW = texture2D(uTexture, texCoords + (vec2(-1.0, -1.0) / uRes));\n    vec4 rgbNE = texture2D(uTexture, texCoords + (vec2(1.0, -1.0) / uRes));\n    vec4 rgbSW = texture2D(uTexture, texCoords + (vec2(-1.0, 1.0) / uRes));\n    vec4 rgbSE = texture2D(uTexture, texCoords + (vec2(1.0, 1.0) / uRes));\n    vec4 rgbM  = texture2D(uTexture, texCoords);\n\n    vec4 luma = vec4(0.299, 0.587, 0.114, 1.0);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0/(min(abs(dir.x), abs(dir.y)) + dirReduce);\n\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX), max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX), dir * rcpDirMin)) / uRes;\n\n    vec4 rgbA = (1.0/2.0) * \n        (texture2D(uTexture, texCoords.xy + dir * (1.0/3.0 - 0.5)) + \n         texture2D(uTexture, texCoords.xy + dir * (2.0/3.0 - 0.5)));\n    vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * \n        (texture2D(uTexture, texCoords.xy + dir * (0.0/3.0 - 0.5)) +\n         texture2D(uTexture, texCoords.xy + dir * (3.0/3.0 - 0.5)));\n    float lumaB = dot(rgbB, luma);\n\n    if((lumaB < lumaMin) || (lumaB > lumaMax)){\n        gl_FragColor = rgbA;\n    } else {\n        gl_FragColor = rgbB;\n    }\n\n}","textured-quad":"#version 100\nprecision highp float;\n\nattribute vec3 aPosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 1);\n}\n\n\n// __split__\n\n\n#version 100\nprecision highp float;\n\nuniform sampler2D uTexture;\nuniform float uRes;\n\nvoid main() {\n    gl_FragColor = texture2D(uTexture, gl_FragCoord.xy/uRes);\n}\n"};n.exports={shaders:r}},function(n,t,e){"use strict";var r=e(8);n.exports=function(n){if(arguments.length>1)throw"Error: The Speck Interactions module has changed!";if(0===arguments.length||"object"!=typeof n)throw"Error: Arguments not provided to interactions";var t=void 0===n.scrollZoom||n.scrollZoom,e=n.container,o=n.getRotation,a=n.setRotation,i=n.getTranslation,u=n.setTranslation,s=n.getZoom,l=n.setZoom,c=n.refreshView,f={buttonDown:!1,shiftDown:!1,lastX:0,lastY:0};function p(n){0===n.button&&(f={buttonDown:!0,shiftDown:f.shiftDown,lastX:n.clientX,lastY:n.clientY})}function h(n){if(0===n.button){if(!f.buttonDown)return;f.buttonDown=!1}}function d(n){f.shiftDown=n.shiftKey}function m(n){if(f.buttonDown&&0!==n.buttons){n.preventDefault();var t=n.clientX-f.lastX,e=n.clientY-f.lastY;if(0!==t||0!==e){if(f.lastX=n.clientX,f.lastY=n.clientY,f.shiftDown){var l=i(),p=.001/s();u({x:l.x-t*p,y:l.y+e*p})}else{var h={rotation:new Float32Array(o())};r.rotate(h,t,e),a(h.rotation)}c()}}}function v(n){n.preventDefault(),l(s()*(n.deltaY<0?1/.9:.9)),c()}return e.addEventListener("mousedown",p),window.addEventListener("mouseup",h),window.addEventListener("keydown",d),window.addEventListener("keyup",d),window.addEventListener("mousemove",m),t&&e.addEventListener("wheel",v),function(){e.removeEventListener("mousedown",p),window.removeEventListener("mouseup",h),window.removeEventListener("keydown",d),window.removeEventListener("keyup",d),window.removeEventListener("mousemove",m),e.removeEventListener("wheel",v)}}},function(n,t){n.exports={default:{atomScale:.6,relativeAtomScale:1,bondScale:.5,ao:.75,aoRes:256,brightness:.5,outline:0,spf:32,bonds:!1,bondThreshold:1.2,bondShade:.5,atomShade:.5,dofStrength:0,dofPosition:.5,fxaa:1},stickball:{atomScale:.24,relativeAtomScale:.64,bondScale:.5,bonds:!0,bondThreshold:1.2},toon:{ao:0,spf:0,brightness:.5,outline:1},licorice:{atomScale:.1,relativeAtomScale:0,bondScale:1,bonds:!0,bondThreshold:1.2}}},function(n,t,e){"use strict";e.r(t);var r=e(10),o=e(18),a=e(1),i=e.n(a),u=e(0),s=e.n(u),l=e(22),c=e(43);function f(n){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function p(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function h(n){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function d(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function m(n,t){return(m=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}var v=function(n){function t(n){var e,r,o;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(e=!(o=h(t).call(this,n))||"object"!==f(o)&&"function"!=typeof o?d(r):o).renderNewSequences=e.renderNewSequences.bind(d(e)),e.containerRef=i.a.createRef(),e}var e,r,o;return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&m(n,t)}(t,a["Component"]),e=t,(r=[{key:"componentDidMount",value:function(){var n=this.props,t=n.height,e=n.width,r=n.nodeFillColor,o=n.colorScheme,a=n.customColors,i=n.allowPanningAndZooming;this._fornaContainer=new l.FornaContainer(this.containerRef.current,{initialSize:[e,t],allowPanningAndZooming:i}),this._fornaContainer.addCustomColors(a),this._fornaContainer.changeColorScheme(o),this.renderNewSequences(),void 0!==r&&this._fornaContainer.setOutlineColor(r)}},{key:"componentDidUpdate",value:function(){this.renderNewSequences()}},{key:"renderNewSequences",value:function(){var n=this,t=this.props.sequences;this._fornaContainer&&(this._fornaContainer.clearNodes(),t.forEach(function(t){var e=Object.assign({},t.options,{sequence:t.sequence,structure:t.structure});n._fornaContainer.addRNA(t.structure,e)}))}},{key:"shouldComponentUpdate",value:function(n){var t=this.props,e=t.sequences,r=t.colorScheme;return!c.a(e,n.sequences)||(this._fornaContainer.addCustomColors(n.customColors),this._fornaContainer.changeColorScheme(r),void 0!==n.nodeFillColor&&this._fornaContainer.setOutlineColor(n.nodeFillColor),!1)}},{key:"render",value:function(){return i.a.createElement("div",{id:this.props.id,ref:this.containerRef,style:{outline:"none"}})}}])&&p(e.prototype,r),o&&p(e,o),t}();v.propTypes={id:s.a.string,height:s.a.number,width:s.a.number,sequences:s.a.arrayOf(s.a.exact({sequence:s.a.string.isRequired,structure:s.a.string.isRequired,options:s.a.exact({applyForce:s.a.bool,circularizeExternal:s.a.bool,labelInterval:s.a.number,name:s.a.string,avoidOthers:s.a.bool})})),nodeFillColor:s.a.string,colorScheme:s.a.oneOf(["sequence","structure","positions","custom"]),customColors:s.a.exact({domain:s.a.arrayOf(s.a.number),range:s.a.arrayOf(s.a.string),colorValues:s.a.objectOf(s.a.objectOf(s.a.oneOfType([s.a.string,s.a.number])))}),allowPanningAndZooming:s.a.bool,setProps:s.a.func},v.defaultProps={height:500,width:300,sequences:[],allowPanningAndZooming:!0,labelInterval:10,colorScheme:"sequence"};var g=e(11),y=e(12),b=e(13),x=e(14),M=e(15),w=e(16),k=e(17);e.d(t,"AlignmentChart",function(){return r.a}),e.d(t,"Circos",function(){return o.a}),e.d(t,"FornaContainer",function(){return v}),e.d(t,"Ideogram",function(){return g.a}),e.d(t,"Molecule2dViewer",function(){return y.a}),e.d(t,"Molecule3dViewer",function(){return b.a}),e.d(t,"NeedlePlot",function(){return x.a}),e.d(t,"OncoPrint",function(){return M.a}),e.d(t,"SequenceViewer",function(){return w.a}),e.d(t,"Speck",function(){return k.a})},,function(n,t){n.exports=window.ReactDOM},,,,,,,,,,function(n,t,e){"use strict";var r=e(9);function o(n){for(var t,e=[];!(t=n.next()).done;)e.push(t.value);return e}function a(n,t,e){for(var r=0,o=e.length;r<o;){if(n(t,e[r]))return!0;r+=1}return!1}var i=e(5);var u="function"==typeof Object.is?Object.is:function(n,t){return n===t?0!==n||1/n==1/t:n!=n&&t!=t},s=e(3),l=Object.prototype.toString,c=function(){return"[object Arguments]"===l.call(arguments)?function(n){return"[object Arguments]"===l.call(n)}:function(n){return Object(i.a)("callee",n)}}(),f=!{toString:null}.propertyIsEnumerable("toString"),p=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],h=function(){return arguments.propertyIsEnumerable("length")}(),d=function(n,t){for(var e=0;e<n.length;){if(n[e]===t)return!0;e+=1}return!1},m="function"!=typeof Object.keys||h?Object(s.a)(function(n){if(Object(n)!==n)return[];var t,e,r=[],o=h&&c(n);for(t in n)!Object(i.a)(t,n)||o&&"length"===t||(r[r.length]=t);if(f)for(e=p.length-1;e>=0;)t=p[e],Object(i.a)(t,n)&&!d(r,t)&&(r[r.length]=t),e-=1;return r}):Object(s.a)(function(n){return Object(n)!==n?[]:Object.keys(n)}),v=Object(s.a)(function(n){return null===n?"Null":void 0===n?"Undefined":Object.prototype.toString.call(n).slice(8,-1)});function g(n,t,e,r){var i=o(n);function u(n,t){return y(n,t,e.slice(),r.slice())}return!a(function(n,t){return!a(u,t,n)},o(t),i)}function y(n,t,e,r){if(u(n,t))return!0;var o,a,s=v(n);if(s!==v(t))return!1;if(null==n||null==t)return!1;if("function"==typeof n["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n);if("function"==typeof n.equals||"function"==typeof t.equals)return"function"==typeof n.equals&&n.equals(t)&&"function"==typeof t.equals&&t.equals(n);switch(s){case"Arguments":case"Array":case"Object":if("function"==typeof n.constructor&&"Promise"===(o=n.constructor,null==(a=String(o).match(/^function (\w*)/))?"":a[1]))return n===t;break;case"Boolean":case"Number":case"String":if(typeof n!=typeof t||!u(n.valueOf(),t.valueOf()))return!1;break;case"Date":if(!u(n.valueOf(),t.valueOf()))return!1;break;case"Error":return n.name===t.name&&n.message===t.message;case"RegExp":if(n.source!==t.source||n.global!==t.global||n.ignoreCase!==t.ignoreCase||n.multiline!==t.multiline||n.sticky!==t.sticky||n.unicode!==t.unicode)return!1}for(var l=e.length-1;l>=0;){if(e[l]===n)return r[l]===t;l-=1}switch(s){case"Map":return n.size===t.size&&g(n.entries(),t.entries(),e.concat([n]),r.concat([t]));case"Set":return n.size===t.size&&g(n.values(),t.values(),e.concat([n]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=m(n);if(c.length!==m(t).length)return!1;var f=e.concat([n]),p=r.concat([t]);for(l=c.length-1;l>=0;){var h=c[l];if(!Object(i.a)(h,t)||!y(t[h],n[h],f,p))return!1;l-=1}return!0}var b=Object(r.a)(function(n,t){return y(n,t,[],[])});t.a=b}]);