(window.webpackJsonpdash_bio=window.webpackJsonpdash_bio||[]).push([[5],{178:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return k});var a=n(2),r=n.n(a),o=n(0),i=n.n(o),l=n(31),s=n.n(l),c=n(170),u=n(169),f=n(167),p=n(165),y=n(168),d=n(164);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return!isNaN(parseFloat(e))&&isFinite(e)}function j(e,t,n,a){var r=(t-e)/a,o=Math.max(2,a);return[Object(c.a)(0,o).map(function(t){return e+t*r}),Object(u.a)(n,o)]}function A(e){return Object(f.a)(p.a,-1/0,function(e){return e.filter(function(e){return Number(O(e))})}(e))}var k=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(a=v(t).call(this))||"object"!==h(a)&&"function"!=typeof a?w(n):a).state={xStart:null,xEnd:null},e.handleChange=e.handleChange.bind(w(e)),e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,a["Component"]),n=t,(o=[{key:"componentWillMount",value:function(){this.props=Object(y.a)(t.defaultProps,this.props)}},{key:"handleChange",value:function(e){e["xaxis.range[0]"]||e["xaxis.range"]?this.setState({xStart:e["xaxis.range[0]"]||e["xaxis.range"][0],xEnd:e["xaxis.range[1]"]||e["xaxis.range"][1]}):!0===e["xaxis.autorange"]&&this.setState({xStart:null,xEnd:null})}},{key:"render",value:function(){var e=this.props.id,t=this.prepareTraces(),n=t.data,a=t.globalAnnotation,o=t.domainAnnotations,i=this.prepareLayout({data:n,globalAnnotation:a,domainAnnotations:o});return r.a.createElement("div",{id:e},r.a.createElement(s.a,x({data:n,layout:i,onRelayout:this.handleChange},Object(d.a)(["setProps"],this.props))))}},{key:"prepareTraces",value:function(){var e=Object(y.a)(t.defaultProps,this.props),n=e.mutationData,a=n.x,r=n.y,o=n.mutationGroups,i=n.domains,l=e.domainStyle,s=l.domainColor,c=l.displayMinorDomains,u=e.needleStyle,f=u.stemColor,p=u.stemThickness,d=u.stemConstHeight,h=u.headSize,x=u.headColor,g=u.headSymbol,v=b(function(e){var t=[],n=[],a=[],r=[];return e.forEach(function(e,o){if(e.indexOf("-")>-1){var i=e.split("-");O(i[0])||O(i[1])?r.push(o):n.push(e)}else a.push(o),t.push(e)}),[t,n,a,r]}(a),3),w=v[0],S=v[1],k=v[2],C=Array.isArray(x)?x:o.map(function(){return x}),E=Array.isArray(g)?g:o.map(function(){return g}),T=s,P=Math.min.apply(null,w),_=Math.max.apply(null,w),M=!0===d?1:A(r),z=this.state.xStart||P,N=(this.state.xEnd||_)-z,B=!0===d?.5:M/10,D=!0===d?2:M+B,G=[],H=[],F=[],I=[];k.forEach(function(e){d?I=I.concat([1]):(F=F.concat(["("+a[e]+","+r[e]+")"]),I=I.concat([r[e]]))});var J=!0===d?"x+name+text":"name+text";i.forEach(function(e,t){var n=e.coord.split("-"),a=Number(n[0]),r=Number(n[1]),o=r-a;G.push({x:[r,a],y:[D,D],xaxis:"x1",name:e.name,fill:"tozeroy",mode:"lines",opacity:.5,visible:"legendonly",legendgroup:e.name,marker:{color:T[t]}});var i=b(j(a,r,-B,r-a),2),l=i[0],s=i[1];G.push({type:"scatter",mode:"lines",fill:"tozeroy",fillcolor:T[t],hoveron:"points+fills",x:l,y:s,xaxis:"x2",showlegend:!1,hoverinfo:"name",name:"[".concat(a,"->").concat(r,"] ").concat(e.name),marker:{color:T[t]},line:{width:2}}),H.push({x:(a+r)/2,y:-B/2,showarrow:!1,text:e.name,width:o,align:o<.2*N?"right":"center"})}),!0===c&&S.forEach(function(e){var t=Number(e.split("-")[0]),n=Number(e.split("-")[1]),r=o[a.indexOf(e)],i=b(j(t,n,-B/2,n-t),2),l=i[0],s=i[1];G.push({type:"scatter",mode:"lines",x:l,y:s,fill:"tozeroy",fillcolor:C[m(new Set(o)).indexOf(r)],hoveron:"points+fills",xaxis:"x2",hoverinfo:"name+text",name:r,text:"[".concat(t,"->").concat(n,"] "),showlegend:!1,marker:{color:C[m(new Set(o)).indexOf(r)]},line:{width:33}})});var L=[{text:"<b>".concat(w.length+S.length," Mutations</b>"),x:.01,xref:"paper",y:1.1,yref:"paper",showarrow:!1,align:"left"}];return{data:[{type:"scatter",mode:"markers",x:w,y:I,xaxis:"x1",hoverinfo:J,text:F,error_y:{type:"data",symmetric:!1,array:0,arrayminus:I,thickness:p,width:0,color:f},transforms:[{type:"groupby",groups:o,nameformat:"%{group}",styles:m(new Set(o)).map(function(e,t){return{target:e,value:{marker:{size:h,symbol:E[t],color:C[t]}}}})}]}].concat(G),globalAnnotation:L,domainAnnotations:H}}},{key:"prepareLayout",value:function(e){var n=e.data,a=e.globalAnnotation,r=e.domainAnnotations,o=Object(y.a)(t.defaultProps,this.props),i=o.xlabel,l=o.ylabel,s=o.rangeSlider,c=this.state,u=c.xStart,f=c.xEnd,p=!1;(Boolean(!u)||Boolean(!f))&&(p=!0,n.forEach(function(e){var t=Math.min.apply(null,e.x),n=Math.max.apply(null,e.x);(u>t||Boolean(!u))&&(u=t),(f<n||Boolean(!f))&&(f=n)}));var d={legend:{orientation:"v",x:1,y:1.05,bgcolor:"rgba(255, 255, 255, 0)"},hovermode:"closest",xaxis:{title:i,showgrid:!1,zeroline:!1,autorange:Boolean(!u),range:[u,f],anchor:"y"},xaxis2:{scaleanchor:"x",autorange:Boolean(!u),range:[u,f],anchor:"y",overlaying:"x"},yaxis:{title:l,showgrid:!1,ticks:"inside"},margin:{t:100,l:40,r:0,b:40},annotations:r.concat(a)};return!0===s&&(d.xaxis.rangeslider=!0===p?{range:[.98*u,1.02*f]}:{}),d}}])&&g(n.prototype,o),i&&g(n,i),t}();k.propTypes={id:i.a.string,mutationData:i.a.shape({x:i.a.oneOfType([i.a.string,i.a.array]),y:i.a.oneOfType([i.a.string,i.a.array]),mutationGroups:i.a.arrayOf(i.a.string),domains:i.a.array}),xlabel:i.a.string,ylabel:i.a.string,rangeSlider:i.a.bool,needleStyle:i.a.shape({stemColor:i.a.string,stemThickness:i.a.number,stemConstHeight:i.a.bool,headSize:i.a.number,headColor:i.a.oneOfType([i.a.array,i.a.string]),headSymbol:i.a.oneOfType([i.a.array,i.a.string])}),domainStyle:i.a.shape({domainColor:i.a.array,displayMinorDomains:i.a.bool}),setProps:i.a.func},k.defaultProps={mutationData:{x:[],y:[],domains:[],mutationGroups:[]},rangeSlider:!1,needleStyle:{stemColor:"#444",stemThickness:.5,stemConstHeight:!1,headSize:5,headColor:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#e41a1c"],headSymbol:"circle"},domainStyle:{displayMinorDomains:!1,domainColor:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f","#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"]}}}}]);