{"version":3,"sources":["webpack:///./node_modules/ramda/es/internal/_isNumber.js","webpack:///./node_modules/ramda/es/range.js","webpack:///./node_modules/ramda/es/always.js","webpack:///./node_modules/ramda/es/times.js","webpack:///./node_modules/ramda/es/repeat.js","webpack:///./node_modules/ramda/es/internal/_curry3.js","webpack:///./node_modules/ramda/es/internal/_isArray.js","webpack:///./node_modules/ramda/es/internal/_isArrayLike.js","webpack:///./node_modules/ramda/es/internal/_isString.js","webpack:///./node_modules/ramda/es/internal/_xwrap.js","webpack:///./node_modules/ramda/es/bind.js","webpack:///./node_modules/ramda/es/internal/_arity.js","webpack:///./node_modules/ramda/es/internal/_reduce.js","webpack:///./node_modules/ramda/es/reduce.js","webpack:///./node_modules/ramda/es/max.js","webpack:///./node_modules/ramda/es/internal/_includes.js","webpack:///./node_modules/ramda/es/internal/_indexOf.js","webpack:///./node_modules/ramda/es/includes.js","webpack:///./node_modules/ramda/es/internal/_isTransformer.js","webpack:///./node_modules/ramda/es/internal/_dispatchable.js","webpack:///./node_modules/ramda/es/internal/_isObject.js","webpack:///./node_modules/ramda/es/internal/_xfBase.js","webpack:///./node_modules/ramda/es/internal/_xfilter.js","webpack:///./node_modules/ramda/es/filter.js","webpack:///./node_modules/ramda/es/internal/_filter.js","webpack:///./node_modules/ramda/es/hasPath.js","webpack:///./node_modules/ramda/es/has.js","webpack:///./node_modules/ramda/es/mergeWithKey.js","webpack:///./node_modules/ramda/es/mergeDeepWithKey.js","webpack:///./node_modules/ramda/es/mergeDeepRight.js","webpack:///./src/lib/fragments/NeedlePlot.react.js"],"names":["_isNumber","x","Object","prototype","toString","call","_curry2","from","to","TypeError","result","n","push","_curry1","val","fn","list","len","Number","idx","isNaN","RangeError","Array","value","_curry3","f3","a","b","c","arguments","length","_isPlaceholder","_b","_c","_a","_isArray","_isString","nodeType","hasOwnProperty","XWrap","this","f","Error","acc","thisObj","apply","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","_arity","_iterableReduce","xf","iter","step","next","done","_methodReduce","obj","methodName","symIterator","Symbol","iterator","_reduce","_xwrap","_arrayReduce","reduce","_includes","inf","item","indexOf","equals","_indexOf","_isTransformer","_dispatchable","methodNames","args","slice","pop","transducer","_isObject","XFilter","_xfBase","input","pred","filterable","key","keys","_filter","_path","_has","prop","l","r","k","mergeDeepWithKey","lObj","rObj","lVal","rVal","isNumeric","parseFloat","isFinite","createHorizontalLine","xi","y","dx","N","Math","max","range","map","i","repeat","nanMax","test_array","Infinity","filter","el","filterNanArray","NeedlePlot","gd","React","createRef","state","xStart","xEnd","handleChange","bind","handleClick","props","mergeDeepRight","defaultProps","event","setState","eventData","clickData","filteredEventData","includes","points","isNil","data","fullPoint","pointData","o","type","has","curveNumber","customdata","pointNumber","pointNumbers","lassoPoints","filterEventData","current","setProps","id","width","height","loading_state","prepareTraces","globalAnnotation","domainAnnotations","layout","prepareLayout","divStyle","style","data-dash-is-loading","is_loading","undefined","ref","onClick","onRelayout","omit","mutationData","mutationGroups","domains","domainStyle","domainColor","displayMinorDomains","textangle","needleStyle","stemColor","stemThickness","stemConstHeight","headSize","headColor","headSymbol","protein_pos_array","positions_array","domains_array","idx_old_positions_array","idx_bogus_entry","forEach","domains_limits","split","extractSmallDomains","x_single_site","small_domains","fixed_mutation_colors","isArray","fixed_mutation_symbols","fixed_domain_colors","X_DATA_MIN","min","X_DATA_MAX","Y_DATA_MAX","X_RANGE_MIN","XSPAN","Y_BUFFER","Y_TOP","sequenceDomains","hoverlabels","stemsY","concat","hoverinfo","dom","domainLimits","coord","x0","x1","domainLength","xaxis","name","fill","mode","opacity","visible","legendgroup","marker","color","line_x","line_y","fillcolor","hoveron","showlegend","line","abs","showarrow","text","align","gname","Set","xref","yref","error_y","symmetric","array","arrayminus","thickness","transforms","groups","nameformat","styles","target","size","symbol","vars","xlabel","ylabel","rangeSlider","margin","first_init","Boolean","trace","legend","orientation","bgcolor","hovermode","title","showgrid","zeroline","autorange","anchor","xaxis2","scaleanchor","overlaying","yaxis","ticks","annotations","rangeslider","Component","propTypes"],"mappings":"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","file":"async-needle.js","sourcesContent":["export default function _isNumber(x) {\n  return Object.prototype.toString.call(x) === '[object Number]';\n}","import _curry2 from './internal/_curry2.js';\nimport _isNumber from './internal/_isNumber.js';\n\n/**\n * Returns a list of numbers from `from` (inclusive) to `to` (exclusive).\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig Number -> Number -> [Number]\n * @param {Number} from The first number in the list.\n * @param {Number} to One more than the last number in the list.\n * @return {Array} The list of numbers in the set `[a, b)`.\n * @example\n *\n *      R.range(1, 5);    //=> [1, 2, 3, 4]\n *      R.range(50, 53);  //=> [50, 51, 52]\n */\nvar range = /*#__PURE__*/_curry2(function range(from, to) {\n  if (!(_isNumber(from) && _isNumber(to))) {\n    throw new TypeError('Both arguments to range must be numbers');\n  }\n  var result = [];\n  var n = from;\n  while (n < to) {\n    result.push(n);\n    n += 1;\n  }\n  return result;\n});\nexport default range;","import _curry1 from './internal/_curry1.js';\n\n/**\n * Returns a function that always returns the given value. Note that for\n * non-primitives the value returned is a reference to the original value.\n *\n * This function is known as `const`, `constant`, or `K` (for K combinator) in\n * other languages and libraries.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Function\n * @sig a -> (* -> a)\n * @param {*} val The value to wrap in a function\n * @return {Function} A Function :: * -> val.\n * @example\n *\n *      const t = R.always('Tee');\n *      t(); //=> 'Tee'\n */\nvar always = /*#__PURE__*/_curry1(function always(val) {\n  return function () {\n    return val;\n  };\n});\nexport default always;","import _curry2 from './internal/_curry2.js';\n\n/**\n * Calls an input function `n` times, returning an array containing the results\n * of those function calls.\n *\n * `fn` is passed one argument: The current value of `n`, which begins at `0`\n * and is gradually incremented to `n - 1`.\n *\n * @func\n * @memberOf R\n * @since v0.2.3\n * @category List\n * @sig (Number -> a) -> Number -> [a]\n * @param {Function} fn The function to invoke. Passed one argument, the current value of `n`.\n * @param {Number} n A value between `0` and `n - 1`. Increments after each function call.\n * @return {Array} An array containing the return values of all calls to `fn`.\n * @see R.repeat\n * @example\n *\n *      R.times(R.identity, 5); //=> [0, 1, 2, 3, 4]\n * @symb R.times(f, 0) = []\n * @symb R.times(f, 1) = [f(0)]\n * @symb R.times(f, 2) = [f(0), f(1)]\n */\nvar times = /*#__PURE__*/_curry2(function times(fn, n) {\n  var len = Number(n);\n  var idx = 0;\n  var list;\n\n  if (len < 0 || isNaN(len)) {\n    throw new RangeError('n must be a non-negative number');\n  }\n  list = new Array(len);\n  while (idx < len) {\n    list[idx] = fn(idx);\n    idx += 1;\n  }\n  return list;\n});\nexport default times;","import _curry2 from './internal/_curry2.js';\nimport always from './always.js';\nimport times from './times.js';\n\n/**\n * Returns a fixed list of size `n` containing a specified identical value.\n *\n * @func\n * @memberOf R\n * @since v0.1.1\n * @category List\n * @sig a -> n -> [a]\n * @param {*} value The value to repeat.\n * @param {Number} n The desired size of the output list.\n * @return {Array} A new array containing `n` `value`s.\n * @see R.times\n * @example\n *\n *      R.repeat('hi', 5); //=> ['hi', 'hi', 'hi', 'hi', 'hi']\n *\n *      const obj = {};\n *      const repeatedObjs = R.repeat(obj, 5); //=> [{}, {}, {}, {}, {}]\n *      repeatedObjs[0] === repeatedObjs[1]; //=> true\n * @symb R.repeat(a, 0) = []\n * @symb R.repeat(a, 1) = [a]\n * @symb R.repeat(a, 2) = [a, a]\n */\nvar repeat = /*#__PURE__*/_curry2(function repeat(value, n) {\n  return times(always(value), n);\n});\nexport default repeat;","import _curry1 from './_curry1.js';\nimport _curry2 from './_curry2.js';\nimport _isPlaceholder from './_isPlaceholder.js';\n\n/**\n * Optimized internal three-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curry3(fn) {\n  return function f3(a, b, c) {\n    switch (arguments.length) {\n      case 0:\n        return f3;\n      case 1:\n        return _isPlaceholder(a) ? f3 : _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        });\n      case 2:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f3 : _isPlaceholder(a) ? _curry2(function (_a, _c) {\n          return fn(_a, b, _c);\n        }) : _isPlaceholder(b) ? _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        }) : _curry1(function (_c) {\n          return fn(a, b, _c);\n        });\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) && _isPlaceholder(c) ? f3 : _isPlaceholder(a) && _isPlaceholder(b) ? _curry2(function (_a, _b) {\n          return fn(_a, _b, c);\n        }) : _isPlaceholder(a) && _isPlaceholder(c) ? _curry2(function (_a, _c) {\n          return fn(_a, b, _c);\n        }) : _isPlaceholder(b) && _isPlaceholder(c) ? _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        }) : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b, c);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b, c);\n        }) : _isPlaceholder(c) ? _curry1(function (_c) {\n          return fn(a, b, _c);\n        }) : fn(a, b, c);\n    }\n  };\n}","/**\n * Tests whether or not an object is an array.\n *\n * @private\n * @param {*} val The object to test.\n * @return {Boolean} `true` if `val` is an array, `false` otherwise.\n * @example\n *\n *      _isArray([]); //=> true\n *      _isArray(null); //=> false\n *      _isArray({}); //=> false\n */\nexport default Array.isArray || function _isArray(val) {\n  return val != null && val.length >= 0 && Object.prototype.toString.call(val) === '[object Array]';\n};","import _curry1 from './_curry1.js';\nimport _isArray from './_isArray.js';\nimport _isString from './_isString.js';\n\n/**\n * Tests whether or not an object is similar to an array.\n *\n * @private\n * @category Type\n * @category List\n * @sig * -> Boolean\n * @param {*} x The object to test.\n * @return {Boolean} `true` if `x` has a numeric length property and extreme indices defined; `false` otherwise.\n * @example\n *\n *      _isArrayLike([]); //=> true\n *      _isArrayLike(true); //=> false\n *      _isArrayLike({}); //=> false\n *      _isArrayLike({length: 10}); //=> false\n *      _isArrayLike({0: 'zero', 9: 'nine', length: 10}); //=> true\n */\nvar _isArrayLike = /*#__PURE__*/_curry1(function isArrayLike(x) {\n  if (_isArray(x)) {\n    return true;\n  }\n  if (!x) {\n    return false;\n  }\n  if (typeof x !== 'object') {\n    return false;\n  }\n  if (_isString(x)) {\n    return false;\n  }\n  if (x.nodeType === 1) {\n    return !!x.length;\n  }\n  if (x.length === 0) {\n    return true;\n  }\n  if (x.length > 0) {\n    return x.hasOwnProperty(0) && x.hasOwnProperty(x.length - 1);\n  }\n  return false;\n});\nexport default _isArrayLike;","export default function _isString(x) {\n  return Object.prototype.toString.call(x) === '[object String]';\n}","var XWrap = /*#__PURE__*/function () {\n  function XWrap(fn) {\n    this.f = fn;\n  }\n  XWrap.prototype['@@transducer/init'] = function () {\n    throw new Error('init not implemented on XWrap');\n  };\n  XWrap.prototype['@@transducer/result'] = function (acc) {\n    return acc;\n  };\n  XWrap.prototype['@@transducer/step'] = function (acc, x) {\n    return this.f(acc, x);\n  };\n\n  return XWrap;\n}();\n\nexport default function _xwrap(fn) {\n  return new XWrap(fn);\n}","import _arity from './internal/_arity.js';\nimport _curry2 from './internal/_curry2.js';\n\n/**\n * Creates a function that is bound to a context.\n * Note: `R.bind` does not provide the additional argument-binding capabilities of\n * [Function.prototype.bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\n *\n * @func\n * @memberOf R\n * @since v0.6.0\n * @category Function\n * @category Object\n * @sig (* -> *) -> {*} -> (* -> *)\n * @param {Function} fn The function to bind to context\n * @param {Object} thisObj The context to bind `fn` to\n * @return {Function} A function that will execute in the context of `thisObj`.\n * @see R.partial\n * @example\n *\n *      const log = R.bind(console.log, console);\n *      R.pipe(R.assoc('a', 2), R.tap(log), R.assoc('a', 3))({a: 1}); //=> {a: 3}\n *      // logs {a: 2}\n * @symb R.bind(f, o)(a, b) = f.call(o, a, b)\n */\nvar bind = /*#__PURE__*/_curry2(function bind(fn, thisObj) {\n  return _arity(fn.length, function () {\n    return fn.apply(thisObj, arguments);\n  });\n});\nexport default bind;","export default function _arity(n, fn) {\n  /* eslint-disable no-unused-vars */\n  switch (n) {\n    case 0:\n      return function () {\n        return fn.apply(this, arguments);\n      };\n    case 1:\n      return function (a0) {\n        return fn.apply(this, arguments);\n      };\n    case 2:\n      return function (a0, a1) {\n        return fn.apply(this, arguments);\n      };\n    case 3:\n      return function (a0, a1, a2) {\n        return fn.apply(this, arguments);\n      };\n    case 4:\n      return function (a0, a1, a2, a3) {\n        return fn.apply(this, arguments);\n      };\n    case 5:\n      return function (a0, a1, a2, a3, a4) {\n        return fn.apply(this, arguments);\n      };\n    case 6:\n      return function (a0, a1, a2, a3, a4, a5) {\n        return fn.apply(this, arguments);\n      };\n    case 7:\n      return function (a0, a1, a2, a3, a4, a5, a6) {\n        return fn.apply(this, arguments);\n      };\n    case 8:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        return fn.apply(this, arguments);\n      };\n    case 9:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        return fn.apply(this, arguments);\n      };\n    case 10:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n        return fn.apply(this, arguments);\n      };\n    default:\n      throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n  }\n}","import _isArrayLike from './_isArrayLike.js';\nimport _xwrap from './_xwrap.js';\nimport bind from '../bind.js';\n\nfunction _arrayReduce(xf, acc, list) {\n  var idx = 0;\n  var len = list.length;\n  while (idx < len) {\n    acc = xf['@@transducer/step'](acc, list[idx]);\n    if (acc && acc['@@transducer/reduced']) {\n      acc = acc['@@transducer/value'];\n      break;\n    }\n    idx += 1;\n  }\n  return xf['@@transducer/result'](acc);\n}\n\nfunction _iterableReduce(xf, acc, iter) {\n  var step = iter.next();\n  while (!step.done) {\n    acc = xf['@@transducer/step'](acc, step.value);\n    if (acc && acc['@@transducer/reduced']) {\n      acc = acc['@@transducer/value'];\n      break;\n    }\n    step = iter.next();\n  }\n  return xf['@@transducer/result'](acc);\n}\n\nfunction _methodReduce(xf, acc, obj, methodName) {\n  return xf['@@transducer/result'](obj[methodName](bind(xf['@@transducer/step'], xf), acc));\n}\n\nvar symIterator = typeof Symbol !== 'undefined' ? Symbol.iterator : '@@iterator';\n\nexport default function _reduce(fn, acc, list) {\n  if (typeof fn === 'function') {\n    fn = _xwrap(fn);\n  }\n  if (_isArrayLike(list)) {\n    return _arrayReduce(fn, acc, list);\n  }\n  if (typeof list['fantasy-land/reduce'] === 'function') {\n    return _methodReduce(fn, acc, list, 'fantasy-land/reduce');\n  }\n  if (list[symIterator] != null) {\n    return _iterableReduce(fn, acc, list[symIterator]());\n  }\n  if (typeof list.next === 'function') {\n    return _iterableReduce(fn, acc, list);\n  }\n  if (typeof list.reduce === 'function') {\n    return _methodReduce(fn, acc, list, 'reduce');\n  }\n\n  throw new TypeError('reduce: list must be array or iterable');\n}","import _curry3 from './internal/_curry3.js';\nimport _reduce from './internal/_reduce.js';\n\n/**\n * Returns a single item by iterating through the list, successively calling\n * the iterator function and passing it an accumulator value and the current\n * value from the array, and then passing the result to the next call.\n *\n * The iterator function receives two values: *(acc, value)*. It may use\n * [`R.reduced`](#reduced) to shortcut the iteration.\n *\n * The arguments' order of [`reduceRight`](#reduceRight)'s iterator function\n * is *(value, acc)*.\n *\n * Note: `R.reduce` does not skip deleted or unassigned indices (sparse\n * arrays), unlike the native `Array.prototype.reduce` method. For more details\n * on this behavior, see:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#Description\n *\n * Dispatches to the `reduce` method of the third argument, if present. When\n * doing so, it is up to the user to handle the [`R.reduced`](#reduced)\n * shortcuting, as this is not implemented by `reduce`.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig ((a, b) -> a) -> a -> [b] -> a\n * @param {Function} fn The iterator function. Receives two values, the accumulator and the\n *        current element from the array.\n * @param {*} acc The accumulator value.\n * @param {Array} list The list to iterate over.\n * @return {*} The final, accumulated value.\n * @see R.reduced, R.addIndex, R.reduceRight\n * @example\n *\n *      R.reduce(R.subtract, 0, [1, 2, 3, 4]) // => ((((0 - 1) - 2) - 3) - 4) = -10\n *      //          -               -10\n *      //         / \\              / \\\n *      //        -   4           -6   4\n *      //       / \\              / \\\n *      //      -   3   ==>     -3   3\n *      //     / \\              / \\\n *      //    -   2           -1   2\n *      //   / \\              / \\\n *      //  0   1            0   1\n *\n * @symb R.reduce(f, a, [b, c, d]) = f(f(f(a, b), c), d)\n */\nvar reduce = /*#__PURE__*/_curry3(_reduce);\nexport default reduce;","import _curry2 from './internal/_curry2.js';\n\n/**\n * Returns the larger of its two arguments.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Relation\n * @sig Ord a => a -> a -> a\n * @param {*} a\n * @param {*} b\n * @return {*}\n * @see R.maxBy, R.min\n * @example\n *\n *      R.max(789, 123); //=> 789\n *      R.max('a', 'b'); //=> 'b'\n */\nvar max = /*#__PURE__*/_curry2(function max(a, b) {\n  return b > a ? b : a;\n});\nexport default max;","import _indexOf from './_indexOf.js';\n\nexport default function _includes(a, list) {\n  return _indexOf(list, a, 0) >= 0;\n}","import equals from '../equals.js';\n\nexport default function _indexOf(list, a, idx) {\n  var inf, item;\n  // Array.prototype.indexOf doesn't exist below IE9\n  if (typeof list.indexOf === 'function') {\n    switch (typeof a) {\n      case 'number':\n        if (a === 0) {\n          // manually crawl the list to distinguish between +0 and -0\n          inf = 1 / a;\n          while (idx < list.length) {\n            item = list[idx];\n            if (item === 0 && 1 / item === inf) {\n              return idx;\n            }\n            idx += 1;\n          }\n          return -1;\n        } else if (a !== a) {\n          // NaN\n          while (idx < list.length) {\n            item = list[idx];\n            if (typeof item === 'number' && item !== item) {\n              return idx;\n            }\n            idx += 1;\n          }\n          return -1;\n        }\n        // non-zero numbers can utilise Set\n        return list.indexOf(a, idx);\n\n      // all these types can utilise Set\n      case 'string':\n      case 'boolean':\n      case 'function':\n      case 'undefined':\n        return list.indexOf(a, idx);\n\n      case 'object':\n        if (a === null) {\n          // null can utilise Set\n          return list.indexOf(a, idx);\n        }\n    }\n  }\n  // anything else not covered above, defer to R.equals\n  while (idx < list.length) {\n    if (equals(list[idx], a)) {\n      return idx;\n    }\n    idx += 1;\n  }\n  return -1;\n}","import _includes from './internal/_includes.js';\nimport _curry2 from './internal/_curry2.js';\n\n/**\n * Returns `true` if the specified value is equal, in [`R.equals`](#equals)\n * terms, to at least one element of the given list; `false` otherwise.\n * Works also with strings.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig a -> [a] -> Boolean\n * @param {Object} a The item to compare against.\n * @param {Array} list The array to consider.\n * @return {Boolean} `true` if an equivalent item is in the list, `false` otherwise.\n * @see R.any\n * @example\n *\n *      R.includes(3, [1, 2, 3]); //=> true\n *      R.includes(4, [1, 2, 3]); //=> false\n *      R.includes({ name: 'Fred' }, [{ name: 'Fred' }]); //=> true\n *      R.includes([42], [[42]]); //=> true\n *      R.includes('ba', 'banana'); //=>true\n */\nvar includes = /*#__PURE__*/_curry2(_includes);\nexport default includes;","export default function _isTransformer(obj) {\n  return obj != null && typeof obj['@@transducer/step'] === 'function';\n}","import _isArray from './_isArray.js';\nimport _isTransformer from './_isTransformer.js';\n\n/**\n * Returns a function that dispatches with different strategies based on the\n * object in list position (last argument). If it is an array, executes [fn].\n * Otherwise, if it has a function with one of the given method names, it will\n * execute that function (functor case). Otherwise, if it is a transformer,\n * uses transducer [xf] to return a new transformer (transducer case).\n * Otherwise, it will default to executing [fn].\n *\n * @private\n * @param {Array} methodNames properties to check for a custom implementation\n * @param {Function} xf transducer to initialize if object is transformer\n * @param {Function} fn default ramda implementation\n * @return {Function} A function that dispatches on object in list position\n */\nexport default function _dispatchable(methodNames, xf, fn) {\n  return function () {\n    if (arguments.length === 0) {\n      return fn();\n    }\n    var args = Array.prototype.slice.call(arguments, 0);\n    var obj = args.pop();\n    if (!_isArray(obj)) {\n      var idx = 0;\n      while (idx < methodNames.length) {\n        if (typeof obj[methodNames[idx]] === 'function') {\n          return obj[methodNames[idx]].apply(obj, args);\n        }\n        idx += 1;\n      }\n      if (_isTransformer(obj)) {\n        var transducer = xf.apply(null, args);\n        return transducer(obj);\n      }\n    }\n    return fn.apply(this, arguments);\n  };\n}","export default function _isObject(x) {\n  return Object.prototype.toString.call(x) === '[object Object]';\n}","export default {\n  init: function () {\n    return this.xf['@@transducer/init']();\n  },\n  result: function (result) {\n    return this.xf['@@transducer/result'](result);\n  }\n};","import _curry2 from './_curry2.js';\nimport _xfBase from './_xfBase.js';\n\nvar XFilter = /*#__PURE__*/function () {\n  function XFilter(f, xf) {\n    this.xf = xf;\n    this.f = f;\n  }\n  XFilter.prototype['@@transducer/init'] = _xfBase.init;\n  XFilter.prototype['@@transducer/result'] = _xfBase.result;\n  XFilter.prototype['@@transducer/step'] = function (result, input) {\n    return this.f(input) ? this.xf['@@transducer/step'](result, input) : result;\n  };\n\n  return XFilter;\n}();\n\nvar _xfilter = /*#__PURE__*/_curry2(function _xfilter(f, xf) {\n  return new XFilter(f, xf);\n});\nexport default _xfilter;","import _curry2 from './internal/_curry2.js';\nimport _dispatchable from './internal/_dispatchable.js';\nimport _filter from './internal/_filter.js';\nimport _isObject from './internal/_isObject.js';\nimport _reduce from './internal/_reduce.js';\nimport _xfilter from './internal/_xfilter.js';\nimport keys from './keys.js';\n\n/**\n * Takes a predicate and a `Filterable`, and returns a new filterable of the\n * same type containing the members of the given filterable which satisfy the\n * given predicate. Filterable objects include plain objects or any object\n * that has a filter method such as `Array`.\n *\n * Dispatches to the `filter` method of the second argument, if present.\n *\n * Acts as a transducer if a transformer is given in list position.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig Filterable f => (a -> Boolean) -> f a -> f a\n * @param {Function} pred\n * @param {Array} filterable\n * @return {Array} Filterable\n * @see R.reject, R.transduce, R.addIndex\n * @example\n *\n *      const isEven = n => n % 2 === 0;\n *\n *      R.filter(isEven, [1, 2, 3, 4]); //=> [2, 4]\n *\n *      R.filter(isEven, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}\n */\nvar filter = /*#__PURE__*/_curry2( /*#__PURE__*/_dispatchable(['filter'], _xfilter, function (pred, filterable) {\n  return _isObject(filterable) ? _reduce(function (acc, key) {\n    if (pred(filterable[key])) {\n      acc[key] = filterable[key];\n    }\n    return acc;\n  }, {}, keys(filterable)) :\n  // else\n  _filter(pred, filterable);\n}));\nexport default filter;","export default function _filter(fn, list) {\n  var idx = 0;\n  var len = list.length;\n  var result = [];\n\n  while (idx < len) {\n    if (fn(list[idx])) {\n      result[result.length] = list[idx];\n    }\n    idx += 1;\n  }\n  return result;\n}","import _curry2 from './internal/_curry2.js';\nimport _has from './internal/_has.js';\n\n/**\n * Returns whether or not a path exists in an object. Only the object's\n * own properties are checked.\n *\n * @func\n * @memberOf R\n * @since v0.26.0\n * @category Object\n * @typedefn Idx = String | Int\n * @sig [Idx] -> {a} -> Boolean\n * @param {Array} path The path to use.\n * @param {Object} obj The object to check the path in.\n * @return {Boolean} Whether the path exists.\n * @see R.has\n * @example\n *\n *      R.hasPath(['a', 'b'], {a: {b: 2}});         // => true\n *      R.hasPath(['a', 'b'], {a: {b: undefined}}); // => true\n *      R.hasPath(['a', 'b'], {a: {c: 2}});         // => false\n *      R.hasPath(['a', 'b'], {});                  // => false\n */\nvar hasPath = /*#__PURE__*/_curry2(function hasPath(_path, obj) {\n  if (_path.length === 0) {\n    return false;\n  }\n  var val = obj;\n  var idx = 0;\n  while (idx < _path.length) {\n    if (_has(_path[idx], val)) {\n      val = val[_path[idx]];\n      idx += 1;\n    } else {\n      return false;\n    }\n  }\n  return true;\n});\nexport default hasPath;","import _curry2 from './internal/_curry2.js';\nimport hasPath from './hasPath.js';\n\n/**\n * Returns whether or not an object has an own property with the specified name\n *\n * @func\n * @memberOf R\n * @since v0.7.0\n * @category Object\n * @sig s -> {s: x} -> Boolean\n * @param {String} prop The name of the property to check for.\n * @param {Object} obj The object to query.\n * @return {Boolean} Whether the property exists.\n * @example\n *\n *      const hasName = R.has('name');\n *      hasName({name: 'alice'});   //=> true\n *      hasName({name: 'bob'});     //=> true\n *      hasName({});                //=> false\n *\n *      const point = {x: 0, y: 0};\n *      const pointHas = R.has(R.__, point);\n *      pointHas('x');  //=> true\n *      pointHas('y');  //=> true\n *      pointHas('z');  //=> false\n */\nvar has = /*#__PURE__*/_curry2(function has(prop, obj) {\n  return hasPath([prop], obj);\n});\nexport default has;","import _curry3 from './internal/_curry3.js';\nimport _has from './internal/_has.js';\n\n/**\n * Creates a new object with the own properties of the two provided objects. If\n * a key exists in both objects, the provided function is applied to the key\n * and the values associated with the key in each object, with the result being\n * used as the value associated with the key in the returned object.\n *\n * @func\n * @memberOf R\n * @since v0.19.0\n * @category Object\n * @sig ((String, a, a) -> a) -> {a} -> {a} -> {a}\n * @param {Function} fn\n * @param {Object} l\n * @param {Object} r\n * @return {Object}\n * @see R.mergeDeepWithKey, R.merge, R.mergeWith\n * @example\n *\n *      let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r\n *      R.mergeWithKey(concatValues,\n *                     { a: true, thing: 'foo', values: [10, 20] },\n *                     { b: true, thing: 'bar', values: [15, 35] });\n *      //=> { a: true, b: true, thing: 'bar', values: [10, 20, 15, 35] }\n * @symb R.mergeWithKey(f, { x: 1, y: 2 }, { y: 5, z: 3 }) = { x: 1, y: f('y', 2, 5), z: 3 }\n */\nvar mergeWithKey = /*#__PURE__*/_curry3(function mergeWithKey(fn, l, r) {\n  var result = {};\n  var k;\n\n  for (k in l) {\n    if (_has(k, l)) {\n      result[k] = _has(k, r) ? fn(k, l[k], r[k]) : l[k];\n    }\n  }\n\n  for (k in r) {\n    if (_has(k, r) && !_has(k, result)) {\n      result[k] = r[k];\n    }\n  }\n\n  return result;\n});\nexport default mergeWithKey;","import _curry3 from './internal/_curry3.js';\nimport _isObject from './internal/_isObject.js';\nimport mergeWithKey from './mergeWithKey.js';\n\n/**\n * Creates a new object with the own properties of the two provided objects.\n * If a key exists in both objects:\n * - and both associated values are also objects then the values will be\n *   recursively merged.\n * - otherwise the provided function is applied to the key and associated values\n *   using the resulting value as the new value associated with the key.\n * If a key only exists in one object, the value will be associated with the key\n * of the resulting object.\n *\n * @func\n * @memberOf R\n * @since v0.24.0\n * @category Object\n * @sig ((String, a, a) -> a) -> {a} -> {a} -> {a}\n * @param {Function} fn\n * @param {Object} lObj\n * @param {Object} rObj\n * @return {Object}\n * @see R.mergeWithKey, R.mergeDeepWith\n * @example\n *\n *      let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r\n *      R.mergeDeepWithKey(concatValues,\n *                         { a: true, c: { thing: 'foo', values: [10, 20] }},\n *                         { b: true, c: { thing: 'bar', values: [15, 35] }});\n *      //=> { a: true, b: true, c: { thing: 'bar', values: [10, 20, 15, 35] }}\n */\nvar mergeDeepWithKey = /*#__PURE__*/_curry3(function mergeDeepWithKey(fn, lObj, rObj) {\n  return mergeWithKey(function (k, lVal, rVal) {\n    if (_isObject(lVal) && _isObject(rVal)) {\n      return mergeDeepWithKey(fn, lVal, rVal);\n    } else {\n      return fn(k, lVal, rVal);\n    }\n  }, lObj, rObj);\n});\nexport default mergeDeepWithKey;","import _curry2 from './internal/_curry2.js';\nimport mergeDeepWithKey from './mergeDeepWithKey.js';\n\n/**\n * Creates a new object with the own properties of the first object merged with\n * the own properties of the second object. If a key exists in both objects:\n * - and both values are objects, the two values will be recursively merged\n * - otherwise the value from the second object will be used.\n *\n * @func\n * @memberOf R\n * @since v0.24.0\n * @category Object\n * @sig {a} -> {a} -> {a}\n * @param {Object} lObj\n * @param {Object} rObj\n * @return {Object}\n * @see R.merge, R.mergeDeepLeft, R.mergeDeepWith, R.mergeDeepWithKey\n * @example\n *\n *      R.mergeDeepRight({ name: 'fred', age: 10, contact: { email: 'moo@example.com' }},\n *                       { age: 40, contact: { email: 'baa@example.com' }});\n *      //=> { name: 'fred', age: 40, contact: { email: 'baa@example.com' }}\n */\nvar mergeDeepRight = /*#__PURE__*/_curry2(function mergeDeepRight(lObj, rObj) {\n  return mergeDeepWithKey(function (k, lVal, rVal) {\n    return rVal;\n  }, lObj, rObj);\n});\nexport default mergeDeepRight;","import React, {Component} from 'react';\nimport Plot from 'react-plotly.js';\nimport {\n    reduce,\n    max,\n    range,\n    repeat,\n    mergeDeepRight,\n    omit,\n    isNil,\n    filter,\n    includes,\n    type,\n    has,\n} from 'ramda';\nimport {propTypes, defaultProps} from '../components/NeedlePlot.react';\n\n/**\n * Checks if a variable is representation of a number or not\n * https://stackoverflow.com/questions/9716468/pure-javascript-a-function-like-jquerys-isnumeric\n * @param  {String/FLoat} n  A variable to test.\n * @return {Bool}            True if n is a number, false otherwise.\n */\nfunction isNumeric(n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Converts an array elements to numbers and ignore the elements which are not\n * a representation of  numbers\n * @param  {Array} test_array An array\n * @return {Array}       An array with only numbers.\n */\nfunction filterNanArray(test_array) {\n    return test_array.filter(el => Number(isNumeric(el)));\n}\n\n/**\n * Search the protein position array for small protein domains (typically 1->5 sites)\n * and bogus entries (i.e. \"?-123\" or \"320-?\"), the protein domains are indicated\n * by the presence of a '-' character in the element of the array.\n * @param  {Array} protein_pos_array        An array containing protein domains\n * @return {Array} positions_array          An array with only single site\n\t\t\t\t\t    protein mutations.\n * @return {Array} domains_array            An array with only small domains\n\t\t\t\t\t    protein mutations.\n * @return {Array} idx_old_positions_array  An array with the indexes of the\n\t\t\t\t\t    single site protein mutations\n\t\t\t\t\t    relative to protein_pos_array\n * @return {Array} idx_bogus_entry          An array with the indexes of the\n\t\t\t\t\t    bogus entries (containing '?')\n\t\t\t\t\t    relative to protein_pos_array\n*/\nfunction extractSmallDomains(protein_pos_array) {\n    const positions_array = [];\n    const domains_array = [];\n    const idx_old_positions_array = [];\n    const idx_bogus_entry = [];\n    protein_pos_array.forEach((dx, i) => {\n        if (dx.indexOf('-') > -1) {\n            const domains_limits = dx.split('-');\n            if (isNumeric(domains_limits[0]) || isNumeric(domains_limits[1])) {\n                idx_bogus_entry.push(i);\n            } else {\n                domains_array.push(dx);\n            }\n        } else {\n            idx_old_positions_array.push(i);\n            positions_array.push(dx);\n        }\n    });\n    return [\n        positions_array,\n        domains_array,\n        idx_old_positions_array,\n        idx_bogus_entry,\n    ];\n}\n\n/**\n * Creates two arrays to plot horizontal lines with many markers\n *\n * @param  {number} xi  start x coordinate of the line\n * @param  {number} xf  stop x coordinate of the line\n * @param  {number} y   y coordinate of the line\n * @param  {int} n      number of markers\n * @return {array} x    x coordinates of the horizontal ine\n * @return {array} y    y coordinates of the horizontal ine\n */\nfunction createHorizontalLine(xi, xf, y, n) {\n    const dx = (xf - xi) / n;\n    const N = Math.max(2, n);\n    const x = range(0, N).map(i => xi + i * dx);\n    return [x, repeat(y, N)];\n}\n\n/**\n * Finds the max of an array while ignoring the NaN values\n *\n * @param  {array} test_array  an array with numbers as entries\n * @return {number}            max value of the array\n */\nfunction nanMax(test_array) {\n    return reduce(max, -Infinity, filterNanArray(test_array));\n}\n\nconst filterEventData = (gd, eventData, event) => {\n    let filteredEventData;\n    if (includes(event, ['click', 'hover', 'selected'])) {\n        const points = [];\n\n        if (isNil(eventData)) {\n            return null;\n        }\n\n        /*\n         * remove `data`, `layout`, `xaxis`, etc\n         * objects from the event data since they're so big\n         * and cause JSON stringify ciricular structure errors.\n         *\n         * also, pull down the `customdata` point from the data array\n         * into the event object\n         */\n        const data = gd.props.data;\n\n        for (let i = 0; i < eventData.points.length; i++) {\n            const fullPoint = eventData.points[i];\n            const pointData = filter(function(o) {\n                return !includes(type(o), ['Object', 'Array']);\n            }, fullPoint);\n            if (\n                has('curveNumber', fullPoint) &&\n                has('pointNumber', fullPoint) &&\n                has('customdata', data[pointData.curveNumber])\n            ) {\n                pointData.customdata =\n                    data[pointData.curveNumber].customdata[\n                        fullPoint.pointNumber\n                    ];\n            }\n\n            // specific to histogram. see https://github.com/plotly/plotly.js/pull/2113/\n            if (has('pointNumbers', fullPoint)) {\n                pointData.pointNumbers = fullPoint.pointNumbers;\n            }\n\n            points[i] = pointData;\n        }\n        filteredEventData = {points};\n    } else if (event === 'relayout' || event === 'restyle') {\n        /*\n         * relayout shouldn't include any big objects\n         * it will usually just contain the ranges of the axes like\n         * \"xaxis.range[0]\": 0.7715822247381828,\n         * \"xaxis.range[1]\": 3.0095292008680063`\n         */\n        filteredEventData = eventData;\n    }\n    if (has('range', eventData)) {\n        filteredEventData.range = eventData.range;\n    }\n    if (has('lassoPoints', eventData)) {\n        filteredEventData.lassoPoints = eventData.lassoPoints;\n    }\n    return filteredEventData;\n};\n\n/**\n * The Needle Plot component is used to visualize large datasets\n * containing categorical or numerical data. The lines and markers in\n * the plot correspond to bars in a histogram.\n **/\nexport default class NeedlePlot extends Component {\n    constructor() {\n        super();\n        this.gd = React.createRef();\n        this.state = {\n            xStart: null,\n            xEnd: null,\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    UNSAFE_componentWillMount() {\n        // For default argument of taken from defaultProps deeply nested\n        this.props = mergeDeepRight(NeedlePlot.defaultProps, this.props);\n    }\n\n    // Handle plot events\n    handleChange(event) {\n        // Zoom\n        if (event['xaxis.range[0]'] || event['xaxis.range']) {\n            this.setState({\n                xStart: event['xaxis.range[0]'] || event['xaxis.range'][0],\n                xEnd: event['xaxis.range[1]'] || event['xaxis.range'][1],\n            });\n        }\n        // Autozoom\n        else if (event['xaxis.autorange'] === true) {\n            this.setState({\n                xStart: null,\n                xEnd: null,\n            });\n        }\n    }\n\n    handleClick(eventData) {\n        const clickData = filterEventData(this.gd.current, eventData, 'click');\n        if (!isNil(clickData)) {\n            this.props.setProps({clickData: clickData});\n        }\n    }\n\n    render() {\n        const {id, width, height, loading_state} = this.props;\n        const {\n            data,\n            globalAnnotation,\n            domainAnnotations,\n        } = this.prepareTraces();\n\n        const layout = this.prepareLayout({\n            data,\n            globalAnnotation,\n            domainAnnotations,\n        });\n\n        const divStyle = {\n            width: width,\n            height: height,\n        };\n\n        return (\n            <div\n                id={id}\n                style={divStyle}\n                data-dash-is-loading={\n                    (loading_state && loading_state.is_loading) || undefined\n                }\n            >\n                <Plot\n                    style={divStyle}\n                    ref={this.gd}\n                    data={data}\n                    layout={layout}\n                    onClick={this.handleClick}\n                    onRelayout={this.handleChange}\n                    {...omit(['setProps', 'loading_state'], this.props)}\n                />\n            </div>\n        );\n    }\n\n    // Fetch data\n    prepareTraces() {\n        const {\n            mutationData: {x, y, mutationGroups, domains},\n            domainStyle: {domainColor, displayMinorDomains, textangle},\n            needleStyle: {\n                stemColor,\n                stemThickness,\n                stemConstHeight,\n                headSize,\n                headColor,\n                headSymbol,\n            },\n        } = mergeDeepRight(NeedlePlot.defaultProps, this.props);\n\n        // Apply filtering on protein positions\n        const [\n            x_single_site,\n            small_domains,\n            idx_old_positions_array,\n        ] = extractSmallDomains(x);\n\n        // manage whether headColor is an array or a string\n        const fixed_mutation_colors = Array.isArray(headColor)\n            ? headColor\n            : mutationGroups.map(() => headColor);\n\n        const fixed_mutation_symbols = Array.isArray(headSymbol)\n            ? headSymbol\n            : mutationGroups.map(() => headSymbol);\n\n        const fixed_domain_colors = domainColor;\n\n        const X_DATA_MIN = Math.min.apply(null, x_single_site);\n        const X_DATA_MAX = Math.max.apply(null, x_single_site);\n        const Y_DATA_MAX = stemConstHeight === true ? 1 : nanMax(y);\n        const X_RANGE_MIN = this.state.xStart || X_DATA_MIN;\n        const X_RANGE_MAX = this.state.xEnd || X_DATA_MAX;\n        const XSPAN = X_RANGE_MAX - X_RANGE_MIN;\n        // this is used to trigger a change of display inside annotations\n        const XSPAN_RATIO = 0.1;\n        const Y_BUFFER = stemConstHeight === true ? 0.5 : Y_DATA_MAX / 10;\n        // this is used to scale the position for the annotations\n        const Y_BUFFER_DIVIDER = 2;\n        const Y_TOP = stemConstHeight === true ? 2 : Y_DATA_MAX + Y_BUFFER;\n        const DOMAIN_WIDTH = 33;\n        const ANGLED_OFFSET = 1.2;\n        const ANGLED_RATIO = 0.001;\n\n        const sequenceDomains = [];\n        const domainAnnotations = [];\n\n        let hoverlabels = [];\n        // contains the height of each stem\n        let stemsY = [];\n        idx_old_positions_array.forEach(idx => {\n            if (stemConstHeight) {\n                stemsY = stemsY.concat([1]);\n            } else {\n                hoverlabels = hoverlabels.concat([\n                    '(' + x[idx] + ',' + y[idx] + ')',\n                ]);\n                stemsY = stemsY.concat([y[idx]]);\n            }\n        });\n\n        const hoverinfo =\n            stemConstHeight === true ? 'x+name+text' : 'name+text';\n\n        // build the different protein large domains\n        domains.forEach((dom, i) => {\n            const domainLimits = dom.coord.split('-');\n            const x0 = Number(domainLimits[0]);\n            const x1 = Number(domainLimits[1]);\n            const domainLength = x1 - x0;\n\n            // Highlight of the protein domain\n            sequenceDomains.push({\n                x: [x1, x0],\n                y: [Y_TOP, Y_TOP],\n                xaxis: 'x1',\n                name: dom.name,\n                fill: 'tozeroy',\n                mode: 'lines',\n                opacity: 0.5,\n                visible: 'legendonly',\n                legendgroup: dom.name,\n                marker: {color: fixed_domain_colors[i]},\n            });\n            const [line_x, line_y] = createHorizontalLine(\n                x0,\n                x1,\n                -Y_BUFFER,\n                x1 - x0\n            );\n\n            sequenceDomains.push({\n                type: 'scatter',\n                mode: 'lines',\n                fill: 'tozeroy',\n                fillcolor: fixed_domain_colors[i],\n                hoveron: 'points+fills',\n                x: line_x,\n                y: line_y,\n                xaxis: 'x2',\n                showlegend: false,\n                hoverinfo: 'name',\n                name: `[${x0}->${x1}] ${dom.name}`,\n                marker: {color: fixed_domain_colors[i]},\n                line: {width: 2},\n            });\n\n            // Name of the protein domain\n            domainAnnotations.push({\n                x: (x0 + x1) / Y_BUFFER_DIVIDER,\n                y:\n                    textangle === 0\n                        ? -Y_BUFFER / Y_BUFFER_DIVIDER\n                        : -Y_BUFFER / Y_BUFFER_DIVIDER -\n                          (ANGLED_OFFSET + Math.abs(textangle) * ANGLED_RATIO),\n                showarrow: false,\n                text: dom.name,\n                width: domainLength,\n                align: domainLength < XSPAN_RATIO * XSPAN ? 'right' : 'center',\n                textangle: textangle,\n            });\n        });\n\n        if (displayMinorDomains === true) {\n            // build the different protein small domains\n            small_domains.forEach(dom => {\n                const x0 = Number(dom.split('-')[0]);\n                const x1 = Number(dom.split('-')[1]);\n                const gname = mutationGroups[x.indexOf(dom)];\n                const [line_x, line_y] = createHorizontalLine(\n                    x0,\n                    x1,\n                    -Y_BUFFER / Y_BUFFER_DIVIDER,\n                    x1 - x0\n                );\n                // Range of the protein domain on the xaxis\n                sequenceDomains.push({\n                    type: 'scatter',\n                    mode: 'lines',\n                    x: line_x,\n                    y: line_y,\n                    fill: 'tozeroy',\n                    fillcolor:\n                        fixed_mutation_colors[\n                            [...new Set(mutationGroups)].indexOf(gname)\n                        ],\n                    hoveron: 'points+fills',\n                    xaxis: 'x2',\n                    hoverinfo: 'name+text',\n                    name: gname,\n                    text: `[${x0}->${x1}] `,\n                    showlegend: false,\n                    marker: {\n                        color:\n                            fixed_mutation_colors[\n                                [...new Set(mutationGroups)].indexOf(gname)\n                            ],\n                    },\n                    line: {width: DOMAIN_WIDTH},\n                });\n            });\n        }\n\n        const globalAnnotation = [\n            {\n                text: `<b>${x_single_site.length +\n                    small_domains.length} Mutations</b>`,\n                x: 0.01,\n                xref: 'paper',\n                y: 1.1,\n                yref: 'paper',\n                showarrow: false,\n                align: 'left',\n            },\n        ];\n\n        const data = [\n            {\n                type: 'scatter',\n                mode: 'markers',\n                x: x_single_site,\n                y: stemsY,\n                xaxis: 'x1',\n                hoverinfo: hoverinfo,\n                text: hoverlabels,\n                error_y: {\n                    type: 'data',\n                    symmetric: false,\n                    array: 0,\n                    arrayminus: stemsY,\n                    thickness: stemThickness,\n                    width: 0,\n                    color: stemColor,\n                },\n                transforms: [\n                    {\n                        type: 'groupby',\n                        groups: mutationGroups,\n                        nameformat: `%{group}`,\n                        styles: [...new Set(mutationGroups)].map(\n                            (target, i) => {\n                                return {\n                                    target: target,\n                                    value: {\n                                        marker: {\n                                            size: headSize,\n                                            symbol: fixed_mutation_symbols[i],\n                                            color: fixed_mutation_colors[i],\n                                        },\n                                    },\n                                };\n                            }\n                        ),\n                    },\n                ],\n            },\n        ].concat(sequenceDomains);\n        return {data, globalAnnotation, domainAnnotations};\n    }\n\n    // Fetch layout\n    prepareLayout(vars) {\n        const {data, globalAnnotation, domainAnnotations} = vars;\n        const {xlabel, ylabel, rangeSlider, margin} = mergeDeepRight(\n            NeedlePlot.defaultProps,\n            this.props\n        );\n        let {xStart, xEnd} = this.state;\n        let first_init = false;\n        // initialize the range based on input data\n        if (Boolean(!xStart) || Boolean(!xEnd)) {\n            first_init = true;\n            data.forEach(trace => {\n                const X_DATA_MIN = Math.min.apply(null, trace.x);\n                const X_DATA_MAX = Math.max.apply(null, trace.x);\n                if (xStart > X_DATA_MIN || Boolean(!xStart)) {\n                    xStart = X_DATA_MIN;\n                }\n                if (xEnd < X_DATA_MAX || Boolean(!xEnd)) {\n                    xEnd = X_DATA_MAX;\n                }\n            });\n        }\n\n        // this is used to zoom in the axis range initially\n        const XSTART_RATIO = 0.98;\n        const XEND_RATIO = 1.02;\n\n        const layout = {\n            legend: {\n                orientation: 'v',\n                x: 1,\n                y: 1.05,\n                bgcolor: 'rgba(255, 255, 255, 0)',\n            },\n            hovermode: 'closest',\n            xaxis: {\n                title: xlabel,\n                showgrid: false,\n                zeroline: false,\n                autorange: Boolean(!xStart),\n                range: [xStart, xEnd],\n                anchor: 'y',\n            },\n            xaxis2: {\n                scaleanchor: 'x',\n                autorange: Boolean(!xStart),\n                range: [xStart, xEnd],\n                anchor: 'y',\n                overlaying: 'x',\n            },\n            yaxis: {\n                title: ylabel,\n                showgrid: false,\n                ticks: 'inside',\n            },\n            margin: margin,\n            annotations: domainAnnotations.concat(globalAnnotation),\n        };\n        if (rangeSlider === true) {\n            layout.xaxis.rangeslider =\n                first_init === true\n                    ? {range: [xStart * XSTART_RATIO, xEnd * XEND_RATIO]}\n                    : {};\n        }\n\n        return layout;\n    }\n}\n\nNeedlePlot.propTypes = propTypes;\nNeedlePlot.defaultProps = defaultProps;\n"],"sourceRoot":""}