(window.webpackJsonpdash_bio=window.webpackJsonpdash_bio||[]).push([[13],{442:function(e,t){function n(e,t,n,r){var o,i=null==(o=r)||"number"==typeof o||"boolean"==typeof o?r:n(r),s=t.get(i);return void 0===s&&(s=e.call(this,r),t.set(i,s)),s}function r(e,t,n){var r=Array.prototype.slice.call(arguments,3),o=n(r),i=t.get(o);return void 0===i&&(i=e.apply(this,r),t.set(o,i)),i}function o(e,t,n,r,o){return n.bind(t,e,r,o)}function i(e,t){return o(e,this,1===e.length?n:r,t.cache.create(),t.serializer)}function s(){return JSON.stringify(arguments)}function c(){this.cache=Object.create(null)}c.prototype.has=function(e){return e in this.cache},c.prototype.get=function(e){return this.cache[e]},c.prototype.set=function(e,t){this.cache[e]=t};var a={create:function(){return new c}};e.exports=function(e,t){var n=t&&t.cache?t.cache:a,r=t&&t.serializer?t.serializer:s;return(t&&t.strategy?t.strategy:i)(e,{cache:n,serializer:r})},e.exports.strategies={variadic:function(e,t){return o(e,this,r,t.cache.create(),t.serializer)},monadic:function(e,t){return o(e,this,n,t.cache.create(),t.serializer)}}},52:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(5);var s="function"==typeof Object.assign?Object.assign:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,r=arguments.length;n<r;){var o=arguments[n];if(null!=o)for(var s in o)Object(i.a)(s,o)&&(t[s]=o[s]);n+=1}return t},c=n(3),a=Object(c.a)((function(e){return s.apply(null,[{}].concat(e))})),u=n(51),l=n(442),p=n.n(l),f=n(25),h=n(23);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return S}));var m=p()((function(e){for(var t=f.speckSystem.new(),n=0;n<e.length;n++){var r=e[n];f.speckSystem.addAtom(t,r.symbol,r.x,r.y,r.z)}return f.speckSystem.center(t),f.speckSystem.calculateBonds(t),t})),g=function(e){return a([e,{rotation:new Float32Array(e.rotation),translation:a([e.translation])}])},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,t)};function R(e){e.style.width="100%",e.style.height="100%",e.width=e.offsetWidth,e.height=e.offsetHeight}var S=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=y(t).call(this,e),(n=!o||"object"!==d(o)&&"function"!=typeof o?w(r):o).state={renderer:null},n.eventListenDestructor=function(){},n.refreshView=!1,n.propsReconcileTimeout=null,n.view=k(f.speckView.new(),e.view),n.props.setProps({view:g(n.view)}),n.setCanvasRef=function(e){n.canvas=e},n.setContainerRef=function(e){n.container=e},n.loop=n.loop.bind(w(n)),n.loadStructure=n.loadStructure.bind(w(n)),n.propsReconcile=n.propsReconcile.bind(w(n)),n.propsReconcileSchedule=n.propsReconcileSchedule.bind(w(n)),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.scrollZoom,n=this.canvas,r=this.container,o=new f.speckRenderer(n,200,300);this.setState({renderer:o},this.loadStructure),this.eventListenDestructor=Object(f.speckInteractions)({scrollZoom:t,container:r,getRotation:function(){return e.view.rotation},setRotation:function(t){e.view=k(e.view,{rotation:t}),e.propsReconcileSchedule()},getTranslation:function(){return e.view.translation},setTranslation:function(t){e.view=k(e.view,{translation:t}),e.propsReconcileSchedule()},getZoom:function(){return e.view.zoom},setZoom:function(t){e.view=k(e.view,{zoom:t}),e.propsReconcileSchedule()},refreshView:function(){return e.refreshView=!0}}),R(n),this.loop()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.data,r=t.view,o=t.presetView,i=t.style,s=this.state.renderer,c=this.view,a=!1;e.presetView!==o&&(c=k(c,f.speckPresetViews[o]),this.propsReconcileSchedule(),a=!0),function(e){for(var t=JSON.stringify(e),n=1;n<arguments.length;n++)if(t===JSON.stringify(arguments[n]))return!0;return!1}(r,e.view,c)||(c=k(c,r),a=!0),Object(u.a)(n,e.data)||(a=!0),Object(u.a)(i,e.style)||(a=!0),a&&(this.view=c,s&&this.loadStructure())}},{key:"componentWillUnmount",value:function(){this.state.renderer=null,this.eventListenDestructor(),this.props.setProps({view:this.view})}},{key:"propsReconcile",value:function(){Object(u.a)(this.view,this.props.view)||this.props.setProps({view:g(this.view)})}},{key:"propsReconcileSchedule",value:function(){clearTimeout(this.propsReconcileTimeout),this.propsReconcileTimeout=setTimeout(this.propsReconcile,500)}},{key:"loadStructure",value:function(){var e=this.props.data,t=this.canvas;if(0!==e.length){var n=this.state.renderer,r=this.view,o=m(e);n.setSystem(o,r),n.setResolution(r.resolution,r.aoRes),this.refreshView=!0,R(t)}}},{key:"loop",value:function(){this.state.renderer&&this.view&&(this.refreshView&&(this.state.renderer.reset(),this.refreshView=!1),this.state.renderer.render(this.view)),requestAnimationFrame(this.loop)}},{key:"colorLegend",value:function(){var e=this,t=Array.from(new Set(this.props.data.map((function(e){return e.symbol})))).map((function(e){return f.speckElements[e]}));return o.a.createElement("div",{style:{backgroundColor:"white",width:"60px",height:"fit-content",padding:"10px",position:"absolute",right:"-80px",top:0},id:"speck-color-legend"},t.map((function(t){var n={backgroundColor:e.colorToRgb(t.color),width:"16px",height:"16px",display:"inline-block",borderRadius:"50%",marginRight:"20px",border:"0.25px solid black"};return o.a.createElement("p",{style:{display:"flex",alignItems:"center"},key:t.symbol},o.a.createElement("span",{style:n}),o.a.createElement("span",null,t.symbol))})))}},{key:"colorToRgb",value:function(e){var t=this,n=e.map((function(e){return 255*e})).map((function(e){return t.lightenColor(e)})).join(", ");return"rgb(".concat(n,")")}},{key:"lightenColor",value:function(e){return.5*e+127.5}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.loading_state,r=e.showLegend,i=e.style;return o.a.createElement("div",{id:t,ref:this.setContainerRef,style:i,"data-dash-is-loading":n&&n.is_loading||void 0},o.a.createElement("canvas",{ref:this.setCanvasRef}),r&&this.colorLegend())}}])&&v(n.prototype,r),i&&v(n,i),t}(r.Component);S.defaultProps=h.b,S.propTypes=h.c}}]);
//# sourceMappingURL=async-speck.js.map